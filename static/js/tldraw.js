(function(){
shadow$provide[584]=function(za,da,Ua,J){function r(u,A,B){var y,N={},h=null,g=null;void 0!==B&&(h=""+B);void 0!==A.key&&(h=""+A.key);void 0!==A.ref&&(g=A.ref);for(y in A)n.call(A,y)&&!b.hasOwnProperty(y)&&(N[y]=A[y]);if(u&&u.defaultProps)for(y in A=u.defaultProps,A)void 0===N[y]&&(N[y]=A[y]);return{$$typeof:Y,type:u,key:h,ref:g,props:N,_owner:w.current}}da(19);za=da(22);var Y=60103;J.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(da=Symbol.for,Y=da("react.element"),J.Fragment=da("react.fragment"));
var w=za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};J.jsx=r;J.jsxs=r};
shadow$provide[586]=function(za,da,Ua,J){Ua.exports=da(584)};
shadow$provide[587]=function(za,da,Ua,J){function r(Ab){for(var vc="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+Ab,Gc=1;Gc<arguments.length;Gc++)vc+="\x26args[]\x3d"+encodeURIComponent(arguments[Gc]);return"Minified React error #"+Ab+"; visit "+vc+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Y(Ab){if(null==Ab)return null;if("function"===typeof Ab)return Ab.displayName||Ab.name||null;if("string"===typeof Ab)return Ab;
switch(Ab){case T:return"Fragment";case Z:return"Portal";case G:return"Profiler";case L:return"StrictMode";case ka:return"Suspense";case Q:return"SuspenseList"}if("object"===typeof Ab)switch(Ab.$$typeof){case S:return(Ab.displayName||"Context")+".Consumer";case O:return(Ab._context.displayName||"Context")+".Provider";case K:var vc=Ab.render;vc=vc.displayName||vc.name||"";return Ab.displayName||(""!==vc?"ForwardRef("+vc+")":"ForwardRef");case aa:return Y(Ab.type);case P:return Y(Ab._render);case V:vc=
Ab._payload;Ab=Ab._init;try{return Y(Ab(vc))}catch(Gc){}}return null}function w(Ab,vc){for(var Gc=Ab._threadCount|0;Gc<=vc;Gc++)Ab[Gc]=Ab._currentValue2,Ab._threadCount=Gc+1}function n(Ab,vc,Gc,rc){if(rc&&(rc=Ab.contextType,"object"===typeof rc&&null!==rc))return w(rc,Gc),rc[Gc];if(Ab=Ab.contextTypes){Gc={};for(var Oc in Ab)Gc[Oc]=vc[Oc];vc=Gc}else vc=wa;return vc}function b(Ab){if(La.call(Za,Ab))return!0;if(La.call(Qa,Ab))return!1;if(Da.test(Ab))return Za[Ab]=!0;Qa[Ab]=!0;return!1}function u(Ab,
vc,Gc,rc){if(null!==Gc&&0===Gc.type)return!1;switch(typeof vc){case "function":case "symbol":return!0;case "boolean":if(rc)return!1;if(null!==Gc)return!Gc.acceptsBooleans;Ab=Ab.toLowerCase().slice(0,5);return"data-"!==Ab&&"aria-"!==Ab;default:return!1}}function A(Ab,vc,Gc,rc){if(null===vc||"undefined"===typeof vc||u(Ab,vc,Gc,rc))return!0;if(rc)return!1;if(null!==Gc)switch(Gc.type){case 3:return!vc;case 4:return!1===vc;case 5:return isNaN(vc);case 6:return isNaN(vc)||1>vc}return!1}function B(Ab,vc,
Gc,rc,Oc,id,Wc){this.acceptsBooleans=2===vc||3===vc||4===vc;this.attributeName=rc;this.attributeNamespace=Oc;this.mustUseProperty=Gc;this.propertyName=Ab;this.type=vc;this.sanitizeURL=id;this.removeEmptyString=Wc}function y(Ab){return Ab[1].toUpperCase()}function N(Ab){if("boolean"===typeof Ab||"number"===typeof Ab)return""+Ab;Ab=""+Ab;var vc=Ka.exec(Ab);if(vc){var Gc="",rc,Oc=0;for(rc=vc.index;rc<Ab.length;rc++){switch(Ab.charCodeAt(rc)){case 34:vc="\x26quot;";break;case 38:vc="\x26amp;";break;case 39:vc=
"\x26#x27;";break;case 60:vc="\x26lt;";break;case 62:vc="\x26gt;";break;default:continue}Oc!==rc&&(Gc+=Ab.substring(Oc,rc));Oc=rc+1;Gc+=vc}Ab=Oc!==rc?Gc+Ab.substring(Oc,rc):Gc}return Ab}function h(Ab,vc){var Gc=Ra.hasOwnProperty(Ab)?Ra[Ab]:null,rc;if(rc="style"!==Ab)rc=null!==Gc?0===Gc.type:!(2<Ab.length)||"o"!==Ab[0]&&"O"!==Ab[0]||"n"!==Ab[1]&&"N"!==Ab[1]?!1:!0;if(rc||A(Ab,vc,Gc,!1))return"";if(null!==Gc){Ab=Gc.attributeName;rc=Gc.type;if(3===rc||4===rc&&!0===vc)return Ab+'\x3d""';Gc.sanitizeURL&&
(vc=""+vc);return Ab+'\x3d"'+(N(vc)+'"')}return b(Ab)?Ab+'\x3d"'+(N(vc)+'"'):""}function g(Ab,vc){return Ab===vc&&(0!==Ab||1/Ab===1/vc)||Ab!==Ab&&vc!==vc}function c(){if(null===pa)throw Error(r(321));return pa}function m(){if(0<Ya)throw Error(r(312));return{memoizedState:null,queue:null,next:null}}function p(){null===ja?null===oa?(ua=!1,oa=ja=m()):(ua=!0,ja=oa):null===ja.next?(ua=!1,ja=ja.next=m()):(ua=!0,ja=ja.next);return ja}function v(Ab,vc,Gc,rc){for(;Ea;)Ea=!1,Ya+=1,ja=null,Gc=Ab(vc,rc);D();
return Gc}function D(){pa=null;Ea=!1;oa=null;Ya=0;ja=Pa=null}function z(Ab,vc){return"function"===typeof vc?vc(Ab):vc}function t(Ab,vc,Gc){pa=c();ja=p();if(ua){var rc=ja.queue;vc=rc.dispatch;if(null!==Pa&&(Gc=Pa.get(rc),void 0!==Gc)){Pa.delete(rc);rc=ja.memoizedState;do rc=Ab(rc,Gc.action),Gc=Gc.next;while(null!==Gc);ja.memoizedState=rc;return[rc,vc]}return[ja.memoizedState,vc]}Ab=Ab===z?"function"===typeof vc?vc():vc:void 0!==Gc?Gc(vc):vc;ja.memoizedState=Ab;Ab=ja.queue={last:null,dispatch:null};
Ab=Ab.dispatch=f.bind(null,pa,Ab);return[ja.memoizedState,Ab]}function q(Ab,vc){pa=c();ja=p();vc=void 0===vc?null:vc;if(null!==ja){var Gc=ja.memoizedState;if(null!==Gc&&null!==vc){var rc=Gc[1];a:if(null===rc)rc=!1;else{for(var Oc=0;Oc<rc.length&&Oc<vc.length;Oc++)if(!ra(vc[Oc],rc[Oc])){rc=!1;break a}rc=!0}if(rc)return Gc[0]}}Ab=Ab();ja.memoizedState=[Ab,vc];return Ab}function f(Ab,vc,Gc){if(!(25>Ya))throw Error(r(301));if(Ab===pa)if(Ea=!0,Ab={action:Gc,next:null},null===Pa&&(Pa=new Map),Gc=Pa.get(vc),
void 0===Gc)Pa.set(vc,Ab);else{for(vc=Gc;null!==vc.next;)vc=vc.next;vc.next=Ab}}function F(){}function C(Ab){switch(Ab){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function E(Ab){if(void 0===Ab||null===Ab)return Ab;var vc="";M.Children.forEach(Ab,function(Gc){null!=Gc&&(vc+=Gc)});return vc}function W(Ab,vc){if(void 0===Ab)throw Error(r(152,Y(vc)||"Component"));}function R(Ab,vc,Gc){function rc(Wc,
qd){var Cb=qd.prototype&&qd.prototype.isReactComponent,Xb=n(qd,vc,Gc,Cb),Tb=[],jb=!1,sb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Tb)return null},enqueueReplaceState:function(Vd,Je){jb=!0;Tb=[Je]},enqueueSetState:function(Vd,Je){if(null===Tb)return null;Tb.push(Je)}};if(Cb){if(Cb=new qd(Wc.props,Xb,sb),"function"===typeof qd.getDerivedStateFromProps){var Yb=qd.getDerivedStateFromProps.call(null,Wc.props,Cb.state);null!=Yb&&(Cb.state=X({},Cb.state,Yb))}}else if(pa={},
Cb=qd(Wc.props,Xb,sb),Cb=v(qd,Wc.props,Cb,Xb),null==Cb||null==Cb.render){Ab=Cb;W(Ab,qd);return}Cb.props=Wc.props;Cb.context=Xb;Cb.updater=sb;sb=Cb.state;void 0===sb&&(Cb.state=sb=null);if("function"===typeof Cb.UNSAFE_componentWillMount||"function"===typeof Cb.componentWillMount)if("function"===typeof Cb.componentWillMount&&"function"!==typeof qd.getDerivedStateFromProps&&Cb.componentWillMount(),"function"===typeof Cb.UNSAFE_componentWillMount&&"function"!==typeof qd.getDerivedStateFromProps&&Cb.UNSAFE_componentWillMount(),
Tb.length){sb=Tb;var zc=jb;Tb=null;jb=!1;if(zc&&1===sb.length)Cb.state=sb[0];else{Yb=zc?sb[0]:Cb.state;var dd=!0;for(zc=zc?1:0;zc<sb.length;zc++){var $c=sb[zc];$c="function"===typeof $c?$c.call(Cb,Yb,Wc.props,Xb):$c;null!=$c&&(dd?(dd=!1,Yb=X({},Yb,$c)):X(Yb,$c))}Cb.state=Yb}}else Tb=null;Ab=Cb.render();W(Ab,qd);if("function"===typeof Cb.getChildContext&&(Wc=qd.childContextTypes,"object"===typeof Wc)){var xd=Cb.getChildContext(),Zd;for(Zd in xd)if(!(Zd in Wc))throw Error(r(108,Y(qd)||"Unknown",Zd));
}xd&&(vc=X({},vc,xd))}for(;M.isValidElement(Ab);){var Oc=Ab,id=Oc.type;if("function"!==typeof id)break;rc(Oc,id)}return{child:Ab,context:vc}}var X=da(19),M=da(22),Z=60106,T=60107,L=60108,G=60114,O=60109,S=60110,K=60112,ka=60113,Q=60120,aa=60115,V=60116,P=60121,ea=60117,U=60119,qa=60129,va=60131;"function"===typeof Symbol&&Symbol.for&&(za=Symbol.for,Z=za("react.portal"),T=za("react.fragment"),L=za("react.strict_mode"),G=za("react.profiler"),O=za("react.provider"),S=za("react.context"),K=za("react.forward_ref"),
ka=za("react.suspense"),Q=za("react.suspense_list"),aa=za("react.memo"),V=za("react.lazy"),P=za("react.block"),ea=za("react.fundamental"),U=za("react.scope"),qa=za("react.debug_trace_mode"),va=za("react.legacy_hidden"));za=M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var wa={},Ja=new Uint16Array(16);for(da=0;15>da;da++)Ja[da]=da+1;Ja[15]=0;var Da=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
La=Object.prototype.hasOwnProperty,Qa={},Za={},Ra={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Ab){Ra[Ab]=new B(Ab,0,!1,Ab,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Ab){var vc=Ab[0];Ra[vc]=new B(vc,1,!1,Ab[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Ab){Ra[Ab]=
new B(Ab,2,!1,Ab.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Ab){Ra[Ab]=new B(Ab,2,!1,Ab,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Ab){Ra[Ab]=new B(Ab,3,!1,Ab.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(Ab){Ra[Ab]=new B(Ab,3,!0,Ab,null,!1,!1)});["capture","download"].forEach(function(Ab){Ra[Ab]=new B(Ab,4,!1,Ab,null,!1,!1)});["cols","rows","size","span"].forEach(function(Ab){Ra[Ab]=new B(Ab,6,!1,Ab,null,!1,!1)});["rowSpan","start"].forEach(function(Ab){Ra[Ab]=new B(Ab,5,!1,Ab.toLowerCase(),null,!1,!1)});var Wa=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Ab){var vc=
Ab.replace(Wa,y);Ra[vc]=new B(vc,1,!1,Ab,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Ab){var vc=Ab.replace(Wa,y);Ra[vc]=new B(vc,1,!1,Ab,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Ab){var vc=Ab.replace(Wa,y);Ra[vc]=new B(vc,1,!1,Ab,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Ab){Ra[Ab]=new B(Ab,1,!1,Ab.toLowerCase(),null,!1,!1)});
Ra.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Ab){Ra[Ab]=new B(Ab,1,!1,Ab.toLowerCase(),null,!0,!0)});var Ka=/["'&<>]/,ra="function"===typeof Object.is?Object.is:g,pa=null,oa=null,ja=null,ua=!1,Ea=!1,Pa=null,Ya=0,Oa=null,gb={readContext:function(Ab){var vc=Oa.threadID;w(Ab,vc);return Ab[vc]},useContext:function(Ab){c();var vc=Oa.threadID;w(Ab,vc);return Ab[vc]},useMemo:q,useReducer:t,useRef:function(Ab){pa=
c();ja=p();var vc=ja.memoizedState;return null===vc?(Ab={current:Ab},ja.memoizedState=Ab):vc},useState:function(Ab){return t(z,Ab)},useLayoutEffect:function(){},useCallback:function(Ab,vc){return q(function(){return Ab},vc)},useImperativeHandle:F,useEffect:F,useDebugValue:F,useDeferredValue:function(Ab){c();return Ab},useTransition:function(){c();return[function(Ab){Ab()},!1]},useOpaqueIdentifier:function(){return(Oa.identifierPrefix||"")+"R:"+(Oa.uniqueID++).toString(36)},useMutableSource:function(Ab,
vc){c();return vc(Ab._source)}},xb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Jb=X({menuitem:!0},xb),zb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ob=["Webkit","ms","Moz","O"];Object.keys(zb).forEach(function(Ab){ob.forEach(function(vc){vc=vc+Ab.charAt(0).toUpperCase()+Ab.substring(1);zb[vc]=zb[Ab]})});var Ia=/([A-Z])/g,bb=/^ms-/,hb=M.Children.toArray,
Ob=za.ReactCurrentDispatcher,tb={listing:!0,pre:!0,textarea:!0},Ub=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ac={},tc={},wc=Object.prototype.hasOwnProperty,Gb={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},kc=function(){function Ab(Gc,rc,Oc){M.isValidElement(Gc)?Gc.type!==T?Gc=[Gc]:(Gc=Gc.props.children,Gc=M.isValidElement(Gc)?[Gc]:hb(Gc)):Gc=hb(Gc);Gc={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:Gc,childIndex:0,context:wa,footer:""};
var id=Ja[0];if(0===id){var Wc=Ja;id=Wc.length;var qd=2*id;if(!(65536>=qd))throw Error(r(304));var Cb=new Uint16Array(qd);Cb.set(Wc);Ja=Cb;Ja[0]=id+1;for(Wc=id;Wc<qd-1;Wc++)Ja[Wc]=Wc+1;Ja[qd-1]=0}else Ja[0]=Ja[id];this.threadID=id;this.stack=[Gc];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=rc;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=Oc&&Oc.identifierPrefix||""}
var vc=Ab.prototype;vc.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var Gc=this.threadID;Ja[Gc]=Ja[0];Ja[0]=Gc}};vc.pushProvider=function(Gc){var rc=++this.contextIndex,Oc=Gc.type._context,id=this.threadID;w(Oc,id);var Wc=Oc[id];this.contextStack[rc]=Oc;this.contextValueStack[rc]=Wc;Oc[id]=Gc.props.value};vc.popProvider=function(){var Gc=this.contextIndex,rc=this.contextStack[Gc],Oc=this.contextValueStack[Gc];this.contextStack[Gc]=null;this.contextValueStack[Gc]=
null;this.contextIndex--;rc[this.threadID]=Oc};vc.clearProviders=function(){for(var Gc=this.contextIndex;0<=Gc;Gc--)this.contextStack[Gc][this.threadID]=this.contextValueStack[Gc]};vc.read=function(Gc){if(this.exhausted)return null;var rc=Oa;Oa=this;var Oc=Ob.current;Ob.current=gb;try{for(var id=[""],Wc=!1;id[0].length<Gc;){if(0===this.stack.length){this.exhausted=!0;var qd=this.threadID;Ja[qd]=Ja[0];Ja[0]=qd;break}var Cb=this.stack[this.stack.length-1];if(Wc||Cb.childIndex>=Cb.children.length){var Xb=
Cb.footer;""!==Xb&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Cb.type)this.currentSelectValue=null;else if(null!=Cb.type&&null!=Cb.type.type&&Cb.type.type.$$typeof===O)this.popProvider(Cb.type);else if(Cb.type===ka){this.suspenseDepth--;var Tb=id.pop();if(Wc){Wc=!1;var jb=Cb.fallbackFrame;if(!jb)throw Error(r(303));this.stack.push(jb);id[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else id[this.suspenseDepth]+=Tb}id[this.suspenseDepth]+=Xb}else{var sb=Cb.children[Cb.childIndex++],
Yb="";try{Yb+=this.render(sb,Cb.context,Cb.domNamespace)}catch(zc){if(null!=zc&&"function"===typeof zc.then)throw Error(r(294));throw zc;}finally{}id.length<=this.suspenseDepth&&id.push("");id[this.suspenseDepth]+=Yb}}return id[0]}finally{Ob.current=Oc,Oa=rc,D()}};vc.render=function(Gc,rc,Oc){if("string"===typeof Gc||"number"===typeof Gc){Oc=""+Gc;if(""===Oc)return"";if(this.makeStaticMarkup)return N(Oc);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+N(Oc);this.previousWasTextNode=!0;return N(Oc)}rc=
R(Gc,rc,this.threadID);Gc=rc.child;rc=rc.context;if(null===Gc||!1===Gc)return"";if(!M.isValidElement(Gc)){if(null!=Gc&&null!=Gc.$$typeof){Oc=Gc.$$typeof;if(Oc===Z)throw Error(r(257));throw Error(r(258,Oc.toString()));}Gc=hb(Gc);this.stack.push({type:null,domNamespace:Oc,children:Gc,childIndex:0,context:rc,footer:""});return""}var id=Gc.type;if("string"===typeof id)return this.renderDOM(Gc,rc,Oc);switch(id){case va:case qa:case L:case G:case Q:case T:return Gc=hb(Gc.props.children),this.stack.push({type:null,
domNamespace:Oc,children:Gc,childIndex:0,context:rc,footer:""}),"";case ka:throw Error(r(294));case U:throw Error(r(343));}if("object"===typeof id&&null!==id)switch(id.$$typeof){case K:pa={};var Wc=id.render(Gc.props,Gc.ref);Wc=v(id.render,Gc.props,Wc,Gc.ref);Wc=hb(Wc);this.stack.push({type:null,domNamespace:Oc,children:Wc,childIndex:0,context:rc,footer:""});return"";case aa:return Gc=[M.createElement(id.type,X({ref:Gc.ref},Gc.props))],this.stack.push({type:null,domNamespace:Oc,children:Gc,childIndex:0,
context:rc,footer:""}),"";case O:return id=hb(Gc.props.children),Oc={type:Gc,domNamespace:Oc,children:id,childIndex:0,context:rc,footer:""},this.pushProvider(Gc),this.stack.push(Oc),"";case S:id=Gc.type;Wc=Gc.props;var qd=this.threadID;w(id,qd);id=hb(Wc.children(id[qd]));this.stack.push({type:Gc,domNamespace:Oc,children:id,childIndex:0,context:rc,footer:""});return"";case ea:throw Error(r(338));case V:return id=Gc.type,Wc=id._init,id=Wc(id._payload),Gc=[M.createElement(id,X({ref:Gc.ref},Gc.props))],
this.stack.push({type:null,domNamespace:Oc,children:Gc,childIndex:0,context:rc,footer:""}),""}throw Error(r(130,null==id?id:typeof id,""));};vc.renderDOM=function(Gc,rc,Oc){var id=Gc.type.toLowerCase();"http://www.w3.org/1999/xhtml"===Oc&&C(id);if(!ac.hasOwnProperty(id)){if(!Ub.test(id))throw Error(r(65,id));ac[id]=!0}var Wc=Gc.props;if("input"===id)Wc=X({type:void 0},Wc,{defaultChecked:void 0,defaultValue:void 0,value:null!=Wc.value?Wc.value:Wc.defaultValue,checked:null!=Wc.checked?Wc.checked:Wc.defaultChecked});
else if("textarea"===id){var qd=Wc.value;if(null==qd){qd=Wc.defaultValue;var Cb=Wc.children;if(null!=Cb){if(null!=qd)throw Error(r(92));if(Array.isArray(Cb)){if(!(1>=Cb.length))throw Error(r(93));Cb=Cb[0]}qd=""+Cb}null==qd&&(qd="")}Wc=X({},Wc,{value:void 0,children:""+qd})}else if("select"===id)this.currentSelectValue=null!=Wc.value?Wc.value:Wc.defaultValue,Wc=X({},Wc,{value:void 0});else if("option"===id){Cb=this.currentSelectValue;var Xb=E(Wc.children);if(null!=Cb){var Tb=null!=Wc.value?Wc.value+
"":Xb;qd=!1;if(Array.isArray(Cb))for(var jb=0;jb<Cb.length;jb++){if(""+Cb[jb]===Tb){qd=!0;break}}else qd=""+Cb===Tb;Wc=X({selected:void 0,children:void 0},Wc,{selected:qd,children:Xb})}}if(qd=Wc){if(Jb[id]&&(null!=qd.children||null!=qd.dangerouslySetInnerHTML))throw Error(r(137,id));if(null!=qd.dangerouslySetInnerHTML){if(null!=qd.children)throw Error(r(60));if(!("object"===typeof qd.dangerouslySetInnerHTML&&"__html"in qd.dangerouslySetInnerHTML))throw Error(r(61));}if(null!=qd.style&&"object"!==
typeof qd.style)throw Error(r(62));}qd=Wc;Cb=this.makeStaticMarkup;Xb=1===this.stack.length;Tb="\x3c"+Gc.type;a:if(-1===id.indexOf("-"))jb="string"===typeof qd.is;else switch(id){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":jb=!1;break a;default:jb=!0}for(Je in qd)if(wc.call(qd,Je)){var sb=qd[Je];if(null!=sb){if("style"===Je){var Yb=void 0,zc="",dd="";for(Yb in sb)if(sb.hasOwnProperty(Yb)){var $c=
0===Yb.indexOf("--"),xd=sb[Yb];if(null!=xd){if($c)var Zd=Yb;else if(Zd=Yb,tc.hasOwnProperty(Zd))Zd=tc[Zd];else{var Vd=Zd.replace(Ia,"-$1").toLowerCase().replace(bb,"-ms-");Zd=tc[Zd]=Vd}zc+=dd+Zd+":";dd=Yb;$c=null==xd||"boolean"===typeof xd||""===xd?"":$c||"number"!==typeof xd||0===xd||zb.hasOwnProperty(dd)&&zb[dd]?(""+xd).trim():xd+"px";zc+=$c;dd=";"}}sb=zc||null}Yb=null;jb?Gb.hasOwnProperty(Je)||(Yb=Je,Yb=b(Yb)&&null!=sb?Yb+'\x3d"'+(N(sb)+'"'):""):Yb=h(Je,sb);Yb&&(Tb+=" "+Yb)}}Cb||Xb&&(Tb+=' data-reactroot\x3d""');
var Je=Tb;qd="";xb.hasOwnProperty(id)?Je+="/\x3e":(Je+="\x3e",qd="\x3c/"+Gc.type+"\x3e");a:{Cb=Wc.dangerouslySetInnerHTML;if(null!=Cb){if(null!=Cb.__html){Cb=Cb.__html;break a}}else if(Cb=Wc.children,"string"===typeof Cb||"number"===typeof Cb){Cb=N(Cb);break a}Cb=null}null!=Cb?(Wc=[],tb.hasOwnProperty(id)&&"\n"===Cb.charAt(0)&&(Je+="\n"),Je+=Cb):Wc=hb(Wc.children);Gc=Gc.type;Oc=null==Oc||"http://www.w3.org/1999/xhtml"===Oc?C(Gc):"http://www.w3.org/2000/svg"===Oc&&"foreignObject"===Gc?"http://www.w3.org/1999/xhtml":
Oc;this.stack.push({domNamespace:Oc,type:id,children:Wc,childIndex:0,context:rc,footer:qd});this.previousWasTextNode=!1;return Je};return Ab}();J.renderToNodeStream=function(){throw Error(r(207));};J.renderToStaticMarkup=function(Ab,vc){Ab=new kc(Ab,!0,vc);try{return Ab.read(Infinity)}finally{Ab.destroy()}};J.renderToStaticNodeStream=function(){throw Error(r(208));};J.renderToString=function(Ab,vc){Ab=new kc(Ab,!1,vc);try{return Ab.read(Infinity)}finally{Ab.destroy()}};J.version="17.0.2"};
shadow$provide[589]=function(za,da,Ua,J){Ua.exports=da(587)};
shadow$provide[590]=function(za,da,Ua,J){function r(){if(!nr&&(nr="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nr))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nr(yu)}function Y(a,d=0){return(gl[a[d+0]]+gl[a[d+1]]+gl[a[d+2]]+gl[a[d+3]]+"-"+gl[a[d+4]]+gl[a[d+5]]+"-"+gl[a[d+6]]+gl[a[d+7]]+"-"+gl[a[d+8]]+gl[a[d+9]]+"-"+gl[a[d+10]]+gl[a[d+11]]+gl[a[d+12]]+gl[a[d+13]]+gl[a[d+14]]+
gl[a[d+15]]).toLowerCase()}function w(a){let d=0;var k=0;for(var H of a)d+=H.w*H.h,k=Math.max(k,H.w);a.sort((sa,Ha)=>Ha.h-sa.h);k=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),k),h:Infinity}];let fa=H=0;for(const sa of a)for(a=k.length-1;0<=a;a--){var la=k[a];if(!(sa.w>la.w||sa.h>la.h)){sa.x=la.x;sa.y=la.y;fa=Math.max(fa,sa.y+sa.h);H=Math.max(H,sa.x+sa.w);sa.w===la.w&&sa.h===la.h?(la=k.pop(),a<k.length&&(k[a]=la)):sa.h===la.h?(la.x+=sa.w,la.w-=sa.w):(sa.w!==la.w&&k.push({x:la.x+sa.w,y:la.y,w:la.w-
sa.w,h:sa.h}),la.y+=sa.h,la.h-=sa.h);break}}return{w:H,h:fa,fill:d/(H*fa)||0}}function n(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function b(a,d,k=0){const H=[a[0]+d[0]/2,a[1]+d[1]/2],fa=rd.rotWith(a,H,k),la=rd.rotWith(rd.add(a,[d[0],0]),H,k),sa=rd.rotWith(rd.add(a,d),H,k);a=rd.rotWith(rd.add(a,[0,d[1]]),H,k);return[["top",[fa,la]],["right",[la,sa]],["bottom",[sa,a]],["left",[a,fa]]]}function u(a,d,k,H){const [fa,la]=a,[sa,Ha]=d,[Ta,Xa]=k,[eb,ib]=H;return Ha/sa!==(ib-Xa)/(eb-Ta)&&
(d=sa*(ib-Xa)-Ha*(eb-Ta),0!==d&&(a=((la-Xa)*(eb-Ta)-(fa-Ta)*(ib-Xa))/d,d=((la-Xa)*sa-(fa-Ta)*Ha)/d,0<=a&&0<=d&&1>=d))?n("intersection",[fa+a*sa,la+a*Ha]):n("no intersection")}function A(a,d,k,H,fa=0){return c(k,H,fa,a,d)}function B(a,d,k,H=0){const {minX:fa,minY:la,width:sa,height:Ha}=k;return A(a,d,[fa,la],[sa,Ha],H)}function y(a,d,k,H){var fa=rd.sub(a,k);k=rd.sub(H,k);d=rd.sub(d,a);H=k[0]*fa[1]-k[1]*fa[0];fa=d[0]*fa[1]-d[1]*fa[0];k=k[1]*d[0]-k[0]*d[1];return 0===H||0===fa?n("coincident"):0===k?
n("parallel"):0!==k&&(H/=k,fa/=k,0<=H&&1>=H&&0<=fa&&1>=fa)?n("intersection",rd.add(a,rd.mul(d,H))):n("no intersection")}function N(a,d,k,H){var fa=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),la=2*((d[0]-a[0])*(a[0]-k[0])+(d[1]-a[1])*(a[1]-k[1]));k=la*la-4*fa*(k[0]*k[0]+k[1]*k[1]+a[0]*a[0]+a[1]*a[1]-2*(k[0]*a[0]+k[1]*a[1])-H*H);if(0>k)return n("outside");if(0===k)return n("tangent");H=Math.sqrt(k);k=(-la+H)/(2*fa);fa=(-la-H)/(2*fa);if((0>k||1<k)&&(0>fa||1<fa))return 0>k&&0>fa||1<k&&1<fa?n("outside"):
n("inside");la=[];0<=k&&1>=k&&la.push(rd.lrp(a,d,k));0<=fa&&1>=fa&&la.push(rd.lrp(a,d,fa));return n("intersection",...la)}function h(a,d,k,H,fa,la=0){if(0===H||0===fa||rd.isEqual(a,d))return n("no intersection");H=0>H?H:-H;fa=0>fa?fa:-fa;a=rd.sub(rd.rotWith(a,k,-la),k);d=rd.sub(rd.rotWith(d,k,-la),k);var sa=rd.sub(d,a),Ha=sa[0]*sa[0]/H/H+sa[1]*sa[1]/fa/fa;sa=2*a[0]*sa[0]/H/H+2*a[1]*sa[1]/fa/fa;const Ta=[];H=sa*sa-4*Ha*(a[0]*a[0]/H/H+a[1]*a[1]/fa/fa-1);0===H?Ta.push(-sa/2/Ha):0<H&&(H=Math.sqrt(H),
Ta.push((-sa+H)/2/Ha),Ta.push((-sa-H)/2/Ha));Ha=Ta.filter(Xa=>0<=Xa&&1>=Xa).map(Xa=>rd.add(k,rd.add(a,rd.mul(rd.sub(d,a),Xa)))).map(Xa=>rd.rotWith(Xa,k,la));return n("intersection",...Ha)}function g(a,d,k){const H=[];for(let fa=1;fa<k.length;fa++){const la=y(a,d,k[fa-1],k[fa]);la&&H.push(...la.points)}return 0===H.length?n("no intersection"):n("intersection",...k)}function c(a,d,k,H,fa){return b(a,d,k).reduce((la,[sa,[Ha,Ta]])=>{(Ha=u(H,fa,Ha,Ta))&&la.push(n(sa,...Ha.points));return la},[]).filter(la=>
la.didIntersect)}function m(a,d,k,H){return b(a,d).reduce((fa,[la,[sa,Ha]])=>{(sa=y(k,H,sa,Ha))&&fa.push(n(la,...sa.points));return fa},[]).filter(fa=>fa.didIntersect)}function p(a,d,k,H){return b(a,d).reduce((fa,[la,[sa,Ha]])=>{(sa=N(sa,Ha,k,H))&&fa.push(Te(Xd({},sa),{message:la}));return fa},[]).filter(fa=>fa.didIntersect)}function v(a,d,k,H,fa,la=0){return b(a,d).reduce((sa,[Ha,[Ta,Xa]])=>{(Ta=h(Ta,Xa,k,H,fa,la))&&sa.push(Te(Xd({},Ta),{message:Ha}));return sa},[]).filter(sa=>sa.didIntersect)}function D(a,
d,k){return b(a,d).reduce((H,[fa,[la,sa]])=>{la=g(la,sa,k);la.didIntersect&&H.push(n(fa,...la.points));return H},[]).filter(H=>H.didIntersect)}function z(a,d,k){return b(a,d).reduce((H,[fa,[la,sa]])=>{{const Ha=[];for(let Ta=1;Ta<k.length+1;Ta++){const Xa=y(la,sa,k[Ta-1],k[Ta%k.length]);Xa&&Ha.push(...Xa.points)}la=0===Ha.length?n("no intersection"):n("intersection",...k)}la.didIntersect&&H.push(n(fa,...la.points));return H},[]).filter(H=>H.didIntersect)}function t(a,d,k,H=0,fa,la){return d===k?p(fa,
la,a,d):v(fa,la,a,d,k,H)}function q(a,d,k){const {minX:H,minY:fa,width:la,height:sa}=a;return m([H,fa],[la,sa],d,k)}function f(a){for(var d=arguments.length,k=Array(1<d?d-1:0),H=1;H<d;H++)k[H-1]=arguments[H];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(k.length?" "+k.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function F(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?
window:"undefined"!==typeof za?za:"undefined"!==typeof self?self:px}function C(){Fa||f("Proxy not available")}function E(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function W(a){return"function"===typeof a}function R(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function X(a){return null!==a&&"object"===typeof a}function M(a){if(!X(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&
a.constructor;return"function"===typeof a&&a.toString()===db}function Z(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function T(a,d,k){xp(a,d,{enumerable:!1,writable:!0,configurable:!0,value:k})}function L(a,d,k){xp(a,d,{enumerable:!1,writable:!1,configurable:!0,value:k})}function G(a,d){var k="isMobX"+a;d.prototype[k]=!0;return function(H){return X(H)&&!0===H[k]}}function O(a){return a instanceof Map}function S(a){return a instanceof
Set}function K(a){var d=Object.keys(a);if(!fc)return d;var k=Object.getOwnPropertySymbols(a);return k.length?[].concat(d,k.filter(function(H){return bq.propertyIsEnumerable.call(a,H)})):d}function ka(a){return null===a?null:"object"===typeof a?""+a:a}function Q(a,d){return bq.hasOwnProperty.call(a,d)}function aa(a,d){for(var k=0;k<d.length;k++){var H=d[k];H.enumerable=H.enumerable||!1;H.configurable=!0;"value"in H&&(H.writable=!0);Object.defineProperty(a,H.key,H)}}function V(a,d,k){d&&aa(a.prototype,
d);k&&aa(a,k);Object.defineProperty(a,"prototype",{writable:!1});return a}function P(){P=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],H;for(H in k)Object.prototype.hasOwnProperty.call(k,H)&&(a[H]=k[H])}return a};return P.apply(this,arguments)}function ea(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;U(a,d)}function U(a,d){U=Object.setPrototypeOf||function(k,H){k.__proto__=H;return k};return U(a,d)}function qa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function va(a,d){if(a){if("string"===typeof a)return wa(a,d);var k=Object.prototype.toString.call(a).slice(8,-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return wa(a,d)}}function wa(a,d){if(null==d||d>a.length)d=a.length;for(var k=0,H=Array(d);k<d;k++)H[k]=a[k];return H}function Ja(a,d){var k="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=
k.call(a)).next.bind(k);if(Array.isArray(a)||(k=va(a))||d&&a&&"number"===typeof a.length){k&&(a=k);var H=0;return function(){return H>=a.length?{done:!0}:{done:!1,value:a[H++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Da(a){return Object.assign(function(d,k){La(d,k,a)},a)}function La(a,d,k){Q(a,wd)||T(a,wd,P({},a[wd]));k.annotationType_!==Bg&&(a[wd][d]=k)}function Qa(a){Q(a,
wd)||T(a,wd,P({},a[wd]));return a[wd]}function Za(a,d,k){void 0===d&&(d=vb);void 0===k&&(k=vb);a=new cg(a);d!==vb&&fd(fE,a,d,void 0);k!==vb&&ee(a,k);return a}function Ra(a,d,k){return hd(a)?a:Array.isArray(a)?De.array(a,{name:k}):M(a)?De.object(a,void 0,{name:k}):O(a)?De.map(a,{name:k}):S(a)?De.set(a,{name:k}):"function"!==typeof a||$c(a)||Kc(a)?a:Z(a)?Hu(a):Gu(k,a)}function Wa(a){return a}function Ka(a,d){return{annotationType_:a,options_:d,make_:ra,extend_:pa}}function ra(a,d,k,H){var fa;if(null!=
(fa=this.options_)&&fa.bound)return null===this.extend_(a,d,k,!1)?0:1;if(H===a.target_)return null===this.extend_(a,d,k,!1)?0:2;if($c(k.value))return 1;a=oa(a,this,d,k,!1);xp(H,d,a);return 2}function pa(a,d,k,H){k=oa(a,this,d,k);return a.defineProperty_(d,k,H)}function oa(a,d,k,H,fa){var la,sa,Ha,Ta,Xa,eb,ib;void 0===fa&&(fa=wf.safeDescriptors);H=H.value;if(null!=(la=d.options_)&&la.bound){var Bb;H=H.bind(null!=(Bb=a.proxy_)?Bb:a.target_)}return{value:tb(null!=(sa=null==(Ha=d.options_)?void 0:Ha.name)?
sa:k.toString(),H,null!=(Ta=null==(Xa=d.options_)?void 0:Xa.autoAction)?Ta:!1,null!=(eb=d.options_)&&eb.bound?null!=(ib=a.proxy_)?ib:a.target_:void 0),configurable:fa?a.isPlainObject_:!0,enumerable:!1,writable:fa?!1:!0}}function ja(a,d){return{annotationType_:a,options_:d,make_:ua,extend_:Ea}}function ua(a,d,k,H){var fa;if(H===a.target_)return null===this.extend_(a,d,k,!1)?0:2;if(null!=(fa=this.options_)&&fa.bound&&(!Q(a.target_,d)||!Kc(a.target_[d]))&&null===this.extend_(a,d,k,!1))return 0;if(Kc(k.value))return 1;
a=Pa(a,this,d,k,!1,!1);xp(H,d,a);return 2}function Ea(a,d,k,H){var fa;k=Pa(a,this,d,k,null==(fa=this.options_)?void 0:fa.bound);return a.defineProperty_(d,k,H)}function Pa(a,d,k,H,fa,la){void 0===la&&(la=wf.safeDescriptors);d=H.value;Kc(d)||(d=Hu(d));if(fa){var sa;d=d.bind(null!=(sa=a.proxy_)?sa:a.target_);d.isMobXFlow=!0}return{value:d,configurable:la?a.isPlainObject_:!0,enumerable:!1,writable:la?!1:!0}}function Ya(a,d){return{annotationType_:a,options_:d,make_:Oa,extend_:gb}}function Oa(a,d,k){return null===
this.extend_(a,d,k,!1)?0:1}function gb(a,d,k,H){return a.defineComputedProperty_(d,P({},this.options_,{get:k.get,set:k.set}),H)}function xb(a,d){return{annotationType_:a,options_:d,make_:Jb,extend_:zb}}function Jb(a,d,k){return null===this.extend_(a,d,k,!1)?0:1}function zb(a,d,k,H){var fa,la;return a.defineObservableProperty_(d,k.value,null!=(fa=null==(la=this.options_)?void 0:la.enhancer)?fa:Ra,H)}function ob(a){return{annotationType_:"true",options_:a,make_:Ia,extend_:bb}}function Ia(a,d,k,H){var fa,
la;if(k.get)return nf.make_(a,d,k,H);if(k.set){k=tb(d.toString(),k.set);if(H===a.target_)return null===a.defineProperty_(d,{configurable:wf.safeDescriptors?a.isPlainObject_:!0,set:k})?0:2;xp(H,d,{configurable:!0,set:k});return 2}if(H!==a.target_&&"function"===typeof k.value){var sa;if(Z(k.value)){var Ha;return(null!=(Ha=this.options_)&&Ha.autoBind?Hu.bound:Hu).make_(a,d,k,H)}return(null!=(sa=this.options_)&&sa.autoBind?Gu.bound:Gu).make_(a,d,k,H)}sa=!1===(null==(fa=this.options_)?void 0:fa.deep)?
De.ref:De;if("function"===typeof k.value&&null!=(la=this.options_)&&la.autoBind){var Ta;k.value=k.value.bind(null!=(Ta=a.proxy_)?Ta:a.target_)}return sa.make_(a,d,k,H)}function bb(a,d,k,H){var fa,la;if(k.get)return nf.extend_(a,d,k,H);if(k.set)return a.defineProperty_(d,{configurable:wf.safeDescriptors?a.isPlainObject_:!0,set:tb(d.toString(),k.set)},H);if("function"===typeof k.value&&null!=(fa=this.options_)&&fa.autoBind){var sa;k.value=k.value.bind(null!=(sa=a.proxy_)?sa:a.target_)}return(!1===(null==
(la=this.options_)?void 0:la.deep)?De.ref:De).extend_(a,d,k,H)}function hb(a){if(!0===a.deep)var d=Ra;else{if(!1===a.deep)a=Wa;else{a=a.defaultDecorator;var k;a=a?null!=(d=null==(k=a.options_)?void 0:k.enhancer)?d:Ra:Ra}d=a}return d}function Ob(a,d,k){if(R(d))La(a,d,de);else return hd(a)?a:M(a)?De.object(a,d,k):Array.isArray(a)?De.array(a,d):O(a)?De.map(a,d):S(a)?De.set(a,d):"object"===typeof a&&null!==a?a:De.box(a,d)}function tb(a,d,k,H){function fa(){a:{var la=H||this,sa=arguments,Ha=wf.trackingDerivation,
Ta=!k||!Ha;Wc();var Xa=wf.allowStateChanges;Ta&&(Ab(),Xa=ac(!0));var eb=vc(!0),ib=XD++,Bb=Qv;Qv=ib;try{var Mb=d.apply(la,sa);break a}catch($b){var Fb=$b;throw $b;}finally{Qv!==ib&&f(30),Qv=Bb,void 0!==Fb&&(wf.suppressReactionErrors=!0),wf.allowStateChanges=Xa,wf.allowStateReads=eb,qd(),Ta&&(wf.trackingDerivation=Ha),wf.suppressReactionErrors=!1}Mb=void 0}return Mb}void 0===k&&(k=!1);fa.isMobxAction=!0;YD&&(Az.value=a,Object.defineProperty(fa,"name",Az));return fa}function Ub(a,d){a=ac(a);try{return d()}finally{wf.allowStateChanges=
a}}function ac(a){var d=wf.allowStateChanges;wf.allowStateChanges=a;return d}function tc(a){switch(a.dependenciesState_){case jj.UP_TO_DATE_:return!1;case jj.NOT_TRACKING_:case jj.STALE_:return!0;case jj.POSSIBLY_STALE_:for(var d=vc(!0),k=Ab(),H=a.observing_,fa=H.length,la=0;la<fa;la++){var sa=H[la];if(Fu(sa)){if(wf.disableErrorBoundaries)sa.get();else try{sa.get()}catch(Ha){return wf.trackingDerivation=k,wf.allowStateReads=d,!0}if(a.dependenciesState_===jj.STALE_)return wf.trackingDerivation=k,wf.allowStateReads=
d,!0}}Gc(a);wf.trackingDerivation=k;wf.allowStateReads=d;return!1}}function wc(a,d,k){var H=vc(!0);Gc(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++wf.runId;var fa=wf.trackingDerivation;wf.trackingDerivation=a;wf.inBatch++;if(!0===wf.disableErrorBoundaries)var la=d.call(k);else try{la=d.call(k)}catch(eb){la=new Es(eb)}wf.inBatch--;wf.trackingDerivation=fa;var sa=a.observing_;d=a.observing_=a.newObserving_;k=jj.UP_TO_DATE_;fa=0;for(var Ha=a.unboundDepsCount_,Ta=
0;Ta<Ha;Ta++){var Xa=d[Ta];0===Xa.diffValue_&&(Xa.diffValue_=1,fa!==Ta&&(d[fa]=Xa),fa++);Xa.dependenciesState_>k&&(k=Xa.dependenciesState_)}d.length=fa;a.newObserving_=null;for(Ha=sa.length;Ha--;)Ta=sa[Ha],0===Ta.diffValue_&&Oc(Ta,a),Ta.diffValue_=0;for(;fa--;)sa=d[fa],1===sa.diffValue_&&(sa.diffValue_=0,Ha=a,sa.observers_.add(Ha),sa.lowestObserverState_>Ha.dependenciesState_&&(sa.lowestObserverState_=Ha.dependenciesState_));k!==jj.UP_TO_DATE_&&(a.dependenciesState_=k,a.onBecomeStale_());wf.allowStateReads=
H;return la}function Gb(a){var d=a.observing_;a.observing_=[];for(var k=d.length;k--;)Oc(d[k],a);a.dependenciesState_=jj.NOT_TRACKING_}function kc(a){var d=Ab();try{return a()}finally{wf.trackingDerivation=d}}function Ab(){var a=wf.trackingDerivation;wf.trackingDerivation=null;return a}function vc(a){var d=wf.allowStateReads;wf.allowStateReads=a;return d}function Gc(a){if(a.dependenciesState_!==jj.UP_TO_DATE_){a.dependenciesState_=jj.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
jj.UP_TO_DATE_}}function rc(){(wf.pendingReactions.length||wf.inBatch||wf.isRunningReactions)&&f(36);Bz=!0;if(Sv){var a=F();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);wf=new Rv}}function Oc(a,d){a.observers_["delete"](d);0===a.observers_.size&&id(a)}function id(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,wf.pendingUnobservations.push(a))}function Wc(){wf.inBatch++}function qd(){if(0===--wf.inBatch){0<wf.inBatch||wf.isRunningReactions||Tv(sb);for(var a=wf.pendingUnobservations,
d=0;d<a.length;d++){var k=a[d];k.isPendingUnobservation_=!1;0===k.observers_.size&&(k.isBeingObserved_&&(k.isBeingObserved_=!1,k.onBUO()),k instanceof Eu&&k.suspend_())}wf.pendingUnobservations=[]}}function Cb(a){var d=wf.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&wf.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<wf.inBatch&&id(a);return!1}
function Xb(a){a.lowestObserverState_!==jj.STALE_&&(a.lowestObserverState_=jj.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===jj.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=jj.STALE_}))}function Tb(a){a.lowestObserverState_!==jj.STALE_&&(a.lowestObserverState_=jj.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===jj.POSSIBLY_STALE_?d.dependenciesState_=jj.STALE_:d.dependenciesState_===jj.UP_TO_DATE_&&(a.lowestObserverState_=jj.UP_TO_DATE_)}))}function jb(a){a.lowestObserverState_===
jj.UP_TO_DATE_&&(a.lowestObserverState_=jj.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===jj.UP_TO_DATE_&&(d.dependenciesState_=jj.POSSIBLY_STALE_,d.onBecomeStale_())}))}function sb(){wf.isRunningReactions=!0;for(var a=wf.pendingReactions,d=0;0<a.length;){++d===bE&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var k=a.splice(0),H=0,fa=k.length;H<fa;H++)k[H].runReaction_()}wf.isRunningReactions=!1}function Yb(a){var d=Tv;Tv=function(k){return a(function(){return d(k)})}}
function zc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function dd(a){return function(d,k){if(W(d))return tb(d.name||"\x3cunnamed action\x3e",d,a);if(W(k))return tb(d,k,a);if(R(k))return La(d,k,a?Ez:Dz);if(R(d))return Da(Ka(a?"autoAction":Cz,{name:d,autoAction:a}))}}function $c(a){return W(a)&&!0===a.isMobxAction}function xd(a,d){function k(){a(Ta)}var H,fa;void 0===d&&(d=ma);var la=null!=(H=null==(fa=d)?void 0:fa.name)?H:"Autorun";if(d.scheduler||d.delay){var sa=
Zd(d),Ha=!1;var Ta=new At(la,function(){Ha||(Ha=!0,sa(function(){Ha=!1;Ta.isDisposed_||Ta.track(k)}))},d.onError,d.requiresObservable)}else Ta=new At(la,function(){this.track(k)},d.onError,d.requiresObservable);Ta.schedule_();return Ta.getDisposer_()}function Zd(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:eE}function Vd(a,d,k){function H(){eb=!1;if(!Fb.isDisposed_){var $b=!1;Fb.track(function(){var nc=Ub(!1,function(){return a(Fb)});$b=Xa||!Mb(ib,nc);Bb=ib;
ib=nc});Xa&&k.fireImmediately?sa(ib,Bb,Fb):!Xa&&$b&&sa(ib,Bb,Fb);Xa=!1}}var fa;void 0===k&&(k=ma);var la=null!=(fa=k.name)?fa:"Reaction",sa=jg(la,k.onError?Je(k.onError,d):d),Ha=!k.scheduler&&!k.delay,Ta=Zd(k),Xa=!0,eb=!1,ib,Bb,Mb=k.compareStructural?We.structural:k.equals||We["default"],Fb=new At(la,function(){Xa||Ha?H():eb||(eb=!0,Ta(H))},k.onError,k.requiresObservable);Fb.schedule_();return Fb.getDisposer_()}function Je(a,d){return function(){try{return d.apply(this,arguments)}catch(k){a.call(this,
k)}}}function ee(a,d,k){return fd(gE,a,d,k)}function fd(a,d,k,H){var fa="function"===typeof H?Dg(d,k):Dg(d),la=W(H)?H:k,sa=a+"L";fa[sa]?fa[sa].add(la):fa[sa]=new Set([la]);return function(){var Ha=fa[sa];Ha&&(Ha["delete"](la),0===Ha.size&&delete fa[sa])}}function Fc(a){!0===a.isolateGlobalState&&rc();var d=a.useProxies,k=a.enforceActions;void 0!==d&&(wf.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(wf.verifyProxies=!0);void 0!==k&&(d="always"===k?"always":
"observed"===k,wf.enforceActions=d,wf.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(H){H in a&&(wf[H]=!!a[H])});wf.allowStateReads=!wf.observableRequiresReaction;a.reactionScheduler&&Yb(a.reactionScheduler)}function Qd(a,d,k,H){var fa=Sc(d),la=vd(a,H)[Od];Wc();try{Cc(fa).forEach(function(sa){la.extend_(sa,fa[sa],k?sa in k?k[sa]:!0:!0)})}finally{qd()}return a}
function rh(a){var d={name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(rh));return d}function dc(){this.message="FLOW_CANCELLED"}function Kc(a){return!0===(null==a?void 0:a.isMobXFlow)}function hd(a,d){return a?void 0!==d?me(a)?a[Od].values_.has(d):!1:me(a)||!!a[Od]||mh(a)||Uv(a)||Fu(a):!1}function Ud(a){if(me(a))return a[Od].ownKeys_();f(38)}function If(a,d,k){a.set(d,k);return k}function Af(a,d){if(null==a||"object"!==typeof a||a instanceof
Date||!hd(a))return a;if($D(a)||Fu(a))return Af(a.get(),d);if(d.has(a))return d.get(a);if(Xc(a)){var k=If(d,a,Array(a.length));a.forEach(function(sa,Ha){k[Ha]=Af(sa,d)});return k}if(Fs(a)){var H=If(d,a,new Set);a.forEach(function(sa){H.add(Af(sa,d))});return H}if(Ar(a)){var fa=If(d,a,new Map);a.forEach(function(sa,Ha){fa.set(Ha,Af(sa,d))});return fa}var la=If(d,a,{});Ud(a).forEach(function(sa){bq.propertyIsEnumerable.call(a,sa)&&(la[sa]=Af(a[sa],d))});return la}function uc(a,d){return Af(a,new Map)}
function Mf(){f("trace() is not available in production builds");for(var a=!1,d=arguments.length,k=Array(d),H=0;H<d;H++)k[H]=arguments[H];"boolean"===typeof k[k.length-1]&&(a=k.pop());a:{switch(k.length){case 0:d=wf.trackingDerivation;break a;case 1:d=Dg(k[0]);break a;case 2:d=Dg(k[0],k[1]);break a}d=void 0}if(!d)return f("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===zt.NONE&&console.log("[mobx.trace] '"+
d.name_+"' tracing enabled");d.isTracing_=a?zt.BREAK:zt.LOG}function gd(a,d){void 0===d&&(d=void 0);Wc();try{return a.apply(d)}finally{qd()}}function Md(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function Pc(a,d){var k=a.interceptors_||(a.interceptors_=[]);k.push(d);return E(function(){var H=k.indexOf(d);-1!==H&&k.splice(H,1)})}function ec(a,d){var k=Ab();try{var H=[].concat(a.interceptors_||[]);a=0;for(var fa=H.length;a<fa&&((d=H[a](d))&&!d.type&&f(14),d);a++);return d}finally{wf.trackingDerivation=
k}}function bf(a){return void 0!==a.changeListeners_&&0<a.changeListeners_.length}function Qe(a,d){var k=a.changeListeners_||(a.changeListeners_=[]);k.push(d);return E(function(){var H=k.indexOf(d);-1!==H&&k.splice(H,1)})}function oe(a,d){var k=Ab();if(a=a.changeListeners_){a=a.slice();for(var H=0,fa=a.length;H<fa;H++)a[H](d);wf.trackingDerivation=k}}function og(a,d,k){var H=vd(a,k)[Od];Wc();try{var fa;null!=(fa=d)?fa:d=Qa(a);Cc(d).forEach(function(la){return H.make_(la,d[la])})}finally{qd()}return a}
function kb(a,d,k,H){void 0===k&&(k="ObservableArray");void 0===H&&(H=!1);C();d=new tx(k,d,H,!1);L(d.values_,Od,d);k=new Proxy(d.values_,kE);d.proxy_=k;a&&a.length&&(H=ac(!0),d.spliceWithArray_(0,0,a),wf.allowStateChanges=H);return k}function qb(a,d){"function"===typeof Array.prototype[a]&&(Vv[a]=d(a))}function nb(a){return function(){var d=this[Od];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function Rb(a){return function(d,k){var H=this,fa=this[Od];fa.atom_.reportObserved();
return fa.dehanceValues_(fa.values_)[a](function(la,sa){return d.call(k,la,sa,H)})}}function Ib(a){return function(){var d=this,k=this[Od];k.atom_.reportObserved();k=k.dehanceValues_(k.values_);var H=arguments[0];arguments[0]=function(fa,la,sa){return H(fa,la,sa,d)};return k[a].apply(k,arguments)}}function Xc(a){return X(a)&&lE(a[Od])}function Yc(a){if(O(a)||Ar(a))return a;if(Array.isArray(a))return new Map(a);if(M(a)){var d=new Map,k;for(k in a)d.set(k,a[k]);return d}return f(21,a)}function vd(a,
d){var k;if(Q(a,Od))return a;var H=null!=(k=null==d?void 0:d.name)?k:"ObservableObject";k=Jz;var fa=new Map;H=String(H);var la;var sa=d?null!=(la=d.defaultDecorator)?la:ob(d):void 0;d=new k(a,fa,H,sa);T(a,Od,d);return a}function ge(a){return Iz[a]||(Iz[a]={get:function(){return this[Od].getObservablePropValue_(a)},set:function(d){return this[Od].setObservablePropValue_(a,d)}})}function me(a){return X(a)?sE(a[Od]):!1}function jf(a){return{enumerable:!1,configurable:!0,get:function(){return this[Od].get_(a)},
set:function(d){this[Od].set_(a,d)}}}function ke(a){if(a>ux){for(var d=ux;d<a+100;d++)xp(vx.prototype,""+d,jf(d));ux=a}}function of(a,d,k){return new vx(a,d,k)}function Dg(a,d){if("object"===typeof a&&null!==a){if(Xc(a))return void 0!==d&&f(23),a[Od].atom_;if(Fs(a))return a[Od];if(Ar(a)){if(void 0===d)return a.keysAtom_;var k=a.data_.get(d)||a.hasMap_.get(d);k||f(25,d,rb(a));return k}if(me(a)){if(!d)return f(26);(k=a[Od].values_.get(d))||f(27,d,rb(a));return k}if(mh(a)||Fu(a)||Uv(a))return a}else if(W(a)&&
Uv(a[Od]))return a[Od];f(28)}function Ag(a,d){a||f(29);if(void 0!==d)return Ag(Dg(a,d));if(mh(a)||Fu(a)||Uv(a)||Ar(a)||Fs(a))return a;if(a[Od])return a[Od];f(24,a)}function rb(a,d){if(void 0!==d)a=Dg(a,d);else{if($c(a))return a.name;a=me(a)||Ar(a)||Fs(a)?Ag(a):Dg(a)}return a.name_}function ya(a,d,k){void 0===k&&(k=-1);return ha(a,d,k)}function ha(a,d,k,H,fa){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var la=typeof a;if("function"!==la&&"object"!==la&&"object"!=
typeof d)return!1;la=Lz.call(a);if(la!==Lz.call(d))return!1;switch(la){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=k&&k++}a=ta(a);d=ta(d);la="[object Array]"===la;if(!la){if("object"!=typeof a||"object"!=
typeof d)return!1;var sa=a.constructor,Ha=d.constructor;if(sa!==Ha&&!(W(sa)&&sa instanceof sa&&W(Ha)&&Ha instanceof Ha)&&"constructor"in a&&"constructor"in d)return!1}if(0===k)return!1;0>k&&(k=-1);H=H||[];fa=fa||[];for(sa=H.length;sa--;)if(H[sa]===a)return fa[sa]===d;H.push(a);fa.push(d);if(la){sa=a.length;if(sa!==d.length)return!1;for(;sa--;)if(!ha(a[sa],d[sa],k-1,H,fa))return!1}else{la=Object.keys(a);sa=la.length;if(Object.keys(d).length!==sa)return!1;for(;sa--;)if(Ha=la[sa],!Q(d,Ha)||!ha(a[Ha],
d[Ha],k-1,H,fa))return!1}H.pop();fa.pop();return!0}function ta(a){return Xc(a)?a.slice():O(a)||Ar(a)||S(a)||Fs(a)?Array.from(a.entries()):a}function Na(a){a[Symbol.iterator]=ab;return a}function ab(){return this}function Db(a,d){const k=new Set(d),H=Object.values(a),fa=new Set(H.filter(la=>k.has(la.toId)||k.has(la.fromId)));a=fa.size;for(d=-1;0!==d;)fa.forEach(la=>{la=la.fromId;for(const sa of H)sa.fromId===la&&fa.add(sa),sa.toId===la&&fa.add(sa)}),d=fa.size-a,a=fa.size;return Array.from(fa.values())}
function hc(a,d,k,H,fa,la,sa,Ha){if(fa=d.getBindingPoint(fa,la,sa,Ha))return{id:H,type:"line",fromId:a.id,toId:d.id,handleId:k,point:Rd.toFixed(fa.point),distance:fa.distance}}function Ec(a,d){const k=a.getCenter(),H=d.getCenter();var fa=Lj();fa=Te(Xd({},Iu.defaultProps),{id:fa,type:Iu.id,parentId:a.props.parentId,point:k});a=hc(fa,a,"start",Lj(),k,k,Rd.uni(Rd.sub(H,k)),!1);d=hc(fa,d,"end",Lj(),H,H,Rd.uni(Rd.sub(k,H)),!1);return a&&d?(fa.handles.start.point=[0,0],fa.handles.end.point=Rd.sub(H,k),
fa.handles.start.bindingId=a.id,fa.handles.end.bindingId=d.id,[fa,[a,d]]):null}function Qc(){return new BE}function Sd(){return new WeakMap}function Bd(a){if(!a)return Dx(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:Dx(a);if(~zE.call(d).indexOf("[native code]"))try{return new d}catch(k){}return Dx(a)}function Ie(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function Ne(a){return a.flags}function cf(a){a=
AE.call(a);return a.substring(8,a.length-1)}function Ee(a){return a[Symbol.toStringTag]||cf(a)}function Vf(a){return xA(a).concat(Ex(a))}function Kf(a,d,k){for(var H=IE(a),fa=0,la=H.length,sa,Ha;fa<la;++fa)if(sa=H[fa],"callee"!==sa&&"caller"!==sa)if(Ha=GE(a,sa)){Ha.get||Ha.set||(Ha.value=k.copier(Ha.value,k));try{FE(d,sa,Ha)}catch(Ta){d[sa]=Ha.value}}else d[sa]=k.copier(a[sa],k);return d}function pg(a,d){var k=new d.Constructor;d.cache.set(a,k);a.forEach(function(H,fa){k.set(fa,d.copier(H,d))});return k}
function Of(a,d){var k=Bd(d.prototype);d.cache.set(a,k);for(var H in a)zA.call(a,H)&&(k[H]=d.copier(a[H],d));return k}function rg(a,d){var k=Bd(d.prototype);d.cache.set(a,k);for(var H in a)zA.call(a,H)&&(k[H]=d.copier(a[H],d));H=Ex(a);for(var fa=0,la=H.length,sa;fa<la;++fa)sa=H[fa],HE.call(a,sa)&&(k[sa]=d.copier(a[sa],d));return k}function oi(a,d){return new d.Constructor(a.valueOf())}function Ng(a,d){return a}function hi(a,d){var k=new d.Constructor;d.cache.set(a,k);a.forEach(function(H){k.add(d.copier(H,
d))});return k}function zi(a){function d(la,sa){sa.prototype=sa.Constructor=void 0;if(!la||"object"!==typeof la)return la;if(sa.cache.has(la))return sa.cache.get(la);sa.prototype=la.__proto__||KE(la);sa.Constructor=sa.prototype&&sa.prototype.constructor;if(!sa.Constructor||sa.Constructor===Object)return fa(la,sa);if(JE(la))return H(la,sa);var Ha=k[EE(la)];return Ha?Ha(la,sa):"function"===typeof la.then?la:fa(la,sa)}a=Fx({},BA,a);var k={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,
Boolean:oi,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,Int32Array:a.arrayBuffer,Map:a.map,Number:oi,Object:a.object,Promise:Ng,RegExp:a.regExp,Set:a.set,String:oi,WeakMap:Ng,WeakSet:Ng,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},H=k.Array,fa=k.Object;return function(la){return d(la,{Constructor:void 0,cache:CE(),
copier:d,prototype:void 0})}}function lj(a,d){return(0,OE.default)(a,d,{arrayMerge:(k,H,fa)=>H})}function jk(a,d,k,H=!1){const [fa,la]=d,[sa,Ha]=k;a=sa+(a-fa)/(la-fa)*(Ha-sa);return H?sa<Ha?Math.max(Math.min(a,Ha),sa):Math.max(Math.min(a,sa),Ha):a}function sj(a,d){return new Promise((k,H)=>{if("video"===d){const fa=document.createElement("video");fa.addEventListener("loadedmetadata",function(){k([this.videoWidth,this.videoHeight])},!1);fa.src=a}else if("image"===d){const fa=new Image;fa.onload=()=>
k([fa.width,fa.height]);fa.src=a;fa.onerror=la=>H(la)}else"pdf"===d&&k([595,842])})}function Oi(a){return Object.values(hs).includes(a)}function ch(a,d){return Oi(a)||null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:a}function bl(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",
padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);return a}function Uj(a,d,k=0){var H,fa,la;if(!a)return[16,32];let sa;sa="string"===typeof d?d:`${null!=(H=d.fontStyle)?H:"normal"} ${null!=(fa=d.fontVariant)?fa:"normal"} ${null!=(la=d.fontWeight)?la:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!Gx.has(`${a}-${sa}-${k}`)){if(!Dr)return[10,
10];Dr.parentNode||document.body.appendChild(Dr);Dr.innerHTML=`${a}&#8203;`;Dr.style.font=sa;Dr.style.padding=k+"px";d=Dr.getBoundingClientRect();Gx.set(`${a}-${sa}-${k}`,[Math.ceil(d.width||1),Math.ceil(d.height||1)])}return Gx.get(`${a}-${sa}-${k}`)}function dl(a){try{if("string"!==typeof a||!ng.test(a))throw TypeError("Invalid UUID");let d;const k=new Uint8Array(16);k[0]=(d=parseInt(a.slice(0,8),16))>>>24;k[1]=d>>>16&255;k[2]=d>>>8&255;k[3]=d&255;k[4]=(d=parseInt(a.slice(9,13),16))>>>8;k[5]=d&
255;k[6]=(d=parseInt(a.slice(14,18),16))>>>8;k[7]=d&255;k[8]=(d=parseInt(a.slice(19,23),16))>>>8;k[9]=d&255;k[10]=(d=parseInt(a.slice(24,36),16))/1099511627776&255;k[11]=d/4294967296&255;k[12]=d>>>24&255;k[13]=d>>>16&255;k[14]=d>>>8&255;k[15]=d&255;return!0}catch(d){return!1}}function Hl(a,d=0,k){let H;return function(...fa){null==k?void 0:k(...fa);clearTimeout(H);H=setTimeout(()=>a.apply(fa),d)}}function dh(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function xf(){var a,d,k;return(null==
(k=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:k.call(d,"ui/developer-mode?"))||!1}function dg(a){return!!a}function Il(a=0){return new Promise(d=>setTimeout(d,a))}function rm(a="noid"){Hx[a]||(Hx[a]=EA.createContext({}));return Hx[a]}function Oe(a="noid"){return EA.useContext(rm(a))}function el(a){const {callbacks:d}=Oe(),k=DA.useRef(-1);return DA.useMemo(()=>{const H=fa=>{var la,sa;const {order:Ha=0}=fa;if(!Ha){var Ta=fa.target;Ta.removeEventListener("pointerup",
H);Ta.releasePointerCapture(fa.pointerId);null==(la=d.onPointerUp)?void 0:la.call(d,{type:"selection",handle:a,order:Ha},fa);la=Date.now();Ta=la-k.current;300<Ta?k.current=la:300>=Ta&&(null==(sa=d.onDoubleClick)?void 0:sa.call(d,{type:"selection",handle:a,order:Ha},fa),k.current=-1);fa.order=Ha+1}};return{onPointerDown:fa=>{var la;const {order:sa=0}=fa;if(!sa){var Ha=vl(fa.currentTarget);Ha.setPointerCapture(fa.pointerId);Ha.addEventListener("pointerup",H);null==(la=d.onPointerDown)?void 0:la.call(d,
{type:"selection",handle:a,order:sa},fa);fa.order=sa+1}},onPointerMove:fa=>{var la;const {order:sa=0}=fa;sa||(null==(la=d.onPointerMove)?void 0:la.call(d,{type:"selection",handle:a,order:sa},fa),fa.order=sa+1)},onPointerEnter:fa=>{var la;const {order:sa=0}=fa;sa||(null==(la=d.onPointerEnter)?void 0:la.call(d,{type:"selection",handle:a,order:sa},fa),fa.order=sa+1)},onPointerLeave:fa=>{var la;const {order:sa=0}=fa;sa||(null==(la=d.onPointerLeave)?void 0:la.call(d,{type:"selection",handle:a,order:sa},
fa),fa.order=sa+1)},onKeyDown:fa=>{var la;null==(la=d.onKeyDown)?void 0:la.call(d,{type:"selection",handle:a,order:-1},fa)},onKeyUp:fa=>{var la;null==(la=d.onKeyUp)?void 0:la.call(d,{type:"selection",handle:a,order:-1},fa)}}},[d])}function vl(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return vl(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function Ok(a,d,k){const H=Ku.useRef(!1),fa=Ku.useCallback(()=>{var la;if(H.current){const sa=
null==(la=a.current)?void 0:la.getBoundingClientRect();sa&&(la={minX:sa.left,maxX:sa.left+sa.width,minY:sa.top,maxY:sa.top+sa.height,width:sa.width,height:sa.height},d.updateBounds(la),null==k?void 0:k(la))}else H.current=!0},[a,k]);Ku.useEffect(()=>{const la=a.current?RE(a.current):document,sa=Hl(fa,100);la.addEventListener("scroll",sa);window.addEventListener("resize",sa);return()=>{la.removeEventListener("scroll",sa);window.removeEventListener("resize",sa)}},[]);Ku.useLayoutEffect(()=>{const la=
new ResizeObserver(sa=>{sa[0].contentRect&&fa()});a.current&&la.observe(a.current);return()=>{la.disconnect()}},[a]);Ku.useEffect(()=>{fa();setTimeout(()=>{var la,sa;null==(sa=null==(la=a.current)?void 0:la.querySelector(".tl-canvas"))?void 0:sa.focus()})},[a])}function dm(a,d){return Object.keys(d).reduce((k,H)=>{const fa=d[H];return fa?k+`${`--${a}-${H}`}: ${fa};
`:k},"")}function Wh(a,d,k=".logseq-tldraw"){Ix.useLayoutEffect(()=>{const H=document.createElement("style"),fa=dm(a,d);H.setAttribute("id",`${a}-theme`);H.setAttribute("data-selector",k);H.innerHTML=`
        ${k} {
          ${fa}
        }
      `;document.head.appendChild(H);return()=>{H&&document.head.contains(H)&&document.head.removeChild(H)}},[a,d,k])}function kk(a,d){Ix.useLayoutEffect(()=>{if(Jx.get(a))return()=>{};const k=document.createElement("style");k.innerHTML=d;k.setAttribute("id",a);document.head.appendChild(k);Jx.set(a,k);return()=>{k&&document.head.contains(k)&&(document.head.removeChild(k),Jx.delete(a))}},[a,d])}function lk(a,d){const k=Ix.useMemo(()=>Xd(Xd({},SE),a),[a]);Wh("tl",k,d);kk("tl-canvas",TE)}function Pk(a=
"noid"){Kx[a]||(Kx[a]=GA.createContext({}));return Kx[a]}function Yf(a="noid"){return GA.useContext(Pk(a))}function kg(){const a=Yf(),{callbacks:d}=Oe(),k=FA.useRef(-1);return FA.useMemo(()=>({onPointerDown:H=>{var fa,la,sa;const {order:Ha=0}=H;Ha||(null==(fa=H.currentTarget)?void 0:fa.setPointerCapture(H.pointerId));H.isPrimary&&(null==(la=d.onPointerDown)?void 0:la.call(d,{type:"canvas",order:Ha},H),fa=Date.now(),la=fa-k.current,300<la?k.current=fa:300>=la&&(null==(sa=d.onDoubleClick)?void 0:sa.call(d,
{type:"canvas",order:Ha},H),k.current=-1))},onPointerMove:H=>{var fa;const {order:la=0}=H;null==(fa=d.onPointerMove)?void 0:fa.call(d,{type:"canvas",order:la},H)},onPointerUp:H=>{var fa,la;const {order:sa=0}=H;sa||(null==(fa=H.currentTarget)?void 0:fa.releasePointerCapture(H.pointerId));null==(la=d.onPointerUp)?void 0:la.call(d,{type:"canvas",order:sa},H)},onPointerEnter:H=>{var fa;const {order:la=0}=H;null==(fa=d.onPointerEnter)?void 0:fa.call(d,{type:"canvas",order:la},H)},onPointerLeave:H=>{var fa;
const {order:la=0}=H;null==(fa=d.onPointerLeave)?void 0:fa.call(d,{type:"canvas",order:la},H)},onDrop:H=>Mh(this,null,function*(){H.preventDefault();"clientX"in H&&a.drop(H.dataTransfer,[H.clientX,H.clientY])}),onDragOver:H=>{H.preventDefault()},onTouchEnd:H=>{let fa=a.selectedTool.id;"pencil"!==fa&&"highlighter"!==fa||H.preventDefault()}}),[d])}function Ai(a,d,k){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*k):a*d*k/(d+k*a)}function Bi(a,d,k,H=.15){return 0===H?Math.max(d,Math.min(a,k)):a<d?
-Ai(d-a,k-d,H)+d:a>k?+Ai(a-k,k-d,H)+k:a}function Ci(a,[d,k],[H,fa]){const [[la,sa],[Ha,Ta]]=a;return[Bi(d,la,sa,H),Bi(k,Ha,Ta,fa)]}function Ki(a,d,k){d in a?Object.defineProperty(a,d,{value:k,enumerable:!0,configurable:!0,writable:!0}):a[d]=k;return a}function Zi(a,d){var k=Object.keys(a);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(a);d&&(H=H.filter(function(fa){return Object.getOwnPropertyDescriptor(a,fa).enumerable}));k.push.apply(k,H)}return k}function Sg(a){for(var d=1;d<
arguments.length;d++){var k=null!=arguments[d]?arguments[d]:{};d%2?Zi(Object(k),!0).forEach(function(H){Ki(a,H,k[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(k)):Zi(Object(k)).forEach(function(H){Object.defineProperty(a,H,Object.getOwnPropertyDescriptor(k,H))})}return a}function Eh(a){return a?a[0].toUpperCase()+a.slice(1):""}function Di(a=!1,d){return a&&!UE.includes(d)}function em(a,d="",k=!1){const H=HA[a];d=H?H[d]||d:d;return"on"+Eh(a)+Eh(d)+
(Di(k,d)?"Capture":"")}function Df(a){a=a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var k=VE.includes(a)?"capturecapture":"capture";(k=!!~a.indexOf(k))&&(a=a.replace("capture",""));return{device:a,capture:k,passive:d}}function tj(a,d=""){const k=HA[a];return a+(k?k[d]||d:d)}function th(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function Qk(a){return Array.from(a.touches).filter(d=>{var k,H;return d.target===a.currentTarget||
(null===(k=a.currentTarget)||void 0===k?void 0:null===(H=k.contains)||void 0===H?void 0:H.call(k,d.target))})}function Ij(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function Jl(a,d){const k=d.clientX-a.clientX,H=d.clientY-a.clientY;return{angle:-(180*Math.atan2(k,H))/Math.PI,distance:Math.hypot(k,H),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function tm(a){return Qk(a).map(d=>d.identifier)}function $i(a,d){const [k,H]=
Array.from(a.touches).filter(fa=>d.includes(fa.identifier));return Jl(k,H)}function um(a){const d=Ij(a);return"touches"in a?d.identifier:d.pointerId}function mk(a){a=Ij(a);return[a.clientX,a.clientY]}function Li(a){let {deltaX:d,deltaY:k,deltaMode:H}=a;1===H?(d*=40,k*=40):2===H&&(d*=800,k*=800);return[d,k]}function Og(a,...d){return"function"===typeof a?a(...d):a}function ei(){}function Si(...a){return 0===a.length?ei:1===a.length?a[0]:function(){let d;for(const k of a)d=k.apply(this,arguments)||
d;return d}}function Kl([a,d],k){a=Math.abs(a);d=Math.abs(d);if(a>d&&a>k)return"x";if(d>a&&d>k)return"y"}function kn(a){const [d,k]=a.overflow,[H,fa]=a._delta,[la,sa]=a._direction;if(0>d&&0<H&&0>la||0<d&&0>H&&0<la)a._movement[0]=a._movementBound[0];if(0>k&&0<fa&&0>sa||0<k&&0>fa&&0<sa)a._movement[1]=a._movementBound[1]}function nh(a){Lx.set(a.key,a.engine);Mx.set(a.key,a.resolver)}function Rk(a={},d){const k={};for(const [H,fa]of Object.entries(d))switch(typeof fa){case "function":k[H]=fa.call(k,a[H],
H,a);break;case "object":k[H]=Rk(a[H],fa);break;case "boolean":fa&&(k[H]=a[H])}return k}function Wj(a,d,k={}){const {target:H,eventOptions:fa,window:la,enabled:sa,transform:Ha}=a;var Ta=rF;if(null==a)a={};else{if(null==a)var Xa={};else{Xa={};var eb=Object.keys(a),ib;for(ib=0;ib<eb.length;ib++){var Bb=eb[ib];0<=Ta.indexOf(Bb)||(Xa[Bb]=a[Bb])}}if(Object.getOwnPropertySymbols)for(ib=Object.getOwnPropertySymbols(a),Bb=0;Bb<ib.length;Bb++)eb=ib[Bb],0<=Ta.indexOf(eb)||Object.prototype.propertyIsEnumerable.call(a,
eb)&&(Xa[eb]=a[eb]);a=Xa}k.shared=Rk({target:H,eventOptions:fa,window:la,enabled:sa,transform:Ha},qF);if(d){var Mb=Mx.get(d);k[d]=Rk(Sg({shared:k.shared},a),Mb)}else for(Mb in a)(d=Mx.get(Mb))&&(k[Mb]=Rk(Sg({shared:k.shared},a[Mb]),d));return k}function ej(a,d){a.gestures.add(d);a.gestureEventStores[d]=new PA(a,d);a.gestureTimeoutStores[d]=new sF}function ui(a,d,k,H,fa,la){if(a.has(k)&&Lx.has(H)){var sa=k+"Start",Ha=k+"End";fa[H]=Ta=>{let Xa=void 0;if(Ta.first&&sa in d)d[sa](Ta);k in d&&(Xa=d[k](Ta));
if(Ta.last&&Ha in d)d[Ha](Ta);return Xa};la[H]=la[H]||{}}}function Gk(a,d={},k,H){const fa=Nx.default.useMemo(()=>new tF(a),[]);fa.applyHandlers(a,H);fa.applyConfig(d,k);Nx.default.useEffect(fa.effect.bind(fa));Nx.default.useEffect(()=>fa.clean.bind(fa),[]);if(void 0===d.target)return fa.bind.bind(fa)}function Rh(a){a.forEach(nh);return function(d,k){k=k||{};const H={},fa={},la=new Set;for(let Bb in d)uF.test(Bb)?(la.add(RegExp.lastMatch),fa[Bb]=d[Bb]):H[Bb]=d[Bb];const [sa,Ha,Ta]=[fa,H,la];d={};
ui(Ta,sa,"onDrag","drag",d,k);ui(Ta,sa,"onWheel","wheel",d,k);ui(Ta,sa,"onScroll","scroll",d,k);ui(Ta,sa,"onPinch","pinch",d,k);ui(Ta,sa,"onMove","move",d,k);ui(Ta,sa,"onHover","hover",d,k);const {handlers:Xa,nativeHandlers:eb,config:ib}={handlers:d,config:k,nativeHandlers:Ha};return Gk(Xa,ib,void 0,eb)}}function uj(a,d){return Rh([kF,nF,oF,pF,mF,lF])(a,d||{})}function fj(a){const {viewport:d,inputs:k,callbacks:H}=Oe(),fa=$v.useRef(void 0),la=$v.useRef([0,0]),sa=$v.useRef(0),Ha=$v.useMemo(()=>({onWheel:Ta=>
{var Xa;({event:Ta}=Ta);Ta.preventDefault();const {deltaY:eb,deltaX:ib}=Ta;var Bb=0;if(Ta.ctrlKey||Ta.metaKey){Bb=Math.sign(Ta.deltaY);let nc=eb;10<Math.abs(Ta.deltaY)&&(nc=10*Bb);Bb=nc}const [Mb,Fb,$b]=[ib,eb,Bb];"pinching"===k.state||sa.current>=Ta.timeStamp||(sa.current=Ta.timeStamp,(Ta.altKey||Ta.ctrlKey||Ta.metaKey)&&0===Ta.buttons?(Bb=d.bounds,Ta=null!=(Xa=k.currentScreenPoint)?Xa:[Bb.width/2,Bb.height/2],Xa=d.camera.zoom,d.onZoom(Ta,Xa-$b/100*Xa)):(Xa=Rd.mul(Ta.shiftKey&&!dh()?[Fb,0]:[Mb,Fb],
.8),Rd.isEqual(Xa,[0,0])||d.panCamera(Xa)))},onPinchStart:({event:Ta,delta:Xa,offset:eb,origin:ib})=>{var Bb;const Mb=a.current;Ta instanceof WheelEvent||!(Ta.target===Mb||null!=Mb&&Mb.contains(Ta.target))||(null==(Bb=H.onPinchStart)?void 0:Bb.call(H,{type:"canvas",order:0,delta:[...Xa,eb[0]],offset:eb,point:Rd.sub(ib,k.containerOffset)},Ta),fa.current=ib,la.current=[0,0])},onPinchEnd:({event:Ta,offset:Xa,origin:eb})=>{var ib;const Bb=a.current;Ta instanceof WheelEvent||!(Ta.target===Bb||null!=Bb&&
Bb.contains(Ta.target))||"pinching"!==k.state||(null==(ib=H.onPinchEnd)?void 0:ib.call(H,{type:"canvas",order:0,delta:[0,0,Xa[0]],offset:Xa,point:Rd.sub(eb,k.containerOffset)},Ta),la.current=[0,0])},onPinch:({event:Ta,offset:Xa,origin:eb})=>{var ib,Bb=a.current;if(!(Ta instanceof WheelEvent)&&(Ta.target===Bb||null!=Bb&&Bb.contains(Ta.target))){fa.current||(fa.current=eb);Bb=Rd.sub(fa.current,eb);var Mb=Rd.sub(Bb,la.current);null==(ib=H.onPinch)?void 0:ib.call(H,{type:"canvas",order:0,delta:[...Mb,
Xa[0]],offset:Xa,point:Rd.sub(eb,k.containerOffset)},Ta);la.current=Bb}}}),[H]);uj(Ha,{target:a,eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:bp.maxZoom,min:bp.minZoom})}})}function Ik(a,d,k,H){Ox.useLayoutEffect(()=>{a.current.style.transform=`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,k,d.rotation]);Ox.useLayoutEffect(()=>{const fa=a.current;fa.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;fa.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);Ox.useLayoutEffect(()=>{const fa=a.current;void 0!==H&&(fa.style.zIndex=H.toString())},[H])}function So(a,d){const {onPersist:k,onError:H,onMount:fa,onCreateAssets:la,onCreateShapes:sa,onDeleteAssets:Ha,onDeleteShapes:Ta,onDrop:Xa,
onPaste:eb,onCopy:ib,onCanvasDBClick:Bb}=d;RA.useLayoutEffect(()=>{const Mb=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,fa&&fa(a,null),()=>{Mb.forEach(Fb=>Fb());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);RA.useLayoutEffect(()=>{const Mb=[];k&&Mb.push(a.subscribe("persist",k));H&&Mb.push(a.subscribe("error",H));sa&&Mb.push(a.subscribe("create-shapes",sa));la&&Mb.push(a.subscribe("create-assets",la));Ta&&Mb.push(a.subscribe("delete-shapes",Ta));Ha&&Mb.push(a.subscribe("delete-assets",
Ha));Xa&&Mb.push(a.subscribe("drop",Xa));eb&&Mb.push(a.subscribe("paste",eb));ib&&Mb.push(a.subscribe("copy",ib));Bb&&Mb.push(a.subscribe("canvas-dbclick",Bb));return()=>Mb.forEach(Fb=>Fb())},[a,k,H])}function Wn(a){if("app"in a)return a.app;const [d]=SA.useState(()=>new PE(a.model,a.Shapes,a.Tools,a.readOnly));SA.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function nk(a,d){vF.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function yn(a){const d=Oe(),{viewport:{bounds:k}}=
d;wF.useEffect(()=>{const H=sa=>{sa.preventDefault()},fa=sa=>{if(0!==sa.touches.length){var Ha=sa.touches[0].pageX,Ta=sa.touches[0].radiusX||0;(10>Ha-Ta||Ha+Ta>k.width-10)&&sa.preventDefault()}},la=a.current;if(!la)return()=>{};la.addEventListener("touchstart",H,{passive:!0});la.addEventListener("gestureend",H,{passive:!0});la.addEventListener("gesturechange",H,{passive:!0});la.addEventListener("gesturestart",H,{passive:!0});la.addEventListener("touchstart",fa,{passive:!0});return()=>{la&&(la.removeEventListener("touchstart",
H),la.removeEventListener("gestureend",H),la.removeEventListener("gesturechange",H),la.removeEventListener("gesturestart",H),la.removeEventListener("touchstart",fa))}},[a,k.width])}function tp(a,d){const {inputs:k,callbacks:H}=Oe();return xF.useMemo(()=>({onPointerDown:fa=>{var la,sa;const {order:Ha=0}=fa;Ha||(null==(la=fa.currentTarget)?void 0:la.setPointerCapture(fa.pointerId));la=a.props.handles[d];null==(sa=H.onPointerDown)?void 0:sa.call(H,{type:"handle",shape:a,handle:la,id:d,order:Ha},fa);
fa.order=Ha+1},onPointerMove:fa=>{var la;const {order:sa=0}=fa,Ha=a.props.handles[d];null==(la=H.onPointerMove)?void 0:la.call(H,{type:"handle",shape:a,handle:Ha,id:d,order:sa},fa);fa.order=sa+1},onPointerUp:fa=>{var la,sa;const {order:Ha=0}=fa;Ha||(null==(la=fa.currentTarget)?void 0:la.releasePointerCapture(fa.pointerId));la=a.props.handles[d];null==(sa=H.onPointerUp)?void 0:sa.call(H,{type:"handle",shape:a,handle:la,id:d,order:Ha},fa);fa.order=Ha+1},onPointerEnter:fa=>{var la;const {order:sa=0}=
fa,Ha=a.props.handles[d];null==(la=H.onPointerEnter)?void 0:la.call(H,{type:"handle",shape:a,handle:Ha,id:d,order:sa},fa);fa.order=sa+1},onPointerLeave:fa=>{var la;const {order:sa=0}=fa,Ha=a.props.handles[d];null==(la=H.onPointerLeave)?void 0:la.call(H,{type:"handle",shape:a,handle:Ha,id:d,order:sa},fa);fa.order=sa+1},onKeyUp:fa=>{var la;const sa=a.props.handles[d];null==(la=H.onKeyUp)?void 0:la.call(H,{type:"handle",shape:a,handle:sa,id:d,order:-1},fa)},onKeyDown:fa=>{var la;const sa=a.props.handles[d];
null==(la=H.onKeyDown)?void 0:la.call(H,{type:"handle",shape:a,handle:sa,id:d,order:-1},fa)}}),[a.id,k,H])}function nj(a,d,k=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${k?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function vm(a,d,k=0){yF.useEffect(()=>{const H=a.current;H&&(H.style.cursor=
zF[d](am.radiansToDegrees(k)))},[d,k])}function pk(a){const {viewport:d}=Oe(),k=Yf();AF.useLayoutEffect(()=>xd(()=>{const H=Hl(()=>{var fa;null==(fa=a.current)?void 0:fa.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==k.inputs.state&&null!=d.camera.zoom&&H()}),[])}function vo(a,d=0){const [k,H]=(0,TA.useState)(a);(0,TA.useEffect)(()=>{let fa=!1;const la=setTimeout(()=>{fa||H(a)},d);return()=>{fa=!0;clearTimeout(la)}},[a,d]);return k}function Ll(){const a=Yf();UA.useEffect(()=>
{Vd(()=>Xd({},a.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);UA.useEffect(()=>{var d;const k=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");k?a.viewport.update(k):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function zn(a){a()}function Xj(a){return rh(Dg(a,void 0))}function Ti(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,
cleanAt:Date.now()+CF}}function Xh(a){var d=new Map,k=1,H=new a(function(fa){var la=d.get(fa);la&&(la.reaction.dispose(),d.delete(fa))});return{addReactionToTrack:function(fa,la,sa){var Ha=k++;H.register(sa,Ha,fa);fa.current=Ti(la);fa.current.finalizationRegistryCleanupToken=Ha;d.set(Ha,fa.current);return fa.current},recordReactionAsCommitted:function(fa){H.unregister(fa);fa.current&&fa.current.finalizationRegistryCleanupToken&&d.delete(fa.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function ln(){function a(){void 0===H&&(H=setTimeout(d,1E4))}function d(){H=void 0;var fa=Date.now();k.forEach(function(la){var sa=la.current;sa&&fa>=sa.cleanAt&&(sa.reaction.dispose(),la.current=null,k.delete(la))});0<k.size&&a()}var k=new Set,H;return{addReactionToTrack:function(fa,la,sa){fa.current=Ti(la);k.add(fa);a();return fa.current},recordReactionAsCommitted:function(fa){k.delete(fa)},forceCleanupTimerToRunNowForTests:function(){H&&(clearTimeout(H),
d())},resetCleanupScheduleForTests:function(){var fa;if(0<k.size){try{for(var la=DF(k),sa=la.next();!sa.done;sa=la.next()){var Ha=sa.value,Ta=Ha.current;Ta&&(Ta.reaction.dispose(),Ha.current=null)}}catch(eb){var Xa={error:eb}}finally{try{sa&&!sa.done&&(fa=la.return)&&fa.call(la)}finally{if(Xa)throw Xa.error;}}k.clear()}H&&(clearTimeout(H),H=void 0)}}}function ph(){return new GF}function vj(a,d){void 0===d&&(d="observed");var k=XA(Nu.default.useState(ph),1)[0],H=XA(Nu.default.useState(),2)[1],fa=Nu.default.useRef(null);
if(!fa.current)var la=new At("observer".concat(d),function(){sa.mounted?H([]):sa.changedBeforeMount=!0}),sa=EF(fa,la,k);k=fa.current.reaction;Nu.default.useDebugValue(k,Xj);Nu.default.useEffect(function(){FF(fa);fa.current?(fa.current.mounted=!0,fa.current.changedBeforeMount&&(fa.current.changedBeforeMount=!1,H([]))):(fa.current={reaction:new At("observer".concat(d),function(){H([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},H([]));return function(){fa.current.reaction.dispose();fa.current=
null}},[]);var Ha,Ta;k.track(function(){try{Ha=a()}catch(Xa){Ta=Xa}});if(Ta)throw Ta;return Ha}function Xe(a,d){var k;if($A&&a.$$typeof===$A)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(k=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==k?k:!1;var H=a,fa=a.displayName||a.name;if(ZA&&a.$$typeof===ZA&&(d=!0,H=a.render,"function"!==typeof H))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
k=function(la,sa){return vj(function(){return H(la,sa)},fa)};""!==fa&&(k.displayName=fa);a.contextTypes&&(k.contextTypes=a.contextTypes);d&&(k=(0,Jt.forwardRef)(k));k=(0,Jt.memo)(k);gj(a,k);return k}function gj(a,d){Object.keys(a).forEach(function(k){HF[k]||Object.defineProperty(d,k,Object.getOwnPropertyDescriptor(a,k))})}function Zj(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:vj(a)}function An(a){const d=Yf(),{callbacks:k}=Oe(),H=aB.useRef(!1);aB.useEffect(()=>{const fa=Ta=>
{var Xa,eb;if(null==(Xa=a.current)?0:Xa.contains(document.activeElement))null==(eb=k.onKeyDown)?void 0:eb.call(k,{type:"canvas",order:-1},Ta),H.current=Ta.shiftKey},la=Ta=>{var Xa,eb;if(null==(Xa=a.current)?0:Xa.contains(document.activeElement))null==(eb=k.onKeyUp)?void 0:eb.call(k,{type:"canvas",order:-1},Ta),H.current=Ta.shiftKey},sa=Ta=>{var Xa,eb,ib;!d.editingShape&&(null==(Xa=a.current)?0:Xa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(ib=null==(eb=document.activeElement)?
void 0:eb.tagName)?ib:"")&&(Ta.preventDefault(),d.paste(Ta,H.current))},Ha=Ta=>{var Xa,eb,ib;!d.editingShape&&0<d.selectedShapes.size&&(null==(Xa=a.current)?0:Xa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(ib=null==(eb=document.activeElement)?void 0:eb.tagName)?ib:"")&&(Ta.preventDefault(),d.copy())};window.addEventListener("keydown",fa);window.addEventListener("keyup",la);document.addEventListener("paste",sa);document.addEventListener("copy",Ha);return()=>{window.removeEventListener("keydown",
fa);window.removeEventListener("keyup",la);document.removeEventListener("paste",sa);document.removeEventListener("copy",Ha)}},[])}function yl(a){const {inputs:d,callbacks:k}=Oe(),H=fB.useRef(-1);return fB.useMemo(()=>({onPointerDown:fa=>{var la,sa;const {order:Ha=0}=fa;Ha||(null==(la=fa.currentTarget)?void 0:la.setPointerCapture(fa.pointerId));null==(sa=k.onPointerDown)?void 0:sa.call(k,{type:"shape",shape:a,order:Ha},fa);fa.order=Ha+1},onPointerMove:fa=>{var la;const {order:sa=0}=fa;null==(la=k.onPointerMove)?
void 0:la.call(k,{type:"shape",shape:a,order:sa},fa);fa.order=sa+1},onPointerUp:fa=>{var la,sa,Ha;const {order:Ta=0}=fa;Ta||(null==(la=fa.currentTarget)?void 0:la.releasePointerCapture(fa.pointerId));null==(sa=k.onPointerUp)?void 0:sa.call(k,{type:"shape",shape:a,order:Ta},fa);la=Date.now();sa=la-H.current;300<sa?H.current=la:300>=sa&&(null==(Ha=k.onDoubleClick)?void 0:Ha.call(k,{type:"shape",shape:a,order:Ta},fa),H.current=-1);fa.order=Ta+1},onPointerEnter:fa=>{var la;const {order:sa=0}=fa;null==
(la=k.onPointerEnter)?void 0:la.call(k,{type:"shape",shape:a,order:sa},fa);fa.order=sa+1},onPointerLeave:fa=>{var la;const {order:sa=0}=fa;null==(la=k.onPointerLeave)?void 0:la.call(k,{type:"shape",shape:a,order:sa},fa);fa.order=sa+1},onKeyUp:fa=>{var la;null==(la=k.onKeyUp)?void 0:la.call(k,{type:"shape",shape:a,order:-1},fa)},onKeyDown:fa=>{var la;null==(la=k.onKeyDown)?void 0:la.call(k,{type:"shape",shape:a,order:-1},fa)}}),[a.id,d,k])}function Ol(a){var {viewport:d,inputs:k,callbacks:H,components:fa}=
a;a=rf(a,["viewport","inputs","callbacks","components"]);return(0,xB.jsx)(aG,{id:a.id,viewport:d,inputs:k,callbacks:H,components:fa,meta:a.meta,children:(0,xB.jsx)(XF,Xd({},a))})}function Pe(){Pe=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],H;for(H in k)Object.prototype.hasOwnProperty.call(k,H)&&(a[H]=k[H])}return a};return Pe.apply(this,arguments)}function Jf(a,d,{checkForDefaultPrevented:k=!0}={}){return function(H){null===a||void 0===a||
a(H);if(!1===k||!H.defaultPrevented)return null===d||void 0===d?void 0:d(H)}}function Eg(...a){return d=>a.forEach(k=>{"function"===typeof k?k(d):null!==k&&void 0!==k&&(k.current=d)})}function Tg(...a){return(0,fG.useCallback)(Eg(...a),a)}function hj(a,d=[]){let k=[];const H=()=>{const fa=k.map(la=>(0,Ms.createContext)(la));return function(la){const sa=(null===la||void 0===la?void 0:la[a])||fa;return(0,Ms.useMemo)(()=>({[`__scope${a}`]:Te(Xd({},la),{[a]:sa})}),[la,sa])}};H.scopeName=a;return[function(fa,
la){function sa(Xa){const {scope:eb,children:ib}=Xa,Bb=rf(Xa,["scope","children"]);Xa=(null===eb||void 0===eb?void 0:eb[a][Ta])||Ha;const Mb=(0,Ms.useMemo)(()=>Bb,Object.values(Bb));return(0,Ms.createElement)(Xa.Provider,{value:Mb},ib)}const Ha=(0,Ms.createContext)(la),Ta=k.length;k=[...k,la];sa.displayName=fa+"Provider";return[sa,function(Xa,eb){if(eb=(0,Ms.useContext)((null===eb||void 0===eb?void 0:eb[a][Ta])||Ha))return eb;if(void 0!==la)return la;throw Error(`\`${Xa}\` must be used within \`${fa}\``);
}]},Kj(H,...d)]}function Kj(...a){const d=a[0];if(1===a.length)return d;const k=()=>{const H=a.map(fa=>({useScope:fa(),scopeName:fa.scopeName}));return function(fa){const la=H.reduce((sa,{useScope:Ha,scopeName:Ta})=>{Ha=Ha(fa)[`__scope${Ta}`];return Xd(Xd({},sa),Ha)},{});return(0,Ms.useMemo)(()=>({[`__scope${d.scopeName}`]:la}),[la])}};k.scopeName=d.scopeName;return k}function qg(a){return(0,Vm.isValidElement)(a)&&a.type===yB}function hl(a,d){const k=Xd({},d);for(const H in d){const fa=a[H],la=d[H];
/^on[A-Z]/.test(H)?fa&&la?k[H]=(...sa)=>{la(...sa);fa(...sa)}:fa&&(k[H]=fa):"style"===H?k[H]=Xd(Xd({},fa),la):"className"===H&&(k[H]=[fa,la].filter(Boolean).join(" "))}return Xd(Xd({},a),k)}function Sk(a,d){a&&(0,gG.flushSync)(()=>a.dispatchEvent(d))}function ii(a){const d=(0,Zx.useRef)(a);(0,Zx.useEffect)(()=>{d.current=a});return(0,Zx.useMemo)(()=>(...k)=>{var H;return null===(H=d.current)||void 0===H?void 0:H.call(d,...k)},[])}function Jk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=
ii(a);(0,hG.useEffect)(()=>{const H=fa=>{"Escape"===fa.key&&k(fa)};d.addEventListener("keydown",H);return()=>d.removeEventListener("keydown",H)},[k,d])}function mj(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=ii(a),H=(0,Zn.useRef)(!1),fa=(0,Zn.useRef)(()=>{});(0,Zn.useEffect)(()=>{const la=Ha=>{if(Ha.target&&!H.current){let Ta=function(){wm("dismissableLayer.pointerDownOutside",k,Xa,{discrete:!0})};const Xa={originalEvent:Ha};"touch"===Ha.pointerType?(d.removeEventListener("click",
fa.current),fa.current=Ta,d.addEventListener("click",fa.current,{once:!0})):Ta()}H.current=!1},sa=window.setTimeout(()=>{d.addEventListener("pointerdown",la)},0);return()=>{window.clearTimeout(sa);d.removeEventListener("pointerdown",la);d.removeEventListener("click",fa.current)}},[d,k]);return{onPointerDownCapture:()=>H.current=!0}}function Vj(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=ii(a),H=(0,Zn.useRef)(!1);(0,Zn.useEffect)(()=>{const fa=la=>{la.target&&!H.current&&
wm("dismissableLayer.focusOutside",k,{originalEvent:la},{discrete:!1})};d.addEventListener("focusin",fa);return()=>d.removeEventListener("focusin",fa)},[d,k]);return{onFocusCapture:()=>H.current=!0,onBlurCapture:()=>H.current=!1}}function Jj(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function wm(a,d,k,{discrete:H}){const fa=k.originalEvent.target;k=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:k});d&&fa.addEventListener(a,d,{once:!0});H?Sk(fa,k):fa.dispatchEvent(k)}
function Lh(a){const [d,k]=AB.useState(kG());Dm(()=>{a||k(H=>null!==H&&void 0!==H?H:String(lG++))},[a]);return a||(d?`radix-${d}`:"")}function Ei(a){return a.split("-")[0]}function fl(a){return["top","bottom"].includes(Ei(a))?"x":"y"}function Kk(a){return"y"===a?"height":"width"}function aj(a,d,k){let {reference:H,floating:fa}=a;var la=H.x+H.width/2-fa.width/2;const sa=H.y+H.height/2-fa.height/2;a=fl(d);var Ha=Kk(a);Ha=H[Ha]/2-fa[Ha]/2;const Ta="x"===a;switch(Ei(d)){case "top":la={x:la,y:H.y-fa.height};
break;case "bottom":la={x:la,y:H.y+H.height};break;case "right":la={x:H.x+H.width,y:sa};break;case "left":la={x:H.x-fa.width,y:sa};break;default:la={x:H.x,y:H.y}}switch(d.split("-")[1]){case "start":la[a]-=Ha*(k&&Ta?-1:1);break;case "end":la[a]+=Ha*(k&&Ta?-1:1)}return la}function xm(a){return"number"!=typeof a?Xd({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function ym(a){return Te(Xd({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function Hk(a,d){return Mh(this,
null,function*(){var k;void 0===d&&(d={});const {x:H,y:fa,platform:la,rects:sa,elements:Ha,strategy:Ta}=a,{boundary:Xa="clippingAncestors",rootBoundary:eb="viewport",elementContext:ib="floating",altBoundary:Bb=!1,padding:Mb=0}=d,Fb=xm(Mb),$b=Ha[Bb?"floating"===ib?"reference":"floating":ib],nc=ym(yield la.getClippingRect({element:null==(k=yield null==la.isElement?void 0:la.isElement($b))||k?$b:$b.contextElement||(yield null==la.getDocumentElement?void 0:la.getDocumentElement(Ha.floating)),boundary:Xa,
rootBoundary:eb,strategy:Ta}));k=ym(la.convertOffsetParentRelativeRectToViewportRelativeRect?yield la.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===ib?Te(Xd({},sa.floating),{x:H,y:fa}):sa.reference,offsetParent:yield null==la.getOffsetParent?void 0:la.getOffsetParent(Ha.floating),strategy:Ta}):sa[ib]);return{top:nc.top-k.top+Fb.top,bottom:k.bottom-nc.bottom+Fb.bottom,left:nc.left-k.left+Fb.left,right:k.right-nc.right+Fb.right}})}function Om(a){return a.replace(/left|right|bottom|top/g,
d=>nG[d])}function Pl(a,d,k){void 0===k&&(k=!1);const H=a.split("-")[1],fa=fl(a);a=Kk(fa);k="x"===fa?H===(k?"end":"start")?"right":"left":"start"===H?"bottom":"top";return d.reference[a]>d.floating[a]&&(k=Om(k)),{main:k,cross:Om(k)}}function Cn(a){return a.replace(/start|end/g,d=>oG[d])}function Pb(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function Sa(a){return CB.some(d=>0<=a[d])}function pc(a){return null==a?window:a&&a.document&&a.location&&
a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function oc(a){return pc(a).getComputedStyle(a)}function Qb(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||"").toLowerCase():""}function mc(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function ic(a){return a instanceof pc(a).HTMLElement}function Kb(a){return a instanceof pc(a).Element}function Hb(a){return"undefined"==
typeof ShadowRoot?!1:a instanceof pc(a).ShadowRoot||a instanceof ShadowRoot}function cc(a){const {overflow:d,overflowX:k,overflowY:H}=oc(a);return/auto|scroll|overlay|hidden/.test(d+H+k)}function Hc(a){const d=/firefox/i.test(mc());a=oc(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function Lc(){return!/^((?!chrome|android).)*safari/i.test(mc())}function Tc(a,
d,k){var H,fa,la,sa;void 0===d&&(d=!1);void 0===k&&(k=!1);var Ha=a.getBoundingClientRect();let Ta=1,Xa=1;d&&ic(a)&&(Ta=0<a.offsetWidth&&hw(Ha.width)/a.offsetWidth||1,Xa=0<a.offsetHeight&&hw(Ha.height)/a.offsetHeight||1);a=Kb(a)?pc(a):window;d=!Lc()&&k;k=(Ha.left+(d&&null!=(H=null==(fa=a.visualViewport)?void 0:fa.offsetLeft)?H:0))/Ta;H=(Ha.top+(d&&null!=(la=null==(sa=a.visualViewport)?void 0:sa.offsetTop)?la:0))/Xa;la=Ha.width/Ta;Ha=Ha.height/Xa;return{width:la,height:Ha,top:H,right:k+la,bottom:H+
Ha,left:k,x:k,y:H}}function kd(a){return(d=a,(d instanceof pc(d).Node?a.ownerDocument:a.document)||window.document).documentElement;var d}function Nd(a){return Kb(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function se(a){return Tc(kd(a)).left+Nd(a).scrollLeft}function be(a){return"html"===Qb(a)?a:a.assignedSlot||a.parentNode||(Hb(a)?a.host:null)||kd(a)}function le(a){return ic(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}
function ef(a){for(var d=pc(a),k=le(a);k&&["table","td","th"].includes(Qb(k))&&"static"===getComputedStyle(k).position;)k=le(k);if(!k||"html"!==Qb(k)&&("body"!==Qb(k)||"static"!==getComputedStyle(k).position||Hc(k))){if(!k)a:{a=be(a);for(Hb(a)&&(a=a.host);ic(a)&&!["html","body"].includes(Qb(a));){if(Hc(a)){k=a;break a}a=a.parentNode}k=null}d=k||d}return d}function pf(a){if(ic(a))return{width:a.offsetWidth,height:a.offsetHeight};a=Tc(a);return{width:a.width,height:a.height}}function ne(a){const d=
be(a);return["html","body","#document"].includes(Qb(d))?a.ownerDocument.body:ic(d)&&cc(d)?d:ne(d)}function sg(a,d){var k;void 0===d&&(d=[]);var H=ne(a);a=H===(null==(k=a.ownerDocument)?void 0:k.body);k=pc(H);H=a?[k].concat(k.visualViewport||[],cc(H)?H:[]):H;d=d.concat(H);return a?d:d.concat(sg(H))}function Pg(a,d,k){return"viewport"===d?ym(function(H,fa){var la=pc(H),sa=kd(H);la=la.visualViewport;H=sa.clientWidth;sa=sa.clientHeight;let Ha=0,Ta=0;if(la){H=la.width;sa=la.height;const Xa=Lc();(Xa||!Xa&&
"fixed"===fa)&&(Ha=la.offsetLeft,Ta=la.offsetTop)}return{width:H,height:sa,x:Ha,y:Ta}}(a,k)):Kb(d)?function(H,fa){var la=Tc(H,!1,"fixed"===fa);fa=la.top+H.clientTop;la=la.left+H.clientLeft;return{top:fa,left:la,x:la,y:fa,right:la+H.clientWidth,bottom:fa+H.clientHeight,width:H.clientWidth,height:H.clientHeight}}(d,k):ym(function(H){var fa;const la=kd(H);var sa=Nd(H);const Ha=null==(fa=H.ownerDocument)?void 0:fa.body;fa=Pu(la.scrollWidth,la.clientWidth,Ha?Ha.scrollWidth:0,Ha?Ha.clientWidth:0);const Ta=
Pu(la.scrollHeight,la.clientHeight,Ha?Ha.scrollHeight:0,Ha?Ha.clientHeight:0);H=-sa.scrollLeft+se(H);sa=-sa.scrollTop;return"rtl"===oc(Ha||la).direction&&(H+=Pu(la.clientWidth,Ha?Ha.clientWidth:0)-fa),{width:fa,height:Ta,x:H,y:sa}}(kd(a)))}function Sf(a){const d=sg(a),k=["absolute","fixed"].includes(oc(a).position)&&ic(a)?ef(a):a;return Kb(k)?d.filter(H=>{var fa;if(fa=Kb(H))a:if(fa=null==k.getRootNode?void 0:k.getRootNode(),H.contains(k))fa=!0;else{if(fa&&Hb(fa)){fa=k;do{if(fa&&H===fa){fa=!0;break a}fa=
fa.parentNode||fa.host}while(fa)}fa=!1}return fa&&"body"!==Qb(H)}):[]}function Pf(a,d,k,H){void 0===H&&(H={});const {ancestorScroll:fa=!0,ancestorResize:la=!0,elementResize:sa=!0,animationFrame:Ha=!1}=H,Ta=fa&&!Ha,Xa=la&&!Ha,eb=Ta||Xa?[...(Kb(a)?sg(a):[]),...sg(d)]:[];eb.forEach(Fb=>{Ta&&Fb.addEventListener("scroll",k,{passive:!0});Xa&&Fb.addEventListener("resize",k)});let ib,Bb=null;if(sa){let Fb=!0;Bb=new ResizeObserver(()=>{Fb||k();Fb=!1});Kb(a)&&!Ha&&Bb.observe(a);Bb.observe(d)}let Mb=Ha?Tc(a):
null;return Ha&&function $b(){const nc=Tc(a);!Mb||nc.x===Mb.x&&nc.y===Mb.y&&nc.width===Mb.width&&nc.height===Mb.height||k();Mb=nc;ib=requestAnimationFrame($b)}(),k(),()=>{var $b;eb.forEach(nc=>{Ta&&nc.removeEventListener("scroll",k);Xa&&nc.removeEventListener("resize",k)});null==($b=Bb)||$b.disconnect();Bb=null;Ha&&cancelAnimationFrame(ib)}}function Ig(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let k,H;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var fa=
a.length;if(fa!=d.length)return!1;for(k=fa;0!==k--;)if(!Ig(a[k],d[k]))return!1;return!0}H=Object.keys(a);fa=H.length;if(fa!==Object.keys(d).length)return!1;for(k=fa;0!==k--;)if(!Object.prototype.hasOwnProperty.call(d,H[k]))return!1;for(k=fa;0!==k--;)if(fa=H[k],!("_owner"===fa&&a.$$typeof||Ig(a[fa],d[fa])))return!1;return!0}return a!==a&&d!==d}function Ug(a){const d=Co.useRef(a);by(()=>{d.current=a});return d}function Uf(a){let {middleware:d,placement:k="bottom",strategy:H="absolute",whileElementsMounted:fa}=
void 0===a?{}:a;const la=Co.useRef(null),sa=Co.useRef(null),Ha=Ug(fa),Ta=Co.useRef(null),[Xa,eb]=Co.useState({x:null,y:null,strategy:H,placement:k,middlewareData:{}}),[ib,Bb]=Co.useState(d);Ig(null==ib?void 0:ib.map(bc=>{({options:bc}=bc);return bc}),null==d?void 0:d.map(bc=>{({options:bc}=bc);return bc}))||Bb(d);const Mb=Co.useCallback(()=>{la.current&&sa.current&&rG(la.current,sa.current,{middleware:ib,placement:k,strategy:H}).then(bc=>{Fb.current&&sG.flushSync(()=>{eb(bc)})})},[ib,k,H]);by(()=>
{Fb.current&&Mb()},[Mb]);const Fb=Co.useRef(!1);by(()=>{Fb.current=!0;return()=>{Fb.current=!1}},[]);const $b=Co.useCallback(()=>{"function"===typeof Ta.current&&(Ta.current(),Ta.current=null);if(la.current&&sa.current)if(Ha.current){const bc=Ha.current(la.current,sa.current,Mb);Ta.current=bc}else Mb()},[Mb,Ha]),nc=Co.useCallback(bc=>{la.current=bc;$b()},[$b]),Sb=Co.useCallback(bc=>{sa.current=bc;$b()},[$b]),gc=Co.useMemo(()=>({reference:la,floating:sa}),[]);return Co.useMemo(()=>Te(Xd({},Xa),{update:Mb,
refs:gc,reference:nc,floating:Sb}),[Xa,Mb,gc,nc,Sb])}function Yh(a){const [d,k]=(0,uG.useState)(void 0);Dm(()=>{if(a){k({width:a.offsetWidth,height:a.offsetHeight});const H=new ResizeObserver(fa=>{if(Array.isArray(fa)&&fa.length){fa=fa[0];if("borderBoxSize"in fa){fa=fa.borderBoxSize;var la=Array.isArray(fa)?fa[0]:fa;fa=la.inlineSize;la=la.blockSize}else fa=a.offsetWidth,la=a.offsetHeight;k({width:fa,height:la})}});H.observe(a,{box:"border-box"});return()=>H.unobserve(a)}k(void 0)},[a]);return d}function Mj(a){return void 0!==
a}function eg(a){return null!==a}function vi(a){const [d,k="center"]=a.split("-");return[d,k]}function Sh(a,d){return(0,Qq.useReducer)((k,H)=>{H=d[k][H];return null!==H&&void 0!==H?H:k},a)}function pi(a){const [d,k]=(0,Qq.useState)(),H=(0,Qq.useRef)({}),fa=(0,Qq.useRef)(a),la=(0,Qq.useRef)("none"),[sa,Ha]=Sh(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Qq.useEffect)(()=>
{const Ta=ji(H.current);la.current="mounted"===sa?Ta:"none"},[sa]);Dm(()=>{const Ta=H.current,Xa=fa.current;if(Xa!==a){const eb=la.current,ib=ji(Ta);a?Ha("MOUNT"):"none"===ib||"none"===(null===Ta||void 0===Ta?void 0:Ta.display)?Ha("UNMOUNT"):Xa&&eb!==ib?Ha("ANIMATION_OUT"):Ha("UNMOUNT");fa.current=a}},[a,Ha]);Dm(()=>{if(d){const Ta=eb=>{const ib=ji(H.current).includes(eb.animationName);eb.target===d&&ib&&(0,EG.flushSync)(()=>Ha("ANIMATION_END"))},Xa=eb=>{eb.target===d&&(la.current=ji(H.current))};
d.addEventListener("animationstart",Xa);d.addEventListener("animationcancel",Ta);d.addEventListener("animationend",Ta);return()=>{d.removeEventListener("animationstart",Xa);d.removeEventListener("animationcancel",Ta);d.removeEventListener("animationend",Ta)}}Ha("ANIMATION_END")},[d,Ha]);return{isPresent:["mounted","unmountSuspended"].includes(sa),ref:(0,Qq.useCallback)(Ta=>{Ta&&(H.current=getComputedStyle(Ta));k(Ta)},[])}}function ji(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}
function Nh({prop:a,defaultProp:d,onChange:k=()=>{}}){const [H,fa]=Ql({defaultProp:d,onChange:k}),la=void 0!==a;d=la?a:H;const sa=ii(k);k=(0,iw.useCallback)(Ha=>{la?(Ha="function"===typeof Ha?Ha(a):Ha,Ha!==a&&sa(Ha)):fa(Ha)},[la,a,fa,sa]);return[d,k]}function Ql({defaultProp:a,onChange:d}){a=(0,iw.useState)(a);const [k]=a,H=(0,iw.useRef)(k),fa=ii(d);(0,iw.useEffect)(()=>{H.current!==k&&(fa(k),H.current=k)},[k,H,fa]);return a}function nm(a,d){const k=Math.abs(d.top-a.y),H=Math.abs(d.bottom-a.y),fa=
Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(k,H,fa,a)){case a:return"left";case fa:return"right";case k:return"top";case H:return"bottom";default:return null}}function fh(a){a=a.slice();a.sort((d,k)=>d.x<k.x?-1:d.x>k.x?1:d.y<k.y?-1:d.y>k.y?1:0);return Gj(a)}function Gj(a){if(1>=a.length)return a.slice();const d=[];for(var k=0;k<a.length;k++){for(var H=a[k];2<=d.length;){var fa=d[d.length-1],la=d[d.length-2];if((fa.x-la.x)*(H.y-la.y)>=(fa.y-la.y)*(H.x-la.x))d.pop();else break}d.push(H)}d.pop();
k=[];for(H=a.length-1;0<=H;H--){for(fa=a[H];2<=k.length;){la=k[k.length-1];const sa=k[k.length-2];if((la.x-sa.x)*(fa.y-sa.y)>=(la.y-sa.y)*(fa.x-sa.x))k.pop();else break}k.push(fa)}k.pop();return 1===d.length&&1===k.length&&d[0].x===k[0].x&&d[0].y===k[0].y?d:d.concat(k)}function Rj(a){var {side:d,content:k,sideOffset:H=10}=a;a=rf(a,["side","content","sideOffset"]);return k?(0,Fr.jsx)(QG,{delayDuration:300,children:(0,Fr.jsxs)(RG,{children:[(0,Fr.jsx)(SG,{asChild:!0,children:a.children}),(0,Fr.jsx)(TG,
{children:(0,Fr.jsxs)(UG,Te(Xd({className:"tl-tooltip-content",sideOffset:H,side:d},a),{children:[k,(0,Fr.jsx)(VG,{className:"tl-tooltip-arrow"})]}))})]})}):(0,Fr.jsx)(Fr.Fragment,{children:a.children})}function hg(a){var {className:d,tooltip:k,tooltipSide:H}=a;a=rf(a,["className","tooltip","tooltipSide"]);return(0,QB.jsx)(Rj,{content:k,side:H,children:(0,QB.jsx)("button",Xd({className:"tl-button "+(null!=d?d:"")},a))})}function Mi(a){var {toggle:d=!0,pressed:k,onPressedChange:H,className:fa,tooltip:la}=
a;a=rf(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,jy.jsx)(Rj,{content:la,children:(0,jy.jsx)("div",{className:"inline-block",children:(0,jy.jsx)(XG,Te(Xd({},a),{"data-toggle":d,className:"tl-toggle-input"+(fa?" "+fa:""),pressed:k,onPressedChange:H}))})})}function Xk(a){var d=a+"CollectionProvider";const [k,H]=hj(d),[fa,la]=k(d,{collectionRef:{current:null},itemMap:new Map}),sa=eb=>{const {scope:ib,children:Bb}=eb;eb=lq.default.useRef(null);const Mb=lq.default.useRef(new Map).current;
return lq.default.createElement(fa,{scope:ib,itemMap:Mb,collectionRef:eb},Bb)};Object.assign(sa,{displayName:d});const Ha=a+"CollectionSlot";d=lq.default.forwardRef((eb,ib)=>{const {scope:Bb,children:Mb}=eb;eb=la(Ha,Bb);ib=Tg(ib,eb.collectionRef);return lq.default.createElement(kq,{ref:ib},Mb)});Object.assign(d,{displayName:Ha});const Ta=a+"CollectionItemSlot",Xa=lq.default.forwardRef((eb,ib)=>{const {scope:Bb,children:Mb}=eb,Fb=rf(eb,["scope","children"]),$b=lq.default.useRef(null);eb=Tg(ib,$b);
const nc=la(Ta,Bb);lq.default.useEffect(()=>{nc.itemMap.set($b,Xd({ref:$b},Fb));return()=>void nc.itemMap.delete($b)});return lq.default.createElement(kq,{["data-radix-collection-item"]:"",ref:eb},Mb)});Object.assign(Xa,{displayName:Ta});return[{Provider:sa,Slot:d,ItemSlot:Xa},function(eb){const ib=la(a+"CollectionConsumer",eb);return lq.default.useCallback(()=>{const Bb=ib.collectionRef.current;if(!Bb)return[];const Mb=Array.from(Bb.querySelectorAll("[data-radix-collection-item]"));return Array.from(ib.itemMap.values()).sort((Fb,
$b)=>Mb.indexOf(Fb.ref.current)-Mb.indexOf($b.ref.current))},[ib.collectionRef,ib.itemMap])},H]}function jo(a){const d=(0,TB.useContext)(YG);return a||d||"ltr"}function Jh(){(0,ZG.useEffect)(()=>{var a,d;const k=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=k[0])&&void 0!==a?a:op());document.body.insertAdjacentElement("beforeend",null!==(d=k[1])&&void 0!==d?d:op());ky++;return()=>{1===ky&&document.querySelectorAll("[data-radix-focus-guard]").forEach(H=>
H.remove());ky--}},[])}function op(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return a}function yj(a,{select:d=!1}={}){const k=document.activeElement;for(const H of a)if(Ui(H,{select:d}),document.activeElement!==k)break}function Nj(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:k=>{const H="INPUT"===k.tagName&&"hidden"===k.type;
return k.disabled||k.hidden||H?NodeFilter.FILTER_SKIP:0<=k.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function Zh(a,d){for(const k of a)if(!to(k,{upTo:d}))return k}function to(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Ui(a,{select:d=!1}={}){if(a&&a.focus){const k=document.activeElement;a.focus({preventScroll:!0});
a!==k&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function Lm(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function qp(a){return a.filter(d=>"A"!==d.tagName)}function bn(a,d,k){a=a.key;k="rtl"!==k?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(k))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(k))return fH[k]}function Kh(a){const d=document.activeElement;for(const k of a){if(k===d)break;k.focus();
if(document.activeElement!==d)break}}function vh(a,d){return a.map((k,H)=>a[(d+H)%a.length])}function Fj(a,d){var k=(0,jH.useState)(function(){return{value:a,callback:d,facade:{get current(){return k.value},set current(H){var fa=k.value;fa!==H&&(k.value=H,k.callback(H,fa))}}}})[0];k.callback=d;return k.facade}function ko(a,d){return Fj(d||null,function(k){return a.forEach(function(H){"function"===typeof H?H(k):H&&(H.current=k);return H})})}function sn(a){return a}function tl(a,d){void 0===d&&(d=sn);
var k=[],H=!1;return{read:function(){if(H)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return k.length?k[k.length-1]:a},useMedium:function(fa){var la=d(fa,H);k.push(la);return function(){k=k.filter(function(sa){return sa!==la})}},assignSyncMedium:function(fa){for(H=!0;k.length;){var la=k;k=[];la.forEach(fa)}k={push:function(sa){return fa(sa)},filter:function(){return k}}},assignMedium:function(fa){H=!0;var la=[];if(k.length){var sa=
k;k=[];sa.forEach(fa);la=k}var Ha=function(){var Ta=la;la=[];Ta.forEach(fa)};Promise.resolve().then(Ha);k={push:function(Ta){la.push(Ta);Promise.resolve().then(Ha)},filter:function(Ta){la=la.filter(Ta);return k}}}}}function lo(a){const d=document.activeElement;for(const k of a){if(k===d)break;k.focus();if(document.activeElement!==d)break}}function rp(a,d){return a.map((k,H)=>a[(d+H)%a.length])}function Hj(a,d,k){const H=1<d.length&&Array.from(d).every(la=>la===d[0])?d[0]:d,fa=k?a.indexOf(k):-1;a=
rp(a,Math.max(fa,0));1===H.length&&(a=a.filter(la=>la!==k));a=a.find(la=>la.toLowerCase().startsWith(H.toLowerCase()));return a!==k?a:void 0}function Qm(a){return d=>"mouse"===d.pointerType?a(d):void 0}function nn(a,[d,k]){return Math.min(k,Math.max(d,a))}function Dn(a){const d=(0,By.useRef)({value:a,previous:a});return(0,By.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function fi(a=[],d,k){a=[...a];a[k]=d;return a.sort((H,
fa)=>H-fa)}function Ri(a,d,k){return 100/(k-d)*(a-d)}function pp(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function Tn(a,d){if(1===a.length)return 0;a=a.map(H=>Math.abs(H-d));const k=Math.min(...a);return a.indexOf(k)}function wl(a,d,k){a/=2;const H=xl([0,50],[0,a]);return(a-H(d)*k)*k}function En(a){return a.slice(0,-1).map((d,k)=>a[k+1]-d)}function xl(a,d){return k=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(k-a[0])}function om(a,d){d=Math.pow(10,
d);return Math.round(a*d)/d}function Fn(a){function d(Xa){return Xa?(0,Bk.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Xa},children:(0,Bk.jsx)("div",{className:`w-full h-full bg-${Xa}-500`})}):(0,Bk.jsx)("div",{className:"tl-color-bg",children:(0,Bk.jsx)(kh,{name:"color-swatch"})})}var {color:k,opacity:H,popoverSide:fa,setColor:la,setOpacity:sa}=a;a=rf(a,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:Ha}}=xe.default.useContext(Gi),Ta=xe.default.useMemo(()=>
{let Xa="";return Hl(eb=>{la(Xa)},100,eb=>{Xa=eb.target.value})},[]);return(0,Bk.jsx)(In,Te(Xd({},a),{border:!0,arrow:!0,side:fa,label:(0,Bk.jsx)(Rj,{content:Ha("whiteboard/color"),side:fa,sideOffset:14,children:d(k)}),children:(0,Bk.jsxs)("div",{className:"p-1",children:[(0,Bk.jsx)("div",{className:"tl-color-palette",children:Object.values(hs).map(Xa=>(0,Bk.jsx)("button",{className:`tl-color-drip m-1${Xa===k?" active":""}`,onClick:()=>la(Xa),children:d(Xa)},Xa))}),(0,Bk.jsxs)("div",{className:"flex items-center tl-custom-color",
children:[(0,Bk.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${Oi(k)?"":"active"}`,children:(0,Bk.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,Bk.jsx)("input",Xd({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(k)?k:"#000000",onChange:Ta,style:{opacity:Oi(k)?0:1}},a))})}),(0,Bk.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:Ha("whiteboard/select-custom-color")})]}),sa&&(0,Bk.jsx)("div",
{className:"mx-1 my-2",children:(0,Bk.jsxs)(ml,{defaultValue:[null!=H?H:0],onValueCommit:Xa=>sa(Xa[0]),max:1,step:.1,"aria-label":Ha("whiteboard/opacity"),className:"tl-slider-root",children:[(0,Bk.jsx)(bv,{className:"tl-slider-track",children:(0,Bk.jsx)(ck,{className:"tl-slider-range"})}),(0,Bk.jsx)(oq,{className:"tl-slider-thumb"})]})})]})}))}function Uh(a,d){a&&(0,Jn.flushSync)(()=>a.dispatchEvent(d))}function Po(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=ii(a),
H=(0,Bl.useRef)(!1),fa=(0,Bl.useRef)(()=>{});(0,Bl.useEffect)(()=>{const la=Ha=>{if(Ha.target&&!H.current){let Ta=function(){mo("dismissableLayer.pointerDownOutside",k,Xa,{discrete:!0})};const Xa={originalEvent:Ha};"touch"===Ha.pointerType?(d.removeEventListener("click",fa.current),fa.current=Ta,d.addEventListener("click",fa.current,{once:!0})):Ta()}H.current=!1},sa=window.setTimeout(()=>{d.addEventListener("pointerdown",la)},0);return()=>{window.clearTimeout(sa);d.removeEventListener("pointerdown",
la);d.removeEventListener("click",fa.current)}},[d,k]);return{onPointerDownCapture:()=>H.current=!0}}function Yk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=ii(a),H=(0,Bl.useRef)(!1);(0,Bl.useEffect)(()=>{const fa=la=>{la.target&&!H.current&&mo("dismissableLayer.focusOutside",k,{originalEvent:la},{discrete:!1})};d.addEventListener("focusin",fa);return()=>d.removeEventListener("focusin",fa)},[d,k]);return{onFocusCapture:()=>H.current=!0,onBlurCapture:()=>H.current=
!1}}function pm(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function mo(a,d,k,{discrete:H}){const fa=k.originalEvent.target;k=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:k});d&&fa.addEventListener(a,d,{once:!0});H?Uh(fa,k):fa.dispatchEvent(k)}function dn(a,{select:d=!1}={}){const k=document.activeElement;for(const H of a)if(Dl(H,{select:d}),document.activeElement!==k)break}function Np(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,
{acceptNode:k=>{const H="INPUT"===k.tagName&&"hidden"===k.type;return k.disabled||k.hidden||H?NodeFilter.FILTER_SKIP:0<=k.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function no(a,d){for(const k of a)if(!jl(k,{upTo:d}))return k}function jl(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Dl(a,{select:d=!1}=
{}){if(a&&a.focus){const k=document.activeElement;a.focus({preventScroll:!0});a!==k&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function tn(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function ug(a){return a.filter(d=>"A"!==d.tagName)}function Pp(a){return void 0!==a}function Op(a){return null!==a}function un(a){const [d,k="center"]=a.split("-");return[d,k]}function Gl(a){const d=ii(a),k=(0,kf.useRef)(""),H=(0,kf.useRef)(0);a=(0,kf.useCallback)(la=>{la=k.current+la;
d(la);(function Ta(Ha){k.current=Ha;window.clearTimeout(H.current);""!==Ha&&(H.current=window.setTimeout(()=>Ta(""),1E3))})(la)},[d]);const fa=(0,kf.useCallback)(()=>{k.current="";window.clearTimeout(H.current)},[]);(0,kf.useEffect)(()=>()=>window.clearTimeout(H.current),[]);return[k,a,fa]}function Zl(a,d,k){const H=1<d.length&&Array.from(d).every(la=>la===d[0])?d[0]:d,fa=k?a.indexOf(k):-1;a=El(a,Math.max(fa,0));1===H.length&&(a=a.filter(la=>la!==k));a=a.find(la=>la.textValue.toLowerCase().startsWith(H.toLowerCase()));
return a!==k?a:void 0}function El(a,d){return a.map((k,H)=>a[(d+H)%a.length])}function $l(a){var {options:d,tooltip:k,popoverSide:H,chevron:fa=!0,value:la,onValueChange:sa}=a;a=rf(a,"options tooltip popoverSide chevron value onValueChange".split(" "));const [Ha,Ta]=oC.useState(!1);return(0,Lg.jsx)("div",Te(Xd({},a),{className:"tl-select-input",children:(0,Lg.jsxs)(Rr,{open:Ha,onOpenChange:Ta,value:la,onValueChange:sa,children:[(0,Lg.jsx)(Rj,{content:k,side:H,children:(0,Lg.jsxs)(yC,{className:"tl-select-input-trigger",
children:[(0,Lg.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,Lg.jsx)(AC,{})}),fa&&(0,Lg.jsx)(BC,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,Lg.jsx)(kh,{name:Ha?"chevron-up":"chevron-down"})})]})}),(0,Lg.jsx)(Em,{className:"tl-select-input-portal",children:(0,Lg.jsxs)(Ny,{className:"tl-select-input-content",side:H,position:"popper",sideOffset:14,align:"center",onKeyDown:Xa=>Xa.stopPropagation(),children:[(0,Lg.jsx)(CC,{}),(0,Lg.jsx)(zC,{className:"tl-select-input-viewport",
children:d.map(Xa=>(0,Lg.jsx)($n,{className:"tl-select-input-select-item",value:Xa.value,children:(0,Lg.jsx)(td,{children:Xa.label})},Xa.value))}),(0,Lg.jsx)(Hh,{})]})})]})}))}function Un(a){var {scaleLevel:d,compact:k,popoverSide:H}=a;rf(a,["scaleLevel","compact","popoverSide"]);const fa=Yf();({handlers:{t:a}}=DC.default.useContext(Gi));const la=[{label:k?"XS":a("whiteboard/extra-small"),value:"xs"},{label:k?"SM":a("whiteboard/small"),value:"sm"},{label:k?"MD":a("whiteboard/medium"),value:"md"},
{label:k?"LG":a("whiteboard/large"),value:"lg"},{label:k?"XL":a("whiteboard/extra-large"),value:"xl"},{label:k?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,iv.jsx)($l,{tooltip:a("whiteboard/scale-level"),options:la,value:d,popoverSide:H,chevron:!k,onValueChange:sa=>{fa.api.setScaleLevel(sa)}})}function Fl(a,d){return function(k){return a(d(k))}}function cn(a,d){return d(a)}function Xi(a,d){return function(k){return a(d,k)}}function bm(a,d){return function(){return a(d)}}function Nk(a,d){d(a);
return a}function Vi(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return d}function Qp(a){a()}function Mm(a){return function(){return a}}function oo(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(){d.map(Qp)}}function Yi(){}function qh(a,d){return a(1,d)}function vn(a,d){a(0,d)}function vp(a){a(2)}function Jq(a){return a(4)}function Hf(a,d){return qh(a,Xi(d,0))}function zj(a,d){var k=a(1,function(H){k();d(H)});return k}function xg(){var a=
[];return function(d,k){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(k),function(){var H=a.indexOf(k);-1<H&&a.splice(H,1)};case 0:a.slice().forEach(function(H){H(k)});break;default:throw Error("unrecognized action "+d);}}}function Rf(a){var d=a,k=xg();return function(H,fa){switch(H){case 1:fa(d);break;case 0:d=fa;break;case 4:return d}return k(H,fa)}}function Qo(a){var d,k;return function(H,fa){switch(H){case 1:if(fa){if(k===fa)break;d&&d();k=fa;return d=a(1,fa)}d&&d();return Yi;
case 2:d&&d();k=null;break;default:throw Error("unrecognized action "+H);}}}function Sj(a){return Nk(xg(),function(d){return Hf(a,d)})}function Wi(a,d){return Nk(Rf(d),function(k){return Hf(a,k)})}function rj(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(H){return d.reduceRight(cn,H)}}function af(a){for(var d=arguments.length,k=Array(1<d?d-1:0),H=1;H<d;H++)k[H-1]=arguments[H];var fa=rj.apply(void 0,k);return function(la,sa){switch(la){case 1:return qh(a,fa(sa));
case 2:a(2);break;default:throw Error("unrecognized action "+la);}}}function Vh(a,d){return a===d}function qi(a){void 0===a&&(a=Vh);var d;return function(k){return function(H){a(d,H)||(d=H,k(H))}}}function wh(a){return function(d){return function(k){a(k)&&d(k)}}}function Wf(a){return function(d){return Fl(d,a)}}function qm(a){return function(d){return function(){return d(a)}}}function Rl(a,d){return function(k){return function(H){return k(d=a(d,H))}}}function oj(a){return function(d){return function(k){0<
a?a--:d(k)}}}function Am(a){var d,k;return function(H){return function(fa){d=fa;k||=setTimeout(function(){k=void 0;H(d)},a)}}}function Rm(a){var d,k;return function(H){return function(fa){d=fa;k&&clearTimeout(k);k=setTimeout(function(){H(d)},a)}}}function Qg(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];var H=Array(d.length),fa=0,la=null,sa=Math.pow(2,d.length)-1;d.forEach(function(Ha,Ta){var Xa=Math.pow(2,Ta);qh(Ha,function(eb){var ib=fa;fa|=Xa;H[Ta]=eb;ib!==sa&&fa===sa&&
la&&(la(),la=null)})});return function(Ha){return function(Ta){var Xa=function(){return Ha([Ta].concat(H))};fa===sa?Xa():la=Xa}}}function yo(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(H,fa){switch(H){case 1:return oo.apply(void 0,d.map(function(la){return la(1,fa)}));case 2:break;default:throw Error("unrecognized action "+H);}}}function Bh(a,d){void 0===d&&(d=Vh);return af(a,qi(d))}function Cj(){for(var a=xg(),d=arguments.length,k=Array(d),H=0;H<d;H++)k[H]=
arguments[H];var fa=Array(k.length),la=0,sa=Math.pow(2,k.length)-1;k.forEach(function(Ha,Ta){var Xa=Math.pow(2,Ta);qh(Ha,function(eb){fa[Ta]=eb;la|=Xa;la===sa&&a(0,fa)})});return function(Ha,Ta){switch(Ha){case 1:return la===sa&&Ta(fa),a(1,Ta);case 2:a(2);break;default:throw Error("unrecognized action "+Ha);}}}function Qh(a,d,k){void 0===d&&(d=[]);k=(void 0===k?{singleton:!0}:k).singleton;return{id:Symbol(),constructor:a,dependencies:d,singleton:k}}function wp(a){var d=new Map;return function fa(H){var la=
H.id,sa=H.constructor,Ha=H.dependencies;if((H=H.singleton)&&d.has(la))return d.get(la);sa=sa(Ha.map(function(Ta){return fa(Ta)}));H&&d.set(la,sa);return sa}(a)}function jr(a,d){if(null==a)return{};var k={},H=Object.keys(a),fa;for(fa=0;fa<H.length;fa++){var la=H[fa];0<=d.indexOf(la)||(k[la]=a[la])}return k}function Kq(a,d){if(a){if("string"===typeof a)return Ro(a,d);var k=Object.prototype.toString.call(a).slice(8,-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);
if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return Ro(a,d)}}function Ro(a,d){if(null==d||d>a.length)d=a.length;for(var k=0,H=Array(d);k<d;k++)H[k]=a[k];return H}function Gn(a,d){var k="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=k.call(a)).next.bind(k);if(Array.isArray(a)||(k=Kq(a))||d&&a&&"number"===typeof a.length){k&&(a=k);var H=0;return function(){return H>=a.length?{done:!0}:{done:!1,value:a[H++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function qo(a,d){for(var k={},H={},fa=0,la=a.length;fa<la;)H[a[fa]]=1,fa+=1;for(var sa in d)H.hasOwnProperty(sa)||(k[sa]=d[sa]);return k}function wj(a,d,k){function H(ib,Bb){ib.propsReady&&(0,ib.propsReady)(0,!1);for(var Mb=Gn(sa),Fb;!(Fb=Mb()).done;)Fb=Fb.value,(0,ib[d.required[Fb]])(0,Bb[Fb]);for(Mb=Gn(Ha);!(Fb=Mb()).done;)if(Fb=Fb.value,Fb in Bb)(0,ib[d.optional[Fb]])(0,Bb[Fb]);ib.propsReady&&(0,ib.propsReady)(0,!0)}function fa(ib){return Ta.reduce(function(Bb,Mb){Bb[Mb]=function(Fb){(0,ib[d.methods[Mb]])(0,
Fb)};return Bb},{})}function la(ib){return Xa.reduce(function(Bb,Mb){Bb[Mb]=Qo(ib[d.events[Mb]]);return Bb},{})}var sa=Object.keys(d.required||{}),Ha=Object.keys(d.optional||{}),Ta=Object.keys(d.methods||{}),Xa=Object.keys(d.events||{}),eb=(0,Kn.createContext)({});return{Component:(0,Kn.forwardRef)(function(ib,Bb){var Mb=ib.children,Fb=jr(ib,HC),$b=(0,Kn.useState)(function(){return Nk(wp(a),function(Sb){return H(Sb,Fb)})})[0],nc=(0,Kn.useState)(bm(la,$b))[0];au(function(){for(var Sb=Gn(Xa),gc;!(gc=
Sb()).done;)if(gc=gc.value,gc in Fb)(0,nc[gc])(1,Fb[gc]);return function(){Object.values(nc).map(vp)}},[Fb,nc,$b]);au(function(){H($b,Fb)});(0,Kn.useImperativeHandle)(Bb,Mm(fa($b)));return(0,Kn.createElement)(eb.Provider,{value:$b},k?(0,Kn.createElement)(k,qo([].concat(sa,Ha,Xa),Fb),Mb):Mb)}),usePublisher:function(ib){return(0,Kn.useCallback)(Xi(vn,(0,Kn.useContext)(eb)[ib]),[ib])},useEmitterValue:function(ib){var Bb=(0,Kn.useContext)(eb)[ib];ib=(0,Kn.useState)(bm(Jq,Bb));var Mb=ib[0],Fb=ib[1];au(function(){return qh(Bb,
function($b){$b!==Mb&&Fb(Mm($b))})},[Bb,Mb]);return Mb},useEmitter:function(ib,Bb){var Mb=(0,Kn.useContext)(eb)[ib];au(function(){return Mb(1,Bb)},[Bb,Mb])}}}function hh(){return hh=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],H;for(H in k)Object.prototype.hasOwnProperty.call(k,H)&&(a[H]=k[H])}return a},hh.apply(this,arguments)}function en(a,d){if(null==a)return{};var k,H,fa={},la=Object.keys(a);for(H=0;H<la.length;H++)0<=d.indexOf(k=la[H])||(fa[k]=a[k]);return fa}
function Yn(a,d){(null==d||d>a.length)&&(d=a.length);for(var k=0,H=Array(d);k<d;k++)H[k]=a[k];return H}function Aj(a,d){var k="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=k.call(a)).next.bind(k);if(Array.isArray(a)||(k=function(fa,la){if(fa){if("string"==typeof fa)return Yn(fa,la);var sa=Object.prototype.toString.call(fa).slice(8,-1);return"Object"===sa&&fa.constructor&&(sa=fa.constructor.name),"Map"===sa||"Set"===sa?Array.from(fa):"Arguments"===sa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sa)?
Yn(fa,la):void 0}}(a))||d&&a&&"number"==typeof a.length){k&&(a=k);var H=0;return function(){return H>=a.length?{done:!0}:{done:!1,value:a[H++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function ki(a,d){void 0===d&&(d=!0);var k=(0,yh.useRef)(null),H=function(la){};if("undefined"!=typeof ResizeObserver){var fa=new ResizeObserver(function(la){la=la[0].target;null!==la.offsetParent&&a(la)});
H=function(la){la&&d?(fa.observe(la),k.current=la):(k.current&&fa.unobserve(k.current),k.current=null)}}return{ref:k,callbackRef:H}}function ni(a,d){return void 0===d&&(d=!0),ki(a,d).callbackRef}function qr(a,d,k,H,fa,la,sa){return ki(function(Ha){for(var Ta=function(ib,Bb,Mb,Fb){Mb=ib.length;if(0===Mb)return null;for(var $b=[],nc=0;nc<Mb;nc++){var Sb=ib.item(nc);if(Sb&&void 0!==Sb.dataset.index){var gc=parseInt(Sb.dataset.index),bc=parseFloat(Sb.dataset.knownSize),Dc=Bb(Sb,"offsetHeight");if(0===
Dc&&Fb("Zero-sized element, this should not happen",{child:Sb},Cl.ERROR),Dc!==bc)Sb=$b[$b.length-1],0===$b.length||Sb.size!==Dc||Sb.endIndex!==gc-1?$b.push({startIndex:gc,endIndex:gc,size:Dc}):$b[$b.length-1].endIndex++}}return $b}(Ha.children,d,0,fa),Xa=Ha.parentElement;!Xa.dataset.virtuosoScroller;)Xa=Xa.parentElement;var eb="window"===Xa.firstElementChild.dataset.viewportType;H({scrollTop:Math.max(sa?sa.scrollTop:eb?window.pageYOffset||document.documentElement.scrollTop:Xa.scrollTop,0),scrollHeight:sa?
sa.scrollHeight:eb?document.documentElement.scrollHeight:Xa.scrollHeight,viewportHeight:sa?sa.offsetHeight:eb?window.innerHeight:Xa.offsetHeight});null==la||la(function(ib,Bb,Mb){return"normal"===Bb||null!=Bb&&Bb.endsWith("px")||Mb("row-gap was not resolved to pixel value correctly",Bb,Cl.WARN),"normal"===Bb?0:parseInt(null!=Bb?Bb:"0",10)}(0,getComputedStyle(Ha).rowGap,fa));null!==Ta&&a(Ta)},k)}function ul(a,d){return Math.round(a.getBoundingClientRect()[d])}function x(a,d,k,H,fa){void 0===H&&(H=
Yi);var la=(0,yh.useRef)(null),sa=(0,yh.useRef)(null),Ha=(0,yh.useRef)(null),Ta=(0,yh.useRef)(!1),Xa=(0,yh.useCallback)(function(eb){eb=eb.target;var ib=eb===window||eb===document,Bb=ib?window.pageYOffset||document.documentElement.scrollTop:eb.scrollTop,Mb=ib?document.documentElement.scrollHeight:eb.scrollHeight,Fb=ib?window.innerHeight:eb.offsetHeight;eb=function(){a({scrollTop:Math.max(Bb,0),scrollHeight:Mb,viewportHeight:Fb})};Ta.current?(0,IC.flushSync)(eb):eb();Ta.current=!1;null!==sa.current&&
(Bb===sa.current||0>=Bb||Bb===Mb-Fb)&&(sa.current=null,d(!0),Ha.current&&(clearTimeout(Ha.current),Ha.current=null))},[a,d]);return(0,yh.useEffect)(function(){var eb=fa||la.current;return H(fa||la.current),Xa({target:eb}),eb.addEventListener("scroll",Xa,{passive:!0}),function(){H(null);eb.removeEventListener("scroll",Xa)}},[la,Xa,k,H,fa]),{scrollerRef:la,scrollByCallback:function(eb){Ta.current=!0;la.current.scrollBy(eb)},scrollToCallback:function(eb){var ib=la.current;if(ib&&!("offsetHeight"in ib&&
0===ib.offsetHeight)){var Bb,Mb,Fb,$b="smooth"===eb.behavior;if(ib===window?(Mb=Math.max(ul(document.documentElement,"height"),document.documentElement.scrollHeight),Bb=window.innerHeight,Fb=document.documentElement.scrollTop):(Mb=ib.scrollHeight,Bb=ul(ib,"height"),Fb=ib.scrollTop),eb.top=Math.ceil(Math.max(Math.min(Mb-Bb,eb.top),0)),1.01>Math.abs(Bb-Mb)||eb.top===Fb)return a({scrollTop:Fb,scrollHeight:Mb,viewportHeight:Bb}),void($b&&d(!0));$b?(sa.current=eb.top,Ha.current&&clearTimeout(Ha.current),
Ha.current=setTimeout(function(){Ha.current=null;sa.current=null;d(!0)},1E3)):sa.current=null;ib.scrollTo(eb)}}}}function ca(a,d,k,H,fa){return void 0===H&&(H=yi),void 0===fa&&(fa=yi),{k:a,v:d,lvl:k,l:H,r:fa}}function Aa(a,d){if(a===yi)return yi;var k=a.k,H=a.l,fa=a.r;if(d===k){if(H===yi)return fa;if(fa===yi)return H;d=pb(H);return sd(xc(a,{k:d[0],v:d[1],l:Wb(H)}))}return sd(xc(a,d<k?{l:Aa(H,d)}:{r:Aa(fa,d)}))}function xa(a,d,k){return(void 0===k&&(k="k"),a===yi)?[-Infinity,void 0]:a[k]===d?[a.k,
a.v]:a[k]<d?(d=xa(a.r,d,k),-Infinity===d[0]?[a.k,a.v]:d):xa(a.l,d,k)}function Ga(a,d,k){return a===yi?ca(d,k,1):d===a.k?xc(a,{k:d,v:k}):re(Bf(xc(a,d<a.k?{l:Ga(a.l,d,k)}:{r:Ga(a.r,d,k)})))}function $a(a,d,k){if(a===yi)return[];var H=a.k,fa=a.v,la=a.r,sa=[];return H>d&&(sa=sa.concat($a(a.l,d,k))),H>=d&&H<=k&&sa.push({k:H,v:fa}),H<=k&&(sa=sa.concat($a(la,d,k))),sa}function lb(a){return a===yi?[]:[].concat(lb(a.l),[{k:a.k,v:a.v}],lb(a.r))}function pb(a){return a.r===yi?[a.k,a.v]:pb(a.r)}function Wb(a){return a.r===
yi?a.l:sd(xc(a,{r:Wb(a.r)}))}function xc(a,d){return ca(void 0!==d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==d.r?d.r:a.r)}function Nc(a){return a===yi||a.lvl>a.r.lvl}function sd(a){var d=a.l,k=a.r,H=a.lvl;if(k.lvl>=H-1&&d.lvl>=H-1)return a;if(H>k.lvl+1){if(Nc(d))return Bf(xc(a,{lvl:H-1}));if(d===yi||d.r===yi)throw Error("Unexpected empty nodes");return xc(d.r,{l:xc(d,{r:d.r.l}),r:xc(a,{l:d.r.r,lvl:H-1}),lvl:H})}if(Nc(a))return re(xc(a,{lvl:H-1}));if(k===
yi||k.l===yi)throw Error("Unexpected empty nodes");d=k.l;var fa=Nc(d)?k.lvl-1:k.lvl;return xc(d,{l:xc(a,{r:d.l,lvl:H-1}),r:re(xc(k,{l:d.r,lvl:fa})),lvl:d.lvl+1})}function yd(a,d,k){return a===yi?[]:zd($a(a,xa(a,d)[0],k),function(H){return{index:H.k,value:H.v}})}function zd(a,d){var k=a.length;if(0===k)return[];var H=d(a[0]),fa=H.index;H=H.value;for(var la=[],sa=1;sa<k;sa++){var Ha=d(a[sa]),Ta=Ha.index;Ha=Ha.value;la.push({start:fa,end:Ta-1,value:H});fa=Ta;H=Ha}return la.push({start:fa,end:Infinity,
value:H}),la}function re(a){var d=a.r,k=a.lvl;return d===yi||d.r===yi||d.lvl!==k||d.r.lvl!==k?a:xc(d,{l:xc(a,{r:d.l}),lvl:k+1})}function Bf(a){var d=a.l;return d===yi||d.lvl!==a.lvl?a:xc(d,{r:xc(a,{l:d.r})})}function yg(a,d,k,H){void 0===H&&(H=0);for(var fa=a.length-1;H<=fa;){var la=Math.floor((H+fa)/2),sa=k(a[la],d);if(0===sa)return la;if(-1===sa){if(2>fa-H)return la-1;fa=la-1}else{if(fa===H)return la;H=la+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);
}function Oj(a){var d=a.size,k=a.startIndex,H=a.endIndex;return function(fa){return fa.start===k&&(fa.end===H||Infinity===fa.end)&&fa.value===d}}function tg(a,d){a=a.index;return d===a?0:d<a?-1:1}function Ah(a,d){a=a.offset;return d===a?0:d<a?-1:1}function ti(a){return{index:a.index,value:a}}function Ji(a,d,k,H){var fa=0,la=0,sa=0,Ha;0!==d?(sa=a[Ha=yg(a,d-1,tg)].offset,la=xa(k,d-1),fa=la[0],la=la[1],a.length&&a[Ha].size===xa(k,d)[1]&&--Ha,a=a.slice(0,Ha+1)):a=[];for(d=Aj(yd(k,d,Infinity));!(k=d()).done;)Ha=
k.value,k=Ha.start,Ha=Ha.value,fa=k-fa,sa=fa*la+sa+fa*H,a.push({offset:sa,size:Ha,index:k}),fa=k,la=Ha;return{offsetTree:a,lastIndex:fa,lastOffset:sa,lastSize:la}}function mi(a,d){var k=d[0],H=d[1],fa=d[3];0<k.length&&(0,d[2])("received item sizes",k,Cl.DEBUG);var la=a.sizeTree;d=la;var sa=0;if(0<H.length&&la===yi&&2===k.length){var Ha=k[0].size,Ta=k[1].size;d=H.reduce(function(eb,ib){return Ga(Ga(eb,ib,Ha),ib+1,Ta)},d)}else k=function(eb,ib){var Bb,Mb=eb===yi?0:Infinity;for(ib=Aj(ib);!(Bb=ib()).done;){var Fb=
Bb.value;Bb=Fb.size;var $b=Fb.startIndex,nc=Fb.endIndex;if(Mb=Math.min(Mb,$b),eb===yi)eb=Ga(eb,0,Bb);else{var Sb=yd(eb,$b-1,nc+1);if(!Sb.some(Oj(Fb))){var gc,bc=Fb=!1;for(Sb=Aj(Sb);!(gc=Sb()).done;){var Dc=gc.value;gc=Dc.start;var Ic=Dc.end;Dc=Dc.value;Fb?(nc>=gc||Bb===Dc)&&(eb=Aa(eb,gc)):(bc=Dc!==Bb,Fb=!0);Ic>nc&&nc>=gc&&Dc!==Bb&&(eb=Ga(eb,nc+1,Dc))}bc&&(eb=Ga(eb,$b,Bb))}}}return[eb,Mb]}(d,k),d=k[0],sa=k[1];if(d===la)return a;a=Ji(a.offsetTree,sa,d,fa);var Xa=a.offsetTree;return{sizeTree:d,offsetTree:Xa,
lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:H.reduce(function(eb,ib){return Ga(eb,ib,Wg(ib,Xa,fa))},yi),groupIndices:H}}function Wg(a,d,k){if(0===d.length)return 0;d=d[yg(d,a,tg)];a-=d.index;a=d.size*a+(a-1)*k+d.offset;return 0<a?a+k:a}function ai(a,d,k){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+1;a=Ph("LAST"===a.index?k:a.index,d);return Math.max(0,a,Math.min(k,a))}function Ph(a,d){if(d.groupOffsetTree===yi)return a;for(var k=0;d.groupIndices[k]<=
a+k;)k++;return a+k}function Fh(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&yH||(a.behavior="auto"),a.offset||(a.offset=0),a}function tk(a){return!!a&&("smooth"===a?"smooth":"auto")}function qk(a){return a.reduce(function(d,k){return d.groupIndices.push(d.totalCount),d.totalCount+=k+1,d},{totalCount:0,groupIndices:[]})}function Tj(a,d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function fn(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function mn(a,
d,k){return"number"==typeof a?"up"===k&&"top"===d||"down"===k&&"bottom"===d?a:0:"up"===k?"top"===d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function Vo(a,d,k){if(0===a.length)return[];if(d.groupOffsetTree===yi)return a.map(function(Ta){return hh({},Ta,{index:Ta.index+k,originalIndex:Ta.index})});var H,fa=[],la=yd(d.groupOffsetTree,a[0].index,a[a.length-1].index),sa=void 0,Ha=0;for(a=Aj(a);!(H=a()).done;)H=H.value,(!sa||sa.end<H.index)&&(sa=la.shift(),Ha=d.groupIndices.indexOf(sa.start)),fa.push(hh({},
H.index===sa.start?{type:"group",index:Ha}:{index:H.index-(Ha+1)+k,groupIndex:Ha},{size:H.size,offset:H.offset,originalIndex:H.index,data:H.data}));return fa}function Gq(a,d,k,H,fa,la){var sa=0,Ha=0;0<a.length&&(sa=a[0].offset,Ha=a[a.length-1],Ha=Ha.offset+Ha.size);var Ta=k-fa.lastIndex,Xa=sa;H=fa.lastOffset+Ta*fa.lastSize+(Ta-1)*H-Ha;return{items:Vo(a,fa,la),topItems:Vo(d,fa,la),topListHeight:d.reduce(function(eb,ib){return ib.size+eb},0),offsetTop:sa,offsetBottom:H,top:Xa,bottom:Ha,totalCount:k,
firstItemIndex:la}}function Uo(a){var d,k=!1;return function(){return k||(k=!0,d=a()),d}}function ih(a,d){var k=(0,yh.useRef)(null),H=(0,yh.useCallback)(function(Ta){if(null!==Ta&&Ta.offsetParent){var Xa=Ta.getBoundingClientRect();Ta=Xa.width;if(d){var eb=d.getBoundingClientRect();Xa=Xa.top-eb.top;eb=eb.height-Math.max(0,Xa);Xa+=d.scrollTop}else eb=window.innerHeight-Math.max(0,Xa.top),Xa=Xa.top+window.pageYOffset;k.current={offsetTop:Xa,visibleHeight:eb,visibleWidth:Ta};a(k.current)}},[a,d]),fa=
ki(H),la=fa.callbackRef,sa=fa.ref,Ha=(0,yh.useCallback)(function(){H(sa.current)},[H,sa]);return(0,yh.useEffect)(function(){if(d){d.addEventListener("scroll",Ha);var Ta=new ResizeObserver(Ha);return Ta.observe(d),function(){d.removeEventListener("scroll",Ha);Ta.unobserve(d)}}return window.addEventListener("scroll",Ha),window.addEventListener("resize",Ha),function(){window.removeEventListener("scroll",Ha);window.removeEventListener("resize",Ha)}},[Ha,d]),la}function Zp(a){return a}function Fk(a,d){var k=
xg();return qh(k,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),Hf(k,a),k}function Bj(a,d){if("string"!=typeof a)return{context:d}}function po(a){var d=a.usePublisher,k=a.useEmitter,H=a.useEmitterValue;return ah.memo(function(fa){var la=fa.style,sa=fa.children;fa=en(fa,Yy);var Ha=d("scrollContainerState"),Ta=H("ScrollerComponent"),Xa=d("smoothScrollTargetReached"),eb=H("scrollerRef"),ib=H("context");Ha=x(Ha,
Xa,Ta,eb);Xa=Ha.scrollerRef;eb=Ha.scrollByCallback;return k("scrollTo",Ha.scrollToCallback),k("scrollBy",eb),(0,yh.createElement)(Ta,hh({ref:Xa,style:hh({},CH,la),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},fa,Bj(Ta,ib)),sa)})}function Rp(a){var d=a.usePublisher,k=a.useEmitter,H=a.useEmitterValue;return ah.memo(function(fa){var la=fa.style,sa=fa.children;fa=en(fa,QC);var Ha=d("windowScrollContainerState"),Ta=H("ScrollerComponent"),Xa=d("smoothScrollTargetReached"),eb=
H("totalListHeight"),ib=H("deviation"),Bb=H("customScrollParent"),Mb=H("context");Xa=x(Ha,Xa,Ta,Yi,Bb);var Fb=Xa.scrollerRef;Ha=Xa.scrollByCallback;Xa=Xa.scrollToCallback;return wH(function(){return Fb.current=Bb||window,function(){Fb.current=null}},[Fb,Bb]),k("windowScrollTo",Xa),k("scrollBy",Ha),(0,yh.createElement)(Ta,hh({style:hh({position:"relative"},la,0!==eb?{height:eb+ib}:{}),"data-virtuoso-scroller":!0},fa,Bj(Ta,Mb)),sa)})}function Sp(a,d,k){return Array.from({length:d-a+1}).map(function(H,
fa){return{index:fa+a,data:null==k?void 0:k[fa+a]}})}function wn(a,d){return a&&a.column===d.column&&a.row===d.row}function ro(a,d,k,H){var fa=k.height;return void 0===fa||0===H.length?{top:0,bottom:0}:{top:Zk(a,d,k,H[0].index),bottom:Zk(a,d,k,H[H.length-1].index)+fa}}function Zk(a,d,k,H){var fa=d.column;a=Hi(1,qv((a.width+fa)/(k.width+fa)));H=qv(H/a);k=H*k.height+Hi(0,H-1)*d.row;return 0<k?k+d.row:k}function cm(a,d,k){return"normal"===d||null!=d&&d.endsWith("px")||k(a+" was not resolved to pixel value correctly",
d,Cl.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function gn(a,d){gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,H){k.__proto__=H;return k};return gn(a,d)}function Yp(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;gn(a,d)}function xo(a){xo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return xo(a)}function xu(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function yq(a,d,k){yq=xu()?Reflect.construct.bind():function(H,fa,la){var sa=[null];sa.push.apply(sa,fa);H=new (Function.bind.apply(H,sa));la&&gn(H,la.prototype);return H};return yq.apply(null,arguments)}function Aq(a){var d="function"===typeof Map?new Map:void 0;Aq=function(k){function H(){return yq(k,arguments,xo(this).constructor)}if(null===k||-1===Function.toString.call(k).indexOf("[native code]"))return k;
if("function"!==typeof k)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof d){if(d.has(k))return d.get(k);d.set(k,H)}H.prototype=Object.create(k.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}});return gn(H,k)};return Aq(a)}function zu(a,d,k){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*k)}function $p(a,d,k,H){void 0===H&&(H=zu);if(0===d)return H(k,k,k);a=(a%360+360)%360/60;var fa=(1-Math.abs(2*k-1))*d,
la=fa*(1-Math.abs(a%2-1)),sa=d=0,Ha=0;0<=a&&1>a?(d=fa,sa=la):1<=a&&2>a?(d=la,sa=fa):2<=a&&3>a?(sa=fa,Ha=la):3<=a&&4>a?(sa=la,Ha=fa):4<=a&&5>a?(d=la,Ha=fa):5<=a&&6>a&&(d=fa,Ha=la);k-=fa/2;return H(d+k,sa+k,Ha+k)}function js(a){if("string"!==typeof a)throw new Zm(3);if("string"===typeof a){var d=a.toLowerCase();a=Qw[d]?"#"+Qw[d]:a}if(a.match(bD))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(cD))return d=parseFloat((parseInt(""+a[7]+a[8],
16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};if(a.match(cz))return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(Ko))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d};if(d=Xs.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+
d[3],10)};if(d=lm.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var k=Rw.exec(a);if(k){d=parseInt(""+k[1],10);var H=parseInt(""+k[2],10)/100;k=parseInt(""+k[3],10)/100;d="rgb("+$p(d,H,k)+")";H=Xs.exec(d);if(!H)throw new Zm(4,a,d);return{red:parseInt(""+H[1],10),green:parseInt(""+H[2],10),blue:parseInt(""+H[3],10)}}if(d=tv.exec(a.substring(0,50))){H=parseInt(""+d[1],
10);k=parseInt(""+d[2],10)/100;var fa=parseInt(""+d[3],10)/100;H="rgb("+$p(H,k,fa)+")";k=Xs.exec(H);if(!k)throw new Zm(4,a,H);return{red:parseInt(""+k[1],10),green:parseInt(""+k[2],10),blue:parseInt(""+k[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new Zm(5);}function so(a){a=a.toString(16);return 1===a.length?"0"+a:a}function Tp(a,d,k){return eo("#"+so(Math.round(255*a))+so(Math.round(255*d))+so(Math.round(255*k)))}function es(a,d,k){if("number"===typeof a&&
"number"===typeof d&&"number"===typeof k)return eo("#"+so(a)+so(d)+so(k));if("object"===typeof a&&void 0===d&&void 0===k)return eo("#"+so(a.red)+so(a.green)+so(a.blue));throw new Zm(6);}function ht(a){if("object"!==typeof a)throw new Zm(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?es(a.red,a.green,a.blue):"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new Zm(7);return a}if("number"===
typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return es(a);if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?$p(a.hue,a.saturation,a.lightness,Tp):"rgba("+$p(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new Zm(2);return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&
("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=$p(a.hue,a.saturation,a.lightness,Tp);else throw new Zm(1);return a}throw new Zm(8);}function kr(a,d,k){return function(){var H=k.concat(Array.prototype.slice.call(arguments));return H.length>=d?a.apply(this,H):kr(a,d,H)}}function lr(a,d){if("transparent"===d)return d;d=js(d);var k=d.red/255,H=d.green/255,fa=d.blue/255,la=Math.max(k,H,fa),sa=Math.min(k,H,fa),Ha=(la+sa)/2;if(la===sa)d=void 0!==d.alpha?{hue:0,saturation:0,
lightness:Ha,alpha:d.alpha}:{hue:0,saturation:0,lightness:Ha};else{var Ta=la-sa;sa=.5<Ha?Ta/(2-la-sa):Ta/(la+sa);switch(la){case k:k=(H-fa)/Ta+(H<fa?6:0);break;case H:k=(fa-k)/Ta+2;break;default:k=(k-H)/Ta+4}k*=60;d=void 0!==d.alpha?{hue:k,saturation:sa,lightness:Ha,alpha:d.alpha}:{hue:k,saturation:sa,lightness:Ha}}Ha=Pe;a=d.lightness-parseFloat(a);return ht(Ha({},d,{lightness:Math.max(0,Math.min(1,a))}))}function Pm(a,d){var k;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==
d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let H=null!=(k=d.fill)?k:a.props.fill;void 0===H||Oi(H)||"var(--ls-secondary-background-color)"===H||d.noFill||!LH.includes(a.props.type)||(a=kj(.3,H),d.stroke=a);return d}function is({strokeWidth:a,size:d,mode:k}){return"svg"===k?(0,ku.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,d[1]-2*a),strokeWidth:4*a}):(0,ku.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",
left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function hn(){const a=Yf();return"panning"===a.inputs.state||"pinching"===a.inputs.state}function zq({left:a,middle:d,right:k,stroke:H,strokeWidth:fa}){return(0,Vw.jsxs)("g",{children:[(0,Vw.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${k}`}),(0,Vw.jsx)("path",{d:`M ${a} L ${d} ${k}`,fill:"none",stroke:H,strokeWidth:fa,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Bq(a,
d,k){d=N(a,d,a,k).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(k=d[0])?Rd.rotWith(k,a,Math.PI/6):a;a=k?Rd.rotWith(k,a,-Math.PI/6):a;return{left:d,right:a}}function ks(a,d,k){const {left:H,right:fa}=Bq(a,d,k);return`M ${H} L ${a} ${fa}`}function Nl(a,d,k,H,fa){a=a.strokeWidth;var la=Rd.dist(d,k);a=Math.min(la/3,16*a);la=[];la.push(`M ${d} L ${k}`);H&&la.push(ks(d,k,a));fa&&la.push(ks(k,d,a));return la.join(" ")}function gs({id:a,bounds:d,
labelSize:k,offset:H,scale:fa=1}){return(0,xv.jsx)("defs",{children:(0,xv.jsxs)("mask",{id:a+"_clip",children:[(0,xv.jsx)("rect",{x:-100,y:-100,width:d.width+200,height:d.height+200,fill:"white"}),(0,xv.jsx)("rect",{x:d.width/2-k[0]/2*fa+((null==H?void 0:H[0])||0),y:d.height/2-k[1]/2*fa+((null==H?void 0:H[1])||0),width:k[0]*fa,height:k[1]*fa,rx:4*fa,ry:4*fa,fill:"black"})]})})}function Up(a,d,k,H=fa=>fa){return a*H(.5-d*(.5-k))}function Vp(a){return[-a[0],-a[1]]}function al(a,d){return[a[0]+d[0],
a[1]+d[1]]}function $k(a,d){return[a[0]-d[0],a[1]-d[1]]}function cl(a,d){return[a[0]*d,a[1]*d]}function Wp(a){return[a[1],-a[0]]}function mr(a,d){return a[0]===d[0]&&a[1]===d[1]}function Cq(a){return a[0]*a[0]+a[1]*a[1]}function Eq(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function it(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function uo(a,d,k){let H=Math.sin(k);k=Math.cos(k);let fa=a[0]-d[0];a=a[1]-d[1];return[fa*k-a*H+d[0],fa*H+a*k+d[1]]}function jn(a,d,k){return al(a,cl($k(d,a),k))}
function Xp(a,d,k){return al(a,cl(d,k))}function Dq(a,d={}){let {size:k=16,smoothing:H=.5,thinning:fa=.5,simulatePressure:la=!0,easing:sa=Hd=>Hd,start:Ha={},end:Ta={},last:Xa=!1}=d,{cap:eb=!0,easing:ib=Hd=>Hd*(2-Hd)}=Ha,{cap:Bb=!0,easing:Mb=Hd=>--Hd*Hd*Hd+1}=Ta;if(0===a.length||0>=k)return[];var Fb=a[a.length-1].runningLength;let $b=!1===Ha.taper?0:!0===Ha.taper?Math.max(k,Fb):Ha.taper,nc=!1===Ta.taper?0:!0===Ta.taper?Math.max(k,Fb):Ta.taper;var Sb=Math.pow(k*H,2);d=[];let gc=[];var bc=a.slice(0,
10).reduce((Hd,ad)=>{var ud=ad.pressure;la&&(ad=Fp(1,ad.distance/k),ud=Fp(1,1-ad),ud=Fp(1,Hd+.275*(ud-Hd)*ad));return(Hd+ud)/2},a[0].pressure),Dc=Up(k,fa,a[a.length-1].pressure,sa),Ic;let od=a[0].vector;var Cd=a[0].point;let Ge=Cd;var Yd=Cd;let ve=Ge;var lf=!1;for(var Ce=0;Ce<a.length;Ce++){var {pressure:He}=a[Ce];let {point:Hd,vector:ad,distance:ud,runningLength:ye}=a[Ce];if(Ce<a.length-1&&3>Fb-ye)continue;fa?(la&&(Dc=Fp(1,ud/k),He=Fp(1,1-Dc),He=Fp(1,bc+.275*(He-bc)*Dc)),Dc=Up(k,fa,He,sa)):Dc=k/
2;void 0===Ic&&(Ic=Dc);var Gd=ye<$b?ib(ye/$b):1,cd=Fb-ye<nc?Mb((Fb-ye)/nc):1;Dc=Math.max(.01,Dc*Math.min(Gd,cd));cd=(Ce<a.length-1?a[Ce+1]:a[Ce]).vector;let Ve=Ce<a.length-1?ad[0]*cd[0]+ad[1]*cd[1]:1;Gd=null!==Ve&&0>Ve;if(0>ad[0]*od[0]+ad[1]*od[1]&&!lf||Gd){Cd=cl(Wp(od),Dc);for(let zf=1/13,mf=0;1>=mf;mf+=zf)Yd=uo($k(Hd,Cd),Hd,ar*mf),d.push(Yd),ve=uo(al(Hd,Cd),Hd,ar*-mf),gc.push(ve);Cd=Yd;Ge=ve;Gd&&(lf=!0)}else(lf=!1,Ce===a.length-1)?(He=cl(Wp(ad),Dc),d.push($k(Hd,He)),gc.push(al(Hd,He))):(bc=cl(Wp(jn(cd,
ad,Ve)),Dc),Yd=$k(Hd,bc),(1>=Ce||Cq($k(Cd,Yd))>Sb)&&(d.push(Yd),Cd=Yd),ve=al(Hd,bc),(1>=Ce||Cq($k(Ge,ve))>Sb)&&(gc.push(ve),Ge=ve),bc=He,od=ad)}Fb=a[0].point.slice(0,2);Sb=1<a.length?a[a.length-1].point.slice(0,2):al(a[0].point,[1,1]);Yd=[];lf=[];if(1===a.length){if(!$b&&!nc||Xa){a=Xp(Fb,Eq(Wp($k(Fb,Sb))),-(Ic||Dc));d=[];for(let Hd=1/13,ad=Hd;1>=ad;ad+=Hd)d.push(uo(a,Fb,2*ar*ad));return d}}else{if(!($b||nc&&1===a.length))if(eb)for(let Hd=1/13,ad=Hd;1>=ad;ad+=Hd)Ic=uo(gc[0],Fb,ar*ad),Yd.push(Ic);else Ce=
$k(d[0],gc[0]),Ic=cl(Ce,.5),Ce=cl(Ce,.51),Yd.push($k(Fb,Ic),$k(Fb,Ce),al(Fb,Ce),al(Fb,Ic));Ic=Wp(Vp(a[a.length-1].vector));if(nc||$b&&1===a.length)lf.push(Sb);else if(Bb){a=Xp(Sb,Ic,Dc);for(let Hd=1/29,ad=Hd;1>ad;ad+=Hd)lf.push(uo(a,Sb,3*ar*ad))}else lf.push(al(Sb,cl(Ic,Dc)),al(Sb,cl(Ic,.99*Dc)),$k(Sb,cl(Ic,.99*Dc)),$k(Sb,cl(Ic,Dc)))}return d.concat(lf,gc.reverse(),Yd)}function Yj(a,d={}){var k;let {streamline:H=.5,size:fa=16,last:la=!1}=d;if(0===a.length)return[];d=.15+.85*(1-H);a=Array.isArray(a[0])?
a:a.map(({x:ib,y:Bb,pressure:Mb=.5})=>[ib,Bb,Mb]);if(2===a.length){var sa=a[1];a=a.slice(0,-1);for(var Ha=1;5>Ha;Ha++)a.push(jn(a[0],sa,Ha/4))}1===a.length&&(a=[...a,[...al(a[0],[1,1]),...a[0].slice(2)]]);sa=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ha=!1;let Ta=0,Xa=sa[0],eb=a.length-1;for(let ib=1;ib<a.length;ib++){let Bb=la&&ib===eb?a[ib].slice(0,2):jn(Xa.point,a[ib],d);if(mr(Xa.point,Bb))continue;let Mb=it(Bb,Xa.point);if(Ta+=Mb,ib<eb&&
!Ha){if(Ta<fa)continue;Ha=!0}Xa={point:Bb,pressure:0<=a[ib][2]?a[ib][2]:.5,vector:Eq($k(Xa.point,Bb)),distance:Mb,runningLength:Ta};sa.push(Xa)}return sa[0].vector=(null==(k=sa[1])?void 0:k.vector)||[0,0],sa}function xn(a,d=4/3){return(new uh(a)).exportAsSVG(d)}function Vn(a,d=4/3){return(new uh(a)).generatePreviewJsx(void 0,d)}function Nm({id:a,type:d,onRemove:k,showContent:H}){const fa=Yf(),{handlers:la}=Py.default.useContext(Gi),sa=la.t;return(0,si.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",
children:[(0,si.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,si.jsx)(Qy,{id:a,showReferenceContent:H})}),(0,si.jsx)("div",{className:"flex-1"}),la.getBlockPageName(a)!==fa.currentPage.name&&(0,si.jsx)(hg,{tooltip:sa("whiteboard/open-page"),type:"button",onClick:()=>null==la?void 0:la.redirectToPage(a),children:(0,si.jsx)(kh,{name:"open-as-page"})}),(0,si.jsx)(hg,{tooltip:sa("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==
la?void 0:la.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,si.jsx)(kh,{name:"move-to-sidebar-right"})}),k&&(0,si.jsx)(hg,{className:"tl-shape-links-panel-item-remove-button",tooltip:sa("whiteboard/remove-link"),type:"button",onClick:k,children:(0,si.jsx)(kh,{name:"x",className:"!translate-y-0"})})]})}function ia({options:a,value:d,onValueChange:k}){return(0,er.jsx)(oD,{className:"tl-toggle-group-input",type:"single",value:d,onValueChange:k,children:a.map(H=>(0,er.jsx)(Rj,{content:H.tooltip,
children:(0,er.jsx)("div",{className:"inline-block",children:(0,er.jsx)(pD,{className:"tl-toggle-group-input-button",value:H.value,disabled:H.value===d,children:(0,er.jsx)(kh,{name:H.icon})})})},H.value))})}function Ba({options:a,value:d,onValueChange:k}){return(0,er.jsx)(oD,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:k,children:a.map(H=>(0,er.jsx)(pD,{className:"tl-toggle-group-input-button",value:H.value,children:(0,er.jsx)(kh,{name:H.icon})},H.value))})}function Va(a){return Yf().selectedShapesArray.filter(d=>
!d.props.isLocked).filter(d=>{var k;return null==(k=mz[d.props.type])?void 0:k.includes(a)})}function Nb(a){return d=>"mouse"!==d.pointerType?a(d):void 0}function lc(a){var d;a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";const k=a[0].toLowerCase();[a]=null!=(d=Object.entries(gr).find(([,H])=>H.includes(k)))?d:["unknown",null];return a}function Ac(...a){return(...d)=>Mh(this,null,function*(){for(const k of a){const H=yield k(...d);if(H&&0<H.length)return H}return null})}function ld(a,d){return Mh(this,
null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():null})}function Dd(){const {handlers:a}=wD.useContext(Gi);return wD.useCallback((d,k)=>Mh(this,null,function*(){if(k.shiftKey&&1===d.selectedShapesArray.length){var H=yield navigator.clipboard.read();let fa;0<H.length&&(H=(yield(yield H[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(H)&&40===H.length?(H=H.slice(2,-2),dl(H)&&(fa=H)):/^\[\[.*\]\]$/.test(H)&&(fa=H.slice(2,
-2)));if(fa){d.selectedShapesArray[0].update({refs:[fa]});d.persist();return}}xD(d,k,a)}),[])}function Wd(){const a=Dd();return aI.useCallback((d,k)=>Mh(this,[d,k],function*(H,{dataTransfer:fa,point:la}){a(H,{point:la,shiftKey:!1,dataTransfer:fa,fromDrop:!0})}),[])}function pe(){const {handlers:a}=dx.useContext(Gi);return dx.useCallback((d,{text:k,html:H})=>{a.copyToClipboard(k,H)},[])}function Ke(){return ex.default.useCallback(a=>Mh(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},
100)}),[])}var Ff=Object.create,Tf=Object.defineProperty,oh=Object.defineProperties,Xg=Object.getOwnPropertyDescriptor,ok=Object.getOwnPropertyDescriptors,wo=Object.getOwnPropertyNames,Ml=Object.getOwnPropertySymbols,bi=Object.getPrototypeOf,rk=Object.prototype.hasOwnProperty,zm=Object.prototype.propertyIsEnumerable,To=(a,d,k)=>d in a?Tf(a,d,{enumerable:!0,configurable:!0,writable:!0,value:k}):a[d]=k,Xd=(a,d)=>{for(var k in d||={})rk.call(d,k)&&To(a,k,d[k]);if(Ml)for(k of Ml(d))zm.call(d,k)&&To(a,
k,d[k]);return a},Te=(a,d)=>oh(a,ok(d)),rf=(a,d)=>{var k={},H;for(H in a)rk.call(a,H)&&0>d.indexOf(H)&&(k[H]=a[H]);if(null!=a&&Ml)for(H of Ml(a))0>d.indexOf(H)&&zm.call(a,H)&&(k[H]=a[H]);return k},gh=(a,d)=>function(){return d||(0,a[wo(a)[0]])((d={exports:{}}).exports,d),d.exports},sm=(a,d,k,H)=>{if(d&&"object"===typeof d||"function"===typeof d)for(let fa of wo(d))rk.call(a,fa)||fa===k||Tf(a,fa,{get:()=>d[fa],enumerable:!(H=Xg(d,fa))||H.enumerable});return a},df=(a,d,k)=>(k=null!=a?Ff(bi(a)):{},sm(!d&&
a&&a.__esModule?k:Tf(k,"default",{value:a,enumerable:!0}),a)),Pd=(a,d,k,H)=>{for(var fa=1<H?void 0:H?Xg(d,k):d,la=a.length-1,sa;0<=la;la--)if(sa=a[la])fa=(H?sa(d,k,fa):sa(fa))||fa;H&&fa&&Tf(d,k,fa);return fa},fb=(a,d,k)=>{To(a,"symbol"!==typeof d?d+"":d,k);return k},Mh=(a,d,k)=>new Promise((H,fa)=>{var la=Ta=>{try{Ha(k.next(Ta))}catch(Xa){fa(Xa)}},sa=Ta=>{try{Ha(k.throw(Ta))}catch(Xa){fa(Xa)}},Ha=Ta=>Ta.done?H(Ta.value):Promise.resolve(Ta.value).then(la,sa);Ha((k=k.apply(a,d)).next())}),fm=gh({["../../node_modules/rbush/rbush.min.js"](a,
d){!function(k,H){"object"==typeof a&&"undefined"!=typeof d?d.exports=H():"function"==typeof define&&define.amd?define(H):(k=k||self).RBush=H()}(a,function(){function k(Sb,gc,bc,Dc,Ic){!function Ce(Cd,Ge,Yd,ve,lf){for(;ve>Yd;){if(600<ve-Yd){var He=ve-Yd+1,Gd=Ge-Yd+1,cd=Math.log(He),Hd=.5*Math.exp(2*cd/3);cd=.5*Math.sqrt(cd*Hd*(He-Hd)/He)*(0>Gd-He/2?-1:1);Ce(Cd,Ge,Math.max(Yd,Math.floor(Ge-Gd*Hd/He+cd)),Math.min(ve,Math.floor(Ge+(He-Gd)*Hd/He+cd)),lf)}He=Cd[Ge];Gd=Yd;Hd=ve;H(Cd,Yd,Ge);for(0<lf(Cd[ve],
He)&&H(Cd,Yd,ve);Gd<Hd;){H(Cd,Gd,Hd);Gd++;for(Hd--;0>lf(Cd[Gd],He);)Gd++;for(;0<lf(Cd[Hd],He);)Hd--}0===lf(Cd[Yd],He)?H(Cd,Yd,Hd):H(Cd,++Hd,ve);Hd<=Ge&&(Yd=Hd+1);Ge<=Hd&&(ve=Hd-1)}}(Sb,gc,bc||0,Dc||Sb.length-1,Ic||fa)}function H(Sb,gc,bc){var Dc=Sb[gc];Sb[gc]=Sb[bc];Sb[bc]=Dc}function fa(Sb,gc){return Sb<gc?-1:Sb>gc?1:0}function la(Sb,gc){sa(Sb,0,Sb.children.length,gc,Sb)}function sa(Sb,gc,bc,Dc,Ic){Ic||=Fb(null);Ic.minX=1/0;Ic.minY=1/0;Ic.maxX=-1/0;for(Ic.maxY=-1/0;gc<bc;gc++){var od=Sb.children[gc];
Ha(Ic,Sb.leaf?Dc(od):od)}return Ic}function Ha(Sb,gc){return Sb.minX=Math.min(Sb.minX,gc.minX),Sb.minY=Math.min(Sb.minY,gc.minY),Sb.maxX=Math.max(Sb.maxX,gc.maxX),Sb.maxY=Math.max(Sb.maxY,gc.maxY),Sb}function Ta(Sb,gc){return Sb.minX-gc.minX}function Xa(Sb,gc){return Sb.minY-gc.minY}function eb(Sb){return(Sb.maxX-Sb.minX)*(Sb.maxY-Sb.minY)}function ib(Sb){return Sb.maxX-Sb.minX+(Sb.maxY-Sb.minY)}function Bb(Sb,gc){return Sb.minX<=gc.minX&&Sb.minY<=gc.minY&&gc.maxX<=Sb.maxX&&gc.maxY<=Sb.maxY}function Mb(Sb,
gc){return gc.minX<=Sb.maxX&&gc.minY<=Sb.maxY&&gc.maxX>=Sb.minX&&gc.maxY>=Sb.minY}function Fb(Sb){return{children:Sb,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function $b(Sb,gc,bc,Dc,Ic){for(var od=[gc,bc];od.length;)if(!((bc=od.pop())-(gc=od.pop())<=Dc)){var Cd=gc+Math.ceil((bc-gc)/Dc/2)*Dc;k(Sb,Cd,gc,bc,Ic);od.push(gc,Cd,Cd,bc)}}var nc=function(Sb){void 0===Sb&&(Sb=9);this._maxEntries=Math.max(4,Sb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return nc.prototype.all=
function(){return this._all(this.data,[])},nc.prototype.search=function(Sb){var gc=this.data,bc=[];if(!Mb(Sb,gc))return bc;for(var Dc=this.toBBox,Ic=[];gc;){for(var od=0;od<gc.children.length;od++){var Cd=gc.children[od],Ge=gc.leaf?Dc(Cd):Cd;Mb(Sb,Ge)&&(gc.leaf?bc.push(Cd):Bb(Sb,Ge)?this._all(Cd,bc):Ic.push(Cd))}gc=Ic.pop()}return bc},nc.prototype.collides=function(Sb){var gc=this.data;if(!Mb(Sb,gc))return!1;for(var bc=[];gc;){for(var Dc=0;Dc<gc.children.length;Dc++){var Ic=gc.children[Dc],od=gc.leaf?
this.toBBox(Ic):Ic;if(Mb(Sb,od)){if(gc.leaf||Bb(Sb,od))return!0;bc.push(Ic)}}gc=bc.pop()}return!1},nc.prototype.load=function(Sb){if(!Sb||!Sb.length)return this;if(Sb.length<this._minEntries){for(var gc=0;gc<Sb.length;gc++)this.insert(Sb[gc]);return this}Sb=this._build(Sb.slice(),0,Sb.length-1,0);this.data.children.length?this.data.height===Sb.height?this._splitRoot(this.data,Sb):(this.data.height<Sb.height&&(gc=this.data,this.data=Sb,Sb=gc),this._insert(Sb,this.data.height-Sb.height-1,!0)):this.data=
Sb;return this},nc.prototype.insert=function(Sb){return Sb&&this._insert(Sb,this.data.height-1),this},nc.prototype.clear=function(){return this.data=Fb([]),this},nc.prototype.remove=function(Sb,gc){if(!Sb)return this;for(var bc,Dc,Ic,od=this.data,Cd=this.toBBox(Sb),Ge=[],Yd=[];od||Ge.length;){if(od||(od=Ge.pop(),Dc=Ge[Ge.length-1],bc=Yd.pop(),Ic=!0),od.leaf){a:{var ve=Sb;var lf=od.children,Ce=gc;if(Ce){for(var He=0;He<lf.length;He++)if(Ce(ve,lf[He])){ve=He;break a}ve=-1}else ve=lf.indexOf(ve)}if(-1!==
ve)return od.children.splice(ve,1),Ge.push(od),this._condense(Ge),this}Ic||od.leaf||!Bb(od,Cd)?Dc?(bc++,od=Dc.children[bc],Ic=!1):od=null:(Ge.push(od),Yd.push(bc),bc=0,Dc=od,od=od.children[0])}return this},nc.prototype.toBBox=function(Sb){return Sb},nc.prototype.compareMinX=function(Sb,gc){return Sb.minX-gc.minX},nc.prototype.compareMinY=function(Sb,gc){return Sb.minY-gc.minY},nc.prototype.toJSON=function(){return this.data},nc.prototype.fromJSON=function(Sb){return this.data=Sb,this},nc.prototype._all=
function(Sb,gc){for(var bc=[];Sb;)Sb.leaf?gc.push.apply(gc,Sb.children):bc.push.apply(bc,Sb.children),Sb=bc.pop();return gc},nc.prototype._build=function(Sb,gc,bc,Dc){var Ic,od=bc-gc+1,Cd=this._maxEntries;if(od<=Cd)return la(Ic=Fb(Sb.slice(gc,bc+1)),this.toBBox),Ic;Dc||(Dc=Math.ceil(Math.log(od)/Math.log(Cd)),Cd=Math.ceil(od/Math.pow(Cd,Dc-1)));(Ic=Fb([])).leaf=!1;Ic.height=Dc;od=Math.ceil(od/Cd);Cd=od*Math.ceil(Math.sqrt(Cd));for($b(Sb,gc,bc,Cd,this.compareMinX);gc<=bc;gc+=Cd){var Ge=Math.min(gc+
Cd-1,bc);$b(Sb,gc,Ge,od,this.compareMinY);for(var Yd=gc;Yd<=Ge;Yd+=od)Ic.children.push(this._build(Sb,Yd,Math.min(Yd+od-1,Ge),Dc-1))}return la(Ic,this.toBBox),Ic},nc.prototype._chooseSubtree=function(Sb,gc,bc,Dc){for(;Dc.push(gc),!gc.leaf&&Dc.length-1!==bc;){for(var Ic=1/0,od=1/0,Cd=void 0,Ge=0;Ge<gc.children.length;Ge++){var Yd=gc.children[Ge],ve=eb(Yd),lf=(Ce=Sb,He=Yd,(Math.max(He.maxX,Ce.maxX)-Math.min(He.minX,Ce.minX))*(Math.max(He.maxY,Ce.maxY)-Math.min(He.minY,Ce.minY))-ve);lf<od?(od=lf,Ic=
ve<Ic?ve:Ic,Cd=Yd):lf===od&&ve<Ic&&(Ic=ve,Cd=Yd)}gc=Cd||gc.children[0]}var Ce,He;return gc},nc.prototype._insert=function(Sb,gc,bc){bc=bc?Sb:this.toBBox(Sb);var Dc=[],Ic=this._chooseSubtree(bc,this.data,gc,Dc);Ic.children.push(Sb);for(Ha(Ic,bc);0<=gc&&Dc[gc].children.length>this._maxEntries;)this._split(Dc,gc),gc--;this._adjustParentBBoxes(bc,Dc,gc)},nc.prototype._split=function(Sb,gc){var bc=Sb[gc],Dc=bc.children.length,Ic=this._minEntries;this._chooseSplitAxis(bc,Ic,Dc);Dc=this._chooseSplitIndex(bc,
Ic,Dc);Dc=Fb(bc.children.splice(Dc,bc.children.length-Dc));Dc.height=bc.height;Dc.leaf=bc.leaf;la(bc,this.toBBox);la(Dc,this.toBBox);gc?Sb[gc-1].children.push(Dc):this._splitRoot(bc,Dc)},nc.prototype._splitRoot=function(Sb,gc){this.data=Fb([Sb,gc]);this.data.height=Sb.height+1;this.data.leaf=!1;la(this.data,this.toBBox)},nc.prototype._chooseSplitIndex=function(Sb,gc,bc){for(var Dc,Ic,od,Cd,Ge,Yd,ve,lf=1/0,Ce=1/0,He=gc;He<=bc-gc;He++){var Gd=sa(Sb,0,He,this.toBBox),cd=sa(Sb,He,bc,this.toBBox),Hd=(Ic=
Gd,od=cd,Cd=void 0,Ge=void 0,Yd=void 0,ve=void 0,Cd=Math.max(Ic.minX,od.minX),Ge=Math.max(Ic.minY,od.minY),Yd=Math.min(Ic.maxX,od.maxX),ve=Math.min(Ic.maxY,od.maxY),Math.max(0,Yd-Cd)*Math.max(0,ve-Ge));Gd=eb(Gd)+eb(cd);Hd<lf?(lf=Hd,Dc=He,Ce=Gd<Ce?Gd:Ce):Hd===lf&&Gd<Ce&&(Ce=Gd,Dc=He)}return Dc||bc-gc},nc.prototype._chooseSplitAxis=function(Sb,gc,bc){var Dc=Sb.leaf?this.compareMinX:Ta,Ic=Sb.leaf?this.compareMinY:Xa;this._allDistMargin(Sb,gc,bc,Dc)<this._allDistMargin(Sb,gc,bc,Ic)&&Sb.children.sort(Dc)},
nc.prototype._allDistMargin=function(Sb,gc,bc,Dc){Sb.children.sort(Dc);Dc=this.toBBox;for(var Ic=sa(Sb,0,gc,Dc),od=sa(Sb,bc-gc,bc,Dc),Cd=ib(Ic)+ib(od),Ge=gc;Ge<bc-gc;Ge++){var Yd=Sb.children[Ge];Ha(Ic,Sb.leaf?Dc(Yd):Yd);Cd+=ib(Ic)}for(bc=bc-gc-1;bc>=gc;bc--)Ic=Sb.children[bc],Ha(od,Sb.leaf?Dc(Ic):Ic),Cd+=ib(od);return Cd},nc.prototype._adjustParentBBoxes=function(Sb,gc,bc){for(;0<=bc;bc--)Ha(gc[bc],Sb)},nc.prototype._condense=function(Sb){for(var gc=Sb.length-1,bc=void 0;0<=gc;gc--)0===Sb[gc].children.length?
0<gc?(bc=Sb[gc-1].children).splice(bc.indexOf(Sb[gc]),1):this.clear():la(Sb[gc],this.toBBox)},nc})}}),kt=gh({["../../node_modules/fast-deep-equal/index.js"](a,d){d.exports=function la(H,fa){if(H===fa)return!0;if(H&&fa&&"object"==typeof H&&"object"==typeof fa){if(H.constructor!==fa.constructor)return!1;var sa;if(Array.isArray(H)){var Ha=H.length;if(Ha!=fa.length)return!1;for(sa=Ha;0!==sa--;)if(!la(H[sa],fa[sa]))return!1;return!0}if(H.constructor===RegExp)return H.source===fa.source&&H.flags===fa.flags;
if(H.valueOf!==Object.prototype.valueOf)return H.valueOf()===fa.valueOf();if(H.toString!==Object.prototype.toString)return H.toString()===fa.toString();var Ta=Object.keys(H);Ha=Ta.length;if(Ha!==Object.keys(fa).length)return!1;for(sa=Ha;0!==sa--;)if(!Object.prototype.hasOwnProperty.call(fa,Ta[sa]))return!1;for(sa=Ha;0!==sa--;)if(Ha=Ta[sa],!la(H[Ha],fa[Ha]))return!1;return!0}return H!==H&&fa!==fa}}}),or=gh({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function k(ib,Bb){return!1!==Bb.clone&&
Bb.isMergeableObject(ib)?Ta(Array.isArray(ib)?[]:{},ib,Bb):ib}function H(ib,Bb,Mb){return ib.concat(Bb).map(function(Fb){return k(Fb,Mb)})}function fa(ib){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(ib).filter(function(Bb){return ib.propertyIsEnumerable(Bb)}):[]}function la(ib){return Object.keys(ib).concat(fa(ib))}function sa(ib,Bb){try{return Bb in ib}catch(Mb){return!1}}function Ha(ib,Bb,Mb){var Fb={};Mb.isMergeableObject(ib)&&la(ib).forEach(function($b){Fb[$b]=k(ib[$b],Mb)});
la(Bb).forEach(function($b){if(!sa(ib,$b)||Object.hasOwnProperty.call(ib,$b)&&Object.propertyIsEnumerable.call(ib,$b))if(sa(ib,$b)&&Mb.isMergeableObject(Bb[$b])){if(Mb.customMerge){var nc=Mb.customMerge($b);nc="function"===typeof nc?nc:Ta}else nc=Ta;Fb[$b]=nc(ib[$b],Bb[$b],Mb)}else Fb[$b]=k(Bb[$b],Mb)});return Fb}function Ta(ib,Bb,Mb){Mb=Mb||{};Mb.arrayMerge=Mb.arrayMerge||H;Mb.isMergeableObject=Mb.isMergeableObject||Xa;Mb.cloneUnlessOtherwiseSpecified=k;var Fb=Array.isArray(Bb),$b=Array.isArray(ib);
return Fb!==$b?k(Bb,Mb):Fb?Mb.arrayMerge(ib,Bb,Mb):Ha(ib,Bb,Mb)}var Xa=function(ib){var Bb;if(Bb=!!ib&&"object"===typeof ib)Bb=Object.prototype.toString.call(ib),Bb=!("[object RegExp]"===Bb||"[object Date]"===Bb||ib.$$typeof===eb);return Bb},eb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Ta.all=function(ib,Bb){if(!Array.isArray(ib))throw Error("first argument should be an array");return ib.reduce(function(Mb,Fb){return Ta(Mb,Fb,Bb)},{})};d.exports=Ta}}),fs=gh({["../../node_modules/tslib/tslib.js"](a,
d){var k,H,fa,la,sa,Ha,Ta,Xa,eb,ib,Bb,Mb,Fb,$b,nc,Sb,gc,bc,Dc,Ic,od,Cd,Ge,Yd,ve;(function(lf){function Ce(Gd,cd){Gd!==He&&("function"===typeof Object.create?Object.defineProperty(Gd,"__esModule",{value:!0}):Gd.__esModule=!0);return function(Hd,ad){return Gd[Hd]=cd?cd(Hd,ad):ad}}var He="object"===typeof za?za:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Gd){lf(Ce(He,Ce(Gd)))}):"object"===typeof d&&"object"===typeof d.exports?
lf(Ce(He,Ce(d.exports))):lf(Ce(He))})(function(lf){var Ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Gd,cd){Gd.__proto__=cd}||function(Gd,cd){for(var Hd in cd)Object.prototype.hasOwnProperty.call(cd,Hd)&&(Gd[Hd]=cd[Hd])};k=function(Gd,cd){function Hd(){this.constructor=Gd}if("function"!==typeof cd&&null!==cd)throw new TypeError("Class extends value "+String(cd)+" is not a constructor or null");Ce(Gd,cd);Gd.prototype=null===cd?Object.create(cd):(Hd.prototype=cd.prototype,new Hd)};
H=Object.assign||function(Gd){for(var cd,Hd=1,ad=arguments.length;Hd<ad;Hd++){cd=arguments[Hd];for(var ud in cd)Object.prototype.hasOwnProperty.call(cd,ud)&&(Gd[ud]=cd[ud])}return Gd};fa=function(Gd,cd){var Hd={},ad;for(ad in Gd)Object.prototype.hasOwnProperty.call(Gd,ad)&&0>cd.indexOf(ad)&&(Hd[ad]=Gd[ad]);if(null!=Gd&&"function"===typeof Object.getOwnPropertySymbols){var ud=0;for(ad=Object.getOwnPropertySymbols(Gd);ud<ad.length;ud++)0>cd.indexOf(ad[ud])&&Object.prototype.propertyIsEnumerable.call(Gd,
ad[ud])&&(Hd[ad[ud]]=Gd[ad[ud]])}return Hd};la=function(Gd,cd,Hd,ad){var ud=arguments.length,ye=3>ud?cd:null===ad?ad=Object.getOwnPropertyDescriptor(cd,Hd):ad,Ve;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)ye=Reflect.decorate(Gd,cd,Hd,ad);else for(var zf=Gd.length-1;0<=zf;zf--)if(Ve=Gd[zf])ye=(3>ud?Ve(ye):3<ud?Ve(cd,Hd,ye):Ve(cd,Hd))||ye;return 3<ud&&ye&&Object.defineProperty(cd,Hd,ye),ye};sa=function(Gd,cd){return function(Hd,ad){cd(Hd,ad,Gd)}};Ha=function(Gd,cd){if("object"===
typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Gd,cd)};Ta=function(Gd,cd,Hd,ad){function ud(ye){return ye instanceof Hd?ye:new Hd(function(Ve){Ve(ye)})}return new (Hd||=Promise)(function(ye,Ve){function zf(Hg){try{Nf(ad.next(Hg))}catch(uf){Ve(uf)}}function mf(Hg){try{Nf(ad["throw"](Hg))}catch(uf){Ve(uf)}}function Nf(Hg){Hg.done?ye(Hg.value):ud(Hg.value).then(zf,mf)}Nf((ad=ad.apply(Gd,cd||[])).next())})};Xa=function(Gd,cd){function Hd(Nf){return function(Hg){return ad([Nf,
Hg])}}function ad(Nf){if(ye)throw new TypeError("Generator is already executing.");for(;ud;)try{if(ye=1,Ve&&(zf=Nf[0]&2?Ve["return"]:Nf[0]?Ve["throw"]||((zf=Ve["return"])&&zf.call(Ve),0):Ve.next)&&!(zf=zf.call(Ve,Nf[1])).done)return zf;if(Ve=0,zf)Nf=[Nf[0]&2,zf.value];switch(Nf[0]){case 0:case 1:zf=Nf;break;case 4:return ud.label++,{value:Nf[1],done:!1};case 5:ud.label++;Ve=Nf[1];Nf=[0];continue;case 7:Nf=ud.ops.pop();ud.trys.pop();continue;default:if(!(zf=ud.trys,zf=0<zf.length&&zf[zf.length-1])&&
(6===Nf[0]||2===Nf[0])){ud=0;continue}if(3===Nf[0]&&(!zf||Nf[1]>zf[0]&&Nf[1]<zf[3]))ud.label=Nf[1];else if(6===Nf[0]&&ud.label<zf[1])ud.label=zf[1],zf=Nf;else if(zf&&ud.label<zf[2])ud.label=zf[2],ud.ops.push(Nf);else{zf[2]&&ud.ops.pop();ud.trys.pop();continue}}Nf=cd.call(Gd,ud)}catch(Hg){Nf=[6,Hg],Ve=0}finally{ye=zf=0}if(Nf[0]&5)throw Nf[1];return{value:Nf[0]?Nf[1]:void 0,done:!0}}var ud={label:0,sent:function(){if(zf[0]&1)throw zf[1];return zf[1]},trys:[],ops:[]},ye,Ve,zf,mf;return mf={next:Hd(0),
"throw":Hd(1),"return":Hd(2)},"function"===typeof Symbol&&(mf[Symbol.iterator]=function(){return this}),mf};eb=function(Gd,cd){for(var Hd in Gd)"default"===Hd||Object.prototype.hasOwnProperty.call(cd,Hd)||ve(cd,Gd,Hd)};ve=Object.create?function(Gd,cd,Hd,ad){void 0===ad&&(ad=Hd);var ud=Object.getOwnPropertyDescriptor(cd,Hd);if(!ud||("get"in ud?!cd.__esModule:ud.writable||ud.configurable))ud={enumerable:!0,get:function(){return cd[Hd]}};Object.defineProperty(Gd,ad,ud)}:function(Gd,cd,Hd,ad){void 0===
ad&&(ad=Hd);Gd[ad]=cd[Hd]};ib=function(Gd){var cd="function"===typeof Symbol&&Symbol.iterator,Hd=cd&&Gd[cd],ad=0;if(Hd)return Hd.call(Gd);if(Gd&&"number"===typeof Gd.length)return{next:function(){Gd&&ad>=Gd.length&&(Gd=void 0);return{value:Gd&&Gd[ad++],done:!Gd}}};throw new TypeError(cd?"Object is not iterable.":"Symbol.iterator is not defined.");};Bb=function(Gd,cd){var Hd="function"===typeof Symbol&&Gd[Symbol.iterator];if(!Hd)return Gd;Gd=Hd.call(Gd);var ad,ud=[];try{for(;(void 0===cd||0<cd--)&&
!(ad=Gd.next()).done;)ud.push(ad.value)}catch(Ve){var ye={error:Ve}}finally{try{ad&&!ad.done&&(Hd=Gd["return"])&&Hd.call(Gd)}finally{if(ye)throw ye.error;}}return ud};Mb=function(){for(var Gd=[],cd=0;cd<arguments.length;cd++)Gd=Gd.concat(Bb(arguments[cd]));return Gd};Fb=function(){for(var Gd=0,cd=0,Hd=arguments.length;cd<Hd;cd++)Gd+=arguments[cd].length;Gd=Array(Gd);var ad=0;for(cd=0;cd<Hd;cd++)for(var ud=arguments[cd],ye=0,Ve=ud.length;ye<Ve;ye++,ad++)Gd[ad]=ud[ye];return Gd};$b=function(Gd,cd,Hd){if(Hd||
2===arguments.length)for(var ad=0,ud=cd.length,ye;ad<ud;ad++)!ye&&ad in cd||(ye||=Array.prototype.slice.call(cd,0,ad),ye[ad]=cd[ad]);return Gd.concat(ye||Array.prototype.slice.call(cd))};nc=function(Gd){return this instanceof nc?(this.v=Gd,this):new nc(Gd)};Sb=function(Gd,cd,Hd){function ad(uf){mf[uf]&&(Nf[uf]=function(Cg){return new Promise(function(bh,Qi){1<Hg.push([uf,Cg,bh,Qi])||ud(uf,Cg)})})}function ud(uf,Cg){try{var bh=mf[uf](Cg);bh.value instanceof nc?Promise.resolve(bh.value.v).then(ye,Ve):
zf(Hg[0][2],bh)}catch(Qi){zf(Hg[0][3],Qi)}}function ye(uf){ud("next",uf)}function Ve(uf){ud("throw",uf)}function zf(uf,Cg){(uf(Cg),Hg.shift(),Hg.length)&&ud(Hg[0][0],Hg[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var mf=Hd.apply(Gd,cd||[]),Nf,Hg=[];return Nf={},ad("next"),ad("throw"),ad("return"),Nf[Symbol.asyncIterator]=function(){return this},Nf};gc=function(Gd){function cd(ud,ye){Hd[ud]=Gd[ud]?function(Ve){return(ad=!ad)?{value:nc(Gd[ud](Ve)),done:"return"===
ud}:ye?ye(Ve):Ve}:ye}var Hd,ad;return Hd={},cd("next"),cd("throw",function(ud){throw ud;}),cd("return"),Hd[Symbol.iterator]=function(){return this},Hd};bc=function(Gd){function cd(ye){ud[ye]=Gd[ye]&&function(Ve){return new Promise(function(zf,mf){Ve=Gd[ye](Ve);Hd(zf,mf,Ve.done,Ve.value)})}}function Hd(ye,Ve,zf,mf){Promise.resolve(mf).then(function(Nf){ye({value:Nf,done:zf})},Ve)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ad=Gd[Symbol.asyncIterator],ud;
return ad?ad.call(Gd):(Gd="function"===typeof ib?ib(Gd):Gd[Symbol.iterator](),ud={},cd("next"),cd("throw"),cd("return"),ud[Symbol.asyncIterator]=function(){return this},ud)};Dc=function(Gd,cd){Object.defineProperty?Object.defineProperty(Gd,"raw",{value:cd}):Gd.raw=cd;return Gd};var He=Object.create?function(Gd,cd){Object.defineProperty(Gd,"default",{enumerable:!0,value:cd})}:function(Gd,cd){Gd["default"]=cd};Ic=function(Gd){if(Gd&&Gd.__esModule)return Gd;var cd={};if(null!=Gd)for(var Hd in Gd)"default"!==
Hd&&Object.prototype.hasOwnProperty.call(Gd,Hd)&&ve(cd,Gd,Hd);He(cd,Gd);return cd};od=function(Gd){return Gd&&Gd.__esModule?Gd:{"default":Gd}};Cd=function(Gd,cd,Hd,ad){if("a"===Hd&&!ad)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof cd?Gd!==cd||!ad:!cd.has(Gd))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===Hd?ad:"a"===Hd?ad.call(Gd):ad?ad.value:cd.get(Gd)};Ge=function(Gd,cd,Hd,ad,ud){if("m"===
ad)throw new TypeError("Private method is not writable");if("a"===ad&&!ud)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof cd?Gd!==cd||!ud:!cd.has(Gd))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===ad?ud.call(Gd,Hd):ud?ud.value=Hd:cd.set(Gd,Hd),Hd};Yd=function(Gd,cd){if(null===cd||"object"!==typeof cd&&"function"!==typeof cd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===
typeof Gd?cd===Gd:Gd.has(cd)};lf("__extends",k);lf("__assign",H);lf("__rest",fa);lf("__decorate",la);lf("__param",sa);lf("__metadata",Ha);lf("__awaiter",Ta);lf("__generator",Xa);lf("__exportStar",eb);lf("__createBinding",ve);lf("__values",ib);lf("__read",Bb);lf("__spread",Mb);lf("__spreadArrays",Fb);lf("__spreadArray",$b);lf("__await",nc);lf("__asyncGenerator",Sb);lf("__asyncDelegator",gc);lf("__asyncValues",bc);lf("__makeTemplateObject",Dc);lf("__importStar",Ic);lf("__importDefault",od);lf("__classPrivateFieldGet",
Cd);lf("__classPrivateFieldSet",Ge);lf("__classPrivateFieldIn",Yd)})}}),Fq={};((a,d)=>{for(var k in d)Tf(a,k,{get:d[k],enumerable:!0})})(Fq,{App:()=>CD,PreviewManager:()=>uh,generateJSXFromModel:()=>Vn,generateSVGFromModel:()=>xn});Ua.exports=(a=>sm(Tf({},"__esModule",{value:!0}),a))(Fq);var hs=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";a.Gray="gray";a.Default="";return a})(hs||{}),pr=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(pr||
{}),nr,yu=new Uint8Array(16),ng=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,gl=[];for(let a=0;256>a;++a)gl.push((a+256).toString(16).slice(1));var jt,Xn,Wo=0,Hq=0,Lj=function(a,d,k){k=d&&k||0;const H=d||Array(16);a=a||{};let fa=a.node||jt;var la=void 0!==a.clockseq?a.clockseq:Xn;if(null==fa||null==la){var sa=a.random||(a.rng||r)();null==fa&&(fa=jt=[sa[0]|1,sa[1],sa[2],sa[3],sa[4],sa[5]]);null==la&&(la=Xn=(sa[6]<<8|sa[7])&16383)}sa=
void 0!==a.msecs?a.msecs:Date.now();let Ha=void 0!==a.nsecs?a.nsecs:Hq+1;const Ta=sa-Wo+(Ha-Hq)/1E4;0>Ta&&void 0===a.clockseq&&(la=la+1&16383);(0>Ta||sa>Wo)&&void 0===a.nsecs&&(Ha=0);if(1E4<=Ha)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Wo=sa;Hq=Ha;Xn=la;sa+=122192928E5;a=(1E4*(sa&268435455)+Ha)%4294967296;H[k++]=a>>>24&255;H[k++]=a>>>16&255;H[k++]=a>>>8&255;H[k++]=a&255;a=sa/4294967296*1E4&268435455;H[k++]=a>>>8&255;H[k++]=a&255;H[k++]=a>>>24&15|16;H[k++]=a>>>16&255;H[k++]=la>>>
8|128;H[k++]=la&255;for(la=0;6>la;++la)H[k+la]=fa[la];return d||Y(H)},eh=class{static clamp(a,d,k){return Math.max(d,"undefined"!==typeof k?Math.min(a,k):a)}static clampV(a,d,k){return a.map(H=>k?eh.clamp(H,d,k):eh.clamp(H,d))}static cross(a,d,k){return(d[0]-a[0])*(k[1]-a[1])-(k[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},rd=eh;rd.neg=a=>[-a[0],-a[1]];rd.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];rd.addScalar=(a,d)=>[a[0]+d,a[1]+d];rd.sub=(a,d)=>[a[0]-d[0],a[1]-
d[1]];rd.subScalar=(a,d)=>[a[0]-d,a[1]-d];rd.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];rd.mul=(a,d)=>[a[0]*d,a[1]*d];rd.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];rd.div=(a,d)=>[a[0]/d,a[1]/d];rd.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];rd.per=a=>[a[1],-a[0]];rd.dpr=(a,d)=>a[0]*d[0]+a[1]*d[1];rd.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];rd.len2=a=>a[0]*a[0]+a[1]*a[1];rd.len=a=>Math.hypot(a[0],a[1]);rd.pry=(a,d)=>eh.dpr(a,d)/eh.len(d);rd.uni=a=>eh.div(a,eh.len(a));rd.normalize=a=>eh.uni(a);rd.tangent=(a,d)=>eh.uni(eh.sub(a,d));rd.dist2=
(a,d)=>eh.len2(eh.sub(a,d));rd.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);rd.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let k=1/Math.max(d[0],d[1]);k*=1.29289-(d[0]+d[1])*k*.29289;return[a[0]*k,a[1]*k]};rd.ang=(a,d)=>Math.atan2(eh.cpr(a,d),eh.dpr(a,d));rd.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);rd.med=(a,d)=>eh.mul(eh.add(a,d),.5);rd.rot=(a,d=0)=>[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];rd.rotWith=(a,d,k=0)=>{if(0===k)return a;const H=
Math.sin(k);k=Math.cos(k);const fa=a[0]-d[0];a=a[1]-d[1];return[fa*k-a*H+d[0],fa*H+a*k+d[1]]};rd.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];rd.lrp=(a,d,k)=>eh.add(a,eh.mul(eh.sub(d,a),k));rd.int=(a,d,k,H,fa=1)=>{k=(eh.clamp(k,H)-k)/(H-k);return eh.add(eh.mul(a,1-k),eh.mul(d,fa))};rd.ang3=(a,d,k)=>{a=eh.vec(d,a);d=eh.vec(d,k);return eh.ang(a,d)};rd.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];rd.rescale=(a,d)=>{const k=eh.len(a);return[d*a[0]/k,d*a[1]/k]};rd.isLeft=(a,d,k)=>(d[0]-a[0])*(k[1]-a[1])-(k[0]-a[0])*
(d[1]-a[1]);rd.clockwise=(a,d,k)=>0<eh.isLeft(a,d,k);rd.toFixed=a=>a.map(d=>Math.round(100*d)/100);rd.nearestPointOnLineThroughPoint=(a,d,k)=>eh.add(a,eh.mul(d,eh.pry(eh.sub(k,a),d)));rd.distanceToLineThroughPoint=(a,d,k)=>eh.dist(k,eh.nearestPointOnLineThroughPoint(a,d,k));rd.nearestPointOnLineSegment=(a,d,k,H=!0)=>{const fa=eh.uni(eh.sub(d,a));k=eh.add(a,eh.mul(fa,eh.pry(eh.sub(k,a),fa)));if(H){if(k[0]<Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(k[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(k[1]<
Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(k[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return k};rd.distanceToLineSegment=(a,d,k,H=!0)=>eh.dist(k,eh.nearestPointOnLineSegment(a,d,k,H));rd.nudge=(a,d,k)=>eh.isEqual(a,d)?a:eh.add(a,eh.mul(eh.uni(eh.sub(d,a)),k));rd.nudgeAtAngle=(a,d,k)=>[Math.cos(d)*k+a[0],Math.sin(d)*k+a[1]];rd.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];rd.pointsBetween=(a,d,k=6)=>Array.from(Array(k)).map((H,fa)=>{H=fa/(k-1);fa=Math.min(1,.5+Math.abs(.5-H));
return[...eh.lrp(a,d,H),fa]});rd.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);rd.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};rd.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];rd.min=(...a)=>[Math.min(...a.map(d=>d[0])),Math.min(...a.map(d=>d[1]))];var Rd=rd,ff=class{static getRectangleSides(a,d,k=0){const H=[a[0]+d[0]/2,a[1]+d[1]/2],fa=rd.rotWith(a,H,k),la=rd.rotWith(rd.add(a,[d[0],0]),H,k),sa=rd.rotWith(rd.add(a,d),H,k);a=rd.rotWith(rd.add(a,[0,d[1]]),
H,k);return[["top",[fa,la]],["right",[la,sa]],["bottom",[sa,a]],["left",[a,fa]]]}static getBoundsSides(a){return ff.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+2*d,height:a.height+2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&
a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return ff.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let k=Infinity,H=Infinity,fa=-Infinity,la=-Infinity;if(2>a.length)H=k=0,la=fa=1;else for(const sa of a)k=Math.min(sa[0],k),H=Math.min(sa[1],H),fa=Math.max(sa[0],fa),la=Math.max(sa[1],la);return 0!==d?ff.getBoundsFromPoints(a.map(sa=>rd.rotWith(sa,[(k+fa)/2,(H+la)/
2],d))):{minX:k,minY:H,maxX:fa,maxY:la,width:Math.max(1,fa-k),height:Math.max(1,la-H)}}static centerBounds(a,d){const k=ff.getBoundsCenter(a);return ff.translateBounds(a,[d[0]-k[0],d[1]-k[1]])}static snapBoundsToGrid(a,d){const k=Math.round(a.minX/d)*d,H=Math.round(a.minY/d)*d,fa=Math.round(a.maxX/d)*d;a=Math.round(a.maxY/d)*d;return{minX:k,minY:H,maxX:fa,maxY:a,width:Math.max(1,fa-k),height:Math.max(1,a-H)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+d[1],maxX:a.maxX+d[0],maxY:a.maxY+
d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const k=ff.getBoundsCenter(a);return ff.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[k[0]*d,k[1]*d])}static divideBounds(a,d){const k=ff.getBoundsCenter(a);return ff.centerBounds({minX:a.minX/d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[k[0]/d,k[1]/d])}static getRotatedBounds(a,d=0){a=ff.getRotatedCorners(a,d);let k=d=Infinity,H=-Infinity,fa=
-Infinity;for(const la of a)d=Math.min(la[0],d),k=Math.min(la[1],k),H=Math.max(la[0],H),fa=Math.max(la[1],fa);return{minX:d,minY:k,maxX:H,maxY:fa,width:Math.max(1,H-d),height:Math.max(1,fa-k),rotation:0}}static getRotatedEllipseBounds(a,d,k,H,fa=0){var la=Math.cos(fa);const sa=Math.sin(fa);fa=Math.hypot(k*la,H*sa);la=Math.hypot(k*sa,H*la);return{minX:a+k-fa,minY:d+H-la,maxX:a+k+fa,maxY:d+H+la,width:2*fa,height:2*la}}static getExpandedBounds(a,d){const k=Math.min(a.minX,d.minX),H=Math.min(a.minY,d.minY),
fa=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:k,minY:H,maxX:fa,maxY:a,width:Math.abs(fa-k),height:Math.abs(a-H)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let k=1;k<a.length;k++)d=ff.getExpandedBounds(d,a[k]);return d}static getRotatedCorners(a,d=0){const k=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(H=>rd.rotWith(H,k,d)):a}static getTransformedBoundingBox(a,d,k,H=0,fa=!1){const [la,
sa]=[a.minX,a.minY],[Ha,Ta]=[a.maxX,a.maxY];let [Xa,eb]=[a.minX,a.minY],[ib,Bb]=[a.maxX,a.maxY];if("center"===d)return{minX:Xa+k[0],minY:eb+k[1],maxX:ib+k[0],maxY:Bb+k[1],width:ib-Xa,height:Bb-eb,scaleX:1,scaleY:1};const [Mb,Fb]=rd.rot(k,-H);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":eb+=Fb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Bb+=Fb}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":Xa+=Mb;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":ib+=
Mb}var $b=Ha-la;const nc=Ta-sa;var Sb=(ib-Xa)/$b,gc=(Bb-eb)/nc;a=0>Sb;k=0>gc;var bc=Math.abs(ib-Xa),Dc=Math.abs(Bb-eb);if(fa)switch(fa=$b/nc,$b=fa<bc/Dc,gc=1/fa*(0>gc?1:-1)*bc,Sb=Dc*(0>Sb?1:-1)*fa,d){case "top_left_corner":$b?eb=Bb+gc:Xa=ib+Sb;break;case "top_right_corner":$b?eb=Bb+gc:ib=Xa-Sb;break;case "bottom_right_corner":$b?Bb=eb-gc:ib=Xa-Sb;break;case "bottom_left_corner":$b?Bb=eb-gc:Xa=ib+Sb;break;case "bottom_edge":case "top_edge":bc=(Xa+ib)/2;Dc*=fa;Xa=bc-Dc/2;ib=bc+Dc/2;break;case "left_edge":case "right_edge":Dc=
(eb+Bb)/2,bc/=fa,eb=Dc-bc/2,Bb=Dc+bc/2}if(0!==H%(2*Math.PI)){bc=[0,0];Dc=rd.med([la,sa],[Ha,Ta]);Sb=rd.med([Xa,eb],[ib,Bb]);switch(d){case "top_left_corner":bc=rd.sub(rd.rotWith([ib,Bb],Sb,H),rd.rotWith([Ha,Ta],Dc,H));break;case "top_right_corner":bc=rd.sub(rd.rotWith([Xa,Bb],Sb,H),rd.rotWith([la,Ta],Dc,H));break;case "bottom_right_corner":bc=rd.sub(rd.rotWith([Xa,eb],Sb,H),rd.rotWith([la,sa],Dc,H));break;case "bottom_left_corner":bc=rd.sub(rd.rotWith([ib,eb],Sb,H),rd.rotWith([Ha,sa],Dc,H));break;
case "top_edge":bc=rd.sub(rd.rotWith(rd.med([Xa,Bb],[ib,Bb]),Sb,H),rd.rotWith(rd.med([la,Ta],[Ha,Ta]),Dc,H));break;case "left_edge":bc=rd.sub(rd.rotWith(rd.med([ib,eb],[ib,Bb]),Sb,H),rd.rotWith(rd.med([Ha,sa],[Ha,Ta]),Dc,H));break;case "bottom_edge":bc=rd.sub(rd.rotWith(rd.med([Xa,eb],[ib,eb]),Sb,H),rd.rotWith(rd.med([la,sa],[Ha,sa]),Dc,H));break;case "right_edge":bc=rd.sub(rd.rotWith(rd.med([Xa,eb],[Xa,Bb]),Sb,H),rd.rotWith(rd.med([la,sa],[la,Ta]),Dc,H))}[Xa,eb]=rd.sub([Xa,eb],bc);[ib,Bb]=rd.sub([ib,
Bb],bc)}ib<Xa&&([ib,Xa]=[Xa,ib]);Bb<eb&&([Bb,eb]=[eb,Bb]);return{minX:Xa,minY:eb,maxX:ib,maxY:Bb,width:ib-Xa,height:Bb-eb,scaleX:(ib-Xa)/(Ha-la||1)*(a?-1:1),scaleY:(Bb-eb)/(Ta-sa||1)*(k?-1:1)}}static getTransformAnchor(a,d,k){let H=a;switch(a){case "top_left_corner":H=d&&k?"bottom_right_corner":d?"top_right_corner":k?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":H=d&&k?"bottom_left_corner":d?"top_left_corner":k?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":H=
d&&k?"top_left_corner":d?"bottom_left_corner":k?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":H=d&&k?"top_right_corner":d?"bottom_right_corner":k?"top_left_corner":"top_right_corner"}return H}static getRelativeTransformedBoundingBox(a,d,k,H,fa){H=a.minX+(H?d.maxX-k.maxX:k.minX-d.minX)/d.width*a.width;fa=a.minY+(fa?d.maxY-k.maxY:k.minY-d.minY)/d.height*a.height;const la=k.width/d.width*a.width;a=k.height/d.height*a.height;return{minX:H,minY:fa,maxX:H+la,maxY:fa+a,width:la,height:a}}static getRotatedSize(a,
d){const k=rd.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(H=>rd.rotWith(H,k,d));a=ff.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=ff.getBoundsCenter(a);return Te(Xd({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=[Infinity,Infinity];a.forEach(k=>{d[0]=Math.min(d[0],k[0]);d[1]=Math.min(d[1],k[1])});return d}static getTLSnapPoints(a,d,k){const H=Xd({},a);a=[0,0];const fa=[],la=
{minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},sa=["midX","minX","maxX"],Ha=["midY","minY","maxY"];d=d.map(Bb=>{const Mb=sa.flatMap(($b,nc)=>sa.map((Sb,gc)=>{const bc=H[$b]-Bb[Sb];return{f:$b,t:Sb,gap:bc,distance:Math.abs(bc),isCareful:0===nc||3===nc+gc}})),Fb=Ha.flatMap(($b,nc)=>Ha.map((Sb,gc)=>{const bc=H[$b]-Bb[Sb];return{f:$b,t:Sb,gap:bc,distance:Math.abs(bc),
isCareful:0===nc||3===nc+gc}}));return[Bb,Mb,Fb]});let Ta=Infinity,Xa=Infinity,eb=Infinity,ib=Infinity;d.forEach(([,Bb,Mb])=>{Bb.forEach(Fb=>{Fb.distance<k&&Fb.distance<eb&&(eb=Fb.distance,Ta=Fb.gap)});Mb.forEach(Fb=>{Fb.distance<k&&Fb.distance<ib&&(ib=Fb.distance,Xa=Fb.gap)})});d.forEach(([Bb,Mb,Fb])=>{Infinity!==Ta&&Mb.forEach($b=>{2>Math.abs($b.gap-Ta)&&(la[$b.f]=Te(Xd({},la[$b.f]),{isSnapped:!0,to:Bb[$b.t],B:Bb,distance:$b.distance}))});Infinity!==Xa&&Fb.forEach($b=>{2>Math.abs($b.gap-Xa)&&(la[$b.f]=
Te(Xd({},la[$b.f]),{isSnapped:!0,to:Bb[$b.t],B:Bb,distance:$b.distance}))})});a[0]=Infinity===Ta?0:Ta;a[1]=Infinity===Xa?0:Xa;H.minX-=a[0];H.midX-=a[0];H.maxX-=a[0];H.minY-=a[1];H.midY-=a[1];H.maxY-=a[1];sa.forEach(Bb=>{Bb=la[Bb];if(Bb.isSnapped){var {id:Mb,B:Fb}=Bb;Bb=H[Mb];fa.push("minX"===Mb?[[Bb,H.midY],[Bb,Fb.minY],[Bb,Fb.maxY]]:[[Bb,H.minY],[Bb,H.maxY],[Bb,Fb.minY],[Bb,Fb.maxY]])}});Ha.forEach(Bb=>{Bb=la[Bb];if(Bb.isSnapped){var {id:Mb,B:Fb}=Bb;Bb=H[Mb];fa.push("midY"===Mb?[[H.midX,Bb],[Fb.minX,
Bb],[Fb.maxX,Bb]]:[[H.minX,Bb],[H.maxX,Bb],[Fb.minX,Bb],[Fb.maxX,Bb]])}});return{offset:a,snapLines:fa}}static ensureRatio(a,d){const {width:k,height:H}=a,fa=Xd({},a);k/H<d?(fa.width=H*d,fa.maxX+=k-a.width):(fa.height=k/d,fa.maxY+=H-a.height);return fa}static getDistributions(a,d){var k=a.map(la=>{const sa=la.getBounds();return{id:la.id,point:[sa.minX,sa.minY],bounds:sa,center:la.getCenter()}});a=k.length;var H=ff.getCommonBounds(k.map(({bounds:la})=>la));const fa=[];switch(d){case "horizontal":d=
k.reduce((la,sa)=>la+sa.bounds.width,0);if(d>H.width){const la=k.sort((Xa,eb)=>Xa.bounds.minX-eb.bounds.minX)[0],sa=k.sort((Xa,eb)=>eb.bounds.maxX-Xa.bounds.maxX)[0];H=k.filter(Xa=>Xa!==la&&Xa!==sa).sort((Xa,eb)=>Xa.center[0]-eb.center[0]);const Ha=(sa.center[0]-la.center[0])/(a-1),Ta=la.center[0]+Ha;H.forEach(({id:Xa,point:eb,bounds:ib},Bb)=>{fa.push({id:Xa,prev:eb,next:[Ta+Ha*Bb-ib.width/2,ib.minY]})})}else{k=k.sort((Ha,Ta)=>Ha.center[0]-Ta.center[0]);let la=H.minX;const sa=(H.width-d)/(a-1);k.forEach(({id:Ha,
point:Ta,bounds:Xa})=>{fa.push({id:Ha,prev:Ta,next:[la,Xa.minY]});la+=Xa.width+sa})}break;case "vertical":if(d=k.reduce((la,sa)=>la+sa.bounds.height,0),d>H.height){const la=k.sort((Xa,eb)=>Xa.bounds.minY-eb.bounds.minY)[0],sa=k.sort((Xa,eb)=>eb.bounds.maxY-Xa.bounds.maxY)[0];H=k.filter(Xa=>Xa!==la&&Xa!==sa).sort((Xa,eb)=>Xa.center[1]-eb.center[1]);const Ha=(sa.center[1]-la.center[1])/(a-1),Ta=la.center[1]+Ha;H.forEach(({id:Xa,point:eb,bounds:ib},Bb)=>{fa.push({id:Xa,prev:eb,next:[ib.minX,Ta+Ha*Bb-
ib.height/2]})})}else{k=k.sort((Ha,Ta)=>Ha.center[1]-Ta.center[1]);let la=H.minY;const sa=(H.height-d)/(a-1);k.forEach(({id:Ha,point:Ta,bounds:Xa})=>{fa.push({id:Ha,prev:Ta,next:[Xa.minX,la]});la+=Xa.height+sa})}}return fa}static getPackedDistributions(a){const d=ff.getCommonBounds(a.map(({bounds:fa})=>fa)),k=[d.minX,d.minY],H=Object.fromEntries(a.map(fa=>[fa.id,[fa.bounds.minX,fa.bounds.minY]]));a=a.filter(fa=>{var la,sa,Ha,Ta;return!((null==(sa=null==(la=fa.props.handles)?void 0:la.start)?0:sa.bindingId)||
(null==(Ta=null==(Ha=fa.props.handles)?void 0:Ha.end)?0:Ta.bindingId))}).map(fa=>{const la=fa.getBounds();return{id:fa.id,w:la.width+16,h:la.height+16,x:la.minX,y:la.minY}});w(a);return a.map(({id:fa,x:la,y:sa})=>({id:fa,prev:H[fa],next:[la+k[0],sa+k[1]]}))}},up=class{static pointInCircle(a,d,k){return rd.dist(a,d)<=k}static pointInEllipse(a,d,k,H,fa=0){fa=fa||0;var la=Math.cos(fa);fa=Math.sin(fa);d=rd.sub(a,d);a=la*d[0]+fa*d[1];la=fa*d[0]-la*d[1];return 1>=a*a/(k*k)+la*la/(H*H)}static pointInRect(a,
d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let k=0;d.forEach((H,fa)=>{fa=d[(fa+1)%d.length];H[1]<=a[1]?fa[1]>a[1]&&0<rd.cross(H,fa,a)&&(k+=1):fa[1]<=a[1]&&0>rd.cross(H,fa,a)&&--k});return 0!==k}static pointInBounds(a,d){return!(a[0]<d.minX||a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,k=3){for(let H=1;H<d.length;H++)if(rd.distanceToLineSegment(d[H-1],d[H],a)<k)return!0;return!1}static _getSqSegDist(a,d,k){let H=d[0];d=d[1];let fa=
k[0]-H,la=k[1]-d;if(0!==fa||0!==la){const sa=((a[0]-H)*fa+(a[1]-d)*la)/(fa*fa+la*la);1<sa?(H=k[0],d=k[1]):0<sa&&(H+=fa*sa,d+=la*sa)}fa=a[0]-H;la=a[1]-d;return fa*fa+la*la}static _simplifyStep(a,d,k,H,fa){let la=H,sa=-1;for(let Ha=d+1;Ha<k;Ha++){const Ta=up._getSqSegDist(a[Ha],a[d],a[k]);Ta>la&&(sa=Ha,la=Ta)}-1<sa&&la>H&&(1<sa-d&&up._simplifyStep(a,d,sa,H,fa),fa.push(a[sa]),1<k-sa&&up._simplifyStep(a,sa,k,H,fa))}static simplify2(a,d=1){if(2>=a.length)return a;d*=d;var k=a[0],H=a[1];const fa=[k];for(let la=
1,sa=a.length;la<sa;la++)H=a[la],(H[0]-k[0])*(H[0]-k[0])+(H[1]-k[1])*(H[1]-k[1])>d&&(fa.push(H),k=H);k!==H&&fa.push(H);k=fa.length-1;H=[fa[0]];up._simplifyStep(fa,0,k,d,H);H.push(fa[k],a[a.length-1]);return H}static pointNearToPolyline(a,d,k=8){const H=d.length;for(let fa=1;fa<H;fa++)if(rd.distanceToLineSegment(d[fa-1],d[fa],a)<k)return!0;return!1}},ak=up;fb(ak,"simplify",(a,d=1)=>{var k=a.length;const H=a[0],fa=a[k-1],[la,sa]=H,[Ha,Ta]=fa;if(2<k){let Xa=0,eb=0;const ib=rd.len2([Ta-sa,Ha-la]);for(let Bb=
1;Bb<k-1;Bb++){const [Mb,Fb]=a[Bb],$b=Math.pow(Mb*(Ta-sa)+la*(Fb-Ta)+Ha*(sa-Fb),2)/ib;Xa>$b||(Xa=$b,eb=Bb)}if(Xa>d)return k=up.simplify(a.slice(0,eb+1),d),a=up.simplify(a.slice(eb+1),d),k.concat(a.slice(1))}return[H,fa]});var il=Math.PI,Bn=il/2,sk=2*il,Iq={},lt={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",
bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},am=class{static circleFromThreePoints(a,d,k){const [H,fa]=a,[la,sa]=d,[Ha,Ta]=k;d=H*(sa-Ta)-fa*(la-Ha)+la*Ta-Ha*sa;a=-((H*H+fa*fa)*(Ta-sa)+(la*la+sa*sa)*(fa-Ta)+(Ha*Ha+Ta*Ta)*(sa-fa))/(2*d);d=-((H*H+fa*fa)*(la-Ha)+(la*la+sa*sa)*(Ha-H)+(Ha*Ha+Ta*Ta)*(H-la))/(2*d);return[a,d,Math.hypot(a-H,d-fa)]}static perimeterOfEllipse(a,d){const k=Math.pow(a-
d,2)/Math.pow(a+d,2);return il*(a+d)*(1+3*k/(10+Math.sqrt(4-3*k)))}static shortAngleDist(a,d){a=(d-a)%sk;return 2*a%sk-a}static longAngleDist(a,d){return sk-am.shortAngleDist(a,d)}static lerpAngles(a,d,k){return a+am.shortAngleDist(a,d)*k}static angleDelta(a,d){return am.shortAngleDist(a,d)}static getSweep(a,d,k){return am.angleDelta(Rd.angle(a,d),Rd.angle(a,k))}static clampRadians(a){return(sk+a)%sk}static snapAngleToSegments(a,d){d=sk/d;a=Math.floor((am.clampRadians(a)+d/2)/d)*d%sk;a<il&&(a+=sk);
a>il&&(a-=sk);return a}static isAngleBetween(a,d,k){if(k===a||k===d)return!0;d=(d-a+Bn)%Bn;return d<=il!==(k-a+Bn)%Bn>d}static degreesToRadians(a){return a*il/180}static radiansToDegrees(a){return 180*a/il}static getArcLength(a,d,k,H){a=am.getSweep(a,k,H);return a/sk*sk*d}static getSweepFlag(a,d,k){k=Rd.angle(a,k);return 0<(Rd.angle(a,d)-k+3*il)%sk-il?0:1}static getLargeArcFlag(a,d,k){a=Rd.angle(k,a);d=(Rd.angle(k,d)-a+3*il)%sk-il;return Math.abs(d)>Bn?0:1}static getArcDashOffset(a,d,k,H,fa){const la=
am.getSweepFlag(a,k,H);d=am.getArcLength(a,d,k,H);return-(0>la?d:sk*a[2]-d)/2+fa}static getEllipseDashOffset(a,d){return-(sk*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},Mk=class{static getPolygonCentroid(a){var d=a.map(k=>k[0]);a=a.map(k=>k[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+Math.max(...a);return[d?d/2:0,a?a/2:0]}};fb(Mk,"getEdges",a=>{const d=a.length;return a.map((k,H)=>
[k,a[(H+1)%d]])});fb(Mk,"getEdgeOutwardNormal",(a,d)=>Rd.per(Rd.uni(Rd.sub(d,a))));fb(Mk,"getEdgeInwardNormal",(a,d)=>Rd.neg(Mk.getEdgeOutwardNormal(a,d)));fb(Mk,"getOffsetEdge",(a,d,k)=>{k=Rd.mul(Rd.per(Rd.uni(Rd.sub(d,a))),k);return[Rd.add(a,k),Rd.add(d,k)]});fb(Mk,"getOffsetEdges",(a,d)=>a.map(([k,H])=>Mk.getOffsetEdge(k,H,d)));fb(Mk,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[Rd.add(a,[-d,-d]),Rd.add(a,[d,-d]),Rd.add(a,[d,
d]),Rd.add(a,[-d,d])];if(2===a.length){const [k,H]=a;return[...Mk.getOffsetEdge(k,H,d),...Mk.getOffsetEdge(H,k,d)]}return Mk.getOffsetEdges(Mk.getEdges(a),d).flatMap((k,H,fa)=>{{H=fa[(H+1)%fa.length];const la=rd.slope(k[0],k[1]);fa=rd.slope(H[0],H[1]);la!==fa?Number.isNaN(la)&&!Number.isNaN(fa)?k=[k[0][0],(k[0][0]-H[0][0])*fa+H[0][1]]:Number.isNaN(fa)&&!Number.isNaN(la)?k=[H[0][0],(H[0][0]-k[0][0])*la+k[0][1]]:(k=(la*k[0][0]-fa*H[0][0]+H[0][1]-k[0][1])/(la-fa),k=[k,fa*(k-H[0][0])+H[0][1]]):k=void 0}if(void 0===
k)throw Error("Expected an intersection");return k})});fb(Mk,"getPolygonVertices",(a,d,k=0,H=1)=>{a=Rd.div(a,2);const [fa,la]=[Math.max(1,a[0]-k),Math.max(1,a[1]-k)];k=[];for(let Xa=0,eb=sk/d;Xa<d;Xa++){var sa=(-Bn+Xa*eb)%sk,Ha=(-Bn+(Xa+1)*eb)%sk;sa=Rd.add(a,[fa*Math.cos(sa),la*Math.sin(sa)]);Ha=Rd.add(a,[fa*Math.cos(Ha),la*Math.sin(Ha)]);var Ta=Rd.med(sa,Ha);Ta=Rd.nudge(Ta,a,Rd.dist(a,Ta)*(1-H));k.push(sa,Ta,Ha)}return k});fb(Mk,"getTriangleVertices",(a,d=0,k=1)=>{const [H,fa]=a;var la=1-k;a=[H/
2,d/2];k=[H-d,fa-d];d=[d/2,fa-d];const sa=Mk.getPolygonCentroid([a,k,d]),Ha=Rd.med(a,k),Ta=Rd.med(k,d),Xa=Rd.med(d,a),eb=Rd.dist(Ha,sa)*la,ib=Rd.dist(Ta,sa)*la;la*=Rd.dist(Xa,sa);return[a,eb?Rd.nudge(Ha,sa,eb):Ha,k,ib?Rd.nudge(Ta,sa,ib):Ta,d,la?Rd.nudge(Xa,sa,la):Xa]});fb(Mk,"getStarVertices",(a,d,k,H=1)=>{const fa=Rd.div(d,2),la=Rd.mul(fa,H/2),sa=sk/k/2;return Array.from(Array(2*k)).map((Ha,Ta)=>{Ha=-Bn+Ta*sa;const [Xa,eb]=Ta%2?la:fa;return Rd.add(a,[Xa*Math.cos(Ha),eb*Math.sin(Ha)])})});var wu=
class{static getCurvedPathForPolygon(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],k=a.length;for(let H=1;H<k;H++){const [fa,la]=a[H],[sa,Ha]=a[(H+1)%k];d.push(fa,la,(fa+sa)/2,(la+Ha)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],k=a.length;for(let H=1;H<k-1;H++){const [fa,la]=a[H],[sa,Ha]=a[H+
1];d.push(fa,la,(fa+sa)/2,(la+Ha)/2)}return d.join(" ")}static getSvgPathFromStroke(a,d=!0){const k=a.length;if(4>k)return"";let H=a[0],fa=a[1];var la=a[2];la=`M${H[0].toFixed(2)},${H[1].toFixed(2)} Q${fa[0].toFixed(2)},${fa[1].toFixed(2)} ${((fa[0]+la[0])/2).toFixed(2)},${((fa[1]+la[1])/2).toFixed(2)} T`;for(let sa=2,Ha=k-1;sa<Ha;sa++)H=a[sa],fa=a[sa+1],la+=`${((H[0]+fa[0])/2).toFixed(2)},${((H[1]+fa[1])/2).toFixed(2)} `;d&&(la+="Z");return la}static getSvgPathFromStrokePoints(a,d=!1){const k=a.length;
if(4>k)return"";let H=a[0].point,fa=a[1].point;var la=a[2].point;la=`M${H[0].toFixed(2)},${H[1].toFixed(2)} Q${fa[0].toFixed(2)},${fa[1].toFixed(2)} ${((fa[0]+la[0])/2).toFixed(2)},${((fa[1]+la[1])/2).toFixed(2)} T`;for(let sa=2,Ha=k-1;sa<Ha;sa++)H=a[sa].point,fa=a[sa+1].point,la+=`${((H[0]+fa[0])/2).toFixed(2)},${((H[1]+fa[1])/2).toFixed(2)} `;d&&(la+="Z");return la}};fb(wu,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var px={},qx=Object.assign,aq=Object.getOwnPropertyDescriptor,
xp=Object.defineProperty,bq=Object.prototype,ba=[];Object.freeze(ba);var ma={};Object.freeze(ma);var Fa="undefined"!==typeof Proxy,db=Object.toString(),vb=function(){},fc="undefined"!==typeof Object.getOwnPropertySymbols,Cc="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:fc?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,Sc=Object.getOwnPropertyDescriptors||function(a){var d={};Cc(a).forEach(function(k){d[k]=aq(a,k)});
return d},wd=Symbol("mobx-stored-annotations"),Od=Symbol("mobx administration"),cg=function(){function a(k){void 0===k&&(k="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=jj.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=k}var d=a.prototype;d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(k){return k()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(k){return k()})};
d.reportObserved=function(){return Cb(this)};d.reportChanged=function(){Wc();Xb(this);qd()};d.toString=function(){return this.name_};return a}(),mh=G("Atom",cg),We={identity:function(a,d){return a===d},structural:function(a,d){return ya(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,d){return ya(a,d,1)}},Bg="override",sh=ob(),Rg={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Rg);var de=xb("observable"),Id=
xb("observable.ref",{enhancer:Wa}),ae=xb("observable.shallow",{enhancer:function(a,d,k){if(void 0===a||null===a||me(a)||Xc(a)||Ar(a)||Fs(a))return a;if(Array.isArray(a))return De.array(a,{name:k,deep:!1});if(M(a))return De.object(a,void 0,{name:k,deep:!1});if(O(a))return De.map(a,{name:k,deep:!1});if(S(a))return De.set(a,{name:k,deep:!1})}}),Re=xb("observable.struct",{enhancer:function(a,d){return ya(a,d)?d:a}}),$e=Da(de);Object.assign(Ob,$e);var Dh={box:function(a,d){d=d||Rg;return new Ds(a,hb(d),
d.name,!0,d.equals)},array:function(a,d){d=d||Rg;return(!1===wf.useProxies||!1===d.proxy?of:kb)(a,hb(d),d.name)},map:function(a,d){d=d||Rg;return new Gz(a,hb(d),d.name)},set:function(a,d){d=d||Rg;return new Hz(a,hb(d),d.name)},object:function(a,d,k){if(!1===wf.useProxies||!1===(null==k?void 0:k.proxy))k=vd({},k);else{var H={},fa,la;C();H=vd(H,k);k=null!=(la=(fa=H[Od]).proxy_)?la:fa.proxy_=new Proxy(H,jE)}return Qd(k,a,d)},ref:Da(Id),shallow:Da(ae),deep:$e,struct:Da(Re)},De=qx(Ob,Dh),xh=Ya("computed"),
di=Ya("computed.struct",{equals:We.structural}),nf=function(a,d){if(R(d))return La(a,d,xh);if(M(a))return Da(Ya("computed",a));d=M(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new Eu(d)};Object.assign(nf,xh);nf.struct=Da(di);var sp,Nv,Qv=0,XD=1,YD=null!=(sp=null==(Nv=aq(function(){},"name"))?void 0:Nv.configurable)?sp:!1,Az={value:"action",configurable:!0,writable:!1,enumerable:!1};var ZD=Symbol.toPrimitive;var Ds=function(a){function d(H,fa,la,sa,Ha){void 0===la&&(la="ObservableValue");void 0===
Ha&&(Ha=We["default"]);sa=a.call(this,la)||this;sa.enhancer=void 0;sa.hasUnreportedChange_=!1;sa.interceptors_=void 0;sa.changeListeners_=void 0;sa.value_=void 0;sa.dehancer=void 0;sa.enhancer=fa;sa.name_=la;sa.equals=Ha;sa.value_=fa(H,void 0,la);return sa}ea(d,a);var k=d.prototype;k.dehanceValue=function(H){return void 0!==this.dehancer?this.dehancer(H):H};k.set=function(H){H=this.prepareNewValue_(H);H!==wf.UNCHANGED&&this.setNewValue_(H)};k.prepareNewValue_=function(H){if(Md(this)){H=ec(this,{object:this,
type:jq,newValue:H});if(!H)return wf.UNCHANGED;H=H.newValue}H=this.enhancer(H,this.value_,this.name_);return this.equals(this.value_,H)?wf.UNCHANGED:H};k.setNewValue_=function(H){var fa=this.value_;this.value_=H;this.reportChanged();bf(this)&&oe(this,{type:jq,object:this,newValue:H,oldValue:fa})};k.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};k.intercept_=function(H){return Pc(this,H)};k.observe_=function(H,fa){fa&&H({observableKind:"value",debugObjectName:this.name_,
object:this,type:jq,newValue:this.value_,oldValue:void 0});return Qe(this,H)};k.raw=function(){return this.value_};k.toJSON=function(){return this.get()};k.toString=function(){return this.name_+"["+this.value_+"]"};k.valueOf=function(){return ka(this.get())};k[ZD]=function(){return this.valueOf()};return d}(cg),$D=G("ObservableValue",Ds);var aE=Symbol.toPrimitive;var Eu=function(){function a(k){this.dependenciesState_=jj.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=
this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=jj.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Es(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=zt.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;k.get||f(31);this.derivation=k.get;this.name_=k.name||"ComputedValue";k.set&&
(this.setter_=tb("ComputedValue-setter",k.set));this.equals_=k.equals||(k.compareStructural||k.struct?We.structural:We["default"]);this.scope_=k.context;this.requiresReaction_=k.requiresReaction;this.keepAlive_=!!k.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){jb(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(k){return k()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(k){return k()})};d.get=function(){this.isComputing_&&f(32,this.name_,this.derivation);
if(0!==wf.inBatch||0!==this.observers_.size||this.keepAlive_){if(Cb(this),tc(this)){var k=wf.trackingContext;this.keepAlive_&&!k&&(wf.trackingContext=this);this.trackAndCompute()&&Tb(this);wf.trackingContext=k}}else tc(this)&&(this.warnAboutUntrackedRead_(),Wc(),this.value_=this.computeValue_(!1),qd());k=this.value_;if(k instanceof Es)throw k.cause;return k};d.set=function(k){if(this.setter_){this.isRunningSetter_&&f(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,k)}finally{this.isRunningSetter_=
!1}}else f(34,this.name_)};d.trackAndCompute=function(){var k=this.value_,H=this.dependenciesState_===jj.NOT_TRACKING_,fa=this.computeValue_(!0);if(k=H||k instanceof Es||fa instanceof Es||!this.equals_(k,fa))this.value_=fa;return k};d.computeValue_=function(k){this.isComputing_=!0;var H=ac(!1);if(k)var fa=wc(this,this.derivation,this.scope_);else if(!0===wf.disableErrorBoundaries)fa=this.derivation.call(this.scope_);else try{fa=this.derivation.call(this.scope_)}catch(la){fa=new Es(la)}wf.allowStateChanges=
H;this.isComputing_=!1;return fa};d.suspend_=function(){this.keepAlive_||(Gb(this),this.value_=void 0)};d.observe_=function(k,H){var fa=this,la=!0,sa=void 0;return xd(function(){var Ha=fa.get();if(!la||H){var Ta=Ab();k({observableKind:"computed",debugObjectName:fa.name_,type:jq,object:fa,newValue:Ha,oldValue:sa});wf.trackingDerivation=Ta}la=!1;sa=Ha})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};d.valueOf=function(){return ka(this.get())};
d[aE]=function(){return this.valueOf()};return a}(),Fu=G("ComputedValue",Eu),jj;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(jj||={});var zt;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(zt||={});var Es=function(a){this.cause=void 0;this.cause=a},Rv=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=
this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},Sv=!0,Bz=!1,wf=function(){var a=F();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&
(Sv=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new Rv).version&&(Sv=!1);if(Sv){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED={}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new Rv}setTimeout(function(){Bz||f(35)},1);return new Rv}(),At=function(){function a(k,H,fa,la){void 0===k&&(k="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];
this.dependenciesState_=jj.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=zt.NONE;this.name_=k;this.onInvalidate_=H;this.errorHandler_=fa;this.requiresObservable_=la}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,wf.pendingReactions.push(this),0<wf.inBatch||wf.isRunningReactions||Tv(sb))};d.isScheduled=function(){return this.isScheduled_};
d.runReaction_=function(){if(!this.isDisposed_){Wc();this.isScheduled_=!1;var k=wf.trackingContext;wf.trackingContext=this;if(tc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(H){this.reportExceptionInDerivation_(H)}}wf.trackingContext=k;qd()}};d.track=function(k){if(!this.isDisposed_){Wc();this.isRunning_=!0;var H=wf.trackingContext;wf.trackingContext=this;k=wc(this,k,void 0);wf.trackingContext=H;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Gb(this);k instanceof Es&&this.reportExceptionInDerivation_(k.cause);
qd()}};d.reportExceptionInDerivation_=function(k){var H=this;if(this.errorHandler_)this.errorHandler_(k,this);else{if(wf.disableErrorBoundaries)throw k;wf.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",k);wf.globalReactionErrorHandlers.forEach(function(fa){return fa(k,H)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Wc(),Gb(this),qd()))};d.getDisposer_=function(){var k=this.dispose.bind(this);k[Od]=this;return k};d.toString=function(){return"Reaction["+
this.name_+"]"};d.trace=function(k){void 0===k&&(k=!1);Mf(this,k)};return a}(),bE=100,Tv=function(a){return a()},Uv=G("Reaction",At),Cz="action",Dz=Ka(Cz),cE=Ka("action.bound",{bound:!0}),Ez=Ka("autoAction",{autoAction:!0}),dE=Ka("autoAction.bound",{autoAction:!0,bound:!0}),jg=dd(!1);Object.assign(jg,Dz);var Gu=dd(!0);Object.assign(Gu,Ez);jg.bound=Da(cE);Gu.bound=Da(dE);var eE=function(a){return a()},fE="onBO",gE="onBUO",hE=0;dc.prototype=Object.create(Error.prototype);var Fz=ja("flow"),iE=ja("flow.bound",
{bound:!0}),Hu=Object.assign(function(a,d){if(R(d))return La(a,d,Fz);var k=a.name||"\x3cunnamed flow\x3e";d=function(){var H=arguments,fa=++hE,la=jg(k+" - runid: "+fa+" - init",a).apply(this,H),sa,Ha=void 0;H=new Promise(function(Ta,Xa){function eb(Fb){Ha=void 0;try{var $b=jg(k+" - runid: "+fa+" - yield "+Mb++,la.next).call(la,Fb)}catch(nc){return Xa(nc)}Bb($b)}function ib(Fb){Ha=void 0;try{var $b=jg(k+" - runid: "+fa+" - yield "+Mb++,la["throw"]).call(la,Fb)}catch(nc){return Xa(nc)}Bb($b)}function Bb(Fb){if(W(null==
Fb?void 0:Fb.then))Fb.then(Bb,Xa);else{if(Fb.done)return Ta(Fb.value);Ha=Promise.resolve(Fb.value);return Ha.then(eb,ib)}}var Mb=0;sa=Xa;eb(void 0)});H.cancel=jg(k+" - runid: "+fa+" - cancel",function(){try{if(Ha){var Ta=Ha;W(Ta.cancel)&&Ta.cancel()}var Xa=la["return"](void 0),eb=Promise.resolve(Xa.value);eb.then(vb,vb);W(eb.cancel)&&eb.cancel();sa(new dc)}catch(ib){sa(ib)}});return H};d.isMobXFlow=!0;return d},Fz);Hu.bound=Da(iE);var jE={has:function(a,d){return a[Od].has_(d)},get:function(a,d){return a[Od].get_(d)},
set:function(a,d,k){var H;return R(d)?null!=(H=a[Od].set_(d,k,!0))?H:!0:!1},deleteProperty:function(a,d){var k;return R(d)?null!=(k=a[Od].delete_(d,!0))?k:!0:!1},defineProperty:function(a,d,k){var H;return null!=(H=a[Od].defineProperty_(d,k))?H:!0},ownKeys:function(a){return a[Od].ownKeys_()},preventExtensions:function(a){f(13)}},jq="update",kE={get:function(a,d){var k=a[Od];return d===Od?k:"length"===d?k.getArrayLength_():"string"!==typeof d||isNaN(d)?Q(Vv,d)?Vv[d]:a[d]:k.get_(parseInt(d))},set:function(a,
d,k){var H=a[Od];"length"===d&&H.setArrayLength_(k);"symbol"===typeof d||isNaN(d)?a[d]=k:H.set_(parseInt(d),k);return!0},preventExtensions:function(){f(15)}},tx=function(){function a(k,H,fa,la){void 0===k&&(k="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=fa;this.legacyMode_=la;this.atom_=new cg(k);this.enhancer_=function(sa,Ha){return H(sa,
Ha,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.dehanceValues_=function(k){return void 0!==this.dehancer&&0<k.length?k.map(this.dehancer):k};d.intercept_=function(k){return Pc(this,k)};d.observe_=function(k,H){void 0===H&&(H=!1);H&&k({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Qe(this,
k)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(k){("number"!==typeof k||isNaN(k)||0>k)&&f("Out of range: "+k);var H=this.values_.length;if(k!==H)if(k>H){for(var fa=Array(k-H),la=0;la<k-H;la++)fa[la]=void 0;this.spliceWithArray_(H,0,fa)}else this.spliceWithArray_(k,H-k)};d.updateArrayLength_=function(k,H){k!==this.lastKnownLength_&&f(16);this.lastKnownLength_+=H;this.legacyMode_&&0<H&&ke(k+H+1)};d.spliceWithArray_=function(k,H,fa){var la=
this,sa=this.values_.length;void 0===k?k=0:k>sa?k=sa:0>k&&(k=Math.max(0,sa+k));H=1===arguments.length?sa-k:void 0===H||null===H?0:Math.max(0,Math.min(H,sa-k));void 0===fa&&(fa=ba);if(Md(this)){var Ha=ec(this,{object:this.proxy_,type:"splice",index:k,removedCount:H,added:fa});if(!Ha)return ba;H=Ha.removedCount;fa=Ha.added}fa=0===fa.length?fa:fa.map(function(Ta){return la.enhancer_(Ta,void 0)});this.legacyMode_&&this.updateArrayLength_(sa,fa.length-H);sa=this.spliceItemsIntoValues_(k,H,fa);0===H&&0===
fa.length||this.notifyArraySplice_(k,fa,sa);return this.dehanceValues_(sa)};d.spliceItemsIntoValues_=function(k,H,fa){if(1E4>fa.length){var la;return(la=this.values_).splice.apply(la,[k,H].concat(fa))}la=this.values_.slice(k,k+H);var sa=this.values_.slice(k+H);this.values_.length+=fa.length-H;for(H=0;H<fa.length;H++)this.values_[k+H]=fa[H];for(H=0;H<sa.length;H++)this.values_[k+fa.length+H]=sa[H];return la};d.notifyArrayChildUpdate_=function(k,H,fa){var la=!this.owned_&&!1,sa=bf(this);k=sa||la?{observableKind:"array",
object:this.proxy_,type:jq,debugObjectName:this.atom_.name_,index:k,newValue:H,oldValue:fa}:null;this.atom_.reportChanged();sa&&oe(this,k)};d.notifyArraySplice_=function(k,H,fa){var la=!this.owned_&&!1,sa=bf(this);k=sa||la?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:k,removed:fa,added:H,removedCount:fa.length,addedCount:H.length}:null;this.atom_.reportChanged();sa&&oe(this,k)};d.get_=function(k){if(this.legacyMode_&&k>=this.values_.length)console.warn("[mobx] Out of bounds read: "+
k);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[k])};d.set_=function(k,H){var fa=this.values_;this.legacyMode_&&k>fa.length&&f(17,k,fa.length);if(k<fa.length){var la=fa[k];if(Md(this)){H=ec(this,{type:jq,object:this.proxy_,index:k,newValue:H});if(!H)return;H=H.newValue}H=this.enhancer_(H,la);H!==la&&(fa[k]=H,this.notifyArrayChildUpdate_(k,H,la))}else{k=Array(k+1-fa.length);for(la=0;la<k.length-1;la++)k[la]=void 0;k[k.length-1]=H;this.spliceWithArray_(fa.length,0,k)}};return a}(),
Vv={clear:function(){return this.splice(0)},replace:function(a){var d=this[Od];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},splice:function(a,d){for(var k=arguments.length,H=Array(2<k?k-2:0),fa=2;fa<k;fa++)H[fa-2]=arguments[fa];k=this[Od];switch(arguments.length){case 0:return[];case 1:return k.spliceWithArray_(a);case 2:return k.spliceWithArray_(a,d)}return k.spliceWithArray_(a,d,H)},spliceWithArray:function(a,d,k){return this[Od].spliceWithArray_(a,d,k)},
push:function(){for(var a=this[Od],d=arguments.length,k=Array(d),H=0;H<d;H++)k[H]=arguments[H];a.spliceWithArray_(a.values_.length,0,k);return a.values_.length},pop:function(){return this.splice(Math.max(this[Od].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var a=this[Od],d=arguments.length,k=Array(d),H=0;H<d;H++)k[H]=arguments[H];a.spliceWithArray_(0,0,k);return a.values_.length},reverse:function(){wf.trackingDerivation&&f(37,"reverse");this.replace(this.slice().reverse());
return this},sort:function(){wf.trackingDerivation&&f(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[Od];a=d.dehanceValues_(d.values_).indexOf(a);return-1<a?(this.splice(a,1),!0):!1}};qb("concat",nb);qb("flat",nb);qb("includes",nb);qb("indexOf",nb);qb("join",nb);qb("lastIndexOf",nb);qb("slice",nb);qb("toString",nb);qb("toLocaleString",nb);qb("every",Rb);qb("filter",Rb);qb("find",Rb);qb("findIndex",Rb);qb("flatMap",Rb);qb("forEach",
Rb);qb("map",Rb);qb("some",Rb);qb("reduce",Ib);qb("reduceRight",Ib);var lE=G("ObservableArrayAdministration",tx),mE={};var nE=Symbol.iterator;var oE=Symbol.toStringTag;var Gz=function(){function a(k,H,fa){var la=this;void 0===H&&(H=Ra);void 0===fa&&(fa="ObservableMap");this.name_=this.enhancer_=void 0;this[Od]=mE;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=H;this.name_=fa;W(Map)||f(18);this.keysAtom_=Za("ObservableMap.keys()");
this.data_=new Map;this.hasMap_=new Map;Ub(!0,function(){la.merge(k)})}var d=a.prototype;d.has_=function(k){return this.data_.has(k)};d.has=function(k){var H=this;if(!wf.trackingDerivation)return this.has_(k);var fa=this.hasMap_.get(k);if(!fa){var la=fa=new Ds(this.has_(k),Wa,"ObservableMap.key?",!1);this.hasMap_.set(k,la);ee(la,function(){return H.hasMap_["delete"](k)})}return fa.get()};d.set=function(k,H){var fa=this.has_(k);if(Md(this)){H=ec(this,{type:fa?jq:"add",object:this,newValue:H,name:k});
if(!H)return this;H=H.newValue}fa?this.updateValue_(k,H):this.addValue_(k,H);return this};d["delete"]=function(k){var H=this;if(Md(this)&&!ec(this,{type:"delete",object:this,name:k}))return!1;if(this.has_(k)){var fa=bf(this),la=fa?{observableKind:"map",debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(k).value_,name:k}:null;gd(function(){var sa;H.keysAtom_.reportChanged();null==(sa=H.hasMap_.get(k))?void 0:sa.setNewValue_(!1);H.data_.get(k).setNewValue_(void 0);H.data_["delete"](k)});
fa&&oe(this,la);return!0}return!1};d.updateValue_=function(k,H){var fa=this.data_.get(k);H=fa.prepareNewValue_(H);if(H!==wf.UNCHANGED){var la=bf(this);k=la?{observableKind:"map",debugObjectName:this.name_,type:jq,object:this,oldValue:fa.value_,name:k,newValue:H}:null;fa.setNewValue_(H);la&&oe(this,k)}};d.addValue_=function(k,H){var fa=this;gd(function(){var Ha,Ta=new Ds(H,fa.enhancer_,"ObservableMap.key",!1);fa.data_.set(k,Ta);H=Ta.value_;null==(Ha=fa.hasMap_.get(k))?void 0:Ha.setNewValue_(!0);fa.keysAtom_.reportChanged()});
var la=bf(this),sa=la?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:k,newValue:H}:null;la&&oe(this,sa)};d.get=function(k){return this.has(k)?this.dehanceValue_(this.data_.get(k).get()):this.dehanceValue_(void 0)};d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var k=this,H=this.keys();return Na({next:function(){var fa=H.next(),la=fa.done;fa=fa.value;
return{done:la,value:la?void 0:k.get(fa)}}})};d.entries=function(){var k=this,H=this.keys();return Na({next:function(){var fa=H.next(),la=fa.done;fa=fa.value;return{done:la,value:la?void 0:[fa,k.get(fa)]}}})};d[nE]=function(){return this.entries()};d.forEach=function(k,H){for(var fa=Ja(this),la;!(la=fa()).done;)la=la.value,k.call(H,la[1],la[0],this)};d.merge=function(k){var H=this;Ar(k)&&(k=new Map(k));gd(function(){M(k)?K(k).forEach(function(fa){return H.set(fa,k[fa])}):Array.isArray(k)?k.forEach(function(fa){return H.set(fa[0],
fa[1])}):O(k)?(k.constructor!==Map&&f(19,k),k.forEach(function(fa,la){return H.set(la,fa)})):null!==k&&void 0!==k&&f(20,k)});return this};d.clear=function(){var k=this;gd(function(){kc(function(){for(var H=Ja(k.keys()),fa;!(fa=H()).done;)k["delete"](fa.value)})})};d.replace=function(k){var H=this;gd(function(){for(var fa=Yc(k),la=new Map,sa=!1,Ha=Ja(H.data_.keys()),Ta;!(Ta=Ha()).done;)if(Ta=Ta.value,!fa.has(Ta))if(H["delete"](Ta))sa=!0;else{var Xa=H.data_.get(Ta);la.set(Ta,Xa)}for(fa=Ja(fa.entries());!(Ha=
fa()).done;)Ta=Ha.value,Ha=Ta[0],Xa=Ta[1],Ta=H.data_.has(Ha),H.set(Ha,Xa),H.data_.has(Ha)&&(Xa=H.data_.get(Ha),la.set(Ha,Xa),Ta||(sa=!0));if(!sa)if(H.data_.size!==la.size)H.keysAtom_.reportChanged();else for(sa=H.data_.keys(),fa=la.keys(),Ha=sa.next(),Ta=fa.next();!Ha.done;){if(Ha.value!==Ta.value){H.keysAtom_.reportChanged();break}Ha=sa.next();Ta=fa.next()}H.data_=la});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(k,
H){return Qe(this,k)};d.intercept_=function(k){return Pc(this,k)};V(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:oE,get:function(){return"Map"}}]);return a}(),Ar=G("ObservableMap",Gz),pE={};var qE=Symbol.iterator;var rE=Symbol.toStringTag;var Hz=function(){function a(k,H,fa){void 0===H&&(H=Ra);void 0===fa&&(fa="ObservableSet");this.name_=void 0;this[Od]=pE;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=
void 0;this.name_=fa;W(Set)||f(22);this.atom_=Za(this.name_);this.enhancer_=function(la,sa){return H(la,sa,fa)};k&&this.replace(k)}var d=a.prototype;d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.clear=function(){var k=this;gd(function(){kc(function(){for(var H=Ja(k.data_.values()),fa;!(fa=H()).done;)k["delete"](fa.value)})})};d.forEach=function(k,H){for(var fa=Ja(this),la;!(la=fa()).done;)la=la.value,k.call(H,la,la,this)};d.add=function(k){var H=this;if(Md(this)&&
!ec(this,{type:"add",object:this,newValue:k}))return this;if(!this.has(k)){gd(function(){H.data_.add(H.enhancer_(k,void 0));H.atom_.reportChanged()});var fa=bf(this),la=fa?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,newValue:k}:null;fa&&oe(this,la)}return this};d["delete"]=function(k){var H=this;if(Md(this)&&!ec(this,{type:"delete",object:this,oldValue:k}))return!1;if(this.has(k)){var fa=bf(this),la=fa?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,
oldValue:k}:null;gd(function(){H.atom_.reportChanged();H.data_["delete"](k)});fa&&oe(this,la);return!0}return!1};d.has=function(k){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(k))};d.entries=function(){var k=0,H=Array.from(this.keys()),fa=Array.from(this.values());return Na({next:function(){var la=k;k+=1;return la<fa.length?{value:[H[la],fa[la]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var k=this,H=0,fa=
Array.from(this.data_.values());return Na({next:function(){return H<fa.length?{value:k.dehanceValue_(fa[H++]),done:!1}:{done:!0}}})};d.replace=function(k){var H=this;Fs(k)&&(k=new Set(k));gd(function(){Array.isArray(k)?(H.clear(),k.forEach(function(fa){return H.add(fa)})):S(k)?(H.clear(),k.forEach(function(fa){return H.add(fa)})):null!==k&&void 0!==k&&f("Cannot initialize set from "+k)});return this};d.observe_=function(k,H){return Qe(this,k)};d.intercept_=function(k){return Pc(this,k)};d.toJSON=
function(){return Array.from(this)};d.toString=function(){return"[object ObservableSet]"};d[qE]=function(){return this.values()};V(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:rE,get:function(){return"Set"}}]);return a}(),Fs=G("ObservableSet",Hz),Iz=Object.create(null),Jz=function(){function a(k,H,fa,la){void 0===H&&(H=new Map);void 0===la&&(la=sh);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=
this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=k;this.values_=H;this.name_=fa;this.defaultAnnotation_=la;this.keysAtom_=new cg("ObservableObject.keys");this.isPlainObject_=M(this.target_)}var d=a.prototype;d.getObservablePropValue_=function(k){return this.values_.get(k).get()};d.setObservablePropValue_=function(k,H){var fa=this.values_.get(k);if(fa instanceof Eu)return fa.set(H),!0;if(Md(this)){H=ec(this,{type:jq,object:this.proxy_||this.target_,name:k,newValue:H});
if(!H)return null;H=H.newValue}H=fa.prepareNewValue_(H);if(H!==wf.UNCHANGED){var la=bf(this);k=la?{type:jq,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:fa.value_,name:k,newValue:H}:null;fa.setNewValue_(H);la&&oe(this,k)}return!0};d.get_=function(k){wf.trackingDerivation&&!Q(this.target_,k)&&this.has_(k);return this.target_[k]};d.set_=function(k,H,fa){void 0===fa&&(fa=!1);if(Q(this.target_,k)){if(this.values_.has(k))return this.setObservablePropValue_(k,
H);if(fa)return Reflect.set(this.target_,k,H);this.target_[k]=H;return!0}return this.extend_(k,{value:H,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,fa)};d.has_=function(k){if(!wf.trackingDerivation)return k in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var H=this.pendingKeys_.get(k);H||(H=new Ds(k in this.target_,Wa,"ObservableObject.key?",!1),this.pendingKeys_.set(k,H));return H.get()};d.make_=function(k,H){!0===H&&(H=this.defaultAnnotation_);if(!1!==H){if(!(k in
this.target_)){var fa;if(null!=(fa=this.target_[wd])&&fa[k])return;f(1,H.annotationType_,this.name_+"."+k.toString())}for(fa=this.target_;fa&&fa!==bq;){var la=aq(fa,k);if(la){la=H.make_(this,k,la,fa);if(0===la)return;if(1===la)break}fa=Object.getPrototypeOf(fa)}var sa;null==(sa=this.target_[wd])?!0:delete sa[k]}};d.extend_=function(k,H,fa,la){void 0===la&&(la=!1);!0===fa&&(fa=this.defaultAnnotation_);if(!1===fa)return this.defineProperty_(k,H,la);if(H=fa.extend_(this,k,H,la)){var sa;null==(sa=this.target_[wd])?
!0:delete sa[k]}return H};d.defineProperty_=function(k,H,fa){void 0===fa&&(fa=!1);try{Wc();var la=this.delete_(k);if(!la)return la;if(Md(this)){var sa=ec(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:H.value});if(!sa)return null;var Ha=sa.newValue;H.value!==Ha&&(H=P({},H,{value:Ha}))}if(fa){if(!Reflect.defineProperty(this.target_,k,H))return!1}else xp(this.target_,k,H);this.notifyPropertyAddition_(k,H.value)}finally{qd()}return!0};d.defineObservableProperty_=function(k,H,fa,la){void 0===
la&&(la=!1);try{Wc();var sa=this.delete_(k);if(!sa)return sa;if(Md(this)){var Ha=ec(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:H});if(!Ha)return null;H=Ha.newValue}var Ta=ge(k),Xa={configurable:wf.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Ta.get,set:Ta.set};if(la){if(!Reflect.defineProperty(this.target_,k,Xa))return!1}else xp(this.target_,k,Xa);var eb=new Ds(H,fa,"ObservableObject.key",!1);this.values_.set(k,eb);this.notifyPropertyAddition_(k,eb.value_)}finally{qd()}return!0};
d.defineComputedProperty_=function(k,H,fa){void 0===fa&&(fa=!1);try{Wc();var la=this.delete_(k);if(!la)return la;if(Md(this)&&!ec(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:void 0}))return null;H.name||(H.name="ObservableObject.key");H.context=this.proxy_||this.target_;var sa=ge(k),Ha={configurable:wf.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:sa.get,set:sa.set};if(fa){if(!Reflect.defineProperty(this.target_,k,Ha))return!1}else xp(this.target_,k,Ha);this.values_.set(k,
new Eu(H));this.notifyPropertyAddition_(k,void 0)}finally{qd()}return!0};d.delete_=function(k,H){void 0===H&&(H=!1);if(!Q(this.target_,k))return!0;if(Md(this)&&!ec(this,{object:this.proxy_||this.target_,name:k,type:"remove"}))return null;try{var fa,la;Wc();var sa=bf(this),Ha=this.values_.get(k),Ta=void 0;if(!Ha&&sa){var Xa;Ta=null==(Xa=aq(this.target_,k))?void 0:Xa.value}if(H){if(!Reflect.deleteProperty(this.target_,k))return!1}else delete this.target_[k];Ha&&(this.values_["delete"](k),Ha instanceof
Ds&&(Ta=Ha.value_),Xb(Ha));this.keysAtom_.reportChanged();null==(fa=this.pendingKeys_)?void 0:null==(la=fa.get(k))?void 0:la.set(k in this.target_);if(sa){var eb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Ta,name:k};sa&&oe(this,eb)}}finally{qd()}return!0};d.observe_=function(k,H){return Qe(this,k)};d.intercept_=function(k){return Pc(this,k)};d.notifyPropertyAddition_=function(k,H){var fa,la,sa=bf(this);sa&&(H=sa?{type:"add",observableKind:"object",
debugObjectName:this.name_,object:this.proxy_||this.target_,name:k,newValue:H}:null,sa&&oe(this,H));null==(fa=this.pendingKeys_)?void 0:null==(la=fa.get(k))?void 0:la.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=function(){this.keysAtom_.reportObserved();return Cc(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return a}(),sE=G("ObservableObjectAdministration",Jz),tE=jf(0),ux=0,Kz=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,
d):void 0!==a.prototype.__proto__?a.prototype.__proto__=d:a.prototype=d})(Kz,Array.prototype);var vx=function(a,d,k){function H(la,sa,Ha,Ta){void 0===Ha&&(Ha="ObservableArray");void 0===Ta&&(Ta=!1);var Xa=a.call(this)||this;sa=new tx(Ha,sa,Ta,!0);sa.proxy_=qa(Xa);L(qa(Xa),Od,sa);la&&la.length&&(sa=ac(!0),Xa.spliceWithArray(0,0,la),wf.allowStateChanges=sa);Object.defineProperty(qa(Xa),"0",tE);return Xa}ea(H,a);var fa=H.prototype;fa.concat=function(){this[Od].atom_.reportObserved();for(var la=arguments.length,
sa=Array(la),Ha=0;Ha<la;Ha++)sa[Ha]=arguments[Ha];return Array.prototype.concat.apply(this.slice(),sa.map(function(Ta){return Xc(Ta)?Ta.slice():Ta}))};fa[k]=function(){var la=this,sa=0;return Na({next:function(){return sa<la.length?{value:la[sa++],done:!1}:{done:!0,value:void 0}}})};V(H,[{key:"length",get:function(){return this[Od].getArrayLength_()},set:function(la){this[Od].setArrayLength_(la)}},{key:d,get:function(){return"Array"}}]);return H}(Kz,Symbol.toStringTag,Symbol.iterator);Object.entries(Vv).forEach(function(a){var d=
a[0];a=a[1];"concat"!==d&&T(vx.prototype,d,a)});ke(1E3);var Lz=bq.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof F()[a]&&f("MobX requires global '"+a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:zc,extras:{getDebugName:rb},$mobx:Od});var uE=da(586),hm=class{constructor(a){fb(this,"props");fb(this,"aspectRatio");fb(this,"type");fb(this,"hideCloneHandles",!1);fb(this,"hideResizeHandles",
!1);fb(this,"hideRotateHandle",!1);fb(this,"hideContextBar",!1);fb(this,"hideSelectionDetail",!1);fb(this,"hideSelection",!1);fb(this,"canChangeAspectRatio",!0);fb(this,"canUnmount",!0);fb(this,"canResize",[!0,!0]);fb(this,"canScale",!0);fb(this,"canFlip",!0);fb(this,"canEdit",!1);fb(this,"canBind",!1);fb(this,"nonce");fb(this,"bindingDistance",4);fb(this,"isDirty",!1);fb(this,"lastSerialized");fb(this,"getCenter",()=>ff.getBoundsCenter(this.bounds));fb(this,"getRotatedBounds",()=>{const {bounds:la,
props:{rotation:sa}}=this;return sa?ff.getBoundsFromPoints(ff.getRotatedCorners(la,sa)):la});fb(this,"hitTestPoint",la=>{var sa=this.rotatedBounds;if(!this.props.rotation)return ak.pointInBounds(la,sa);sa=ff.getRotatedCorners(sa,this.props.rotation);return ak.pointInPolygon(la,sa)});fb(this,"hitTestLineSegment",(la,sa)=>{const Ha=ff.getBoundsFromPoints([la,sa]),{rotatedBounds:Ta,props:{rotation:Xa=0}}=this;return ff.boundsContain(Ta,Ha)||Xa?g(la,sa,ff.getRotatedCorners(this.bounds)).didIntersect:
0<q(Ta,la,sa).length});fb(this,"hitTestBounds",la=>{const {rotatedBounds:sa,props:{rotation:Ha=0}}=this,Ta=ff.getRotatedCorners(this.bounds,Ha);return ff.boundsContain(la,sa)||0<z([la.minX,la.minY],[la.width,la.height],Ta).length});fb(this,"getExpandedBounds",()=>ff.expandBounds(this.getBounds(),this.bindingDistance));fb(this,"getBindingPoint",(la,sa,Ha,Ta)=>{var Xa=this.getBounds(),eb=this.getExpandedBounds();if(ak.pointInBounds(la,eb)){var ib=B(sa,Ha,eb).filter(Bb=>Bb.didIntersect).map(Bb=>Bb.points[0]);
if(ib.length)return Ha=this.getCenter(),ib=ib.sort((Bb,Mb)=>Rd.dist(Mb,sa)-Rd.dist(Bb,sa))[0],ib=Rd.med(la,ib),Ta?(Ta=2>Rd.dist(la,Ha)?Ha:la,Xa=0):(Ta=2>Rd.distanceToLineSegment(la,ib,Ha)?Ha:ib,Xa=ak.pointInBounds(la,Xa)?this.bindingDistance:Math.max(this.bindingDistance,ff.getBoundsSides(Xa).map(Bb=>Rd.distanceToLineSegment(Bb[1][0],Bb[1][1],la)).sort((Bb,Mb)=>Bb-Mb)[0])),eb=Rd.divV(Rd.sub(Ta,[eb.minX,eb.minY]),[eb.width,eb.height]),{point:Rd.clampV(eb,0,1),distance:Xa}}});fb(this,"getSerialized",
()=>uc(Te(Xd({},this.props),{type:this.type,nonce:this.nonce})));fb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||gd(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});fb(this,"validateProps",la=>la);fb(this,"update",(la,sa=!1,Ha=!1)=>{sa||this.isDirty||this.setIsDirty(!0);sa||Ha||this.incNonce();Object.assign(this.props,this.validateProps(la));
return this});fb(this,"clone",()=>new this.constructor(this.serialized));fb(this,"onResetBounds",la=>this);fb(this,"scale",[1,1]);fb(this,"onResizeStart",la=>{var sa;this.scale=[...(null!=(sa=this.props.scale)?sa:[1,1])];return this});fb(this,"onResize",(la,sa)=>{const {bounds:Ha,rotation:Ta,scale:[Xa,eb]}=sa;la=[...this.scale];0>Xa&&(la[0]*=-1);0>eb&&(la[1]*=-1);this.update({point:[Ha.minX,Ha.minY],scale:la,rotation:Ta});return this});fb(this,"onHandleChange",(la,{id:sa,delta:Ha})=>{if(void 0!==
la.handles){var Ta=Is(la.handles);Ta[sa]=Te(Xd({},Ta[sa]),{point:Rd.add(Ha,la.handles[sa].point)});var Xa=ff.getCommonTopLeft(Object.values(Ta).map(eb=>eb.point));Object.values(Ta).forEach(eb=>{eb.point=Rd.sub(eb.point,Xa)});this.update({point:Rd.add(la.point,Xa),handles:Ta})}});var d,k;const H=this.constructor.id,fa=null!=(d=this.constructor.defaultProps)?d:{};this.type=H;this.props=Xd(Xd({scale:[1,1]},fa),a);this.nonce=null!=(k=a.nonce)?k:Date.now();og(this)}get id(){return this.props.id}setNonce(a){this.nonce=
a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=this.getBounds();const {stroke:d,strokeWidth:k,strokeType:H,opacity:fa,fill:la,noFill:sa,borderRadius:Ha}=this.props;return(0,uE.jsx)("rect",{fill:sa?"none":ch(la,"background"),stroke:ch(d,"stroke"),strokeWidth:null!=
k?k:2,strokeDasharray:"dashed"===H?"8 2":void 0,fillOpacity:null!=fa?fa:.2,width:a.width,height:a.height,rx:Ha,ry:Ha})}};fb(hm,"type");Pd([De],hm.prototype,"props",2);Pd([De],hm.prototype,"canResize",2);Pd([De],hm.prototype,"nonce",2);Pd([De],hm.prototype,"isDirty",2);Pd([De],hm.prototype,"lastSerialized",2);Pd([nf],hm.prototype,"id",1);Pd([jg],hm.prototype,"setNonce",1);Pd([jg],hm.prototype,"incNonce",1);Pd([jg],hm.prototype,"setIsDirty",1);Pd([jg],hm.prototype,"setLastSerialized",1);Pd([nf],hm.prototype,
"center",1);Pd([nf],hm.prototype,"bounds",1);Pd([nf],hm.prototype,"rotatedBounds",1);Pd([nf],hm.prototype,"serialized",1);Pd([jg],hm.prototype,"update",2);var on=class extends hm{constructor(a={}){super(a);fb(this,"canBind",!0);fb(this,"getBounds",()=>{const [d,k]=this.props.point,[H,fa]=this.props.size;return{minX:d,minY:k,maxX:d+H,maxY:k+fa,width:H,height:fa}});fb(this,"getRotatedBounds",()=>ff.getBoundsFromPoints(ff.getRotatedCorners(this.bounds,this.props.rotation)));fb(this,"onResize",(d,k)=>
{const {bounds:H,rotation:fa,scale:[la,sa]}=k;d=[...this.scale];0>la&&(d[0]*=-1);0>sa&&(d[1]*=-1);this.update({point:[H.minX,H.minY],scale:d,rotation:fa});return this.update({rotation:fa,point:[H.minX,H.minY],size:[Math.max(1,H.width),Math.max(1,H.height)],scale:d})});fb(this,"validateProps",d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return d});og(this)}};fb(on,"id","box");fb(on,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});
var Bt=class extends hm{constructor(a={}){super(a);fb(this,"getBounds",()=>{const {pointBounds:d,props:{point:k}}=this;return ff.translateBounds(d,k)});fb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:k},bounds:H,rotatedPoints:fa}=this;return d?ff.translateBounds(ff.getBoundsFromPoints(fa),k):H});fb(this,"normalizedPoints",[]);fb(this,"isResizeFlippedX",!1);fb(this,"isResizeFlippedY",!1);fb(this,"onResizeStart",()=>{var d;const {bounds:k,props:{points:H}}=this;this.scale=[...(null!=
(d=this.props.scale)?d:[1,1])];const fa=[k.width,k.height];this.normalizedPoints=H.map(la=>rd.divV(la,fa));return this});fb(this,"onResize",(d,k)=>{const {bounds:H,scale:[fa,la]}=k,sa=[H.width,H.height];d=[...this.scale];0>fa&&(d[0]*=-1);0>la&&(d[1]*=-1);return this.update(fa||la?{point:[H.minX,H.minY],points:this.normalizedPoints.map(Ha=>rd.mulV(Ha,sa).concat(Ha[2])),scale:d}:{point:[H.minX,H.minY],points:this.normalizedPoints.map(Ha=>rd.mulV(Ha,sa).concat(Ha[2]))})});fb(this,"hitTestPoint",d=>{const {props:{points:k,
point:H}}=this;return ak.pointNearToPolyline(rd.sub(d,H),k)});fb(this,"hitTestLineSegment",(d,k)=>{const {bounds:H,props:{points:fa,point:la}}=this;if(ak.pointInBounds(d,H)||ak.pointInBounds(k,H)||0<q(H,d,k).length){const sa=rd.sub(d,la),Ha=rd.sub(k,la);return g(sa,Ha,fa).didIntersect||!!fa.find(Ta=>5>rd.dist(sa,Ta)||5>rd.dist(Ha,Ta))}return!1});fb(this,"hitTestBounds",d=>{const {rotatedBounds:k,props:{points:H,point:fa}}=this,la=ff.translateBounds(d,rd.neg(fa));return ff.boundsContain(d,k)||H.every(sa=>
ak.pointInBounds(sa,la))||ff.boundsCollide(d,k)&&0<D([la.minX,la.minY],[la.width,la.height],H).length});og(this)}get pointBounds(){const {props:{points:a}}=this;return ff.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:k},center:H}=this;if(!k)return d;const fa=rd.sub(H,a);return d.map(la=>rd.rotWith(la,fa,k))}};fb(Bt,"id","draw");fb(Bt,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});Pd([nf],Bt.prototype,"pointBounds",1);
Pd([nf],Bt.prototype,"rotatedPoints",1);var wx=class extends on{constructor(a={}){super(a);fb(this,"getBounds",()=>{const {props:{point:[d,k],size:[H,fa]}}=this;return ff.getRotatedEllipseBounds(d,k,H/2,fa/2,0)});fb(this,"getRotatedBounds",()=>{const {props:{point:[d,k],size:[H,fa],rotation:la}}=this;return ff.getRotatedEllipseBounds(d,k,H/2,fa/2,la)});fb(this,"hitTestPoint",d=>{const {props:{size:k,rotation:H},center:fa}=this;return ak.pointInEllipse(d,fa,k[0],k[1],H||0)});fb(this,"hitTestLineSegment",
(d,k)=>{const {props:{size:[H,fa],rotation:la=0},center:sa}=this;return h(d,k,sa,H,fa,la).didIntersect});fb(this,"hitTestBounds",d=>{const {props:{size:[k,H],rotation:fa=0},rotatedBounds:la}=this;var sa;if(!(sa=ff.boundsContain(d,la))){const {minX:Ha,minY:Ta,width:Xa,height:eb}=d;sa=0<t(this.center,k/2,H/2,fa,[Ha,Ta],[Xa,eb]).length}return sa});og(this)}};fb(wx,"id","ellipse");fb(wx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var xx=class extends on{constructor(a=
{}){super(a);fb(this,"onResetBounds",d=>{const {clipping:k,size:H,point:fa}=this.props;if(k){const [la,sa,Ha,Ta]=Array.isArray(k)?k:[k,k,k,k];return this.update({clipping:0,point:[fa[0]-Ta,fa[1]-la],size:[H[0]+(Ta-sa),H[1]+(la-Ha)]})}if(d.asset){const {size:[la,sa]}=d.asset;this.update({clipping:0,point:[fa[0]+H[0]/2-la/2,fa[1]+H[1]/2-sa/2],size:[la,sa]})}return this});fb(this,"onResize",(d,k)=>{const {bounds:H,clip:fa,scale:la}=k;({clipping:k}=this.props);const {clipping:sa}=d;if(fa){const {point:[Ha,
Ta],size:[Xa,eb]}=d,[ib,Bb,Mb,Fb]=sa?Array.isArray(sa)?sa:[sa,sa,sa,sa]:[0,0,0,0];k=[ib+(H.minY-Ta),Bb+(H.maxX-(Ha+Xa)),Mb+(H.maxY-(Ta+eb)),Fb+(H.minX-Ha)]}else void 0!==sa&&(k=Array.isArray(sa)?sa:[sa,sa,sa,sa],k=[k[0]*la[1],k[1]*la[0],k[2]*la[1],k[3]*la[0]]);if(k&&Array.isArray(k)){const Ha=k;Ha.every((Ta,Xa)=>0===Xa||Ta===Ha[Xa-1])&&(k=Ha[0])}return this.update({point:[H.minX,H.minY],size:[Math.max(1,H.width),Math.max(1,H.height)],clipping:k})});og(this)}};fb(xx,"id","ellipse");fb(xx,"defaultProps",
{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Mz=class extends hm{constructor(a={}){super(a);fb(this,"getBounds",()=>{const {points:d,props:{point:k}}=this;return ff.translateBounds(ff.getBoundsFromPoints(d),k)});fb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,props:{point:k}}=this;return ff.translateBounds(ff.getBoundsFromPoints(d),k)});fb(this,"normalizedHandles",[]);fb(this,"onResizeStart",()=>{var d;const {props:{handles:k},
bounds:H}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const fa=[H.width,H.height];this.normalizedHandles=Object.values(k).map(la=>rd.divV(la.point,fa));return this});fb(this,"onResize",(d,k)=>{const {bounds:H,scale:[fa,la]}=k,{props:{handles:sa},normalizedHandles:Ha}=this,Ta=[H.width,H.height];d=[...this.scale];0>fa&&(d[0]*=-1);0>la&&(d[1]*=-1);return this.update({point:[H.minX,H.minY],handles:Object.values(sa).map((Xa,eb)=>Te(Xd({},Xa),{point:rd.mulV(Ha[eb],Ta)})),scale:d})});fb(this,
"hitTestPoint",d=>{const {points:k}=this;return ak.pointNearToPolyline(rd.sub(d,this.props.point),k)});fb(this,"hitTestLineSegment",(d,k)=>{const {bounds:H,points:fa,props:{point:la}}=this;if(ak.pointInBounds(d,H)||ak.pointInBounds(k,H)||0<q(H,d,k).length){const sa=rd.sub(d,la),Ha=rd.sub(k,la);return g(sa,Ha,fa).didIntersect||!!fa.find(Ta=>5>rd.dist(sa,Ta)||5>rd.dist(Ha,Ta))}return!1});fb(this,"hitTestBounds",d=>{const {rotatedBounds:k,points:H,props:{point:fa}}=this,la=ff.translateBounds(d,rd.neg(fa));
return ff.boundsContain(d,k)||H.every(sa=>ak.pointInBounds(sa,la))||ff.boundsCollide(d,k)&&0<D([la.minX,la.minY],[la.width,la.height],H).length});fb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Mz.defaultProps.handles);return d});og(this)}get points(){return Object.values(this.props.handles).map(a=>a.point)}get centroid(){const {points:a}=this;return Mk.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,
rotation:k}}=this;return k?Object.values(d).map(H=>rd.rotWith(H.point,a,k)):this.points}},Ct=Mz;fb(Ct,"id","polyline");fb(Ct,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});Pd([nf],Ct.prototype,"points",1);Pd([nf],Ct.prototype,"centroid",1);Pd([nf],Ct.prototype,"rotatedPoints",1);var Nz=class extends Ct{constructor(a={}){super(a);fb(this,"hideResizeHandles",!0);fb(this,"hideRotateHandle",!0);fb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&
1>Object.values(d.handles).length&&(d.handles=Nz.defaultProps.handles);return d});fb(this,"getHandlesChange",(d,k)=>{var H=lj(d.handles,k);H=lj(H,{start:{point:Rd.toFixed(H.start.point)},end:{point:Rd.toFixed(H.end.point)}});if(!Rd.isEqual(H.start.point,H.end.point)){k={point:d.point,handles:Is(H)};d=d.point;H=ff.translateBounds(ff.getBoundsFromPoints(Object.values(H).map(la=>la.point)),k.point);var fa=Rd.sub([H.minX,H.minY],d);Rd.isEqual(fa,[0,0])||(Object.values(k.handles).forEach(la=>{la.point=
Rd.toFixed(Rd.sub(la.point,fa))}),k.point=Rd.toFixed(Rd.add(k.point,fa)));return k}});og(this)}},Iu=Nz;fb(Iu,"id","line");fb(Iu,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Br=class extends on{constructor(a={}){super(a);fb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,props:{point:k},offset:H}=this;return ff.translateBounds(ff.getBoundsFromPoints(d),rd.add(k,H))});fb(this,"hitTestPoint",
d=>{const {vertices:k}=this;return ak.pointInPolygon(rd.add(d,this.props.point),k)});fb(this,"hitTestLineSegment",(d,k)=>{const {vertices:H,props:{point:fa}}=this;return g(rd.sub(d,fa),rd.sub(k,fa),H).didIntersect});fb(this,"hitTestBounds",d=>{const {rotatedBounds:k,offset:H,rotatedVertices:fa,props:{point:la}}=this,sa=ff.translateBounds(d,rd.neg(rd.add(la,H)));return ff.boundsContain(d,k)||fa.every(Ha=>ak.pointInBounds(Ha,sa))||0<z([sa.minX,sa.minY],[sa.width,sa.height],fa).length});fb(this,"validateProps",
d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});og(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},vertices:d}=this;return d.map(k=>rd.add(k,a))}get centroid(){const {vertices:a}=this;return Mk.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:k}}=this;return k?a.map(H=>rd.rotWith(H,d,k)):a}get offset(){const {props:{size:[a,d]}}=this,k=ff.getBoundsCenter(ff.getBoundsFromPoints(this.vertices));
return rd.sub(rd.div([a,d],2),k)}getVertices(a=0){const {ratio:d,sides:k,size:H}=this.props;return 3===k?Mk.getTriangleVertices(H,a,d):Mk.getPolygonVertices(H,k,a,d)}};fb(Br,"id","polygon");fb(Br,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});Pd([nf],Br.prototype,"vertices",1);Pd([nf],Br.prototype,"pageVertices",1);Pd([nf],Br.prototype,"centroid",1);Pd([nf],Br.prototype,"rotatedVertices",1);Pd([nf],Br.prototype,"offset",1);var yx=
class extends on{constructor(a={}){super(a);fb(this,"canEdit",!0);fb(this,"canFlip",!1);og(this)}};fb(yx,"id","text");fb(yx,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Wv=class extends on{constructor(a={}){super(a);fb(this,"canEdit",!1);fb(this,"canFlip",!1);fb(this,"getBounds",()=>0===this.shapes.length?(Yf().deleteShapes([this.id]),{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):ff.getCommonBounds(this.shapes.map(d=>d.getBounds())));
og(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};fb(Wv,"id","group");fb(Wv,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});Pd([nf],Wv.prototype,"shapes",1);var Dt=class{constructor(){fb(this,"_id");fb(this,"_initial");fb(this,"_states");fb(this,"_isActive",!1);fb(this,"cursor");fb(this,"_disposables",[]);fb(this,"children",new Map([]));fb(this,"registerStates",k=>{k.forEach(H=>
this.children.set(H.id,new H(this,this)));return this});fb(this,"deregisterStates",k=>{k.forEach(H=>{var fa;null==(fa=this.children.get(H.id))?void 0:fa.dispose();this.children.delete(H.id)});return this});fb(this,"currentState",{});fb(this,"transition",(k,H={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${k}.`);const fa=this.children.get(k),la=this.currentState;if(!fa)throw Error(`Could not find a state named ${k}.`);gd(()=>{this.currentState?(la._events.onExit(Te(Xd({},
H),{toId:k})),la.dispose(),this.setCurrentState(fa),this._events.onTransition(Te(Xd({},H),{fromId:la.id,toId:k})),fa._events.onEnter(Te(Xd({},H),{fromId:la.id}))):(this.currentState=fa,fa._events.onEnter(Te(Xd({},H),{fromId:""})))});return this});fb(this,"isIn",k=>{k=k.split(".").reverse();let H=this;for(;0<k.length;){const fa=k.pop();if(!fa)return!0;if(H.currentState.id===fa){if(0===k.length)return!0;H=H.currentState}else break}return!1});fb(this,"isInAny",(...k)=>k.some(this.isIn));fb(this,"forwardEvent",
(k,...H)=>{var fa,la;(null==(la=null==(fa=this.currentState)?void 0:fa._events)?0:la[k])&&gd(()=>{var sa;return null==(sa=this.currentState._events)?void 0:sa[k](...H)})});fb(this,"_events",{onTransition:k=>{var H;null==(H=this.onTransition)?void 0:H.call(this,k)},onEnter:k=>{var H;this._isActive=!0;this.initial&&this.transition(this.initial,k);null==(H=this.onEnter)?void 0:H.call(this,k)},onExit:k=>{var H,fa,la;this._isActive=!1;null==(fa=null==(H=this.currentState)?void 0:H.onExit)?void 0:fa.call(H,
{toId:"parent"});null==(la=this.onExit)?void 0:la.call(this,k)},onPointerDown:(k,H)=>{var fa;null==(fa=this.onPointerDown)?void 0:fa.call(this,k,H);this.forwardEvent("onPointerDown",k,H)},onPointerUp:(k,H)=>{var fa;null==(fa=this.onPointerUp)?void 0:fa.call(this,k,H);this.forwardEvent("onPointerUp",k,H)},onPointerMove:(k,H)=>{var fa;null==(fa=this.onPointerMove)?void 0:fa.call(this,k,H);this.forwardEvent("onPointerMove",k,H)},onPointerEnter:(k,H)=>{var fa;null==(fa=this.onPointerEnter)?void 0:fa.call(this,
k,H);this.forwardEvent("onPointerEnter",k,H)},onPointerLeave:(k,H)=>{var fa;null==(fa=this.onPointerLeave)?void 0:fa.call(this,k,H);this.forwardEvent("onPointerLeave",k,H)},onDoubleClick:(k,H)=>{var fa;null==(fa=this.onDoubleClick)?void 0:fa.call(this,k,H);this.forwardEvent("onDoubleClick",k,H)},onKeyDown:(k,H)=>{var fa;this._events.onModifierKey(k,H);null==(fa=this.onKeyDown)?void 0:fa.call(this,k,H);this.forwardEvent("onKeyDown",k,H)},onKeyUp:(k,H)=>{var fa;this._events.onModifierKey(k,H);null==
(fa=this.onKeyUp)?void 0:fa.call(this,k,H);this.forwardEvent("onKeyUp",k,H)},onPinchStart:(k,H)=>{var fa;null==(fa=this.onPinchStart)?void 0:fa.call(this,k,H);this.forwardEvent("onPinchStart",k,H)},onPinch:(k,H)=>{var fa;null==(fa=this.onPinch)?void 0:fa.call(this,k,H);this.forwardEvent("onPinch",k,H)},onPinchEnd:(k,H)=>{var fa;null==(fa=this.onPinchEnd)?void 0:fa.call(this,k,H);this.forwardEvent("onPinchEnd",k,H)},onModifierKey:(k,H)=>{switch(H.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(k,
H)}}});fb(this,"onEnter");fb(this,"onExit");fb(this,"onTransition");fb(this,"onPointerDown");fb(this,"onPointerUp");fb(this,"onPointerMove");fb(this,"onPointerEnter");fb(this,"onPointerLeave");fb(this,"onDoubleClick");fb(this,"onKeyDown");fb(this,"onKeyUp");fb(this,"onPinchStart");fb(this,"onPinch");fb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=a}};fb(Dt,"id");fb(Dt,"shortcuts");Pd([De],Dt.prototype,"currentState",2);Pd([jg],Dt.prototype,"setCurrentState",1);var zx=class extends Dt{constructor(a,d){var k,H;super();fb(this,"_root");fb(this,
"_parent");fb(this,"children",new Map([]));fb(this,"registerStates",fa=>{fa.forEach(la=>this.children.set(la.id,new la(this,this._root)));return this});fb(this,"deregisterStates",fa=>{fa.forEach(la=>{var sa;null==(sa=this.children.get(la.id))?void 0:sa.dispose();this.children.delete(la.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(k=this.initial)?k:this.states[0].id,k=this.children.get(a))&&(this.setCurrentState(k),null==
(H=this.currentState)?void 0:H._events.onEnter({fromId:"initial"}));og(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};fb(zx,"cursor");var Cr=class extends zx{constructor(){super(...arguments);fb(this,"isLocked",!1);fb(this,"previous");fb(this,"onEnter",({fromId:a})=>{this.previous=a;this.cursor&&this.app.cursors.setCursor(this.cursor)});fb(this,"onTransition",
a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},ri=class extends zx{get app(){return this.root}get tool(){return this.parent}},Oz=class extends ri{constructor(){super(...arguments);fb(this,"cursor","crosshair");fb(this,"creatingShape");fb(this,"aspectRatio");fb(this,"initialBounds",{});fb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:k}}=
this.app;var {Shape:H}=this.tool;H=new H({id:Lj(),type:H.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:Rd.abs(Rd.sub(k,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};H.canChangeAspectRatio||(H.aspectRatio?(this.aspectRatio=H.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);
this.creatingShape=H;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(H);this.app.setSelectedShapes([H])});fb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:d}=this,{currentPoint:k,originPoint:H,shiftKey:fa}=this.app.inputs;a=fa||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio;d=ff.getTransformedBoundingBox(d,"bottom_right_corner",Rd.sub(k,
H),0,a);this.app.settings.snapToGrid&&!a&&(d=ff.snapBoundsToGrid(d,8));this.creatingShape.update({point:[d.minX,d.minY],size:[d.width,d.height]})}});fb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);
this.tool.transition("idle")}})}};fb(Oz,"id","creating");var Pz=class extends ri{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});fb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};fb(Pz,"id","idle");var Qz=class extends ri{constructor(){super(...arguments);
fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<rd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});fb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};fb(Qz,"id","pointing");var Oq=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","crosshair")}};fb(Oq,"id","box");fb(Oq,"states",[Pz,Qz,Oz]);fb(Oq,"initial","idle");var Rz=class extends ri{constructor(){super(...arguments);
fb(this,"shape",{});fb(this,"points",[[0,0,.5]]);fb(this,"persistDebounced",Hl(this.app.persist,200));fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:k}=this.tool;var {originPoint:H}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&k){this.shape=k;var {shape:fa}=this;var la=fa.props.points[fa.props.points.length-1];const Ha=rd.sub(H,fa.props.point).concat(null!=(a=H[2])?a:.5);this.points=
[...fa.props.points,la,la];const Ta=Math.ceil(rd.dist(la,H)/16);for(let Xa=0,eb=Xa/(Ta-1);Xa<Ta;Xa++){a=this.points;H=a.push;fa=rd.lrp(la,Ha,eb);var sa=la[2];H.call(a,fa.concat.call(fa,sa+(Ha[2]-sa)*eb))}this.addNextPoint(Ha)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(la=H[2])?la:.5]],this.shape=new d({id:Lj(),type:d.id,parentId:this.app.currentPage.id,point:H.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),
this.app.currentPage.addShapes(this.shape)});fb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:k}=this.app.inputs;rd.isEqual(k,d)||this.addNextPoint(rd.sub(d,a.props.point).concat(d[2]))});fb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?ak.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;
this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,k=rd.min(a,[0,0]);this.points.push(a);0>k[0]||0>k[1]?(this.points=this.points.map(H=>rd.sub(H,k).concat(H[2])),d.update({point:rd.add(d.props.point,
k),points:this.points})):d.update({points:this.points})}};fb(Rz,"id","creating");var Sz=class extends ri{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};fb(Sz,"id","idle");var Tz=class extends ri{constructor(){super(...arguments);fb(this,"origin",
[0,0]);fb(this,"prevDelta",[0,0]);fb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});fb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});fb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};fb(Tz,"id","pinching");var Ju=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","crosshair");fb(this,"simplify",!0);fb(this,"simplifyTolerance",1);fb(this,"previousShape");fb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,
event:d})})}};fb(Ju,"id","draw");fb(Ju,"states",[Sz,Rz,Tz]);fb(Ju,"initial","idle");var Uz=class extends ri{constructor(){super(...arguments);fb(this,"points",[[0,0,.5]]);fb(this,"hitShapes",new Set);fb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});fb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;rd.isEqual(d,a)||(this.points.push(a),this.app.shapesInViewport.filter(k=>k.hitTestLineSegment(d,a)).forEach(k=>this.hitShapes.add(k)),
this.app.setErasingShapes(Array.from(this.hitShapes.values())))});fb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};fb(Uz,"id","erasing");var Vz=class extends ri{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});fb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",
{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};fb(Vz,"id","idle");var Wz=class extends ri{constructor(){super(...arguments);fb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>d.hitTestPoint(a)))});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;
5<rd.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});fb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};fb(Wz,"id","pointing");var Xv=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","crosshair")}};fb(Xv,"id","erase");fb(Xv,"states",[Vz,Wz,Uz]);fb(Xv,"initial","idle");var Ax=class extends ri{constructor(){super(...arguments);fb(this,"handle",{});fb(this,
"handleId","end");fb(this,"currentShape",{});fb(this,"initialShape",{});fb(this,"bindableShapeIds",[]);fb(this,"startBindingShapeId");fb(this,"newStartBindingId","");fb(this,"draggedBindingId","");fb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:k,currentPoint:H,modKey:fa,altKey:la},settings:{snapToGrid:sa}}=this.app;var Ha=this.app.getShapeById(this.initialShape.id),{handles:Ta}=this.initialShape,Xa=this.handleId,eb="start"===this.handleId?"end":"start";if(!Rd.isEqual(d,
H)){var ib=Rd.sub(H,k);if(a){var Bb=Ta[eb].point,Mb=Rd.add(Ta[Xa].point,ib),Fb=Rd.angle(Bb,Mb);Bb=Rd.rotWith(Mb,Bb,am.snapAngleToSegments(Fb,24)-Fb);ib=Rd.add(ib,Rd.sub(Bb,Mb))}ib=Rd.add(Ta[Xa].point,ib);Ta={[Xa]:Te(Xd({},Ta[Xa]),{point:sa?Rd.snap(ib,8):Rd.toFixed(ib),bindingId:void 0})};var $b=this.currentShape.getHandlesChange(this.initialShape,Ta);if($b){Ta=lj(Ha.props,$b);var nc={},Sb;Xa=Ta.handles[Xa];eb=Ta.handles[eb];if(this.startBindingShapeId){var gc;if(ib=this.app.getShapeById(this.startBindingShapeId)){Mb=
ib.getCenter();Bb=Ta.handles.end;var bc=Rd.add(Ta.handles.start.point,Ta.point);Rd.isEqual(bc,Mb)&&bc[1]++;Fb=ib.hitTestPoint(H);bc=Rd.uni(Rd.sub(bc,Mb));const Dc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];fa||ib.hitTestPoint(Rd.add(Ta.point,Bb.point))||(gc=hc(Ha.props,ib,"start",this.newStartBindingId,Mb,Mb,bc,Fb));gc&&!Dc?(nc[this.newStartBindingId]=gc,Ta.handles.start.bindingId=gc.id):!gc&&Dc&&(console.log("removing start binding"),delete nc[this.newStartBindingId],Ta.handles.start.bindingId=
void 0)}}if(!fa){gc=Rd.add(eb.point,Ta.point);eb=Rd.add(Xa.point,Ta.point);Xa=Rd.uni(Rd.sub(eb,gc));const Dc=Rd.add(Ta.point,Ta.handles.start.point),Ic=Rd.add(Ta.point,Ta.handles.end.point);ib=this.bindableShapeIds.map(od=>this.app.getShapeById(od)).sort((od,Cd)=>Cd.nonce-od.nonce).filter(od=>![Dc,Ic].every(Cd=>od.hitTestPoint(Cd)));for(const od of ib)if(Sb=hc(Ha.props,od,this.handleId,this.draggedBindingId,eb,gc,Xa,la))break}Sb?(nc[this.draggedBindingId]=Sb,Ta=lj(Ta,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):
(Ha=Ha.props.handles[this.handleId].bindingId,void 0!==Ha&&(delete nc[Ha],Ta=lj(Ta,{handles:{[this.handleId]:{bindingId:void 0}}})));$b=this.currentShape.getHandlesChange(Ta,Ta.handles);gd(()=>{var Dc;if($b){this.currentShape.update($b);this.app.currentPage.updateBindings(nc);const Ic=Object.values(null!=(Dc=$b.handles)?Dc:{}).map(od=>od.bindingId).map(od=>this.app.currentPage.bindings[od]).filter(Boolean).flatMap(od=>[od.toId,od.fromId].filter(Boolean));this.app.setBindingShapes(Ic)}})}}});fb(this,
"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});fb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};fb(Ax,"id","creating");var Xz=class extends Ax{constructor(){super(...arguments);fb(this,"onEnter",()=>{var a;
this.app.history.pause();this.newStartBindingId=Lj();this.draggedBindingId=Lj();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:k}=this.app.inputs;d=new d(Te(Xd({},d.defaultProps),{id:Lj(),type:d.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?Rd.snap(k,8):k,fill:this.app.settings.color,stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=uc(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);
this.app.setSelectedShapes([d]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(H=>this.app.getShapeById(H)).filter(H=>ak.pointInBounds(k,H.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};fb(Xz,"id","creating");var Yz=class extends ri{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});fb(this,"onPinchStart",
(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});fb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});fb(this,"onPointerLeave",a=>{a.order||
"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};fb(Yz,"id","idle");var Zz=class extends ri{constructor(){super(...arguments);fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<rd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};fb(Zz,"id","pointing");var Yv=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","crosshair")}};fb(Yv,"id","line");fb(Yv,
"states",[Yz,Zz,Xz]);fb(Yv,"initial","idle");var $z=class extends ri{constructor(){super(...arguments);fb(this,"cursor","crosshair");fb(this,"creatingShape");fb(this,"aspectRatio");fb(this,"initialBounds",{});fb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:k}=this.tool,H=new k({id:Lj(),type:k.id,parentId:a.id,point:[...d],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=H;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);
gd(()=>{this.app.currentPage.addShapes(H);const fa=this.app.settings.snapToGrid?Rd.snap([...d],8):d,{bounds:la}=H;H.update({point:Rd.sub(fa,[la.width/2,la.height/2])});this.app.transition("select");this.app.setSelectedShapes([H]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};fb($z,"id","creating");var aA=class extends ri{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});
fb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};fb(aA,"id","idle");var Zv=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","crosshair")}};fb(Zv,"id","box");fb(Zv,"states",[aA,$z]);fb(Zv,"initial","idle");var vE=df(fm()),wE=class extends vE.default{constructor(){super(...arguments);
fb(this,"toBBox",a=>a.rotatedBounds)}},bA=class extends ri{constructor(){super(...arguments);fb(this,"initialSelectedIds",[]);fb(this,"initialSelectedShapes",[]);fb(this,"tree",new wE);fb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:k}=this.app;this.initialSelectedIds=Array.from(k.values());this.initialSelectedShapes=Array.from(a.values());this.tree.load(d.shapes)});fb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});fb(this,"onPointerMove",
()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:k,currentPoint:H}}=this.app,fa=ff.getBoundsFromPoints([H,k],0);this.app.setBrush(fa);const la=[...(new Set(this.tree.search(fa).filter(sa=>d?ff.boundsContain(fa,sa.rotatedBounds):sa.hitTestBounds(fa)).filter(sa=>"group"!==sa.type).map(sa=>{var Ha;return null!=(Ha=this.app.getParentGroup(sa))?Ha:sa})))];a?la.every(sa=>this.initialSelectedShapes.includes(sa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(sa=>!la.includes(sa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,
...la]))]):this.app.setSelectedShapes(la);this.app.viewport.panToPointWhenNearBounds(H)});fb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});fb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};fb(bA,"id","brushing");var cA=class extends ri{constructor(){super(...arguments);fb(this,"onEnter",a=>{var d;const {selectedIds:k,inputs:{shiftKey:H}}=
this.app;if("shape"===a.type&&!k.has(a.shape.id)){const fa=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;H?this.app.setSelectedShapes([...Array.from(k.values()),fa.id]):this.app.setSelectedShapes([fa])}});fb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};fb(cA,"id","contextMenu");var dA=class extends ri{constructor(){super(...arguments);fb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});fb(this,"onExit",()=>{});fb(this,
"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});fb(this,"onPointerDown",(a,d)=>{const {selectedShapes:k,inputs:{ctrlKey:H}}=this.app;if(2===d.button)this.tool.transition("contextMenu",a);else if(H)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;
case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(k.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:fa,inputs:la}=this.app;fa&&ak.pointInBounds(la.currentPoint,fa)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",
a);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",Xd(Xd({},d),a))}});fb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});fb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};fb(dA,"id","idle");var eA=class extends ri{constructor(){super(...arguments);fb(this,"onEnter",
a=>{var d;const {selectedIds:k,inputs:{shiftKey:H}}=this.app,fa=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;H?this.app.setSelectedShapes([...Array.from(k.values()),fa.id]):this.app.setSelectedShapes([fa])});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<rd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});fb(this,"onPointerUp",()=>{this.tool.transition("idle")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,
event:d})})}};fb(eA,"id","pointingShape");var fA=class extends ri{constructor(){super(...arguments);fb(this,"cursor","move");fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<rd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});fb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};fb(fA,"id","pointingBoundsBackground");var gA=
class extends ri{constructor(){super(...arguments);fb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<rd.dist(a,d)&&this.tool.transition("brushing")});fb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});fb(this,"onPinchStart",
(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};fb(gA,"id","pointingCanvas");var hA=class extends ri{constructor(){super(...arguments);fb(this,"cursor","move");fb(this,"isCloning",!1);fb(this,"didClone",!1);fb(this,"initialPoints",{});fb(this,"initialShapePoints",{});fb(this,"initialClonePoints",{});fb(this,"clones",[]);fb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,
inputs:k}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(d.map(({id:H,props:{point:fa}})=>[H,fa.slice()]));document.querySelectorAll("input,textarea").forEach(H=>H.blur());null==(a=document.getSelection())?void 0:a.empty();k.altKey?this.startCloning():this.moveSelectedShapesToPointer()});fb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});fb(this,"onPointerMove",
()=>{const {inputs:{currentPoint:a}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});fb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});fb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(k=>{k.update({point:this.initialPoints[k.id]})}),
this.tool.transition("idle")}});fb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:k,allSelectedShapes:H}=this.app;k.removeShapes(...H);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:k}}=this.app,{initialPoints:H}=this,fa=rd.sub(k,
d);a&&(Math.abs(fa[0])<Math.abs(fa[1])?fa[0]=0:fa[1]=0);gd(()=>{this.app.allSelectedShapesArray.filter(la=>!la.props.isLocked).forEach(la=>{let sa=rd.add(H[la.id],fa);this.app.settings.snapToGrid&&(sa=rd.snap(sa,8));la.update({point:sa})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d(Te(Xd({},a.serialized),{id:Lj(),type:a.type,point:this.initialPoints[a.id],
rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};fb(hA,"id","translating");var iA=class extends ri{constructor(){super(...arguments);
fb(this,"pointedSelectedShape");fb(this,"onEnter",a=>{this.pointedSelectedShape=a.shape});fb(this,"onExit",()=>{this.pointedSelectedShape=void 0});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<rd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});fb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:k}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:k}=
this.app),k=Array.from(k.values()),k.splice(k.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(k);else{if(1===k.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof on&&ak.pointInBounds(d,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});
fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};fb(iA,"id","pointingSelectedShape");var jA=class extends ri{constructor(){super(...arguments);fb(this,"info",{});fb(this,"onEnter",a=>{this.info=a;this.updateCursor()});fb(this,"onExit",()=>{this.app.cursors.reset()});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<rd.dist(a,d)&&this.tool.transition("resizing",this.info)});fb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",
this.info)});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(lt[this.info.handle],this.app.selectionBounds.rotation)}};fb(jA,"id","pointingResizeHandle");var kA=class extends ri{constructor(){super(...arguments);fb(this,"isSingle",!1);fb(this,"handle","bottom_right_corner");fb(this,"snapshots",{});fb(this,"initialCommonBounds",{});fb(this,"selectionRotation",0);fb(this,"resizeType","corner");fb(this,"onEnter",a=>{var d,k;
const {history:H,selectedShapesArray:fa,selectionBounds:la}=this.app;if(!la)throw Error("Expected a selected bounds.");this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";this.app.cursors.setCursor(kA.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);H.pause();const sa=ff.getBoundsFromPoints(fa.map(Ha=>ff.getBoundsCenter(Ha.bounds)));this.selectionRotation=
(this.isSingle=1===fa.length)?null!=(k=fa[0].props.rotation)?k:0:0;this.initialCommonBounds=Xd({},la);this.snapshots=Object.fromEntries(fa.map(Ha=>{const Ta=Xd({},Ha.bounds),[Xa,eb]=ff.getBoundsCenter(Ta);return[Ha.id,{props:Ha.serialized,bounds:Ta,transformOrigin:[(Xa-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(eb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(Xa-sa.minX)/sa.width,(eb-sa.minY)/sa.height],isAspectRatioLocked:Ha.props.isAspectRatioLocked||
!(Ha.canChangeAspectRatio&&!Ha.props.rotation)}]}));fa.forEach(Ha=>{var Ta;null==(Ta=Ha.onResizeStart)?void 0:Ta.call(Ha,{isSingle:this.isSingle})})});fb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});fb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:k,originPoint:H,currentPoint:fa}}=this.app,{handle:la,snapshots:sa,initialCommonBounds:Ha}=this;let Ta=rd.sub(fa,H);a&&(Ta=rd.mul(Ta,
2));const Xa=this.app.selectedShapes.values().next().value;let eb=ff.getTransformedBoundingBox(Ha,la,Ta,this.selectionRotation,d||this.isSingle&&(k?!("clipping"in Xa.props):!Xa.canChangeAspectRatio||Xa.props.isAspectRatioLocked));a&&(eb=Xd(Xd({},eb),ff.centerBounds(eb,ff.getBoundsCenter(Ha))));const {scaleX:ib,scaleY:Bb}=eb;this.app.selectedShapes.forEach(Mb=>{var Fb,$b;const {isAspectRatioLocked:nc,props:Sb,bounds:gc,transformOrigin:bc}=sa[Mb.id];let Dc=ff.getRelativeTransformedBoundingBox(eb,Ha,
gc,0>ib,0>Bb);if(Mb.canResize.some(Cd=>Cd)||Mb.props.isSizeLocked||!this.isSingle){var Ic=[ib,Bb],od=null!=(Fb=Sb.rotation)?Fb:0;Fb=ff.getBoundsCenter(Dc);Mb.canFlip||(Ic=rd.abs(Ic));Mb.canScale||(Ic=null!=($b=Sb.scale)?$b:[1,1]);if(od&&0>ib&&0<=Bb||0>Bb&&0<=ib)od*=-1;this.app.settings.snapToGrid&&!nc&&(Dc=ff.snapBoundsToGrid(Dc,8));Mb.onResize(Sb,{center:Fb,rotation:od,scale:Ic,bounds:Dc,type:la,clip:k,transformOrigin:bc})}});this.updateCursor(ib,Bb);this.app.viewport.panToPointWhenNearBounds(fa)});
fb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(k=>{k.update(Xd({},this.snapshots[k.id].props))}),this.tool.transition("idle")}})}updateCursor(a,d){var k,H,fa,la;const sa=0>a&&0<=d;a=0>d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":sa||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(k=
this.app.selectionBounds)?void 0:k.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(H=this.app.selectionBounds)?void 0:H.rotation);break;case "top_right_corner":case "bottom_left_corner":sa||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(fa=this.app.selectionBounds)?void 0:fa.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(la=this.app.selectionBounds)?void 0:
la.rotation)}}},Bx=kA;fb(Bx,"id","resizing");fb(Bx,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var lA=class extends ri{constructor(){super(...arguments);fb(this,"cursor","rotate");fb(this,"handle","");fb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});fb(this,"onPointerMove",
()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<rd.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});fb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(lt[this.handle],this.app.selectionRotation)}};fb(lA,"id","pointingRotateHandle");var mA=class extends ri{constructor(){super(...arguments);fb(this,
"info",{});fb(this,"onEnter",a=>{this.info=a});fb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<rd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});fb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})})}};fb(mA,"id","pointingShapeBehindBounds");var Cx=class extends ri{constructor(){super(...arguments);fb(this,"cursor","rotate");fb(this,"snapshot",{});fb(this,"initialCommonCenter",[0,0]);fb(this,"initialCommonBounds",{});fb(this,"initialAngle",0);fb(this,"initialSelectionRotation",0);fb(this,"handle","");fb(this,"onEnter",a=>{const {history:d,selectedShapesArray:k,selectionBounds:H}=this.app;if(!H)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=
this.app.selectionRotation;this.initialCommonBounds=Xd({},H);this.initialCommonCenter=ff.getBoundsCenter(H);this.initialAngle=rd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(k.map(fa=>[fa.id,{point:[...fa.props.point],center:[...fa.center],rotation:fa.props.rotation,handles:"handles"in fa?Is(fa.handles):void 0}]));this.updateCursor()});fb(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});fb(this,"onPointerMove",()=>{const {selectedShapes:a,
inputs:{shiftKey:d,currentPoint:k}}=this.app,{snapshot:H,initialCommonCenter:fa,initialAngle:la,initialSelectionRotation:sa}=this;let Ha=rd.angle(fa,k)-la;d&&(Ha=am.snapAngleToSegments(Ha,24));a.forEach(Xa=>{var eb=H[Xa.id];let ib=0;if(d){var {rotation:Bb=0}=eb;ib=am.snapAngleToSegments(Bb,24)-Bb}const Mb=rd.sub(eb.center,eb.point);Bb=rd.rotWith(eb.center,fa,Ha);if("handles"in Xa){eb=eb.handles;const Fb=eb.map(nc=>rd.rotWith(nc.point,Mb,Ha)),$b=ff.getCommonTopLeft(Fb);Xa.update({point:rd.add($b,rd.sub(Bb,
Mb)),handles:eb.map((nc,Sb)=>Te(Xd({},nc),{point:rd.sub(Fb[Sb],$b)}))})}else Xa.update({point:rd.sub(Bb,Mb),rotation:am.clampRadians((eb.rotation||0)+Ha+ib)})});const Ta=am.clampRadians(sa+Ha);this.app.setSelectionRotation(d?am.snapAngleToSegments(Ta,24):Ta);this.updateCursor()});fb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(k=>{k.update(this.snapshot[k.id])}),
this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(lt[this.handle],this.app.selectionRotation)}};fb(Cx,"id","rotating");var nA=class extends ri{constructor(){super(...arguments);fb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});fb(this,"onPinchEnd",()=>{this.tool.transition("idle")});fb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};fb(nA,"id","pinching");var oA=class extends Ax{constructor(){super(...arguments);fb(this,"cursor",
"grabbing");fb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=Lj();this.draggedBindingId=Lj();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=uc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};fb(oA,"id","translatingHandle");var pA=class extends ri{constructor(){super(...arguments);fb(this,"cursor","grabbing");fb(this,"info",{});fb(this,"onEnter",a=>{this.info=a});fb(this,
"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<rd.dist(a,d)&&this.tool.transition("translatingHandle",this.info)});fb(this,"onPointerUp",()=>{this.tool.transition("idle")});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};fb(pA,"id","pointingHandle");var qA=class extends ri{constructor(){super(...arguments);fb(this,"handle");fb(this,"onEnter",a=>{var d;this.app.cursors.setCursor(lt[a.handle],null!=(d=this.app.selectionBounds.rotation)?
d:0);this.handle=a.handle});fb(this,"onExit",()=>{this.app.cursors.reset()});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",a);break;default:this.tool.transition("pointingResizeHandle",
a)}}});fb(this,"onPointerLeave",()=>{this.tool.transition("idle")});fb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var k=this.app.selectedShapes.values().next().value;if(!k.canEdit||this.app.readOnly||k.props.isLocked)k.onResetBounds({asset:k.props.assetId?this.app.assets[k.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":null==(d=
k.onResetBounds)?void 0:d.call(k,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:k})}}})}};fb(qA,"id","hoveringSelectionHandle");var rA=class extends ri{constructor(){super(...arguments);fb(this,"editingShape",{});fb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});fb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=this.editingShape.props.text.trim();
""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});fb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",a);break;case "canvas":a.order||
this.tool.transition("idle",a)}});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":gd(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};fb(rA,"id","editingShape");var sA=class extends ri{constructor(){super(...arguments);fb(this,"minimapZoom",1);fb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});fb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");var k=document.querySelector(".tl-preview-minimap #minimap-camera-rect");
if(d&&k){const H=d.getBoundingClientRect();this.minimapRect.height=H.height;this.minimapRect.width=H.width;this.minimapRect.minX=H.left;this.minimapRect.minY=H.top;this.minimapRect.maxX=H.right;this.minimapRect.maxY=H.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=rd.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);k=k.getBoundingClientRect();k=rd.mul(rd.sub(a,[k.left+k.width/2,k.top+k.height/2]),this.minimapZoom);return rd.sub(this.app.viewport.camera.point,k)}});
fb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});fb(this,"onPointerMove",(a,d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});fb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};fb(sA,"id","pointingMinimap");var Et=class extends Cr{constructor(){super(...arguments);fb(this,"returnTo","");fb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};
fb(Et,"id","select");fb(Et,"initial","idle");fb(Et,"shortcut","whiteboard/select");fb(Et,"states",[dA,bA,cA,gA,eA,mA,iA,fA,qA,jA,lA,sA,pA,oA,hA,Bx,Cx,Cx,nA,rA]);var tA=class extends ri{constructor(){super(...arguments);fb(this,"cursor","grabbing");fb(this,"originalScreenPoint",[]);fb(this,"originalCameraPoint",[]);fb(this,"prevState","idle");fb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});
fb(this,"onPointerMove",(a,d)=>{a=Rd.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:Rd.sub(this.originalCameraPoint,Rd.div(a,this.app.viewport.camera.zoom))})});fb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};fb(tA,"id","panning");var uA=class extends ri{constructor(){super(...arguments);fb(this,"onEnter",a=>{this.parent.prevTool&&a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();
this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});fb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};fb(uA,"id","idle");var vA=class extends ri{constructor(){super(...arguments);fb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});fb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};fb(vA,"id","idleHold");var wA=class extends ri{constructor(){super(...arguments);fb(this,"origin",[0,0]);
fb(this,"prevDelta",[0,0]);fb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});fb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});fb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};fb(wA,"id","pinching");var Ft=class extends Cr{constructor(){super(...arguments);fb(this,"cursor","grab");fb(this,"prevTool",null);fb(this,"onEnter",a=>{this.prevTool=null==a?void 0:a.prevTool});fb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});
fb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};fb(Ft,"id","move");fb(Ft,"shortcut","whiteboard/pan");fb(Ft,"states",[uA,vA,tA,wA]);fb(Ft,"initial","idle");var im=class{constructor(a,d={}){fb(this,"lastShapesNounces",null);fb(this,"app");fb(this,"id");fb(this,"name");fb(this,"shapes",[]);fb(this,"bindings",{});fb(this,"nonce",0);fb(this,"bringForward",Ha=>{const Ta=this.parseShapesArg(Ha);Ta.sort((Xa,eb)=>this.shapes.indexOf(eb)-this.shapes.indexOf(Xa)).map(Xa=>this.shapes.indexOf(Xa)).forEach(Xa=>
{if(Xa!==this.shapes.length-1&&!Ta.includes(this.shapes[Xa+1])){var eb=this.shapes[Xa];this.shapes[Xa]=this.shapes[Xa+1];this.shapes[Xa+1]=eb}});this.app.persist();return this});fb(this,"sendBackward",Ha=>{const Ta=this.parseShapesArg(Ha);Ta.sort((Xa,eb)=>this.shapes.indexOf(Xa)-this.shapes.indexOf(eb)).map(Xa=>this.shapes.indexOf(Xa)).forEach(Xa=>{if(0!==Xa&&!Ta.includes(this.shapes[Xa-1])){var eb=this.shapes[Xa];this.shapes[Xa]=this.shapes[Xa-1];this.shapes[Xa-1]=eb}});this.app.persist();return this});
fb(this,"bringToFront",Ha=>{const Ta=this.parseShapesArg(Ha);this.shapes=this.shapes.filter(Xa=>!Ta.includes(Xa)).concat(Ta);this.app.persist();return this});fb(this,"sendToBack",Ha=>{const Ta=this.parseShapesArg(Ha);this.shapes=Ta.concat(this.shapes.filter(Xa=>!Ta.includes(Xa)));this.app.persist();return this});fb(this,"flip",(Ha,Ta)=>{Ha=this.parseShapesArg(Ha);const Xa=ff.getCommonBounds(Ha.map(eb=>eb.bounds));Ha.forEach(eb=>{var ib;const Bb=ff.getRelativeTransformedBoundingBox(Xa,Xa,eb.bounds,
"horizontal"===Ta,"vertical"===Ta);if(eb.serialized)eb.onResize(eb.serialized,{bounds:Bb,center:ff.getBoundsCenter(Bb),rotation:null!=(ib=eb.props.rotation)?ib:-0,type:"top_left_corner",scale:eb.canFlip&&eb.props.scale?"horizontal"===Ta?[-eb.props.scale[0],1]:[1,-eb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});fb(this,"getShapeById",Ha=>this.shapes.find(Ta=>Ta.id===Ha));fb(this,"cleanup",Ha=>{Ha=Db(this.bindings,Ha);const Ta=new Set;let Xa=!1,eb=!1;const ib=
Is(this.bindings);Ha.forEach(Bb=>{var Mb;if(this.bindings[Bb.id]){var Fb=this.getShapeById(Bb.toId),$b=this.getShapeById(Bb.fromId);Fb&&$b?Ta.has($b.id)||(Bb=this.updateArrowBindings($b),Ta.add($b.id),Bb&&(Fb=Xd(Xd({},$b.props),Bb),Xa=!0,null==(Mb=this.getShapeById(Fb.id))?void 0:Mb.update(Fb,!1,(0,NE.default)(null==Bb?void 0:Bb.handles,null==$b?void 0:$b.props.handles)))):(delete ib[Bb.id],eb=!0)}});Object.keys(ib).forEach(Bb=>{const Mb=this.bindings[Bb];0===this.shapes.filter(Fb=>Fb.id===Mb.fromId||
Fb.id===Mb.toId).length&&(delete ib[Bb],eb=!0)});eb&&this.update({bindings:ib});(Xa||eb)&&this.app.persist(!0)});fb(this,"updateArrowBindings",Ha=>{var Ta,Xa,eb,ib={start:Is(Ha.props.handles.start),end:Is(Ha.props.handles.end)},Bb={isBound:!1,handle:Ha.props.handles.start,point:Rd.add(Ha.props.handles.start.point,Ha.props.point)},Mb={isBound:!1,handle:Ha.props.handles.end,point:Rd.add(Ha.props.handles.end.point,Ha.props.point)};if(Ha.props.handles.start.bindingId){var Fb=void 0!==(null==(Ta=Ha.props.decorations)?
void 0:Ta.start);Ta=Ha.props.handles.start;var $b=this.bindings[Ha.props.handles.start.bindingId],nc=this.getShapeById(null==$b?void 0:$b.toId);if(nc){Bb=nc.getBounds();var Sb=nc.getExpandedBounds(),gc=ff.expandBounds(Bb,Fb?$b.distance:1);const {minX:bc,minY:Dc,width:Ic,height:od}=Sb,Cd=Rd.add([bc,Dc],Rd.mulV([Ic,od],Rd.rotWith($b.point,[.5,.5],nc.props.rotation||0)));Bb={isBound:!0,hasDecoration:Fb,binding:$b,handle:Ta,point:Cd,target:nc,bounds:Bb,expandedBounds:Sb,intersectBounds:gc,center:nc.getCenter()}}}if(Ha.props.handles.end.bindingId&&
(Fb=void 0!==(null==(Xa=Ha.props.decorations)?void 0:Xa.end),Xa=Ha.props.handles.end,Ta=this.bindings[Ha.props.handles.end.bindingId],$b=this.getShapeById(null==Ta?void 0:Ta.toId))){Mb=$b.getBounds();nc=$b.getExpandedBounds();Sb=Fb?ff.expandBounds(Mb,Ta.distance):Mb;const {minX:bc,minY:Dc,width:Ic,height:od}=nc;gc=Rd.add([bc,Dc],Rd.mulV([Ic,od],Rd.rotWith(Ta.point,[.5,.5],$b.props.rotation||0)));Mb={isBound:!0,hasDecoration:Fb,binding:Ta,handle:Xa,point:gc,target:$b,bounds:Mb,expandedBounds:nc,intersectBounds:Sb,
center:$b.getCenter()}}for(const bc of["end","start"]){Xa="start"===bc?Bb:Mb;const Dc="start"===bc?Mb:Bb;if(Xa.isBound)if(Xa.binding.distance){if(Fb=Rd.uni(Rd.sub(Xa.point,Dc.point)),Ta=B(Dc.point,Fb,Xa.intersectBounds,Xa.target.props.rotation).filter(Ic=>Ic.didIntersect).map(Ic=>Ic.points[0]).sort((Ic,od)=>Rd.dist(Ic,Dc.point)-Rd.dist(od,Dc.point)),Ta[0])if($b=void 0,Dc.isBound&&($b=B(Dc.point,Fb,Dc.intersectBounds,Dc.target.props.rotation).filter(Ic=>Ic.didIntersect).map(Ic=>Ic.points[0]).sort((Ic,
od)=>Rd.dist(Ic,Dc.point)-Rd.dist(od,Dc.point))[0]),Dc.isBound&&(2>Ta.length||$b&&Ta[0]&&10>Math.ceil(Rd.dist(Ta[0],$b))||ff.boundsContain(Xa.expandedBounds,Dc.expandedBounds)||ff.boundsCollide(Xa.expandedBounds,Dc.expandedBounds)))Fb=Rd.uni(Rd.sub(Dc.point,Xa.point)),Ta=B(Xa.point,Fb,Xa.bounds,Xa.target.props.rotation).filter(Ic=>Ic.didIntersect).map(Ic=>Ic.points[0]),Ta[0]&&(ib[bc].point=Rd.toFixed(Rd.sub(Ta[0],Ha.props.point)),ib["start"===bc?"end":"start"].point=Rd.toFixed(Rd.add(Rd.sub(Ta[0],
Ha.props.point),Rd.mul(Fb,Math.min(Rd.dist(Ta[0],Dc.point),10*(ff.boundsContain(Dc.bounds,Xa.intersectBounds)?-1:1))))));else{if(!Dc.isBound&&(Ta[0]&&10>Rd.dist(Ta[0],Dc.point)||ak.pointInBounds(Dc.point,Xa.intersectBounds)))return ib=Rd.uni(Rd.sub(Xa.center,Dc.point)),null==(eb=Ha.getHandlesChange)?void 0:eb.call(Ha,Ha.props,{[bc]:Te(Xd({},Ha.props.handles[bc]),{point:Rd.toFixed(Rd.add(Rd.sub(Dc.point,Ha.props.point),Rd.mul(ib,10)))})});Ta[0]&&(ib[bc].point=Rd.toFixed(Rd.sub(Ta[0],Ha.props.point)))}}else ib[bc].point=
Rd.sub(Xa.point,Ha.props.point)}return Ha.getHandlesChange(Ha.props,ib)});const {id:k,name:H,shapes:fa=[],bindings:la={},nonce:sa}=d;this.id=k;this.name=H;this.bindings=Object.assign({},la);this.app=a;this.nonce=sa||0;this.addShapes(...fa);og(this);xd(()=>{const Ha=0<this.shapes.length?Object.fromEntries(this.shapes.map(Ta=>[Ta.id,Ta.nonce])):null;if(this.lastShapesNounces&&Ha){const Ta=this.lastShapesNounces,Xa=[...(new Set([...Object.keys(Ha),...Object.keys(Ta)]))].filter(eb=>Ta[eb]!==Ha[eb]);requestAnimationFrame(()=>
{this.cleanup(Xa)})}Ha&&(this.lastShapesNounces=Ha)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>uc(a)),bindings:Is(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,k)=>a.indexOf(d.id)-a.indexOf(k.id));return this}addShapes(...a){if(0!==
a.length)return a="getBounds"in a[0]?a:a.map(d=>new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(k=>!d.includes(k));return d}getBindableShapes(){return this.shapes.filter(a=>a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};Pd([De],im.prototype,"id",2);Pd([De],im.prototype,"name",2);Pd([De],im.prototype,"shapes",
2);Pd([De],im.prototype,"bindings",2);Pd([nf],im.prototype,"serialized",1);Pd([nf],im.prototype,"shapesById",1);Pd([De],im.prototype,"nonce",2);Pd([jg],im.prototype,"update",1);Pd([jg],im.prototype,"updateBindings",1);Pd([jg],im.prototype,"updateShapesIndex",1);Pd([jg],im.prototype,"addShapes",1);Pd([jg],im.prototype,"removeShapes",1);Pd([jg],im.prototype,"bringForward",2);Pd([jg],im.prototype,"sendBackward",2);Pd([jg],im.prototype,"bringToFront",2);Pd([jg],im.prototype,"sendToBack",2);Pd([jg],im.prototype,
"cleanup",2);var wk=class{constructor(){fb(this,"shiftKey",!1);fb(this,"ctrlKey",!1);fb(this,"modKey",!1);fb(this,"altKey",!1);fb(this,"spaceKey",!1);fb(this,"isPinching",!1);fb(this,"currentScreenPoint",[0,0]);fb(this,"currentPoint",[0,0]);fb(this,"previousScreenPoint",[0,0]);fb(this,"previousPoint",[0,0]);fb(this,"originScreenPoint",[0,0]);fb(this,"originPoint",[0,0]);fb(this,"pointerIds",new Set);fb(this,"state","idle");fb(this,"containerOffset",[0,0]);fb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);
this.updateModifiers(d);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});fb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});fb(this,"onPointerUp",(a,d)=>{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});fb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});fb(this,"onKeyUp",
a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});fb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});fb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});fb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});og(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=
Rd.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=dh()?a.metaKey:a.ctrlKey))}};Pd([De],wk.prototype,"shiftKey",2);Pd([De],wk.prototype,"ctrlKey",2);Pd([De],wk.prototype,"modKey",2);Pd([De],wk.prototype,"altKey",2);Pd([De],wk.prototype,"spaceKey",2);Pd([De],wk.prototype,"isPinching",2);Pd([De],wk.prototype,"currentScreenPoint",2);Pd([De],wk.prototype,"currentPoint",2);Pd([De],wk.prototype,"previousScreenPoint",
2);Pd([De],wk.prototype,"previousPoint",2);Pd([De],wk.prototype,"originScreenPoint",2);Pd([De],wk.prototype,"originPoint",2);Pd([De],wk.prototype,"state",2);Pd([De],wk.prototype,"containerOffset",2);Pd([jg],wk.prototype,"updateContainerOffset",1);Pd([jg],wk.prototype,"updateModifiers",1);Pd([jg],wk.prototype,"onPointerDown",2);Pd([jg],wk.prototype,"onPointerMove",2);Pd([jg],wk.prototype,"onPointerUp",2);Pd([jg],wk.prototype,"onKeyDown",2);Pd([jg],wk.prototype,"onKeyUp",2);Pd([jg],wk.prototype,"onPinchStart",
2);Pd([jg],wk.prototype,"onPinch",2);Pd([jg],wk.prototype,"onPinchEnd",2);var xE=(a,d=100)=>-(Math.cos(Math.PI*rd.clamp(a/d,0,1))-1)/2,Gs=class{constructor(){fb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});fb(this,"camera",{point:[0,0],zoom:1});fb(this,"updateBounds",a=>{this.bounds=a;return this});fb(this,"panCamera",a=>this.update({point:rd.sub(this.camera.point,rd.div(a,this.camera.zoom))}));fb(this,"panToPointWhenNearBounds",a=>{const d=rd.div([Gs.panThreshold,Gs.panThreshold],
this.camera.zoom),k=rd.sub([this.currentView.maxX,this.currentView.maxY],rd.add(a,d));a=rd.sub([this.currentView.minX,this.currentView.minY],rd.sub(a,d));this.panCamera(rd.mul([0>k[0]?k[0]:0<a[0]?a[0]:0,0>k[1]?k[1]:0<a[1]?a[1]:0],-Gs.panMultiplier*this.camera.zoom))});fb(this,"update",({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});fb(this,"getPagePoint",a=>{const {camera:d,bounds:k}=
this;return rd.sub(rd.div(rd.sub(a,[k.minX,k.minY]),d.zoom),d.point)});fb(this,"getScreenPoint",a=>{const {camera:d}=this;return rd.mul(rd.add(a,d.point),d.zoom)});fb(this,"onZoom",(a,d,k=!1)=>this.pinchZoom(a,[0,0],d,k));fb(this,"pinchZoom",(a,d,k,H=!1)=>{var {camera:fa}=this;d=rd.sub(fa.point,rd.div(d,fa.zoom));k=rd.clamp(k,Gs.minZoom,Gs.maxZoom);fa=rd.div(a,fa.zoom);a=rd.div(a,k);a=rd.toFixed(rd.add(d,rd.sub(a,fa)));H?this.animateCamera({point:a,zoom:k}):this.update({point:a,zoom:k});return this});
fb(this,"setZoom",(a,d=!1)=>{const {bounds:k}=this;this.onZoom([k.width/2,k.height/2],a,d)});fb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});fb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});fb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});fb(this,"animateCamera",({point:a,zoom:d})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/
d}));fb(this,"animateToViewport",a=>{const d=performance.now(),k=Xd({},this.currentView),H=()=>{var fa=performance.now()-d;fa=xE(fa);var la=k.minX+(a.minX-k.minX)*fa;this.update({point:[-la,-(k.minY+(a.minY-k.minY)*fa)],zoom:this.bounds.width/(k.maxX+(a.maxX-k.maxX)*fa-la)});1>fa&&requestAnimationFrame(H)};H()});fb(this,"zoomToBounds",({width:a,height:d,minX:k,minY:H})=>{const {bounds:fa,camera:la}=this;let sa=Math.min((fa.width-100)/a,(fa.height-100)/d);sa=Math.min(1,Math.max(Gs.minZoom,la.zoom===
sa||1>la.zoom?Math.min(1,sa):sa));a=rd.add([-k,-H],[(fa.width-a*sa)/2/sa,(fa.height-d*sa)/2/sa]);this.animateCamera({point:a,zoom:sa})});og(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:k}}=this,H=a.width/k,fa=a.height/k;return{minX:-d[0],minY:-d[1],maxX:H-d[0],maxY:fa-d[1],width:H,height:fa}}},bp=Gs;fb(bp,"minZoom",.1);fb(bp,"maxZoom",4);fb(bp,"panMultiplier",.05);fb(bp,"panThreshold",100);Pd([De],bp.prototype,"bounds",2);Pd([De],bp.prototype,"camera",2);Pd([jg],bp.prototype,"updateBounds",
2);Pd([jg],bp.prototype,"update",2);Pd([nf],bp.prototype,"currentView",1);var yE=class{constructor(a){fb(this,"app");fb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});fb(this,"hoverShape",d=>{this.app.setHoveredShape(d);return this});fb(this,"createShapes",(...d)=>{this.app.createShapes(d);return this});fb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);return this});fb(this,"deleteShapes",(...d)=>
{this.app.deleteShapes(d.length?d:this.app.selectedShapesArray);return this});fb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});fb(this,"deselectShapes",(...d)=>{const k="string"===typeof d[0]?d:d.map(H=>H.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(H=>!k.includes(H.id)));return this});fb(this,"flipHorizontal",(...d)=>{this.app.flipHorizontal(d);return this});fb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);return this});fb(this,"selectAll",
()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>!this.app.shapesInGroups().includes(d)));return this});fb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});fb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});fb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});fb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});fb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=ff.getCommonBounds(d.map(k=>
k.bounds));this.app.viewport.zoomToBounds(d);return this});fb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=ff.getCommonBounds(d.map(k=>k.bounds));this.app.viewport.update({point:Rd.add(Rd.neg(ff.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});fb(this,"zoomToSelection",()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);return this});fb(this,"resetZoomToCursor",
()=>{this.app.viewport.animateCamera({zoom:1,point:Rd.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});fb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});fb(this,"toggleSnapToGrid",()=>{const {settings:d}=this.app;d.update({snapToGrid:!d.snapToGrid});return this});fb(this,"setColor",d=>{const {settings:k}=this.app;k.update({color:d});this.app.selectedShapesArray.forEach(H=>{H.props.isLocked||H.update({fill:d,stroke:d})});
this.app.persist();return this});fb(this,"setScaleLevel",d=>{const {settings:k}=this.app;k.update({scaleLevel:d});this.app.selectedShapes.forEach(H=>{H.props.isLocked||H.setScaleLevel(d)});this.app.persist();return this});fb(this,"undo",()=>{this.app.undo();return this});fb(this,"redo",()=>{this.app.redo();return this});fb(this,"persist",()=>{this.app.persist();return this});fb(this,"createNewLineBinding",(d,k)=>this.app.createNewLineBinding(d,k));fb(this,"cloneShapes",({shapes:d,assets:k,bindings:H,
point:fa=[0,0]})=>{const la=ff.getCommonBounds(d.filter(Ta=>"group"!==Ta.type).map(Ta=>{var Xa,eb,ib,Bb,Mb,Fb,$b,nc,Sb,gc,bc,Dc,Ic,od,Cd,Ge;return{minX:null!=(eb=null==(Xa=Ta.point)?void 0:Xa[0])?eb:fa[0],minY:null!=(Bb=null==(ib=Ta.point)?void 0:ib[1])?Bb:fa[1],width:null!=(Fb=null==(Mb=Ta.size)?void 0:Mb[0])?Fb:4,height:null!=(nc=null==($b=Ta.size)?void 0:$b[1])?nc:4,maxX:(null!=(gc=null==(Sb=Ta.point)?void 0:Sb[0])?gc:fa[0])+(null!=(Dc=null==(bc=Ta.size)?void 0:bc[0])?Dc:4),maxY:(null!=(od=null==
(Ic=Ta.point)?void 0:Ic[1])?od:fa[1])+(null!=(Ge=null==(Cd=Ta.size)?void 0:Cd[1])?Ge:4)}})),sa=d.map(Ta=>Te(Xd({},Ta),{id:Lj(),point:[fa[0]+Ta.point[0]-la.minX,fa[1]+Ta.point[1]-la.minY]}));sa.forEach(Ta=>{var Xa;Ta.children&&0<(null==(Xa=Ta.children)?void 0:Xa.length)&&(Ta.children=Ta.children.map(eb=>{var ib;return null==(ib=sa[d.findIndex(Bb=>Bb.id===eb)])?void 0:ib.id}).filter(dg))});const Ha=[];sa.flatMap(Ta=>{var Xa;return Object.values(null!=(Xa=Ta.handles)?Xa:{})}).forEach(Ta=>{if(Ta.bindingId){var Xa=
H[Ta.bindingId];if(Xa){var eb=d.findIndex(Bb=>Bb.id===Xa.fromId);const ib=d.findIndex(Bb=>Bb.id===Xa.toId);Xa&&-1!==eb&&-1!==ib?(eb=Te(Xd({},Xa),{id:Lj(),fromId:sa[eb].id,toId:sa[ib].id}),Ha.push(eb),Ta.bindingId=eb.id):Ta.bindingId=void 0}else console.warn("binding not found",Ta.bindingId)}});k=k.filter(Ta=>sa.some(Xa=>Xa.assetId===Ta.id));return{shapes:sa,assets:k,bindings:Ha}});fb(this,"getClonedShapesFromTldrString",(d,k)=>{try{{var H;const Xa=null==(H=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?
void 0:H[1];if(Xa){try{var fa=JSON.parse(Xa)}catch(eb){fa=null}var la=fa}else la=void 0}d=la;if(!d)return null;const {shapes:sa,bindings:Ha,assets:Ta}=d;return this.cloneShapes({shapes:sa,bindings:Ha,assets:Ta,point:k})}catch(sa){console.log(sa)}return null});fb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});fb(this,"addClonedShapes",d=>{const {shapes:k,assets:H,bindings:fa}=d;0<H.length&&this.app.createAssets(H);0<k.length&&this.app.createShapes(k);
this.app.currentPage.updateBindings(Object.fromEntries(fa.map(la=>[la.id,la])));this.app.selectedTool.transition("idle");return this});fb(this,"addClonedShapesFromTldrString",(d,k)=>{(d=this.getClonedShapesFromTldrString(d,k))&&this.addClonedShapes(d);return this});fb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var k=[...d.filter(H=>"group"===H.type),...d.map(H=>this.app.getParentGroup(H))].filter(dg);this.app.currentPage.removeShapes(...k);d=d.filter(H=>"group"!==
H.type);1<d.length&&(k=this.app.getShapeClass("group"),k=new k({id:Lj(),type:k.id,parentId:this.app.currentPage.id,children:d.map(H=>H.id)}),this.app.currentPage.addShapes(k),this.app.setSelectedShapes([k]),this.app.bringForward(d));this.app.persist()}});fb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(H=>"group"===H.type),...d.map(H=>this.app.getParentGroup(H))].filter(dg);var k=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),
this.app.persist(),this.app.setSelectedShapes(k))}});fb(this,"convertShapes",(d,k=this.app.allSelectedShapesArray)=>{const H=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...k);k=k.map(fa=>new H(Te(Xd({},fa.serialized),{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...k);this.app.persist();this.app.setSelectedShapes(k)});fb(this,"setCollapsed",(d,k=this.app.allSelectedShapesArray)=>{k.forEach(H=>{"logseq-portal"===H.props.type&&H.setCollapsed(d)});this.app.persist()});this.app=
a}},Gt=class{constructor(){fb(this,"cursor","default");fb(this,"rotation",0);fb(this,"reset",()=>{this.cursor="default"});fb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});fb(this,"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});og(this)}};Pd([De],Gt.prototype,"cursor",2);Pd([De],Gt.prototype,"rotation",2);Pd([jg],Gt.prototype,"reset",2);Pd([jg],Gt.prototype,"setCursor",2);Pd([jg],Gt.prototype,"setRotation",2);var Ht=class{constructor(a){fb(this,
"app");fb(this,"stack",[]);fb(this,"isPaused",!0);fb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});fb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});fb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:d})});fb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});fb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});
fb(this,"instantiateShape",d=>new (this.app.getShapeClass(d.type))(d));fb(this,"deserialize",d=>{gd(()=>{var k,{pages:H}=d;const fa=this.isPaused;this.pause();const la=[...this.app.selectedIds];try{const sa=new Map(this.app.pages),Ha=[];for(const Ta of H){const Xa=sa.get(Ta.id);if(void 0!==Xa){const eb=new Map(Xa.shapes.map(ib=>[ib.props.id,ib]));H=[];for(const ib of Ta.shapes){const Bb=eb.get(ib.id);void 0!==Bb?(Bb.nonce!==ib.nonce&&(Bb.update(ib,!0),Bb.nonce=ib.nonce,Bb.setLastSerialized(ib)),eb.delete(ib.id)):
H.push(this.instantiateShape(ib))}0<eb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&Xa.removeShapes(...eb.values());0<H.length&&Xa.addShapes(...H);sa.delete(Ta.id);Xa.updateBindings(Ta.bindings);Xa.nonce=null!=(k=Ta.nonce)?k:0}else{const {id:eb,name:ib,shapes:Bb,bindings:Mb,nonce:Fb}=Ta;Ha.push(new im(this.app,{id:eb,name:ib,nonce:Fb,bindings:Mb,shapes:Bb.map($b=>this.instantiateShape($b))}))}}0<Ha.length&&this.app.addPages(Ha);0<sa.size&&this.app.removePages(Array.from(sa.values()));
this.app.setSelectedShapes(la).setErasingShapes([])}catch(sa){console.warn(sa)}fa||this.resume()})});this.app=a;og(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};Pd([De],Ht.prototype,"stack",2);Pd([jg],Ht.prototype,"persist",2);Pd([jg],Ht.prototype,"undo",2);Pd([jg],Ht.prototype,"redo",2);Pd([jg],Ht.prototype,"deserialize",2);var Hs=class{constructor(){fb(this,"mode","light");fb(this,"showGrid",!0);fb(this,"snapToGrid",!0);fb(this,"scaleLevel","md");fb(this,"color",
"");og(this)}update(a){Object.assign(this,a)}};Pd([De],Hs.prototype,"mode",2);Pd([De],Hs.prototype,"showGrid",2);Pd([De],Hs.prototype,"snapToGrid",2);Pd([De],Hs.prototype,"scaleLevel",2);Pd([De],Hs.prototype,"color",2);Pd([jg],Hs.prototype,"update",1);var Zg=class extends Dt{constructor(a,d,k,H){var fa,la;super();fb(this,"uuid",Lj());fb(this,"readOnly");fb(this,"api");fb(this,"inputs",new wk);fb(this,"cursors",new Gt);fb(this,"viewport",new bp);fb(this,"settings",new Hs);fb(this,"Tools",[]);fb(this,
"history",new Ht(this));fb(this,"persist",this.history.persist);fb(this,"undo",this.history.undo);fb(this,"redo",this.history.redo);fb(this,"saving",!1);fb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});fb(this,"load",()=>{this.notify("load",null);return this});fb(this,"save",()=>{this.notify("save",null);return this});fb(this,"pages",new Map([["page",new im(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));
fb(this,"getPageById",sa=>{const Ha=this.pages.get(sa);if(!Ha)throw Error(`Could not find a page named ${sa}.`);return Ha});fb(this,"getShapeById",(sa,Ha=this.currentPage.id)=>{var Ta;return null==(Ta=this.getPageById(Ha))?void 0:Ta.shapesById[sa]});fb(this,"createShapes",sa=>{if(this.readOnly)return this;(sa=this.currentPage.addShapes(...sa))&&this.notify("create-shapes",sa);this.persist();return this});fb(this,"updateShapes",sa=>{if(this.readOnly)return this;sa.forEach(Ha=>{const Ta=this.getShapeById(Ha.id);
null==Ta?void 0:Ta.update(Ha);Ha.type!==(null==Ta?void 0:Ta.type)&&this.api.convertShapes(Ha.type,[Ta])});this.persist();return this});fb(this,"deleteShapes",sa=>{if(0===sa.length||this.readOnly)return this;sa=sa.map(eb=>"string"===typeof eb?this.getShapeById(eb):eb).filter(dg).filter(eb=>!eb.props.isLocked);const Ha=this.shapesInGroups(sa);sa.forEach(eb=>{this.getParentGroup(eb)&&Ha.push(eb)});let Ta=new Set([...sa,...Ha].map(eb=>eb.id));Ha.forEach(eb=>{var ib;const Bb=this.getParentGroup(eb);if(Bb){const Mb=
null==(ib=Bb.props.children)?void 0:ib.filter(Fb=>Fb!==eb.id);!Mb||1>=(null==Mb?void 0:Mb.length)?Ta.add(Bb.id):Bb.update({children:Mb})}});const Xa=(eb,ib)=>{var Bb;[...Ta].includes(eb)&&"line"===(null==(Bb=this.getShapeById(ib))?void 0:Bb.type)&&Ta.add(ib)};this.currentPage.shapes.filter(eb=>!eb.props.isLocked).flatMap(eb=>{var ib;return Object.values(null!=(ib=eb.props.handles)?ib:{})}).flatMap(eb=>eb.bindingId).filter(dg).map(eb=>{var ib,Bb;const Mb=null==(ib=this.currentPage.bindings[eb])?void 0:
ib.toId;eb=null==(Bb=this.currentPage.bindings[eb])?void 0:Bb.fromId;Mb&&eb&&(Xa(Mb,eb),Xa(eb,Mb))});sa=[...Ta].map(eb=>this.getShapeById(eb));this.setSelectedShapes(this.selectedShapesArray.filter(eb=>!Ta.has(eb.id)));(sa=this.currentPage.removeShapes(...sa))&&this.notify("delete-shapes",sa);this.persist();return this});fb(this,"bringForward",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.bringForward(sa);return this});fb(this,"sendBackward",(sa=this.selectedShapesArray)=>
{0<sa.length&&!this.readOnly&&this.currentPage.sendBackward(sa);return this});fb(this,"sendToBack",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.sendToBack(sa);return this});fb(this,"bringToFront",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.bringToFront(sa);return this});fb(this,"flipHorizontal",(sa=this.selectedShapesArray)=>{this.currentPage.flip(sa,"horizontal");return this});fb(this,"flipVertical",(sa=this.selectedShapesArray)=>
{this.currentPage.flip(sa,"vertical");return this});fb(this,"align",(sa,Ha=this.selectedShapesArray)=>{if(2>Ha.length||this.readOnly)return this;const Ta=Ha.map(Mb=>{const Fb=Mb.getBounds();return{id:Mb.id,point:[Fb.minX,Fb.minY],bounds:Fb}}),Xa=ff.getCommonBounds(Ta.map(({bounds:Mb})=>Mb)),eb=Xa.minX+Xa.width/2,ib=Xa.minY+Xa.height/2,Bb=Object.fromEntries(Ta.map(({id:Mb,point:Fb,bounds:$b})=>[Mb,{prev:Fb,next:{top:[Fb[0],Xa.minY],centerVertical:[Fb[0],ib-$b.height/2],bottom:[Fb[0],Xa.maxY-$b.height],
left:[Xa.minX,Fb[1]],centerHorizontal:[eb-$b.width/2,Fb[1]],right:[Xa.maxX-$b.width,Fb[1]]}[sa]}]));Ha.forEach(Mb=>{Bb[Mb.id]&&Mb.update({point:Bb[Mb.id].next})});this.persist();return this});fb(this,"distribute",(sa,Ha=this.selectedShapesArray)=>{if(2>Ha.length||this.readOnly)return this;const Ta=Object.fromEntries(ff.getDistributions(Ha,sa).map(Xa=>[Xa.id,Xa]));Ha.forEach(Xa=>{Ta[Xa.id]&&Xa.update({point:Ta[Xa.id].next})});this.persist();return this});fb(this,"packIntoRectangle",(sa=this.selectedShapesArray)=>
{if(2>sa.length||this.readOnly)return this;const Ha=Object.fromEntries(ff.getPackedDistributions(sa).map(Ta=>[Ta.id,Ta]));sa.forEach(Ta=>{Ha[Ta.id]&&Ta.update({point:Ha[Ta.id].next})});this.persist();return this});fb(this,"setLocked",sa=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(Ha=>{Ha.update({isLocked:sa})});this.persist();return this});fb(this,"assets",{});fb(this,"removeUnusedAssets",()=>{const sa=this.getCleanUpAssets();Object.keys(this.assets).forEach(Ha=>
{sa.some(Ta=>Ta.id===Ha)||delete this.assets[Ha]});this.persist();return this});fb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const Ha=this.allSelectedShapesArray;var sa=JSON.stringify({shapes:Ha.map(Xa=>Xa.serialized),assets:this.getCleanUpAssets().filter(Xa=>Ha.some(eb=>eb.props.assetId===Xa.id)),bindings:uc(this.currentPage.bindings)});sa=encodeURIComponent(`<whiteboard-tldr>${sa}</whiteboard-tldr>`);const Ta=this.selectedShapesArray.map(Xa=>`((${Xa.props.id}))`).join(" ");
this.notify("copy",{text:Ta,html:sa})}});fb(this,"paste",(sa,Ha)=>{var Ta;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!Ha,dataTransfer:null!=(Ta=null==sa?void 0:sa.clipboardData)?Ta:void 0})});fb(this,"cut",()=>{this.copy();this.api.deleteShapes()});fb(this,"drop",(sa,Ha)=>{this.notify("drop",{dataTransfer:sa,point:Ha?this.viewport.getPagePoint(Ha):ff.getBoundsCenter(this.viewport.currentView)})});fb(this,"selectTool",(sa,Ha={})=>{this.readOnly&&
!["select","move"].includes(sa)||this.transition(sa,Ha)});fb(this,"editingId");fb(this,"setEditingShape",sa=>{this.editingId="string"===typeof sa?sa:null==sa?void 0:sa.id;return this});fb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});fb(this,"hoveredId");fb(this,"setHoveredShape",sa=>{this.hoveredId="string"===typeof sa?sa:null==sa?void 0:sa.id;return this});fb(this,"selectedIds",new Set);fb(this,"selectedShapes",new Set);fb(this,"selectionRotation",
0);fb(this,"setSelectedShapes",sa=>{var Ha;const {selectedIds:Ta,selectedShapes:Xa}=this;Ta.clear();Xa.clear();sa[0]&&"string"===typeof sa[0]?sa.forEach(ib=>Ta.add(ib)):sa.forEach(ib=>Ta.add(ib.id));const eb=this.currentPage.shapes.filter(ib=>Ta.has(ib.id));eb.forEach(ib=>Xa.add(ib));this.selectionRotation=1===eb.length?null!=(Ha=eb[0].props.rotation)?Ha:0:0;0===sa.length&&this.setEditingShape();return this});fb(this,"erasingIds",new Set);fb(this,"erasingShapes",new Set);fb(this,"setErasingShapes",
sa=>{const {erasingIds:Ha,erasingShapes:Ta}=this;Ha.clear();Ta.clear();sa[0]&&"string"===typeof sa[0]?sa.forEach(Xa=>Ha.add(Xa)):sa.forEach(Xa=>Ha.add(Xa.id));this.currentPage.shapes.filter(Xa=>Ha.has(Xa.id)).forEach(Xa=>Ta.add(Xa));return this});fb(this,"bindingIds");fb(this,"setBindingShapes",sa=>{this.bindingIds=sa;return this});fb(this,"clearBindingShape",()=>this.setBindingShapes());fb(this,"createNewLineBinding",(sa,Ha)=>{sa="string"===typeof sa?this.getShapeById(sa):sa;Ha="string"===typeof Ha?
this.getShapeById(Ha):Ha;if((null==sa?0:sa.canBind)&&(null==Ha?0:Ha.canBind)&&(Ha=Ec(sa,Ha))){const [Ta,Xa]=Ha;this.createShapes([Ta]);this.currentPage.updateBindings(Object.fromEntries(Xa.map(eb=>[eb.id,eb])));this.persist();return!0}return!1});fb(this,"brush");fb(this,"setBrush",sa=>{this.brush=sa;return this});fb(this,"setCamera",(sa,Ha)=>{this.viewport.update({point:sa,zoom:Ha});return this});fb(this,"getPagePoint",sa=>{const {camera:Ha}=this.viewport;return rd.sub(rd.div(sa,Ha.zoom),Ha.point)});
fb(this,"getScreenPoint",sa=>{const {camera:Ha}=this.viewport;return rd.mul(rd.add(sa,Ha.point),Ha.zoom)});fb(this,"Shapes",new Map);fb(this,"registerShapes",sa=>{sa.forEach(Ha=>{if("group"===Ha.id){const Ta=this;Ha.prototype.getShapes=function(){var Xa,eb;return null!=(eb=null==(Xa=this.props.children)?void 0:Xa.map(ib=>Ta.getShapeById(ib)).filter(Boolean))?eb:[]}}return this.Shapes.set(Ha.id,Ha)})});fb(this,"deregisterShapes",sa=>{sa.forEach(Ha=>this.Shapes.delete(Ha.id))});fb(this,"getShapeClass",
sa=>{if(!sa)throw Error("No shape type provided.");const Ha=this.Shapes.get(sa);if(!Ha)throw Error(`Could not find shape class for ${sa}`);return Ha});fb(this,"wrapUpdate",sa=>{gd(()=>{const Ha=!this.history.isPaused;Ha&&this.history.pause();sa();Ha&&(this.history.resume(),this.persist())})});fb(this,"subscriptions",new Set([]));fb(this,"subscribe",(sa,Ha)=>{if(void 0===Ha)throw Error("Callback is required.");const Ta={event:sa,callback:Ha};this.subscriptions.add(Ta);return()=>this.unsubscribe(Ta)});
fb(this,"unsubscribe",sa=>{this.subscriptions.delete(sa);return this});fb(this,"notify",(sa,Ha)=>{this.subscriptions.forEach(Ta=>{Ta.event===sa&&Ta.callback(this,Ha)});return this});fb(this,"onTransition",()=>{});fb(this,"onPointerDown",(sa,Ha)=>{if(!this.editingShape&&1===Ha.button&&!this.isIn("move"))this.temporaryTransitionToMove(Ha);else if(2===Ha.button&&!this.editingShape)Ha.preventDefault(),this.transition("select");else if("clientX"in Ha)this.inputs.onPointerDown([...this.viewport.getPagePoint([Ha.clientX,
Ha.clientY]),Ha.pressure],Ha)});fb(this,"onPointerUp",(sa,Ha)=>{if(!this.editingShape&&1===Ha.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ha.stopPropagation(),Ha.preventDefault();else if("clientX"in Ha)this.inputs.onPointerUp([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});fb(this,"onPointerMove",(sa,Ha)=>{if("clientX"in Ha)this.inputs.onPointerMove([...this.viewport.getPagePoint([Ha.clientX,Ha.clientY]),Ha.pressure],Ha)});fb(this,"onKeyDown",
(sa,Ha)=>{if(this.editingShape||" "!==Ha.key||this.isIn("move"))this.inputs.onKeyDown(Ha);else this.temporaryTransitionToMove(Ha)});fb(this,"onKeyUp",(sa,Ha)=>{if(!this.editingShape&&" "===Ha.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ha.stopPropagation(),Ha.preventDefault();else this.inputs.onKeyUp(Ha)});fb(this,"onPinchStart",(sa,Ha)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(sa.point),.5],Ha)});fb(this,"onPinch",(sa,Ha)=>{this.inputs.onPinch([...this.viewport.getPagePoint(sa.point),
.5],Ha)});fb(this,"onPinchEnd",(sa,Ha)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(sa.point),.5],Ha)});this._states=[Et,Ft];this.readOnly=H;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),H=null!=(fa=this.initial)?fa:this.states[0].id,fa=this.children.get(H))&&(this.currentState=fa,null==(la=this.currentState)?void 0:la._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);k&&this.registerTools(k);this.history.resume();a&&this.history.deserialize(a);
this.api=new yE(this);og(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>
d.props.children).filter(dg).map(d=>this.getShapeById(d)).filter(dg)}getParentGroup(a){return this.shapes.find(d=>{var k;return null==(k=d.props.children)?void 0:k.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):a.forEach(d=>delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(k=>{k.props.assetId&&this.assets[k.props.assetId]&&
a.add(this.assets[k.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=this;return a?d.shapes.find(k=>k.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(k=>k.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=
this;return a?this.shapes.find(d=>{var k;return"group"===d.type&&(null==(k=d.props.children)?void 0:k.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;
const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(H=>{var fa;return Object.values(null!=(fa=H.props.handles)?fa:{})}).flatMap(H=>H.bindingId).filter(dg).flatMap(H=>{var fa,la;return[null==(fa=this.currentPage.bindings[H])?void 0:fa.fromId,null==(la=this.currentPage.bindings[H])?void 0:la.toId]}).filter(dg):[],k=[...(null!=(a=this.bindingIds)?a:[]),...d];return k?this.currentPage.shapes.filter(H=>null==k?void 0:k.includes(H.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;
return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:d,viewport:{currentView:k}}=this;return d.shapes.filter(H=>!H.canUnmount||a.has(H)||ff.boundsContain(k,H.rotatedBounds)||ff.boundsCollide(k,H.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!ff.boundsContain(d,a)&&!ff.boundsCollide(d,a)){var k=ff.getBoundsCenter(a);return rd.clampV([(k[0]-
d.minX-d.width/2)/d.width,(k[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?Te(Xd({},a[0].bounds),{rotation:a[0].props.rotation}):ff.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}temporaryTransitionToMove(a){a.stopPropagation();
a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};fb(Zg,"id","app");fb(Zg,"initial","select");Pd([nf],Zg.prototype,"serialized",1);Pd([De],Zg.prototype,"pages",2);Pd([nf],Zg.prototype,"currentPageId",1);Pd([nf],Zg.prototype,"currentPage",1);Pd([jg],Zg.prototype,"addPages",1);Pd([jg],Zg.prototype,"removePages",1);Pd([jg],Zg.prototype,"createShapes",2);Pd([jg],Zg.prototype,"updateShapes",2);Pd([jg],Zg.prototype,"deleteShapes",2);Pd([De],
Zg.prototype,"assets",2);Pd([jg],Zg.prototype,"addAssets",1);Pd([jg],Zg.prototype,"removeAssets",1);Pd([jg],Zg.prototype,"removeUnusedAssets",2);Pd([nf],Zg.prototype,"selectedTool",1);Pd([De],Zg.prototype,"editingId",2);Pd([nf],Zg.prototype,"editingShape",1);Pd([jg],Zg.prototype,"setEditingShape",2);Pd([De],Zg.prototype,"hoveredId",2);Pd([nf],Zg.prototype,"hoveredShape",1);Pd([nf],Zg.prototype,"hoveredGroup",1);Pd([jg],Zg.prototype,"setHoveredShape",2);Pd([De],Zg.prototype,"selectedIds",2);Pd([De],
Zg.prototype,"selectedShapes",2);Pd([De],Zg.prototype,"selectionRotation",2);Pd([nf],Zg.prototype,"selectedShapesArray",1);Pd([nf],Zg.prototype,"allSelectedShapes",1);Pd([nf],Zg.prototype,"allSelectedShapesArray",1);Pd([jg],Zg.prototype,"setSelectedShapes",2);Pd([jg],Zg.prototype,"setSelectionRotation",1);Pd([De],Zg.prototype,"erasingIds",2);Pd([De],Zg.prototype,"erasingShapes",2);Pd([nf],Zg.prototype,"erasingShapesArray",1);Pd([jg],Zg.prototype,"setErasingShapes",2);Pd([De],Zg.prototype,"bindingIds",
2);Pd([nf],Zg.prototype,"bindingShapes",1);Pd([jg],Zg.prototype,"setBindingShapes",2);Pd([jg],Zg.prototype,"createNewLineBinding",2);Pd([De],Zg.prototype,"brush",2);Pd([jg],Zg.prototype,"setBrush",2);Pd([jg],Zg.prototype,"setCamera",2);Pd([nf],Zg.prototype,"currentGrid",1);Pd([nf],Zg.prototype,"shapes",1);Pd([nf],Zg.prototype,"shapesInViewport",1);Pd([nf],Zg.prototype,"selectionDirectionHint",1);Pd([nf],Zg.prototype,"selectionBounds",1);Pd([nf],Zg.prototype,"showSelection",1);Pd([nf],Zg.prototype,
"showSelectionDetail",1);Pd([nf],Zg.prototype,"showSelectionRotation",1);Pd([nf],Zg.prototype,"showContextBar",1);Pd([nf],Zg.prototype,"showRotateHandles",1);Pd([nf],Zg.prototype,"showResizeHandles",1);var zE=Function.prototype.toString,Dx=Object.create,AE=Object.prototype.toString,BE=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,k){this._keys.push(d);
this._values.push(k)};return a}(),CE="undefined"!==typeof WeakMap?Sd:Qc,DE="g"===/test/g.flags?Ne:Ie,EE="undefined"!==typeof Symbol?Ee:cf,FE=Object.defineProperty,GE=Object.getOwnPropertyDescriptor,xA=Object.getOwnPropertyNames,Ex=Object.getOwnPropertySymbols,yA=Object.prototype,zA=yA.hasOwnProperty,HE=yA.propertyIsEnumerable,AA="function"===typeof Ex,IE=AA?Vf:xA,JE=Array.isArray,Fx=Object.assign,KE=Object.getPrototypeOf,BA={array:function(a,d){var k=new d.Constructor;d.cache.set(a,k);for(var H=0,
fa=a.length;H<fa;++H)k[H]=d.copier(a[H],d);return k},arrayBuffer:function(a,d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,d){return new d.Constructor(a.getTime())},error:Ng,map:pg,object:AA?rg:Of,regExp:function(a,d){d=new d.Constructor(a.source,DE(a));d.lastIndex=a.lastIndex;return d},set:hi},LE=Fx({},BA,{array:function(a,d){var k=new d.Constructor;d.cache.set(a,k);return Kf(a,k,d)},map:function(a,
d){return Kf(a,pg(a,d),d)},object:function(a,d){var k=Bd(d.prototype);d.cache.set(a,k);return Kf(a,k,d)},set:function(a,d){return Kf(a,hi(a,d),d)}});zi(Fx({},LE,{}));var ME=zi({}),NE=df(kt()),OE=df(or()),Is=ME,Ao=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const k=a.ownerDocument,H=k.activeElement;H!==a&&a.focus();k.execCommand("insertText",
!1,d)||Ao.insertTextFirefox(a,d);H===k.body?a.blur():H instanceof HTMLElement&&H!==a&&H.focus()}static set(a,d){a.select();Ao.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:k}=a;return a.value.slice(d?d:void 0,k?k:void 0)}static wrapSelection(a,d,k){const {selectionStart:H,selectionEnd:fa}=a,la=Ao.getSelection(a);Ao.insert(a,d+la+(null!=k?k:d));a.selectionStart=(H||0)+d.length;a.selectionEnd=(fa||0)+d.length}static replace(a,d,k){let H=0;a.value.replace(d,(...fa)=>{const la=
H+fa[fa.length-2],sa=fa[0].length;a.selectionStart=la;a.selectionEnd=la+sa;fa="string"===typeof k?k:k(...fa);Ao.insert(a,fa);a.selectionStart=la;H+=fa.length-sa;return fa})}static findLineEnd(a,d){const k=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(k)?d:k+1}static indent(a){var d;const {selectionStart:k,selectionEnd:H,value:fa}=a;var la=fa.slice(k,H);if((la=null==(d=/\n/g.exec(la))?void 0:d.length)&&0<la){d=fa.lastIndexOf("\n",k-1)+1;var sa=a.value.slice(d,H-1);la=sa.replace(/^|\n/g,`$&${Ao.INDENT}`);
sa=la.length-sa.length;a.setSelectionRange(d,H-1);Ao.insert(a,la);a.setSelectionRange(k+1,H+sa)}else Ao.insert(a,Ao.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:k,value:H}=a;var fa=H.lastIndexOf("\n",d-1)+1;const la=Ao.findLineEnd(H,k);var sa=a.value.slice(fa,la);const Ha=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-Ha.length;a.setSelectionRange(fa,la);Ao.insert(a,Ha);fa=(fa=/\t| {1,2}/.exec(H.slice(fa,d)))?fa[0].length:0;a.setSelectionRange(d-fa,Math.max(d-fa,k-sa))}static normalizeText(a){return a.replace(Ao.fixNewLines,
"\n")}},It=Ao;fb(It,"fixNewLines",/\r?\n|\r/g);fb(It,"INDENT","  ");var Dr;"undefined"!==typeof window&&(Dr=bl());var Gx=new Map,CA=dh()?"":"ctrl",PE=class extends Zg{},DA=df(da(22)),QE=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var EA=df(da(22)),Hx={},Ku=df(da(22)),RE=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},
Ix=df(da(22)),Jx=new Map,SE={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},TE=((a,...d)=>a.reduce((k,H,fa)=>k+H+(fa<d.length?d[fa]:""),
""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,FA=df(da(22)),GA=df(da(22)),Kx={},xk={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},HA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},UE=["enter","leave"],VE=["gotpointercapture","lostpointercapture"],
IA=class{constructor(a,d,k){this.ctrl=a;this.args=d;this.key=k;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:k,args:H}=this;d[k]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=H;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,k=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=k.from?Og(k.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:k,shared:H}=this;d.args=this.args;var fa=0;if(a){d.event=a;k.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;H.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;H.locked=!!document.pointerLockElement;fa=Object;var la=fa.assign,sa={};"buttons"in a&&(sa.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:Dc,altKey:Ic,metaKey:od,ctrlKey:Cd}=a;Object.assign(sa,{shiftKey:Dc,altKey:Ic,metaKey:od,ctrlKey:Cd})}la.call(fa,H,sa);H.down=H.pressed=1===H.buttons%2||0<H.touches;fa=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(la=d._delta.map(Math.abs),xk.addTo(d._distance,la));this.axisIntent&&
this.axisIntent(a);const [Ha,Ta]=d._movement,[Xa,eb]=k.threshold,{_step:ib,values:Bb}=d;k.hasCustomTransform?(!1===ib[0]&&(ib[0]=Math.abs(Ha)>=Xa&&Bb[0]),!1===ib[1]&&(ib[1]=Math.abs(Ta)>=eb&&Bb[1])):(!1===ib[0]&&(ib[0]=Math.abs(Ha)>=Xa&&Math.sign(Ha)*Xa),!1===ib[1]&&(ib[1]=Math.abs(Ta)>=eb&&Math.sign(Ta)*eb));d.intentional=!1!==ib[0]||!1!==ib[1];if(d.intentional){la=[0,0];if(k.hasCustomTransform){const [Dc,Ic]=Bb;la[0]=!1!==ib[0]?Dc-ib[0]:0;la[1]=!1!==ib[1]?Ic-ib[1]:0}else la[0]=!1!==ib[0]?Ha-ib[0]:
0,la[1]=!1!==ib[1]?Ta-ib[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(la);sa=d.offset;var Mb=d._active&&!d._blocked||d.active;Mb&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=H[this.ingKey]=d._active,a&&(d.first&&("bounds"in k&&(d._bounds=Og(k.bounds,d)),this.setup&&this.setup()),d.movement=la,this.computeOffset()));var [Fb,$b]=d.offset,[[nc,Sb],[gc,bc]]=d._bounds;d.overflow=[Fb<nc?-1:Fb>Sb?1:0,$b<gc?-1:$b>bc?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?
d._movement[0]:d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=Ci(d._bounds,d.offset,d._active?k.rubberband||[0,0]:[0,0]);d.delta=xk.sub(d.offset,sa);this.computeMovement();Mb&&(!d.last||32<fa)&&(d.delta=xk.sub(d.offset,sa),a=d.delta.map(Math.abs),xk.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<fa&&(d.velocity=[a[0]/fa,a[1]/fa]))}}emit(){const a=this.state;var d=
this.shared;const k=this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||k.triggerAllEvents)d=this.handler(Sg(Sg(Sg({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Lu=class extends IA{constructor(...a){super(...a);Ki(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=xk.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=xk.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,k=this.config;!d.axis&&a&&(a="object"===typeof k.axisThreshold?k.axisThreshold[th(a)]:k.axisThreshold,d.axis=Kl(d._movement,a));d._blocked=(k.lockDirection||!!k.axis)&&!d.axis||!!k.axis&&k.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},WE=a=>a,JA={enabled(a=!0){return a},
eventOptions(a,d,k){return Sg(Sg({},k.shared.eventOptions),a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return xk.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return xk.toVector(a)},transform(a,d,k){a=a||k.shared.transform;this.hasCustomTransform=!!a;return a||WE},threshold(a){return xk.toVector(a,0)}},Js=Sg(Sg({},JA),{},{axis(a,d,{axis:k}){this.lockDirection="lock"===k;if(!this.lockDirection)return k},
axisThreshold(a=0){return a},bounds(a={}){if("function"===typeof a)return la=>Js.bounds(a(la));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:k=Infinity,top:H=-Infinity,bottom:fa=Infinity}=a;return[[d,k],[H,fa]]}}),KA={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},XE=class extends Lu{constructor(...a){super(...a);Ki(this,"ingKey","dragging")}reset(){super.reset();
const a=this.state;a._pointerId=void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),k=a.currentTarget.getBoundingClientRect();a._bounds=Js.bounds({left:d.left-k.left+a.offset[0],right:d.right-k.right+a.offset[0],top:d.top-k.top+a.offset[1],bottom:d.bottom-k.bottom+a.offset[1]})}}cancel(){const a=
this.state;a.canceled||(a.canceled=!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,k=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var H=this.ctrl.setEventIds(a);
d.pointerCapture&&a.target.setPointerCapture(a.pointerId);H&&1<H.size&&k._pointerActive||(this.start(a),this.setupPointer(a),k._pointerId=um(a),k._pointerActive=!0,this.computeValues(mk(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==th(a)?(k._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);
this.emit()}pointerMove(a){const d=this.state,k=this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var H=um(a);if(void 0===d._pointerId||H===d._pointerId)H=mk(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=xk.sub(H,d._values),this.computeValues(H)),xk.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):k.preventScrollAxis&&!d._preventScroll?
d.axis&&(d.axis===k.preventScrollAxis||"xy"===k.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(sa){}const d=this.state,k=this.config;if(d._active&&d._pointerActive){var H=um(a);if(void 0===d._pointerId||H===d._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(a);var [fa,la]=d._distance;d.tap=fa<=k.tapsThreshold&&la<=k.tapsThreshold;if(d.tap&&k.filterTaps)d._force=!0;else{const [sa,Ha]=d.direction,[Ta,Xa]=d.velocity,[eb,ib]=d.movement,[Bb,Mb]=k.swipe.velocity,[Fb,$b]=k.swipe.distance;d.elapsedTime<k.swipe.duration&&(Math.abs(Ta)>Bb&&Math.abs(eb)>Fb&&(d.swipe[0]=sa),Math.abs(Xa)>Mb&&Math.abs(ib)>$b&&(d.swipe[1]=Ha))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,
k=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,k,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,k,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,k,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&
a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=KA[a.key];if(d){const k=this.state,H=a.shiftKey?10:a.altKey?.1:1;this.start(a);k._delta=d(H);k._keyboardActive=!0;xk.addTo(k._movement,k._delta);this.compute(a);this.emit()}}keyUp(a){a.key in KA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Ks="undefined"!==typeof window&&window.document&&window.document.createElement;try{var LA="constructor"in GestureEvent}catch(a){LA=!1}var YE=
LA,Mu=Ks&&"ontouchstart"in window||Ks&&1<window.navigator.maxTouchPoints,MA=Ks&&"ontouchstart"in window||Ks&&1<window.navigator.maxTouchPoints,NA=Ks&&"onpointerdown"in window,ZE=Ks&&"exitPointerLock"in window.document,OA={mouse:0,touch:0,pen:8},$E=Sg(Sg({},Js),{},{device(a,d,{pointer:{touch:k=!1,lock:H=!1,mouse:fa=!1}={}}){this.pointerLock=H&&ZE;return Mu&&k?"touch":this.pointerLock?"mouse":NA&&!fa?"pointer":Mu?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:k}){this.preventScrollDelay="number"===
typeof k?k:k||void 0===k&&a?250:void 0;if(MA&&!1!==k)return a?a:void 0!==k?"y":void 0},pointerCapture(a,d,{pointer:{capture:k=!0,buttons:H=1,keys:fa=!0}={}}){this.pointerButtons=H;this.keys=fa;return!this.pointerLock&&"pointer"===this.device&&k},threshold(a,d,{filterTaps:k=!1,tapsThreshold:H=3,axis:fa}){a=xk.toVector(a,k?H:fa?1:0);this.filterTaps=k;this.tapsThreshold=H;return a},swipe({velocity:a=.5,distance:d=50,duration:k=250}={}){return{velocity:this.transform(xk.toVector(a)),distance:this.transform(xk.toVector(d)),
duration:k}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;default:return a}},axisThreshold(a){return a?Sg(Sg({},OA),a):OA}}),aF=class extends IA{constructor(...a){super(...a);Ki(this,"ingKey","pinching");Ki(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:k}=
this.state;this.state.offset="wheel"===a?xk.add(d,k):[(1+d[0])*k[0],d[1]+k[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,k]=a._movement;if(!a.axis){const H=30*Math.abs(d)-Math.abs(k);0>H?a.axis="angle":0<H&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=
!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);var d=this.state;const k=this.ctrl.touchIds;d._active&&d._touchIds.every(H=>k.has(H))||2>k.size||(this.start(a),d._touchIds=Array.from(k).slice(0,2),d=$i(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,k=d._pointerEvents,H=this.ctrl.pointerIds;d._active&&Array.from(k.keys()).every(fa=>H.has(fa))||
(2>k.size&&k.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=Jl(...Array.from(k.values())),this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=$i(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=Jl(...Array.from(d.values())),this.pinchMove(a,
d))}pinchMove(a,d){const k=this.state,H=d.angle-k._values[1];let fa=0;270<Math.abs(H)&&(fa+=Math.sign(H));this.computeValues([d.distance,d.angle-360*fa]);k.origin=d.origin;k.turns=fa;k._movement=[k._values[0]/k._initial[0]-1,k._values[1]-k._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);
try{a.target.releasePointerCapture(a.pointerId)}catch(k){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,
a.rotation]);d.origin=[a.clientX,a.clientY];var k=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=xk.sub(d._movement,k);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();
const d=this.state;d._delta=[-Li(a)[1]/100*d.offset[0],0];xk.addTo(d._movement,d._delta);kn(d);this.state.origin=[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),
{passive:!1})}},bF=Sg(Sg({},JA),{},{device(a,d,{shared:k,pointer:{touch:H=!1}={}}){if(k.target&&!Mu&&YE)return"gesture";if(Mu&&H)return"touch";if(MA){if(NA)return"pointer";if(Mu)return"touch"}},bounds(a,d,{scaleBounds:k={},angleBounds:H={}}){const fa=sa=>{sa=Og(k,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]},la=sa=>{sa=Og(H,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]};return"function"!==typeof k&&"function"!==typeof H?[fa(),
la()]:sa=>[fa(sa),la(sa)]},threshold(a,d,k){this.lockDirection="lock"===k.axis;return xk.toVector(a,this.lockDirection?[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),cF=class extends Lu{constructor(...a){super(...a);Ki(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(mk(a));
this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=mk(a),k=this.state;k._delta=xk.sub(d,k._values);xk.addTo(k._movement,k._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},dF=Sg(Sg({},Js),{},{mouseOnly:(a=!0)=>a}),eF=class extends Lu{constructor(...a){super(...a);Ki(this,
"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var k,H;const {scrollX:fa,scrollY:la,scrollLeft:sa,scrollTop:Ha}=a.currentTarget;var Ta=[null!==(k=null!==fa&&void 0!==fa?fa:sa)&&void 0!==k?k:0,null!==(H=null!==la&&void 0!==la?la:Ha)&&void 0!==H?H:0];d._delta=xk.sub(Ta,d._values);xk.addTo(d._movement,d._delta);this.computeValues(Ta);
this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll","",this.scroll.bind(this))}},fF=Js,gF=class extends Lu{constructor(...a){super(...a);Ki(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=Li(a);xk.addTo(d._movement,d._delta);kn(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&
(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},hF=Js,iF=class extends Lu{constructor(...a){super(...a);Ki(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(mk(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var k=mk(a);d._movement=d._delta=xk.sub(k,d._values);this.computeValues(k);this.compute(a);
d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},jF=Sg(Sg({},Js),{},{mouseOnly:(a=!0)=>a}),Lx=new Map,Mx=new Map,kF={key:"drag",engine:XE,resolver:$E},lF={key:"hover",engine:iF,resolver:jF},mF={key:"move",engine:cF,resolver:dF},nF={key:"pinch",engine:aF,resolver:bF},oF={key:"scroll",engine:eF,resolver:fF},pF={key:"wheel",engine:gF,resolver:hF},Nx=df(da(22)),qF={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=
!0){return a},window(a=Ks?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},rF=["target","eventOptions","window","enabled","transform"],PA=class{constructor(a,d){Ki(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,k,H,fa){const la=this._listeners,sa=tj(d,k),Ha=Sg(Sg({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),fa);a.addEventListener(sa,H,Ha);const Ta=()=>{a.removeEventListener(sa,
H,Ha);la.delete(Ta)};la.add(Ta);return Ta}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},sF=class{constructor(){Ki(this,"_timeouts",new Map)}add(a,d,k=140,...H){this.remove(a);this._timeouts.set(a,window.setTimeout(d,k,...H))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},tF=class{constructor(a){Ki(this,"gestures",new Set);Ki(this,"_targetEventStore",new PA(this));Ki(this,"gestureEventStores",
{});Ki(this,"gestureTimeoutStores",{});Ki(this,"handlers",{});Ki(this,"config",{});Ki(this,"pointerIds",new Set);Ki(this,"touchIds",new Set);Ki(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&ej(this,"drag");a.wheel&&ej(this,"wheel");a.scroll&&ej(this,"scroll");a.move&&ej(this,"move");a.pinch&&ej(this,"pinch");a.hover&&ej(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(tm(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?
this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=d}applyConfig(a,d){this.config=Wj(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const k={};let H;if(d.target&&
(H=d.target(),!H))return;if(d.enabled){for(const fa of this.gestures){const la=this.config[fa],sa=QA(k,la.eventOptions,!!H);la.enabled&&(new (Lx.get(fa))(this,a,fa)).bind(sa)}d=QA(k,d.eventOptions,!!H);for(const fa in this.nativeHandlers)d(fa,"",la=>this.nativeHandlers[fa](Sg(Sg({},this.state.shared),{},{event:la,args:a})),void 0,!0)}for(const fa in k)k[fa]=Si(...k[fa]);if(!H)return k;for(const fa in k){const {device:la,capture:sa,passive:Ha}=Df(fa);this._targetEventStore.add(H,la,"",k[fa],{capture:sa,
passive:Ha})}}},QA=(a,d,k)=>(H,fa,la,sa={},Ha=!1)=>{var Ta,Xa;const eb=null!==(Ta=sa.capture)&&void 0!==Ta?Ta:d.capture;sa=null!==(Xa=sa.passive)&&void 0!==Xa?Xa:d.passive;H=Ha?H:em(H,fa,eb);k&&sa&&(H+="Passive");a[H]=a[H]||[];a[H].push(la)},uF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,$v=df(da(22)),Ox=df(da(22)),RA=df(da(22)),SA=df(da(22)),vF=df(da(22)),wF=df(da(22)),xF=df(da(22)),yF=df(da(22)),zF={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",
move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>nj('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>nj("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>nj("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>nj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>nj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>nj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>nj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>nj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>nj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>nj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>nj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>nj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>nj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>nj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},AF=df(da(22));df(da(22));var TA=da(22),UA=df(da(22));if(!da(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!og)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var BF=da(31),Nu=df(da(22)),VA="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,CF=1E4,DF=function(a){var d="function"===typeof Symbol&&Symbol.iterator,k=d&&a[d],H=0;if(k)return k.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&
H>=a.length&&(a=void 0);return{value:a&&a[H++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},WA=VA?Xh(VA):ln(),EF=WA.addReactionToTrack,FF=WA.recordReactionAsCommitted,XA=function(a,d){var k="function"===typeof Symbol&&a[Symbol.iterator];if(!k)return a;a=k.call(a);var H,fa=[];try{for(;(void 0===d||0<d--)&&!(H=a.next()).done;)fa.push(H.value)}catch(sa){var la={error:sa}}finally{try{H&&!H.done&&(k=a["return"])&&k.call(a)}finally{if(la)throw la.error;
}}return fa},GF=function(){return function(){}}(),Jt=da(22),YA="function"===typeof Symbol&&Symbol.for,ZA=YA?Symbol.for("react.forward_ref"):"function"===typeof Jt.forwardRef&&(0,Jt.forwardRef)(function(a){return null}).$$typeof,$A=YA?Symbol.for("react.memo"):"function"===typeof Jt.memo&&(0,Jt.memo)(function(a){return null}).$$typeof,HF={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Zj.displayName="Observer";da(22);da(22);da(22);(function(a){a||=zn;Fc({reactionScheduler:a})})(BF.unstable_batchedUpdates);
var IF=df(da(22)),Px=da(586),Bo=IF.forwardRef(function(a,d){var {children:k,opacity:H,centered:fa,className:la=""}=a,sa=rf(a,["children","opacity","centered","className"]);return(0,Px.jsx)(Zj,{children:()=>(0,Px.jsx)("div",{ref:d,className:`tl-positioned-div ${la}`,style:H?{opacity:H}:void 0,draggable:!1,children:(0,Px.jsx)("div",Te(Xd({className:`tl-positioned-inner ${fa?"tl-centered":""}`},sa),{children:k}))})})}),JF=df(da(22)),Qx=da(586),cp=JF.forwardRef(function(a,d){var {id:k,className:H="",
style:fa,children:la}=a,sa=rf(a,["id","className","style","children"]);return(0,Qx.jsx)(Zj,{children:()=>(0,Qx.jsx)("svg",{ref:d,style:fa,className:`tl-positioned-svg ${H}`,children:(0,Qx.jsx)("g",Te(Xd({id:k,className:"tl-centered-g"},sa),{children:la}))})})}),Ou=df(da(22)),aB=df(da(22)),aw=df(da(22)),KF=da(586),Er=Xe(function(a){var {id:d,bounds:k,zIndex:H,rotation:fa=0,className:la="",children:sa}=a;a=rf(a,"id bounds zIndex rotation className children".split(" "));const Ha=aw.useRef(null);aw.useLayoutEffect(()=>
{Ha.current.style.transform=`translate(
        calc(${k.minX}px - var(--tl-padding)),
        calc(${k.minY}px - var(--tl-padding)))
        rotate(${fa+(k.rotation||0)}rad)`},[k.minX,k.minY,fa,k.rotation]);aw.useLayoutEffect(()=>{const Ta=Ha.current;Ta.style.width=`calc(${Math.floor(k.width)}px + (var(--tl-padding) * 2))`;Ta.style.height=`calc(${Math.floor(k.height)}px + (var(--tl-padding) * 2))`},[k.width,k.height]);aw.useLayoutEffect(()=>{const Ta=Ha.current;void 0!==H&&(Ta.style.zIndex=H.toString())},[H]);return(0,KF.jsx)("div",Te(Xd({id:d,ref:Ha,className:`tl-positioned ${la}`,"aria-label":"container"},a),{children:sa}))}),
LF=df(da(22)),bB=da(586),MF=Xe(function({shapes:a,hidden:d,bounds:k,rotation:H=0}){const {components:{ContextBar:fa},viewport:{bounds:la,camera:{point:[sa,Ha],zoom:Ta}}}=Oe(),Xa=LF.useRef(null);var eb=ff.getRotatedBounds(k,H);eb=ff.multiplyBounds(eb,Ta);Ik(Xa,k,H,10005);if(!fa)throw Error("Expected a ContextBar component.");const ib=ff.translateBounds(eb,[sa*Ta,Ha*Ta]);return(0,bB.jsx)("div",{ref:Xa,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,bB.jsx)(fa,{hidden:d,shapes:a,bounds:k,offsets:{left:ib.minX,right:la.width-ib.maxX,top:ib.minY,bottom:la.height-ib.maxY,width:ib.width,height:ib.height},scaledBounds:eb,rotation:H})})}),cB=df(da(22)),NF=da(586),dB=Xe(function({children:a}){const d=cB.useRef(null),{viewport:k}=Oe(),H=d.current,{zoom:fa,point:la}=k.camera;cB.useEffect(()=>{H&&(H.style.transform=`scale(${fa}) translate3d(${la[0]}px, ${la[1]}px, 0)`)},[fa,la,H]);return(0,NF.jsx)("div",{ref:d,className:"tl-absolute tl-layer",
children:a})}),bw=da(586),eB=Xe(function({shape:a,isHovered:d=!1,isSelected:k=!1,isBinding:H=!1,isEditing:fa=!1,isLocked:la=!1,meta:sa}){const {bounds:Ha,props:{scale:Ta,rotation:Xa=0},ReactIndicator:eb}=a;return(0,bw.jsx)(Er,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:Ha,rotation:Xa,scale:Ta,zIndex:fa?1E3:1E4,children:(0,bw.jsx)(cp,{children:(0,bw.jsx)("g",{className:`tl-indicator-container ${k?"tl-selected":"tl-hovered"} ${la?"tl-locked":""}`,children:(0,bw.jsx)(eb,{isEditing:fa,
isBinding:H,isHovered:d,isLocked:la,isSelected:k,isErasing:!1,meta:sa})})})})}),fB=df(da(22)),cw=da(586),OF=Xe(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:k}},components:{QuickLinks:H}}=Oe();var fa=Yf();const la=yl(d);if(!H)throw Error("Expected a QuickLinks component.");fa=50>a.height*k||!fa.selectedShapesArray.includes(d);return(0,cw.jsx)(Er,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,cw.jsx)(Bo,{children:(0,cw.jsx)("span",Te(Xd({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},la),{onPointerDown:sa=>sa.stopPropagation(),children:(0,cw.jsx)(H,{className:"tl-backlinks-count "+(fa?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})}),dw=da(586),PF=Xe(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:k}},components:{BacklinksCount:H}}=Oe();var fa=Yf();if(!H)throw Error("Expected a BacklinksCount component.");const la=sa=>sa.stopPropagation();
fa=50>a.height*k||!fa.selectedShapesArray.includes(d)||d.hideSelection;return(0,dw.jsx)(Er,{bounds:a,className:"tl-backlinks-count-container",children:(0,dw.jsx)(Bo,{children:(0,dw.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:la,onWheelCapture:la,onKeyDown:la,title:"Shape Backlinks",children:(0,dw.jsx)(H,{className:"tl-backlinks-count "+(fa?"tl-backlinks-count-rounded":""),id:d.id,
shape:d})})})})}),QF=df(da(22)),gB=da(586),RF=Xe(function({bounds:a,hidden:d,shapes:k,rotation:H=0,detail:fa="size"}){const {components:{SelectionDetail:la},viewport:{camera:{zoom:sa}}}=Oe(),Ha=QF.useRef(null),Ta=ff.multiplyBounds(a,sa);Ik(Ha,a,H,10003);if(!la)throw Error("Expected a SelectionDetail component.");return(0,gB.jsx)("div",{ref:Ha,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,gB.jsx)(la,
{shapes:k,bounds:a,scaledBounds:Ta,zoom:sa,rotation:H,detail:fa})})}),hB=da(586),SF=Xe(function({shape:a,isHovered:d=!1,isSelected:k=!1,isBinding:H=!1,isErasing:fa=!1,isEditing:la=!1,onEditingEnd:sa,asset:Ha,meta:Ta,zIndex:Xa}){const {bounds:eb,props:{rotation:ib,scale:Bb},ReactComponent:Mb}=a,Fb=Yf(),$b=yl(a);var nc=Fb.getParentGroup(a);nc=Fb.selectedIds.has(null==nc?void 0:nc.id);return(0,hB.jsx)(Er,{"data-shape-id":a.id,"data-html2canvas-ignore":!k&&!nc&&0!==Fb.selectedShapes.size||null,zIndex:Xa,
"data-type":"Shape",bounds:eb,rotation:ib,scale:Bb,children:(0,hB.jsx)(Mb,{meta:Ta,isEditing:la,isBinding:H,isHovered:d,isSelected:k,isErasing:fa,events:$b,asset:Ha,onEditingEnd:sa})})}),Kt=da(586),iB=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],TF=Xe(function({size:a}){const {viewport:{camera:{point:d,zoom:k}}}=Oe();return(0,Kt.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,Kt.jsx)("defs",{children:iB.map(([H,fa,
la],sa)=>{la=la*a*k;var Ha=d[0]*k,Ta=d[1]*k;Ha=0<Ha?Ha%la:la+Ha%la;Ta=0<Ta?Ta%la:la+Ta%la;H=jk(k,[H,fa],[0,1]);return(0,Kt.jsx)("pattern",{id:`grid-${sa}`,width:la,height:la,patternUnits:"userSpaceOnUse",children:!(2<H||.1>H)&&(0,Kt.jsx)("circle",{className:"tl-grid-dot",cx:Ha,cy:Ta,r:1.5,opacity:Math.max(0,Math.min(H,1))})},`grid-pattern-${sa}`)})}),iB.map((H,fa)=>(0,Kt.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${fa})`},`grid-rect-${fa}`))]})}),jB=Xe(function({size:a}){return(0,Kt.jsx)(TF,
{size:a})}),kB=da(586),lB=Xe(function({bounds:a}){const d=el("background");return(0,kB.jsx)(cp,Te(Xd({"data-html2canvas-ignore":"true"},d),{children:(0,kB.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});da(22);var mB=da(586),nB=Xe(function({scaledBounds:a,shapes:d,detail:k="size",rotation:H=0}){var fa;const la=1===d.length?H:null!=(fa=a.rotation)?fa:0;return(0,mB.jsx)(Bo,{centered:!0,children:(0,mB.jsx)("div",{className:"tl-bounds-detail",
style:{transform:la<Bn||la>3*Bn?`rotate(${la}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+la}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${Rd.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===k?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${am.radiansToDegrees(am.clampRadians(H)).toFixed()}\xB0`})})}),Rx=da(586),UF={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},ew=Xe(function({cx:a,cy:d,size:k,targetSize:H,corner:fa,isHidden:la}){const sa=el(fa);return(0,Rx.jsxs)("g",Te(Xd({opacity:la?0:1},sa),{children:[(0,Rx.jsx)("rect",{className:"tl-transparent "+(la?"":UF[fa]),"aria-label":`${fa} target`,x:a-1.25*H,y:d-1.25*H,width:2.5*H,height:2.5*H,pointerEvents:la?"none":"all"}),(0,Rx.jsx)("rect",{className:"tl-corner-handle","aria-label":`${fa} handle`,x:a-k/2,y:d-k/2,width:k,height:k,pointerEvents:"none"})]}))}),
VF=da(586),WF={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},fw=Xe(function({x:a,y:d,width:k,height:H,targetSize:fa,edge:la,disabled:sa,isHidden:Ha}){const Ta=el(la);return(0,VF.jsx)("rect",Xd({pointerEvents:Ha||sa?"none":"all",className:"tl-transparent tl-edge-handle "+(Ha?"":WF[la]),"aria-label":`${la} target`,opacity:Ha?0:1,x:a-fa,y:d-fa,width:Math.max(1,k+2*fa),height:Math.max(1,H+2*fa)},Ta))}),Sx=da(586);Xe(function({cx:a,cy:d,size:k,targetSize:H,
isHidden:fa}){const la=el("rotate");return(0,Sx.jsxs)("g",Te(Xd({opacity:fa?0:1},la),{children:[(0,Sx.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:H,pointerEvents:fa?"none":"all"}),(0,Sx.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:k/2,pointerEvents:"none"})]}))});da(22);var oB=da(586),gw=Xe(function({cx:a,cy:d,targetSize:k,corner:H,isHidden:fa}){const la=el(H);return(0,oB.jsx)("g",Te(Xd({opacity:fa?0:1},la),{children:(0,oB.jsx)("rect",
{className:"tl-transparent","aria-label":`${H} target`,x:a-2.5*k,y:d-2.5*k,width:3*k,height:3*k,pointerEvents:fa?"none":"all"})}))}),Cm=da(586),pB=Xe(function({bounds:a,showResizeHandles:d,showRotateHandles:k,shapes:H}){var fa,la;const sa=Yf();let {width:Ha,height:Ta}=a;var Xa=sa.viewport.camera.zoom;a=8/Xa;Xa=6/Xa;const eb=1===H.length?H[0].canResize:[!0,!0],ib=null!=(la=null==(fa=sa.editingShape)?void 0:fa.props.borderRadius)?la:0;return(0,Cm.jsx)(Cm.Fragment,{children:0<H.length&&(0,Cm.jsxs)(cp,
{children:[!sa.editingShape&&(0,Cm.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ha,1),height:Math.max(Ta,1),rx:ib,ry:ib,pointerEvents:"none"}),(0,Cm.jsx)(fw,{x:2*Xa,y:0,width:Ha-4*Xa,height:0,targetSize:Xa,edge:"top_edge",disabled:!eb[1],isHidden:!d}),(0,Cm.jsx)(fw,{x:Ha,y:2*Xa,width:0,height:Ta-4*Xa,targetSize:Xa,edge:"right_edge",disabled:!eb[0],isHidden:!d}),(0,Cm.jsx)(fw,{x:2*Xa,y:Ta,width:Ha-4*Xa,height:0,targetSize:Xa,edge:"bottom_edge",disabled:!eb[1],isHidden:!d}),(0,Cm.jsx)(fw,{x:0,
y:2*Xa,width:0,height:Ta-4*Xa,targetSize:Xa,edge:"left_edge",disabled:!eb[0],isHidden:!d}),(0,Cm.jsx)(gw,{cx:0,cy:0,targetSize:Xa,corner:"top_left_resize_corner",isHidden:!k}),(0,Cm.jsx)(gw,{cx:Ha+2*Xa,cy:0,targetSize:Xa,corner:"top_right_resize_corner",isHidden:!k}),(0,Cm.jsx)(gw,{cx:Ha+2*Xa,cy:Ta+2*Xa,targetSize:Xa,corner:"bottom_right_resize_corner",isHidden:!k}),(0,Cm.jsx)(gw,{cx:0,cy:Ta+2*Xa,targetSize:Xa,corner:"bottom_left_resize_corner",isHidden:!k}),(null==eb?void 0:eb.every(Bb=>Bb))&&(0,Cm.jsxs)(Cm.Fragment,
{children:[(0,Cm.jsx)(ew,{cx:0,cy:0,size:a,targetSize:Xa,corner:"top_left_corner",isHidden:!d}),(0,Cm.jsx)(ew,{cx:Ha,cy:0,size:a,targetSize:Xa,corner:"top_right_corner",isHidden:!d}),(0,Cm.jsx)(ew,{cx:Ha,cy:Ta,size:a,targetSize:Xa,corner:"bottom_right_corner",isHidden:!d}),(0,Cm.jsx)(ew,{cx:0,cy:Ta,size:a,targetSize:Xa,corner:"bottom_left_corner",isHidden:!d})]})]})})}),Tx=da(586),qB=Xe(function({bounds:a}){return(0,Tx.jsx)(Er,{bounds:a,zIndex:10001,children:(0,Tx.jsx)(cp,{children:(0,Tx.jsx)("rect",
{className:"tl-brush",x:0,y:0,width:a.width,height:a.height})})})}),rB=da(586);Xe(function(){return(0,rB.jsx)(rB.Fragment,{})});var Ux=da(586),sB=Xe(function({shape:a,handle:d,id:k}){a=tp(a,k);const [H,fa]=d.point;return(0,Ux.jsxs)("g",Te(Xd({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${H}, ${fa})`,children:[(0,Ux.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,Ux.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),tB=
df(da(22)),Vx=da(586),Wx=Xe(function({direction:a}){const {viewport:{bounds:d}}=Oe(),k=tB.useRef(null);tB.useLayoutEffect(()=>{const H=k.current;if(H){var fa=[d.width/2,d.height/2],la=ff.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[sa,Ha]]of la)la=u(fa,a,sa,Ha),la.didIntersect&&(la=la.points[0],H.style.transform=`translate(${la[0]-6}px,${la[1]-6}px) rotate(${Rd.toAngle(a)}rad)`)}},[a,d]);return(0,Vx.jsx)("div",{ref:k,className:"tl-direction-indicator","data-html2canvas-ignore":"true",
children:(0,Vx.jsx)("svg",{height:12,width:12,children:(0,Vx.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),yk=da(586),XF=Xe(function({id:a,className:d,brush:k,shapes:H,assets:fa,bindingShapes:la,editingShape:sa,hoveredShape:Ha,hoveredGroup:Ta,selectionBounds:Xa,selectedShapes:eb,erasingShapes:ib,selectionDirectionHint:Bb,cursor:Mb="default",cursorRotation:Fb=0,selectionRotation:$b=0,showSelection:nc=!0,showHandles:Sb=!0,showSelectionRotation:gc=!1,showResizeHandles:bc=!0,showRotateHandles:Dc=!0,
showSelectionDetail:Ic=!0,showContextBar:od=!0,showGrid:Cd=!0,gridSize:Ge=8,onEditingEnd:Yd=QE,theme:ve=Iq,children:lf}){var Ce;const He=Ou.useRef(null),{viewport:Gd,components:cd,meta:Hd}=Oe(),ad=Yf(),ud=Ou.useCallback(mf=>{ad.inputs.updateContainerOffset([mf.minX,mf.minY])},[]);lk(ve,a);yn(He);Ok(He,Gd,ud);fj(He);Ll();vm(He,Mb,Fb);pk(He);An(He);a=kg();const ye=(Mb=1===(null==eb?void 0:eb.length)&&eb[0])&&"handles"in Mb.props?null==eb?void 0:eb[0]:void 0,Ve=Ou.useMemo(()=>new Set(eb||[]),[eb]),zf=
Ou.useMemo(()=>new Set(ib||[]),[ib]);Mb=1===(null==eb?void 0:eb.length)?eb[0]:void 0;Ta=[...(new Set([Ta,Ha]))].filter(dg);return(0,yk.jsxs)("div",{ref:He,className:`tl-container ${null!=d?d:""}`,children:[(0,yk.jsxs)("div",Te(Xd({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[Cd&&cd.Grid&&(0,yk.jsx)(cd.Grid,{size:Ge}),(0,yk.jsxs)(dB,{children:[cd.SelectionBackground&&eb&&Xa&&nc&&(0,yk.jsx)(Er,{"data-type":"SelectionBackground",bounds:Xa,zIndex:2,"data-html2canvas-ignore":"true",children:(0,yk.jsx)(cd.SelectionBackground,
{shapes:eb,bounds:Xa,showResizeHandles:bc,showRotateHandles:Dc})}),H&&H.map((mf,Nf)=>(0,yk.jsx)(SF,{shape:mf,asset:fa&&mf.props.assetId?fa[mf.props.assetId]:void 0,isEditing:mf===sa,isHovered:mf===Ha,isBinding:null==la?void 0:la.includes(mf),isSelected:Ve.has(mf),isErasing:zf.has(mf),meta:Hd,zIndex:1E3+Nf,onEditingEnd:Yd},"shape_"+mf.id)),!ad.isIn("select.pinching")&&(null==eb?void 0:eb.map(mf=>(0,yk.jsx)(eB,{shape:mf,isEditing:mf===sa,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:mf.props.isLocked},
"selected_indicator_"+mf.id))),Ta.map(mf=>mf!==sa&&(0,yk.jsx)(eB,{shape:mf},"hovered_indicator_"+mf.id)),Mb&&cd.BacklinksCount&&(0,yk.jsx)(PF,{hidden:!1,bounds:Mb.bounds,shape:Mb}),Ha&&Ha!==Mb&&cd.QuickLinks&&(0,yk.jsx)(OF,{hidden:!1,bounds:Ha.bounds,shape:Ha}),k&&cd.Brush&&(0,yk.jsx)(cd.Brush,{bounds:k}),eb&&Xa&&(0,yk.jsxs)(yk.Fragment,{children:[nc&&cd.SelectionForeground&&(0,yk.jsx)(Er,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:Xa,zIndex:sa&&eb.includes(sa)?1002:
10002,children:(0,yk.jsx)(cd.SelectionForeground,{shapes:eb.filter(mf=>!mf.props.isLocked),bounds:Xa,showResizeHandles:bc,showRotateHandles:Dc})}),Sb&&ye&&cd.Handle&&(0,yk.jsx)(Er,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:Xa,zIndex:10003,children:(0,yk.jsx)(cp,{children:Object.entries(null!=(Ce=ye.props.handles)?Ce:{}).map(([mf,Nf])=>Ou.createElement(cd.Handle,{key:`${Nf.id}_handle_${Nf.id}`,shape:ye,handle:Nf,id:mf}))})}),eb&&cd.SelectionDetail&&(0,yk.jsx)(RF,
{"data-html2canvas-ignore":"true",shapes:eb,bounds:Xa,detail:gc?"rotation":"size",hidden:!Ic,rotation:$b},"detail"+eb.map(mf=>mf.id).join(""))]})]}),Bb&&Xa&&eb&&(0,yk.jsx)(Wx,{direction:Bb,bounds:Xa,shapes:eb}),(0,yk.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,yk.jsx)(dB,{children:eb&&Xa&&(0,yk.jsx)(yk.Fragment,{children:eb&&cd.ContextBar&&(0,yk.jsx)(MF,{shapes:eb.filter(mf=>!mf.props.isLocked),hidden:!od,bounds:Mb?Mb.bounds:Xa,rotation:Mb?Mb.props.rotation:
0},"context"+eb.map(mf=>mf.id).join(""))})}),lf]})}),uB=df(da(22)),vB=df(da(22)),wB=da(586);Xe(function({children:a}){const d=vB.useRef(null),{viewport:k}=Oe();vB.useEffect(()=>xd(()=>{const H=d.current;if(H){var {zoom:fa,point:la}=k.camera;H.style.transform=`scale(${fa}) translateX(${la[0]}px) translateY(${la[1]}px)`}}),[]);return(0,wB.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,wB.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});var YF=da(586),ZF=Xe(function(a){const d=
Wn(a),k=Pk(a.id);nk(d,a);So(d,a);return(0,YF.jsx)(k.Provider,{value:d,children:a.children})}),$F=da(586),aG=Xe(function({id:a="noid",viewport:d,inputs:k,callbacks:H=Iq,meta:fa=Iq,components:la=Iq,children:sa}){const [Ha,Ta]=uB.useState(()=>{const {Brush:eb,ContextBar:ib,DirectionIndicator:Bb,Grid:Mb,Handle:Fb,SelectionBackground:$b,SelectionDetail:nc,SelectionForeground:Sb}=la,gc=rf(la,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));
return{id:a,viewport:d,inputs:k,callbacks:H,meta:fa,components:Te(Xd({},gc),{Brush:null===eb?void 0:qB,ContextBar:ib,DirectionIndicator:null===Bb?void 0:Wx,Grid:null===Mb?void 0:jB,Handle:null===Fb?void 0:sB,SelectionBackground:null===$b?void 0:lB,SelectionDetail:null===nc?void 0:nB,SelectionForeground:null===Sb?void 0:pB})}});uB.useLayoutEffect(()=>{const {Brush:eb,ContextBar:ib,DirectionIndicator:Bb,Grid:Mb,Handle:Fb,SelectionBackground:$b,SelectionDetail:nc,SelectionForeground:Sb}=la,gc=rf(la,
"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return xd(()=>{Ta({id:a,viewport:d,inputs:k,callbacks:H,meta:fa,components:Te(Xd({},gc),{Brush:null===eb?void 0:qB,ContextBar:ib,DirectionIndicator:null===Bb?void 0:Wx,Grid:null===Mb?void 0:jB,Handle:null===Fb?void 0:sB,SelectionBackground:null===$b?void 0:lB,SelectionDetail:null===nc?void 0:nB,SelectionForeground:null===Sb?void 0:pB})})})},[]);const Xa=rm(a);return(0,$F.jsx)(Xa.Provider,
{value:Ha,children:sa})}),xB=da(586),bG=da(586),cG=Xe(function(a){const d=Yf();return(0,bG.jsx)(Ol,Xd({viewport:d.viewport,inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,
showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},a))});da(586);var Lt=df(da(22)),Ls=df(da(22)),dG=da(586),eG="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),
kh=a=>{var {name:d,className:k}=a;a=rf(a,["name","className"]);const H=eG.includes(d)?"tie tie-":"ti ti-";return(0,dG.jsx)("i",Xd({className:[H+d,k].join(" ")},a))},$g=da(22),fG=da(22),Ms=da(22),Zn=da(22),Xx=da(22),gG=da(31),Vm=da(22),kq=(0,Vm.forwardRef)((a,d)=>{var {children:k}=a;a=rf(a,["children"]);const H=Vm.Children.toArray(k),fa=H.find(qg);if(fa){const la=fa.props.children;k=H.map(sa=>sa===fa?1<Vm.Children.count(la)?Vm.Children.only(null):(0,Vm.isValidElement)(la)?la.props.children:null:sa);
return(0,Vm.createElement)(Yx,Pe({},a,{ref:d}),(0,Vm.isValidElement)(la)?(0,Vm.cloneElement)(la,void 0,k):null)}return(0,Vm.createElement)(Yx,Pe({},a,{ref:d}),k)});kq.displayName="Slot";var Yx=(0,Vm.forwardRef)((a,d)=>{const {children:k}=a;a=rf(a,["children"]);return(0,Vm.isValidElement)(k)?(0,Vm.cloneElement)(k,Te(Xd({},hl(a,k.props)),{ref:Eg(d,k.ref)})):1<Vm.Children.count(k)?Vm.Children.only(null):null});Yx.displayName="SlotClone";var yB=({children:a})=>(0,Vm.createElement)(Vm.Fragment,null,a),
Lk="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const k=(0,Xx.forwardRef)((H,fa)=>{var {asChild:la}=H;H=rf(H,["asChild"]);la=la?kq:d;(0,Xx.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Xx.createElement)(la,Pe({},H,{ref:fa}))});k.displayName=`Primitive.${d}`;return Te(Xd({},a),{[d]:k})},{}),Zx=da(22),hG=da(22),zB,iG=(0,Zn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$x=(0,Zn.forwardRef)((a,d)=>
{var k;const {disableOutsidePointerEvents:H=!1,onEscapeKeyDown:fa,onPointerDownOutside:la,onFocusOutside:sa,onInteractOutside:Ha,onDismiss:Ta}=a,Xa=rf(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),eb=(0,Zn.useContext)(iG),[ib,Bb]=(0,Zn.useState)(null),Mb=null!==(k=null===ib||void 0===ib?void 0:ib.ownerDocument)&&void 0!==k?k:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Fb]=(0,Zn.useState)({});d=Tg(d,
bc=>Bb(bc));k=Array.from(eb.layers);var [$b]=[...eb.layersWithOutsidePointerEventsDisabled].slice(-1);$b=k.indexOf($b);const nc=ib?k.indexOf(ib):-1;k=0<eb.layersWithOutsidePointerEventsDisabled.size;const Sb=nc>=$b;$b=mj(bc=>{const Dc=bc.target,Ic=[...eb.branches].some(od=>od.contains(Dc));Sb&&!Ic&&(null===la||void 0===la||la(bc),null===Ha||void 0===Ha||Ha(bc),bc.defaultPrevented||null===Ta||void 0===Ta||Ta())},Mb);const gc=Vj(bc=>{const Dc=bc.target;[...eb.branches].some(Ic=>Ic.contains(Dc))||(null===
sa||void 0===sa||sa(bc),null===Ha||void 0===Ha||Ha(bc),bc.defaultPrevented||null===Ta||void 0===Ta||Ta())},Mb);Jk(bc=>{nc===eb.layers.size-1&&(null===fa||void 0===fa||fa(bc),!bc.defaultPrevented&&Ta&&(bc.preventDefault(),Ta()))},Mb);(0,Zn.useEffect)(()=>{if(ib)return H&&(0===eb.layersWithOutsidePointerEventsDisabled.size&&(zB=Mb.body.style.pointerEvents,Mb.body.style.pointerEvents="none"),eb.layersWithOutsidePointerEventsDisabled.add(ib)),eb.layers.add(ib),Jj(),()=>{H&&1===eb.layersWithOutsidePointerEventsDisabled.size&&
(Mb.body.style.pointerEvents=zB)}},[ib,Mb,H,eb]);(0,Zn.useEffect)(()=>()=>{ib&&(eb.layers.delete(ib),eb.layersWithOutsidePointerEventsDisabled.delete(ib),Jj())},[ib,eb]);(0,Zn.useEffect)(()=>{const bc=()=>Fb({});document.addEventListener("dismissableLayer.update",bc);return()=>document.removeEventListener("dismissableLayer.update",bc)},[]);return(0,Zn.createElement)(Lk.div,Pe({},Xa,{ref:d,style:Xd({pointerEvents:k?Sb?"auto":"none":void 0},a.style),onFocusCapture:Jf(a.onFocusCapture,gc.onFocusCapture),
onBlurCapture:Jf(a.onBlurCapture,gc.onBlurCapture),onPointerDownCapture:Jf(a.onPointerDownCapture,$b.onPointerDownCapture)}))}),AB=df(da(22)),jG=da(22),Dm=(null===globalThis||void 0===globalThis?0:globalThis.document)?jG.useLayoutEffect:()=>{},kG=AB["useId".toString()]||(()=>{}),lG=0,Ul=da(22),mG=(a,d,k)=>Mh(void 0,null,function*(){const {placement:H="bottom",strategy:fa="absolute",middleware:la=[],platform:sa}=k,Ha=yield null==sa.isRTL?void 0:sa.isRTL(d);let Ta=yield sa.getElementRects({reference:a,
floating:d,strategy:fa}),{x:Xa,y:eb}=aj(Ta,H,Ha),ib=H,Bb={},Mb=0;for(let Fb=0;Fb<la.length;Fb++){const {name:$b,fn:nc}=la[Fb],{x:Sb,y:gc,data:bc,reset:Dc}=yield nc({x:Xa,y:eb,initialPlacement:H,placement:ib,strategy:fa,middlewareData:Bb,rects:Ta,platform:sa,elements:{reference:a,floating:d}});Xa=null!=Sb?Sb:Xa;eb=null!=gc?gc:eb;Bb=Te(Xd({},Bb),{[$b]:Xd(Xd({},Bb[$b]),bc)});Dc&&50>=Mb&&(Mb++,"object"==typeof Dc&&(Dc.placement&&(ib=Dc.placement),Dc.rects&&(Ta=!0===Dc.rects?yield sa.getElementRects({reference:a,
floating:d,strategy:fa}):Dc.rects),{x:Xa,y:eb}=aj(Ta,ib,Ha)),Fb=-1)}return{x:Xa,y:eb,placement:ib,strategy:fa,middlewareData:Bb}}),ay=Math.min,Pq=Math.max,BB=a=>({name:"arrow",options:a,fn(d){return Mh(this,null,function*(){const {element:k,padding:H=0}=null!=a?a:{},{x:fa,y:la,placement:sa,rects:Ha,platform:Ta}=d;if(null==k)return{};const Xa=xm(H),eb={x:fa,y:la},ib=fl(sa),Bb=sa.split("-")[1],Mb=Kk(ib);var Fb=yield Ta.getDimensions(k);const $b="y"===ib?"top":"left",nc="y"===ib?"bottom":"right";var Sb=
Ha.reference[Mb]+Ha.reference[ib]-eb[ib]-Ha.floating[Mb];const gc=eb[ib]-Ha.reference[ib];var bc=yield null==Ta.getOffsetParent?void 0:Ta.getOffsetParent(k);let Dc=bc?"y"===ib?bc.clientHeight||0:bc.clientWidth||0:0;0===Dc&&(Dc=Ha.floating[Mb]);bc=Xa[$b];const Ic=Dc-Fb[Mb]-Xa[nc];Fb=Dc/2-Fb[Mb]/2+(Sb/2-gc/2);Sb=Pq(bc,ay(Fb,Ic));return{[ib]:eb[ib]-(0<("start"===Bb?Xa[$b]:Xa[nc])&&Fb!==Sb&&Ha.reference[Mb]<=Ha.floating[Mb]?Fb<bc?bc-Fb:Ic-Fb:0),data:{[ib]:Sb,centerOffset:Fb-Sb}}})}}),nG={left:"right",
right:"left",bottom:"top",top:"bottom"},oG={start:"end",end:"start"},CB=["top","right","bottom","left"];CB.reduce((a,d)=>a.concat(d,d+"-start",d+"-end"),[]);var DB=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return Mh(this,null,function*(){var k;const {placement:H,middlewareData:fa,rects:la,initialPlacement:sa,platform:Ha,elements:Ta}=d;var Xa=a;const {mainAxis:eb=!0,crossAxis:ib=!0,fallbackPlacements:Bb,fallbackStrategy:Mb="bestFit",flipAlignment:Fb=!0}=Xa;Xa=rf(Xa,["mainAxis",
"crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const $b=Ei(H);var nc=Bb||($b!==sa&&Fb?function(od){const Cd=Om(od);return[Cn(od),Cd,Cn(Cd)]}(sa):[Om(sa)]);nc=[sa,...nc];const Sb=yield Hk(d,Xa),gc=[];Xa=(null==(k=fa.flip)?void 0:k.overflows)||[];if(eb&&gc.push(Sb[$b]),ib){const {main:od,cross:Cd}=Pl(H,la,yield null==Ha.isRTL?void 0:Ha.isRTL(Ta.floating));gc.push(Sb[od],Sb[Cd])}if(Xa=[...Xa,{placement:H,overflows:gc}],!gc.every(od=>0>=od)){var bc,Dc;k=(null!=(bc=null==(Dc=fa.flip)?
void 0:Dc.index)?bc:0)+1;if(bc=nc[k])return{data:{index:k,overflows:Xa},reset:{placement:bc}};bc="bottom";switch(Mb){case "bestFit":var Ic;(Dc=null==(Ic=Xa.map(od=>[od,od.overflows.filter(Cd=>0<Cd).reduce((Cd,Ge)=>Cd+Ge,0)]).sort((od,Cd)=>od[1]-Cd[1])[0])?void 0:Ic[0].placement)&&(bc=Dc);break;case "initialPlacement":bc=sa}if(H!==bc)return{reset:{placement:bc}}}return{}})}}},EB=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,k=rf(a,["strategy"]);return{name:"hide",fn(H){return Mh(this,
null,function*(){var {rects:fa}=H;switch(d){case "referenceHidden":return fa=Pb(yield Hk(H,Te(Xd({},k),{elementContext:"reference"})),fa.reference),{data:{referenceHiddenOffsets:fa,referenceHidden:Sa(fa)}};case "escaped":return fa=Pb(yield Hk(H,Te(Xd({},k),{altBoundary:!0})),fa.floating),{data:{escapedOffsets:fa,escaped:Sa(fa)}};default:return{}}})}}},FB=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return Mh(this,null,function*(){const {x:k,y:H}=d,fa=yield function(la,sa){return Mh(this,
null,function*(){const {placement:Ha,platform:Ta,elements:Xa}=la;var eb=yield null==Ta.isRTL?void 0:Ta.isRTL(Xa.floating),ib=Ei(Ha);const Bb=Ha.split("-")[1],Mb="x"===fl(Ha);ib=["left","top"].includes(ib)?-1:1;eb=eb&&Mb?-1:1;const Fb="function"==typeof sa?sa(la):sa;let {mainAxis:$b,crossAxis:nc,alignmentAxis:Sb}="number"==typeof Fb?{mainAxis:Fb,crossAxis:0,alignmentAxis:null}:Xd({mainAxis:0,crossAxis:0,alignmentAxis:null},Fb);return Bb&&"number"==typeof Sb&&(nc="end"===Bb?-1*Sb:Sb),Mb?{x:nc*eb,y:$b*
ib}:{x:$b*ib,y:nc*eb}})}(d,a);return{x:k+fa.x,y:H+fa.y,data:fa}})}}},GB=function(a){return void 0===a&&(a={}),{name:"shift",options:a,fn(d){return Mh(this,null,function*(){const {x:k,y:H,placement:fa}=d;var la=a;const {mainAxis:sa=!0,crossAxis:Ha=!1,limiter:Ta={fn:Mb=>{let {x:Fb,y:$b}=Mb;return{x:Fb,y:$b}}}}=la;var Xa=rf(la,["mainAxis","crossAxis","limiter"]);la={x:k,y:H};Xa=yield Hk(d,Xa);const eb=fl(Ei(fa)),ib="x"===eb?"y":"x";let Bb=la[eb];la=la[ib];sa&&(Bb=Pq(Bb+Xa["y"===eb?"top":"left"],ay(Bb,
Bb-Xa["y"===eb?"bottom":"right"])));Ha&&(la=Pq(la+Xa["y"===ib?"top":"left"],ay(la,la-Xa["y"===ib?"bottom":"right"])));la=Ta.fn(Te(Xd({},d),{[eb]:Bb,[ib]:la}));return Te(Xd({},la),{data:{x:la.x-k,y:la.y-H}})})}}},HB=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:k,y:H,placement:fa,rects:la,middlewareData:sa}=d,{offset:Ha=0,mainAxis:Ta=!0,crossAxis:Xa=!0}=a;var eb={x:k,y:H};d=fl(fa);const ib="x"===d?"y":"x";let Bb=eb[d];eb=eb[ib];var Mb="function"==typeof Ha?Ha(Te(Xd({},la),{placement:fa})):
Ha;Mb="number"==typeof Mb?{mainAxis:Mb,crossAxis:0}:Xd({mainAxis:0,crossAxis:0},Mb);if(Ta){var Fb="y"===d?"height":"width",$b=la.reference[d]-la.floating[Fb]+Mb.mainAxis;Fb=la.reference[d]+la.reference[Fb]-Mb.mainAxis;Bb<$b?Bb=$b:Bb>Fb&&(Bb=Fb)}if(Xa){var nc,Sb,gc,bc;const Dc="y"===d?"width":"height";$b=["top","left"].includes(Ei(fa));Fb=la.reference[ib]-la.floating[Dc]+($b&&null!=(nc=null==(Sb=sa.offset)?void 0:Sb[ib])?nc:0)+($b?0:Mb.crossAxis);nc=la.reference[ib]+la.reference[Dc]+($b?0:null!=(gc=
null==(bc=sa.offset)?void 0:bc[ib])?gc:0)-($b?Mb.crossAxis:0);eb<Fb?eb=Fb:eb>nc&&(eb=nc)}return{[d]:Bb,[ib]:eb}}}},pG=function(a){return void 0===a&&(a={}),{name:"size",options:a,fn(d){return Mh(this,null,function*(){const {placement:k,rects:H,platform:fa,elements:la}=d;var sa=a,{apply:Ha}=sa;sa=rf(sa,["apply"]);sa=yield Hk(d,sa);var Ta=Ei(k),Xa=k.split("-")[1],eb,ib;"top"===Ta||"bottom"===Ta?(eb=Ta,ib=Xa===((yield null==fa.isRTL?void 0:fa.isRTL(la.floating))?"start":"end")?"left":"right"):(ib=Ta,
eb="end"===Xa?"top":"bottom");Ta=Pq(sa.left,0);Xa=Pq(sa.right,0);const Bb=Pq(sa.top,0),Mb=Pq(sa.bottom,0);ib={availableHeight:H.floating.height-(["left","right"].includes(k)?2*(0!==Bb||0!==Mb?Bb+Mb:Pq(sa.top,sa.bottom)):sa[eb]),availableWidth:H.floating.width-(["top","bottom"].includes(k)?2*(0!==Ta||0!==Xa?Ta+Xa:Pq(sa.left,sa.right)):sa[ib])};eb=yield fa.getDimensions(la.floating);null==Ha||Ha(Xd(Xd({},d),ib));Ha=yield fa.getDimensions(la.floating);return eb.width!==Ha.width||eb.height!==Ha.height?
{reset:{rects:!0}}:{}})}}},IB=Math.min,Pu=Math.max,hw=Math.round,qG={getClippingRect:function(a){let {element:d,boundary:k,rootBoundary:H,strategy:fa}=a;a=[...("clippingAncestors"===k?Sf(d):[].concat(k)),H];a=a.reduce((la,sa)=>{sa=Pg(d,sa,fa);return la.top=Pu(sa.top,la.top),la.right=IB(sa.right,la.right),la.bottom=IB(sa.bottom,la.bottom),la.left=Pu(sa.left,la.left),la},Pg(d,a[0],fa));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,
offsetParent:k,strategy:H}=a;var fa=ic(k);const la=kd(k);if(k===la)return d;a={scrollLeft:0,scrollTop:0};var sa=0,Ha=0;(fa||!fa&&"fixed"!==H)&&(("body"!==Qb(k)||cc(la))&&(a=Nd(k)),ic(k))&&(fa=Tc(k,!0),sa=fa.x+k.clientLeft,Ha=fa.y+k.clientTop);return Te(Xd({},d),{x:d.x-a.scrollLeft+sa,y:d.y-a.scrollTop+Ha})},isElement:Kb,getDimensions:pf,getOffsetParent:ef,getDocumentElement:kd,getElementRects:a=>{let {reference:d,floating:k,strategy:H}=a;a=ef(k);var fa=ic(a);const la=kd(a);var sa;if(sa=fa)sa=Tc(a),
sa=hw(sa.width)!==a.offsetWidth||hw(sa.height)!==a.offsetHeight;sa=Tc(d,sa,"fixed"===H);let Ha={scrollLeft:0,scrollTop:0};var Ta=0,Xa=0;if(fa||!fa&&"fixed"!==H)(("body"!==Qb(a)||cc(la))&&(Ha=Nd(a)),ic(a))?(fa=Tc(a,!0),Ta=fa.x+a.clientLeft,Xa=fa.y+a.clientTop):la&&(Ta=se(la));return{reference:{x:sa.left+Ha.scrollLeft-Ta,y:sa.top+Ha.scrollTop-Xa,width:sa.width,height:sa.height},floating:Te(Xd({},pf(k)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===oc(a).direction},rG=
(a,d,k)=>mG(a,d,Xd({platform:qG},k)),Co=df(da(22),1),JB=da(22),sG=df(da(31),1),by="undefined"!==typeof document?JB.useLayoutEffect:JB.useEffect,KB=a=>{const {element:d,padding:k}=a;return{name:"arrow",options:a,fn(H){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=d.current)return BB({element:d.current,padding:k}).fn(H)}else if(d)return BB({element:d,padding:k}).fn(H);return{}}}},cy=da(22),tG=(0,cy.forwardRef)((a,d)=>{const {children:k,width:H=10,height:fa=5}=a,la=rf(a,["children",
"width","height"]);return(0,cy.createElement)(Lk.svg,Pe({},la,{ref:d,width:H,height:fa,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?k:(0,cy.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),uG=da(22),[dy,Mt]=hj("Popper"),[vG,LB]=dy("Popper"),ey=(0,Ul.forwardRef)((a,d)=>{const {__scopePopper:k,virtualRef:H}=a;a=rf(a,["__scopePopper","virtualRef"]);const fa=LB("PopperAnchor",k),la=(0,Ul.useRef)(null);d=Tg(d,la);(0,Ul.useEffect)(()=>{fa.onAnchorChange((null===H||void 0===H?void 0:
H.current)||la.current)});return H?null:(0,Ul.createElement)(Lk.div,Pe({},a,{ref:d}))}),[wG,xG]=dy("PopperContent"),[yG,zG]=dy("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),fy=(0,Ul.forwardRef)((a,d)=>{var k,H,fa,la,sa,Ha,Ta,Xa;const {__scopePopper:eb,side:ib="bottom",sideOffset:Bb=0,align:Mb="center",alignOffset:Fb=0,arrowPadding:$b=0,collisionBoundary:nc=[],collisionPadding:Sb=0,sticky:gc="partial",hideWhenDetached:bc=!1,avoidCollisions:Dc=!0}=a;a=rf(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));
const Ic=LB("PopperContent",eb),[od,Cd]=(0,Ul.useState)(null);d=Tg(d,Ek=>Cd(Ek));const [Ge,Yd]=(0,Ul.useState)(null);var ve=Yh(Ge),lf=null!==(k=null===ve||void 0===ve?void 0:ve.width)&&void 0!==k?k:0;k=null!==(H=null===ve||void 0===ve?void 0:ve.height)&&void 0!==H?H:0;H=ib+("center"!==Mb?"-"+Mb:"");ve="number"===typeof Sb?Sb:Xd({top:0,right:0,bottom:0,left:0},Sb);const Ce=Array.isArray(nc)?nc:[nc],He=0<Ce.length;ve={padding:ve,boundary:Ce.filter(eg),altBoundary:He};const {reference:Gd,floating:cd,
strategy:Hd,x:ad,y:ud,placement:ye,middlewareData:Ve,update:zf}=Uf({strategy:"fixed",placement:H,whileElementsMounted:Pf,middleware:[FB({mainAxis:Bb+k,alignmentAxis:Fb}),Dc?GB(Xd({mainAxis:!0,crossAxis:!1,limiter:"partial"===gc?HB():void 0},ve)):void 0,Ge?KB({element:Ge,padding:$b}):void 0,Dc?DB(Xd({},ve)):void 0,BG({arrowWidth:lf,arrowHeight:k}),bc?EB({strategy:"referenceHidden"}):void 0].filter(Mj)});Dm(()=>{Gd(Ic.anchor)},[Gd,Ic.anchor]);const mf=null!==ad&&null!==ud,[Nf,Hg]=vi(ye);lf=null===(fa=
Ve.arrow)||void 0===fa?void 0:fa.x;fa=null===(la=Ve.arrow)||void 0===la?void 0:la.y;la=0!==(null===(sa=Ve.arrow)||void 0===sa?void 0:sa.centerOffset);const [uf,Cg]=(0,Ul.useState)();Dm(()=>{od&&Cg(window.getComputedStyle(od).zIndex)},[od]);const {hasParent:bh,positionUpdateFns:Qi}=zG("PopperContent",eb),ik=!bh;(0,Ul.useLayoutEffect)(()=>{if(!ik)return Qi.add(zf),()=>{Qi.delete(zf)}},[ik,Qi,zf]);(0,Ul.useLayoutEffect)(()=>{ik&&mf&&Array.from(Qi).reverse().forEach(Ek=>requestAnimationFrame(Ek))},[ik,
mf,Qi]);sa=Te(Xd({"data-side":Nf,"data-align":Hg},a),{ref:d,style:Te(Xd({},a.style),{animation:mf?void 0:"none",opacity:null!==(Ha=Ve.hide)&&void 0!==Ha&&Ha.referenceHidden?0:void 0})});return(0,Ul.createElement)("div",{ref:cd,"data-radix-popper-content-wrapper":"",style:{position:Hd,left:0,top:0,transform:mf?`translate3d(${Math.round(ad)}px, ${Math.round(ud)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:uf,["--radix-popper-transform-origin"]:[null===(Ta=Ve.transformOrigin)||void 0===
Ta?void 0:Ta.x,null===(Xa=Ve.transformOrigin)||void 0===Xa?void 0:Xa.y].join(" ")}},(0,Ul.createElement)(wG,{scope:eb,placedSide:Nf,onArrowChange:Yd,arrowX:lf,arrowY:fa,shouldHideArrow:la},ik?(0,Ul.createElement)(yG,{scope:eb,hasParent:!0,positionUpdateFns:Qi},(0,Ul.createElement)(Lk.div,sa)):(0,Ul.createElement)(Lk.div,sa)))}),AG={top:"bottom",right:"left",bottom:"top",left:"right"},MB=(0,Ul.forwardRef)(function(a,d){var {__scopePopper:k}=a;a=rf(a,["__scopePopper"]);k=xG("PopperArrow",k);return(0,Ul.createElement)("span",
{ref:k.onArrowChange,style:{position:"absolute",left:k.arrowX,top:k.arrowY,[AG[k.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[k.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[k.placedSide],visibility:k.shouldHideArrow?"hidden":void 0}},(0,Ul.createElement)(tG,Pe({},a,{ref:d,style:Te(Xd({},a.style),{display:"block"})})))}),BG=a=>
({name:"transformOrigin",options:a,fn(d){var k,H,fa,la,sa;const {placement:Ha,rects:Ta,middlewareData:Xa}=d,eb=(d=0!==(null===(k=Xa.arrow)||void 0===k?void 0:k.centerOffset))?0:a.arrowWidth;k=d?0:a.arrowHeight;const [ib,Bb]=vi(Ha),Mb={start:"0%",center:"50%",end:"100%"}[Bb],Fb=(null!==(H=null===(fa=Xa.arrow)||void 0===fa?void 0:fa.x)&&void 0!==H?H:0)+eb/2;H=(null!==(la=null===(sa=Xa.arrow)||void 0===sa?void 0:sa.y)&&void 0!==la?la:0)+k/2;sa=la="";"bottom"===ib?(la=d?Mb:`${Fb}px`,sa=`${-k}px`):"top"===
ib?(la=d?Mb:`${Fb}px`,sa=`${Ta.floating.height+k}px`):"right"===ib?(la=`${-k}px`,sa=d?Mb:`${H}px`):"left"===ib&&(la=`${Ta.floating.width+k}px`,sa=d?Mb:`${H}px`);return{data:{x:la,y:sa}}}}),gy=a=>{const {__scopePopper:d,children:k}=a,[H,fa]=(0,Ul.useState)(null);return(0,Ul.createElement)(vG,{scope:d,anchor:H,onAnchorChange:fa},k)},NB=da(22),CG=df(da(31)),DG=(0,NB.forwardRef)((a,d)=>{var k;const {container:H=null===globalThis||void 0===globalThis?void 0:null===(k=globalThis.document)||void 0===k?void 0:
k.body}=a;a=rf(a,["container"]);return H?CG.default.createPortal((0,NB.createElement)(Lk.div,Pe({},a,{ref:d})),H):null}),Qq=da(22),EG=da(31),Qu=a=>{const {present:d,children:k}=a;a=pi(d);const H="function"===typeof k?k({present:a.isPresent}):Qq.Children.only(k),fa=Tg(a.ref,H.ref);return"function"===typeof k||a.isPresent?(0,Qq.cloneElement)(H,{ref:fa}):null};Qu.displayName="Presence";var iw=da(22),OB=da(22),FG=(0,OB.forwardRef)((a,d)=>(0,OB.createElement)(Lk.span,Pe({},a,{ref:d,style:Xd({position:"absolute",
border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[jw]=hj("Tooltip",[Mt]),kw=Mt(),[GG,hy]=jw("TooltipProvider"),[HG,Ru]=jw("Tooltip"),IG=(0,$g.forwardRef)((a,d)=>{var {__scopeTooltip:k}=a;const H=rf(a,["__scopeTooltip"]),fa=Ru("TooltipTrigger",k),la=hy("TooltipTrigger",k);k=kw(k);const sa=(0,$g.useRef)(null);d=Tg(d,sa,fa.onTriggerChange);const Ha=(0,$g.useRef)(!1),Ta=(0,$g.useRef)(!1),Xa=(0,$g.useCallback)(()=>
Ha.current=!1,[]);(0,$g.useEffect)(()=>()=>document.removeEventListener("pointerup",Xa),[Xa]);return(0,$g.createElement)(ey,Pe({asChild:!0},k),(0,$g.createElement)(Lk.button,Pe({"aria-describedby":fa.open?fa.contentId:void 0,"data-state":fa.stateAttribute},H,{ref:d,onPointerMove:Jf(a.onPointerMove,eb=>{"touch"===eb.pointerType||Ta.current||la.isPointerInTransitRef.current||(fa.onTriggerEnter(),Ta.current=!0)}),onPointerLeave:Jf(a.onPointerLeave,()=>{fa.onTriggerLeave();Ta.current=!1}),onPointerDown:Jf(a.onPointerDown,
()=>{Ha.current=!0;document.addEventListener("pointerup",Xa,{once:!0})}),onFocus:Jf(a.onFocus,()=>{if(!Ha.current)fa.onOpen()}),onBlur:Jf(a.onBlur,fa.onClose),onClick:Jf(a.onClick,fa.onClose)})))}),[JG,KG]=jw("TooltipPortal",{forceMount:void 0}),LG=(0,$g.forwardRef)((a,d)=>{var k=KG("TooltipContent",a.__scopeTooltip);const {forceMount:H=k.forceMount,side:fa="top"}=a;k=rf(a,["forceMount","side"]);a=Ru("TooltipContent",a.__scopeTooltip);return(0,$g.createElement)(Qu,{present:H||a.open},a.disableHoverableContent?
(0,$g.createElement)(PB,Pe({side:fa},k,{ref:d})):(0,$g.createElement)(MG,Pe({side:fa},k,{ref:d})))}),MG=(0,$g.forwardRef)((a,d)=>{const k=Ru("TooltipContent",a.__scopeTooltip),H=hy("TooltipContent",a.__scopeTooltip),fa=(0,$g.useRef)(null);d=Tg(d,fa);const [la,sa]=(0,$g.useState)(null),{trigger:Ha,onClose:Ta}=k,Xa=fa.current,{onPointerInTransitChange:eb}=H,ib=(0,$g.useCallback)(()=>{sa(null);eb(!1)},[eb]),Bb=(0,$g.useCallback)((Mb,Fb)=>{const $b=nm({x:Mb.clientX,y:Mb.clientY},Mb.currentTarget.getBoundingClientRect()),
nc="right"===$b||"bottom"===$b?-5:5;Mb="right"===$b||"left"===$b?{x:Mb.clientX+nc,y:Mb.clientY}:{x:Mb.clientX,y:Mb.clientY+nc};Fb=Fb.getBoundingClientRect();const {top:Sb,right:gc,bottom:bc,left:Dc}=Fb;Fb=fh([Mb,{x:Dc,y:Sb},{x:gc,y:Sb},{x:gc,y:bc},{x:Dc,y:bc}]);sa(Fb);eb(!0)},[eb]);(0,$g.useEffect)(()=>()=>ib(),[ib]);(0,$g.useEffect)(()=>{if(Ha&&Xa){const Mb=$b=>Bb($b,Xa),Fb=$b=>Bb($b,Ha);Ha.addEventListener("pointerleave",Mb);Xa.addEventListener("pointerleave",Fb);return()=>{Ha.removeEventListener("pointerleave",
Mb);Xa.removeEventListener("pointerleave",Fb)}}},[Ha,Xa,Bb,ib]);(0,$g.useEffect)(()=>{if(la){const Mb=Fb=>{var $b=Fb.target;Fb={x:Fb.clientX,y:Fb.clientY};$b=(null===Ha||void 0===Ha?void 0:Ha.contains($b))||(null===Xa||void 0===Xa?void 0:Xa.contains($b));const {x:nc,y:Sb}=Fb;Fb=!1;for(let gc=0,bc=la.length-1;gc<la.length;bc=gc++){const Dc=la[gc].x,Ic=la[gc].y,od=la[bc].x,Cd=la[bc].y;Ic>Sb!==Cd>Sb&&nc<(od-Dc)*(Sb-Ic)/(Cd-Ic)+Dc&&(Fb=!Fb)}Fb=!Fb;$b?ib():Fb&&(ib(),Ta())};document.addEventListener("pointermove",
Mb);return()=>document.removeEventListener("pointermove",Mb)}},[Ha,Xa,la,Ta,ib]);return(0,$g.createElement)(PB,Pe({},a,{ref:d}))}),[NG,OG]=jw("Tooltip",{isInside:!1}),PB=(0,$g.forwardRef)((a,d)=>{const {__scopeTooltip:k,children:H,"aria-label":fa,onEscapeKeyDown:la,onPointerDownOutside:sa}=a;a=rf(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Ha=Ru("TooltipContent",k),Ta=kw(k),{onClose:Xa}=Ha;(0,$g.useEffect)(()=>{document.addEventListener("tooltip.open",
Xa);return()=>document.removeEventListener("tooltip.open",Xa)},[Xa]);(0,$g.useEffect)(()=>{if(Ha.trigger){const eb=ib=>{ib=ib.target;null!==ib&&void 0!==ib&&ib.contains(Ha.trigger)&&Xa()};window.addEventListener("scroll",eb,{capture:!0});return()=>window.removeEventListener("scroll",eb,{capture:!0})}},[Ha.trigger,Xa]);return(0,$g.createElement)($x,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:la,onPointerDownOutside:sa,onFocusOutside:eb=>eb.preventDefault(),onDismiss:Xa},(0,$g.createElement)(fy,
Pe({"data-state":Ha.stateAttribute},Ta,a,{ref:d,style:Te(Xd({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,$g.createElement)(yB,null,H),(0,$g.createElement)(NG,{scope:k,isInside:!0},(0,$g.createElement)(FG,{id:Ha.contentId,role:"tooltip"},fa||H))))}),PG=(0,$g.forwardRef)((a,d)=>{const {__scopeTooltip:k}=a;a=rf(a,["__scopeTooltip"]);const H=kw(k);return OG("TooltipArrow",k).isInside?null:(0,$g.createElement)(MB,Pe({},H,a,{ref:d}))}),QG=a=>{const {__scopeTooltip:d,
delayDuration:k=700,skipDelayDuration:H=300,disableHoverableContent:fa=!1,children:la}=a,[sa,Ha]=(0,$g.useState)(!0),Ta=(0,$g.useRef)(!1),Xa=(0,$g.useRef)(0);(0,$g.useEffect)(()=>{const eb=Xa.current;return()=>window.clearTimeout(eb)},[]);return(0,$g.createElement)(GG,{scope:d,isOpenDelayed:sa,delayDuration:k,onOpen:(0,$g.useCallback)(()=>{window.clearTimeout(Xa.current);Ha(!1)},[]),onClose:(0,$g.useCallback)(()=>{window.clearTimeout(Xa.current);Xa.current=window.setTimeout(()=>Ha(!0),H)},[H]),isPointerInTransitRef:Ta,
onPointerInTransitChange:(0,$g.useCallback)(eb=>{Ta.current=eb},[]),disableHoverableContent:fa},la)},RG=a=>{const {__scopeTooltip:d,children:k,open:H,defaultOpen:fa=!1,onOpenChange:la,disableHoverableContent:sa,delayDuration:Ha}=a,Ta=hy("Tooltip",a.__scopeTooltip);a=kw(d);const [Xa,eb]=(0,$g.useState)(null),ib=Lh(),Bb=(0,$g.useRef)(0),Mb=null!==sa&&void 0!==sa?sa:Ta.disableHoverableContent,Fb=null!==Ha&&void 0!==Ha?Ha:Ta.delayDuration,$b=(0,$g.useRef)(!1),[nc=!1,Sb]=Nh({prop:H,defaultProp:fa,onChange:od=>
{if(od)Ta.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else Ta.onClose();null===la||void 0===la||la(od)}}),gc=(0,$g.useMemo)(()=>nc?$b.current?"delayed-open":"instant-open":"closed",[nc]),bc=(0,$g.useCallback)(()=>{window.clearTimeout(Bb.current);$b.current=!1;Sb(!0)},[Sb]),Dc=(0,$g.useCallback)(()=>{window.clearTimeout(Bb.current);Sb(!1)},[Sb]),Ic=(0,$g.useCallback)(()=>{window.clearTimeout(Bb.current);Bb.current=window.setTimeout(()=>{$b.current=!0;Sb(!0)},Fb)},[Fb,Sb]);(0,$g.useEffect)(()=>
()=>window.clearTimeout(Bb.current),[]);return(0,$g.createElement)(gy,a,(0,$g.createElement)(HG,{scope:d,contentId:ib,open:nc,stateAttribute:gc,trigger:Xa,onTriggerChange:eb,onTriggerEnter:(0,$g.useCallback)(()=>{Ta.isOpenDelayed?Ic():bc()},[Ta.isOpenDelayed,Ic,bc]),onTriggerLeave:(0,$g.useCallback)(()=>{Mb?Dc():window.clearTimeout(Bb.current)},[Dc,Mb]),onOpen:bc,onClose:Dc,disableHoverableContent:Mb},k))},SG=IG,TG=a=>{const {__scopeTooltip:d,forceMount:k,children:H,container:fa}=a;a=Ru("TooltipPortal",
d);return(0,$g.createElement)(JG,{scope:d,forceMount:k},(0,$g.createElement)(Qu,{present:k||a.open},(0,$g.createElement)(DG,{asChild:!0,container:fa},H)))},UG=LG,VG=PG,Fr=da(586),QB=da(586),iy=da(586),WG=({style:a,icon:d,onClick:k})=>(0,iy.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:k,children:(0,iy.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,iy.jsx)(kh,{name:d})})}),RB=da(22),SB=(0,RB.forwardRef)((a,d)=>{const {pressed:k,
defaultPressed:H=!1,onPressedChange:fa}=a,la=rf(a,["pressed","defaultPressed","onPressedChange"]),[sa=!1,Ha]=Nh({prop:k,onChange:fa,defaultProp:H});return(0,RB.createElement)(Lk.button,Pe({type:"button","aria-pressed":sa,"data-state":sa?"on":"off","data-disabled":a.disabled?"":void 0},la,{ref:d,onClick:Jf(a.onClick,()=>{a.disabled||Ha(!sa)})}))}),XG=SB,jy=da(586),dp=da(22),Kg=da(22),lq=df(da(22)),TB=da(22),YG=(0,TB.createContext)(void 0),ZG=da(22),ky=0,Gr=da(22),UB={bubbles:!1,cancelable:!0},VB=(0,Gr.forwardRef)((a,
d)=>{const {loop:k=!1,trapped:H=!1,onMountAutoFocus:fa,onUnmountAutoFocus:la}=a;a=rf(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [sa,Ha]=(0,Gr.useState)(null),Ta=ii(fa),Xa=ii(la),eb=(0,Gr.useRef)(null);d=Tg(d,Mb=>Ha(Mb));const ib=(0,Gr.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Gr.useEffect)(()=>{if(H){let Mb=function($b){!ib.paused&&sa&&($b=$b.target,sa.contains($b)?eb.current=$b:Ui(eb.current,{select:!0}))},Fb=function($b){!ib.paused&&
sa&&(sa.contains($b.relatedTarget)||Ui(eb.current,{select:!0}))};document.addEventListener("focusin",Mb);document.addEventListener("focusout",Fb);return()=>{document.removeEventListener("focusin",Mb);document.removeEventListener("focusout",Fb)}}},[H,sa,ib.paused]);(0,Gr.useEffect)(()=>{if(sa){WB.add(ib);const Mb=document.activeElement;if(!sa.contains(Mb)){const Fb=new CustomEvent("focusScope.autoFocusOnMount",UB);sa.addEventListener("focusScope.autoFocusOnMount",Ta);sa.dispatchEvent(Fb);Fb.defaultPrevented||
(yj(qp(Nj(sa)),{select:!0}),document.activeElement===Mb&&Ui(sa))}return()=>{sa.removeEventListener("focusScope.autoFocusOnMount",Ta);setTimeout(()=>{const Fb=new CustomEvent("focusScope.autoFocusOnUnmount",UB);sa.addEventListener("focusScope.autoFocusOnUnmount",Xa);sa.dispatchEvent(Fb);Fb.defaultPrevented||Ui(null!==Mb&&void 0!==Mb?Mb:document.body,{select:!0});sa.removeEventListener("focusScope.autoFocusOnUnmount",Xa);WB.remove(ib)},0)}}},[sa,Ta,Xa,ib]);const Bb=(0,Gr.useCallback)(Mb=>{if((k||H)&&
!ib.paused){var Fb=document.activeElement;if("Tab"===Mb.key&&!Mb.altKey&&!Mb.ctrlKey&&!Mb.metaKey&&Fb){const nc=Mb.currentTarget;var $b=nc;const Sb=Nj($b),gc=Zh(Sb,$b);$b=Zh(Sb.reverse(),$b);const [bc,Dc]=[gc,$b];bc&&Dc?Mb.shiftKey||Fb!==Dc?Mb.shiftKey&&Fb===bc&&(Mb.preventDefault(),k&&Ui(Dc,{select:!0})):(Mb.preventDefault(),k&&Ui(bc,{select:!0})):Fb===nc&&Mb.preventDefault()}}},[k,H,ib.paused]);return(0,Gr.createElement)(Lk.div,Pe({tabIndex:-1},a,{ref:d,onKeyDown:Bb}))}),WB=function(){let a=[];
return{add(d){const k=a[0];d===k||null!==k&&void 0!==k&&k.pause();a=Lm(a,d);a.unshift(d)},remove(d){var k;a=Lm(a,d);null===(k=a[0])||void 0===k||k.resume()}}}(),Vl=da(22),$G={bubbles:!1,cancelable:!0},[ly,XB,aH]=Xk("RovingFocusGroup"),[bH,lw]=hj("RovingFocusGroup",[aH]),[cH,dH]=bH("RovingFocusGroup"),YB=(0,Vl.forwardRef)((a,d)=>(0,Vl.createElement)(ly.Provider,{scope:a.__scopeRovingFocusGroup},(0,Vl.createElement)(ly.Slot,{scope:a.__scopeRovingFocusGroup},(0,Vl.createElement)(eH,Pe({},a,{ref:d}))))),
eH=(0,Vl.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:k,orientation:H,loop:fa=!1,dir:la,currentTabStopId:sa,defaultCurrentTabStopId:Ha,onCurrentTabStopIdChange:Ta,onEntryFocus:Xa}=a,eb=rf(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),ib=(0,Vl.useRef)(null);d=Tg(d,ib);const Bb=jo(la),[Mb=null,Fb]=Nh({prop:sa,defaultProp:Ha,onChange:Ta}),[$b,nc]=(0,Vl.useState)(!1),Sb=ii(Xa),gc=XB(k),bc=(0,Vl.useRef)(!1),
[Dc,Ic]=(0,Vl.useState)(0);(0,Vl.useEffect)(()=>{const od=ib.current;if(od)return od.addEventListener("rovingFocusGroup.onEntryFocus",Sb),()=>od.removeEventListener("rovingFocusGroup.onEntryFocus",Sb)},[Sb]);return(0,Vl.createElement)(cH,{scope:k,orientation:H,dir:Bb,loop:fa,currentTabStopId:Mb,onItemFocus:(0,Vl.useCallback)(od=>Fb(od),[Fb]),onItemShiftTab:(0,Vl.useCallback)(()=>nc(!0),[]),onFocusableItemAdd:(0,Vl.useCallback)(()=>Ic(od=>od+1),[]),onFocusableItemRemove:(0,Vl.useCallback)(()=>Ic(od=>
od-1),[])},(0,Vl.createElement)(Lk.div,Pe({tabIndex:$b||0===Dc?-1:0,"data-orientation":H},eb,{ref:d,style:Xd({outline:"none"},a.style),onMouseDown:Jf(a.onMouseDown,()=>{bc.current=!0}),onFocus:Jf(a.onFocus,od=>{var Cd=!bc.current;if(od.target===od.currentTarget&&Cd&&!$b&&(Cd=new CustomEvent("rovingFocusGroup.onEntryFocus",$G),od.currentTarget.dispatchEvent(Cd),!Cd.defaultPrevented)){od=gc().filter(Yd=>Yd.focusable);Cd=od.find(Yd=>Yd.active);const Ge=od.find(Yd=>Yd.id===Mb);od=[Cd,Ge,...od].filter(Boolean).map(Yd=>
Yd.ref.current);Kh(od)}bc.current=!1}),onBlur:Jf(a.onBlur,()=>nc(!1))})))}),ZB=(0,Vl.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:k,focusable:H=!0,active:fa=!1}=a,la=rf(a,["__scopeRovingFocusGroup","focusable","active"]),sa=Lh(),Ha=dH("RovingFocusGroupItem",k),Ta=Ha.currentTabStopId===sa,Xa=XB(k),{onFocusableItemAdd:eb,onFocusableItemRemove:ib}=Ha;(0,Vl.useEffect)(()=>{if(H)return eb(),()=>ib()},[H,eb,ib]);return(0,Vl.createElement)(ly.ItemSlot,{scope:k,id:sa,focusable:H,active:fa},(0,Vl.createElement)(Lk.span,
Pe({tabIndex:Ta?0:-1,"data-orientation":Ha.orientation},la,{ref:d,onMouseDown:Jf(a.onMouseDown,Bb=>{if(H)Ha.onItemFocus(sa);else Bb.preventDefault()}),onFocus:Jf(a.onFocus,()=>Ha.onItemFocus(sa)),onKeyDown:Jf(a.onKeyDown,Bb=>{if("Tab"===Bb.key&&Bb.shiftKey)Ha.onItemShiftTab();else if(Bb.target===Bb.currentTarget){var Mb=bn(Bb,Ha.orientation,Ha.dir);if(void 0!==Mb){Bb.preventDefault();let Fb=Xa().filter($b=>$b.focusable).map($b=>$b.ref.current);if("last"===Mb)Fb.reverse();else if("prev"===Mb||"next"===
Mb)"prev"===Mb&&Fb.reverse(),Bb=Fb.indexOf(Bb.currentTarget),Fb=Ha.loop?vh(Fb,Bb+1):Fb.slice(Bb+1);setTimeout(()=>Kh(Fb))}}})})))}),fH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},gH=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},Nt=new WeakMap,mw=new WeakMap,nw={},my=0,ny=function(a,d,k){void 0===d&&(d=gH(a));void 0===k&&(k="data-aria-hidden");var H=Array.isArray(a)?
a:[a];nw[k]||(nw[k]=new WeakMap);var fa=nw[k],la=[],sa=new Set,Ha=function(Xa){Xa&&!sa.has(Xa)&&(sa.add(Xa),Ha(Xa.parentNode))};H.forEach(Ha);var Ta=function(Xa){!Xa||0<=H.indexOf(Xa)||Array.prototype.forEach.call(Xa.children,function(eb){if(sa.has(eb))Ta(eb);else{var ib=eb.getAttribute("aria-hidden");ib=null!==ib&&"false"!==ib;var Bb=(Nt.get(eb)||0)+1,Mb=(fa.get(eb)||0)+1;Nt.set(eb,Bb);fa.set(eb,Mb);la.push(eb);1===Bb&&ib&&mw.set(eb,!0);1===Mb&&eb.setAttribute(k,"true");ib||eb.setAttribute("aria-hidden",
"true")}})};Ta(d);sa.clear();my++;return function(){la.forEach(function(Xa){var eb=Nt.get(Xa)-1,ib=fa.get(Xa)-1;Nt.set(Xa,eb);fa.set(Xa,ib);eb||(mw.has(Xa)||Xa.removeAttribute("aria-hidden"),mw.delete(Xa));ib||Xa.removeAttribute(k)});my--;my||(Nt=new WeakMap,Nt=new WeakMap,mw=new WeakMap,nw={})}},hH=df(fs(),1),{__assign:Hr,__rest:$B,__spreadArray:iH}=hH.default,ep=df(da(22)),Rq=df(da(22)),jH=da(22),kH=df(da(22)),oy=function(a){var d=a.sideCar;a=$B(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");
d=d.read();if(!d)throw Error("Sidecar medium not found");return kH.createElement(d,Hr({},a))};oy.isSideCarExport=!0;var Sm=function(a){void 0===a&&(a={});var d=tl(null);d.options=Hr({async:!0,ssr:!1},a);return d}(),Hn=function(){},mt=Rq.forwardRef(function(a,d){var k=Rq.useRef(null),H=Rq.useState({onScrollCapture:Hn,onWheelCapture:Hn,onTouchMoveCapture:Hn}),fa=H[0];H=H[1];var la=a.forwardProps,sa=a.children,Ha=a.className,Ta=a.removeScrollBar,Xa=a.enabled,eb=a.shards,ib=a.sideCar,Bb=a.noIsolation,
Mb=a.inert,Fb=a.allowPinchZoom,$b=a.as;$b=void 0===$b?"div":$b;a=$B(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));d=ko([k,d]);fa=Hr(Hr({},a),fa);return Rq.createElement(Rq.Fragment,null,Xa&&Rq.createElement(ib,{sideCar:Sm,removeScrollBar:Ta,shards:eb,noIsolation:Bb,inert:Mb,setCallbacks:H,allowPinchZoom:!!Fb,lockRef:k}),la?Rq.cloneElement(Rq.Children.only(sa),Hr(Hr({},fa),{ref:d})):Rq.createElement($b,Hr({},fa,{className:Ha,
ref:d}),sa))});mt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mt.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var gm=df(da(22)),yz=df(da(22)),zz=df(da(22)),WD=function(){var a=0,d=null;return{add:function(k){if(0==a){if(document){var H=document.createElement("style");H.type="text/css";var fa="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;fa&&H.setAttribute("nonce",fa)}else H=null;if(d=H)H=d,H.styleSheet?H.styleSheet.cssText=k:H.appendChild(document.createTextNode(k)),
k=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(k)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),d=null)}}},nt=function(){var a=WD();return function(d,k){zz.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&k])}},Ov=function(){var a=nt();return function(d){a(d.styles,d.dynamic);return null}},lH={left:0,top:0,right:0,gap:0},aC=Ov(),bC=function(a,d,k,H){var fa=a.left,la=a.top,sa=a.right;a=a.gap;void 0===k&&(k="margin");return"\n  .".concat("with-scroll-bars-hidden",
" {\n   overflow: hidden ").concat(H,";\n   padding-right: ").concat(a,"px ").concat(H,";\n  }\n  body {\n    overflow: hidden ").concat(H,";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(H,";"),"margin"===k&&"\n    padding-left: ".concat(fa,"px;\n    padding-top: ").concat(la,"px;\n    padding-right: ").concat(sa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(H,";\n    "),"padding"===k&&"padding-right: ".concat(a,"px ").concat(H,
";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(H,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(H,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(H,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(H,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",
": ").concat(a,"px;\n  }\n")},cC=function(a){var d=a.noRelative,k=a.noImportant;a=a.gapMode;var H=void 0===a?"margin":a;a=yz.useMemo(function(){var fa=H;void 0===fa&&(fa="margin");if("undefined"===typeof window)fa=lH;else{var la=window.getComputedStyle(document.body),sa=la["padding"===fa?"paddingTop":"marginTop"],Ha=la["padding"===fa?"paddingRight":"marginRight"];fa=[parseInt(la["padding"===fa?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(sa||"",10)||0,parseInt(Ha||"",10)||0];fa={left:fa[0],top:fa[1],
right:fa[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+fa[2]-fa[0])}}return fa},[H]);return yz.createElement(aC,{styles:bC(a,!d,H,k?"":"!important")})},ow=!1;if("undefined"!==typeof window)try{var Pv=Object.defineProperty({},"passive",{get:function(){return ow=!0}});window.addEventListener("test",Pv,Pv);window.removeEventListener("test",Pv,Pv)}catch(a){ow=!1}var Nq=ow?{passive:!1}:!1,sx=function(a,d){var k=window.getComputedStyle(a);return"hidden"!==k[d]&&!(k.overflowY===
k.overflowX&&"TEXTAREA"!==a.tagName&&"visible"===k[d])},rx=function(a,d){do{"undefined"!==typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(dC(a,d)){var k=eC(a,d);if(k[1]>k[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},dC=function(a,d){return"v"===a?sx(d,"overflowY"):sx(d,"overflowX")},eC=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},pw=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,
a.changedTouches[0].clientY]:[0,0]},py=function(a){return a&&"current"in a?a.current:a},qy=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},zk=0,pn=[];Sm.useMedium(function(a){var d=gm.useRef([]),k=gm.useRef([0,0]),H=gm.useRef(),fa=gm.useState(zk++)[0],la=gm.useState(function(){return Ov()})[0],sa=gm.useRef(a);gm.useEffect(function(){sa.current=a},[a]);gm.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(fa));
var Fb=iH([a.lockRef.current],(a.shards||[]).map(py),!0).filter(Boolean);Fb.forEach(function($b){return $b.classList.add("allow-interactivity-".concat(fa))});return function(){document.body.classList.remove("block-interactivity-".concat(fa));Fb.forEach(function($b){return $b.classList.remove("allow-interactivity-".concat(fa))})}}},[a.inert,a.lockRef.current,a.shards]);var Ha=gm.useCallback(function(Fb,$b){if("touches"in Fb&&2===Fb.touches.length)return!sa.current.allowPinchZoom;var nc=pw(Fb),Sb=k.current,
gc="deltaX"in Fb?Fb.deltaX:Sb[0]-nc[0];Sb="deltaY"in Fb?Fb.deltaY:Sb[1]-nc[1];var bc=Fb.target,Dc=Math.abs(gc)>Math.abs(Sb)?"h":"v";if("touches"in Fb&&"h"===Dc&&"range"===bc.type)return!1;var Ic=rx(Dc,bc);if(!Ic)return!0;Ic?nc=Dc:(nc="v"===Dc?"h":"v",Ic=rx(Dc,bc));if(!Ic)return!1;!H.current&&"changedTouches"in Fb&&(gc||Sb)&&(H.current=nc);if(!nc)return!0;nc=H.current||nc;Sb="h"===nc?gc:Sb;gc=window.getComputedStyle($b).direction;gc="h"===nc&&"rtl"===gc?-1:1;Dc=gc*Sb;Fb=Fb.target;Sb=$b.contains(Fb);
bc=!1;Dc=0<Dc;var od=Ic=0;do{var Cd=eC(nc,Fb),Ge=Cd[0];Cd=Cd[1]-Cd[2]-gc*Ge;(Ge||Cd)&&dC(nc,Fb)&&(Ic+=Cd,od+=Ge);Fb=Fb.parentNode}while(!Sb&&Fb!==document.body||Sb&&($b.contains(Fb)||$b===Fb));Dc&&0===Ic?bc=!0:Dc||0!==od||(bc=!0);return bc},[]),Ta=gm.useCallback(function(Fb){if(pn.length&&pn[pn.length-1]===la){var $b="deltaY"in Fb?[Fb.deltaX,Fb.deltaY]:pw(Fb),nc=d.current.filter(function(Sb){var gc;if(gc=Sb.name===Fb.type&&Sb.target===Fb.target)Sb=Sb.delta,gc=Sb[0]===$b[0]&&Sb[1]===$b[1];return gc})[0];
nc&&nc.should?Fb.cancelable&&Fb.preventDefault():nc||(nc=(sa.current.shards||[]).map(py).filter(Boolean).filter(function(Sb){return Sb.contains(Fb.target)}),(0<nc.length?Ha(Fb,nc[0]):!sa.current.noIsolation)&&Fb.cancelable&&Fb.preventDefault())}},[]),Xa=gm.useCallback(function(Fb,$b,nc,Sb){var gc={name:Fb,delta:$b,target:nc,should:Sb};d.current.push(gc);setTimeout(function(){d.current=d.current.filter(function(bc){return bc!==gc})},1)},[]),eb=gm.useCallback(function(Fb){k.current=pw(Fb);H.current=
void 0},[]),ib=gm.useCallback(function(Fb){Xa(Fb.type,[Fb.deltaX,Fb.deltaY],Fb.target,Ha(Fb,a.lockRef.current))},[]),Bb=gm.useCallback(function(Fb){Xa(Fb.type,pw(Fb),Fb.target,Ha(Fb,a.lockRef.current))},[]);gm.useEffect(function(){pn.push(la);a.setCallbacks({onScrollCapture:ib,onWheelCapture:ib,onTouchMoveCapture:Bb});document.addEventListener("wheel",Ta,Nq);document.addEventListener("touchmove",Ta,Nq);document.addEventListener("touchstart",eb,Nq);return function(){pn=pn.filter(function(Fb){return Fb!==
la});document.removeEventListener("wheel",Ta,Nq);document.removeEventListener("touchmove",Ta,Nq);document.removeEventListener("touchstart",eb,Nq)}},[]);var Mb=a.removeScrollBar;return gm.createElement(gm.Fragment,null,a.inert?gm.createElement(la,{styles:qy(fa)}):null,Mb?gm.createElement(cC,{gapMode:"margin"}):null)});var Ak=ep.forwardRef(function(a,d){return ep.createElement(mt,Hr({},a,{ref:d,sideCar:oy}))});Ak.classNames=mt.classNames;var Sq=["Enter"," "],jm=["ArrowUp","PageDown","End"],Do=["ArrowDown",
"PageUp","Home",...jm];[...Sq];[...Sq];var [Fi,fC,qw]=Xk("Menu"),[mq,Ot]=hj("Menu",[qw,Mt,lw]),rw=Mt(),sw=lw(),[Pi,Pt]=mq("Menu"),[ry,Su]=mq("Menu"),Ns=(0,Kg.forwardRef)((a,d)=>{var {__scopeMenu:k}=a;a=rf(a,["__scopeMenu"]);k=rw(k);return(0,Kg.createElement)(ey,Pe({},k,a,{ref:d}))}),[,gC]=mq("MenuPortal",{forceMount:void 0}),[Os,hC]=mq("MenuContent"),Tu=(0,Kg.forwardRef)((a,d)=>{var k=gC("MenuContent",a.__scopeMenu);({forceMount:k=k.forceMount}=a);const H=rf(a,["forceMount"]),fa=Pt("MenuContent",
a.__scopeMenu),la=Su("MenuContent",a.__scopeMenu);return(0,Kg.createElement)(Fi.Provider,{scope:a.__scopeMenu},(0,Kg.createElement)(Qu,{present:k||fa.open},(0,Kg.createElement)(Fi.Slot,{scope:a.__scopeMenu},la.modal?(0,Kg.createElement)(tw,Pe({},H,{ref:d})):(0,Kg.createElement)(sy,Pe({},H,{ref:d})))))}),tw=(0,Kg.forwardRef)((a,d)=>{const k=Pt("MenuContent",a.__scopeMenu),H=(0,Kg.useRef)(null);d=Tg(d,H);(0,Kg.useEffect)(()=>{const fa=H.current;if(fa)return ny(fa)},[]);return(0,Kg.createElement)(Qt,
Pe({},a,{ref:d,trapFocus:k.open,disableOutsidePointerEvents:k.open,disableOutsideScroll:!0,onFocusOutside:Jf(a.onFocusOutside,fa=>fa.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>k.onOpenChange(!1)}))}),sy=(0,Kg.forwardRef)((a,d)=>{const k=Pt("MenuContent",a.__scopeMenu);return(0,Kg.createElement)(Qt,Pe({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>k.onOpenChange(!1)}))}),Qt=(0,Kg.forwardRef)((a,d)=>{const {__scopeMenu:k,loop:H=!1,trapFocus:fa,
onOpenAutoFocus:la,onCloseAutoFocus:sa,disableOutsidePointerEvents:Ha,onEscapeKeyDown:Ta,onPointerDownOutside:Xa,onFocusOutside:eb,onInteractOutside:ib,onDismiss:Bb,disableOutsideScroll:Mb}=a,Fb=rf(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),$b=Pt("MenuContent",k),nc=Su("MenuContent",k),Sb=rw(k),gc=sw(k),bc=fC(k),[Dc,Ic]=(0,Kg.useState)(null),
od=(0,Kg.useRef)(null);d=Tg(d,od,$b.onContentChange);const Cd=(0,Kg.useRef)(0),Ge=(0,Kg.useRef)(""),Yd=(0,Kg.useRef)(0),ve=(0,Kg.useRef)(null),lf=(0,Kg.useRef)("right"),Ce=(0,Kg.useRef)(0),He=Mb?Ak:Kg.Fragment,Gd=Mb?{as:kq,allowPinchZoom:!0}:void 0,cd=ad=>{var ud,ye;ad=Ge.current+ad;const Ve=bc().filter(uf=>!uf.disabled),zf=document.activeElement,mf=null===(ud=Ve.find(uf=>uf.ref.current===zf))||void 0===ud?void 0:ud.textValue;ud=Ve.map(uf=>uf.textValue);const Nf=Hj(ud,ad,mf),Hg=null===(ye=Ve.find(uf=>
uf.textValue===Nf))||void 0===ye?void 0:ye.ref.current;(function bh(Cg){Ge.current=Cg;window.clearTimeout(Cd.current);""!==Cg&&(Cd.current=window.setTimeout(()=>bh(""),1E3))})(ad);Hg&&setTimeout(()=>Hg.focus())};(0,Kg.useEffect)(()=>()=>window.clearTimeout(Cd.current),[]);Jh();const Hd=(0,Kg.useCallback)(ad=>{var ud,ye,Ve;if(Ve=lf.current===(null===(ud=ve.current)||void 0===ud?void 0:ud.side)){if(ud=null===(ye=ve.current)||void 0===ye?void 0:ye.area){const {x:zf,y:mf}={x:ad.clientX,y:ad.clientY};
ad=!1;for(let Nf=0,Hg=ud.length-1;Nf<ud.length;Hg=Nf++){ye=ud[Nf].x;Ve=ud[Nf].y;const uf=ud[Hg].x,Cg=ud[Hg].y;Ve>mf!==Cg>mf&&zf<(uf-ye)*(mf-Ve)/(Cg-Ve)+ye&&(ad=!ad)}ud=ad}else ud=!1;Ve=ud}return Ve},[]);return(0,Kg.createElement)(Os,{scope:k,searchRef:Ge,onItemEnter:(0,Kg.useCallback)(ad=>{Hd(ad)&&ad.preventDefault()},[Hd]),onItemLeave:(0,Kg.useCallback)(ad=>{var ud;Hd(ad)||(null===(ud=od.current)||void 0===ud||ud.focus(),Ic(null))},[Hd]),onTriggerLeave:(0,Kg.useCallback)(ad=>{Hd(ad)&&ad.preventDefault()},
[Hd]),pointerGraceTimerRef:Yd,onPointerGraceIntentChange:(0,Kg.useCallback)(ad=>{ve.current=ad},[])},(0,Kg.createElement)(He,Gd,(0,Kg.createElement)(VB,{asChild:!0,trapped:fa,onMountAutoFocus:Jf(la,ad=>{var ud;ad.preventDefault();null===(ud=od.current)||void 0===ud||ud.focus()}),onUnmountAutoFocus:sa},(0,Kg.createElement)($x,{asChild:!0,disableOutsidePointerEvents:Ha,onEscapeKeyDown:Ta,onPointerDownOutside:Xa,onFocusOutside:eb,onInteractOutside:ib,onDismiss:Bb},(0,Kg.createElement)(YB,Pe({asChild:!0},
gc,{dir:nc.dir,orientation:"vertical",loop:H,currentTabStopId:Dc,onCurrentTabStopIdChange:Ic,onEntryFocus:ad=>{nc.isUsingKeyboardRef.current||ad.preventDefault()}}),(0,Kg.createElement)(fy,Pe({role:"menu","aria-orientation":"vertical","data-state":$b.open?"open":"closed","data-radix-menu-content":"",dir:nc.dir},Sb,Fb,{ref:d,style:Xd({outline:"none"},Fb.style),onKeyDown:Jf(Fb.onKeyDown,ad=>{var ud=ad.target.closest("[data-radix-menu-content]")===ad.currentTarget;const ye=ad.ctrlKey||ad.altKey||ad.metaKey,
Ve=1===ad.key.length;ud&&("Tab"===ad.key&&ad.preventDefault(),!ye&&Ve&&cd(ad.key));ad.target===od.current&&Do.includes(ad.key)&&(ad.preventDefault(),ud=bc().filter(zf=>!zf.disabled).map(zf=>zf.ref.current),jm.includes(ad.key)&&ud.reverse(),lo(ud))}),onBlur:Jf(a.onBlur,ad=>{ad.currentTarget.contains(ad.target)||(window.clearTimeout(Cd.current),Ge.current="")}),onPointerMove:Jf(a.onPointerMove,Qm(ad=>{const ud=Ce.current!==ad.clientX;ad.currentTarget.contains(ad.target)&&ud&&(lf.current=ad.clientX>
Ce.current?"right":"left",Ce.current=ad.clientX)}))})))))))}),uw=(0,Kg.forwardRef)((a,d)=>{const {disabled:k=!1,onSelect:H}=a,fa=rf(a,["disabled","onSelect"]),la=(0,Kg.useRef)(null),sa=Su("MenuItem",a.__scopeMenu),Ha=hC("MenuItem",a.__scopeMenu);d=Tg(d,la);const Ta=(0,Kg.useRef)(!1);return(0,Kg.createElement)(Uu,Pe({},fa,{ref:d,disabled:k,onClick:Jf(a.onClick,()=>{const Xa=la.current;if(!k&&Xa){const eb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});Xa.addEventListener("menu.itemSelect",
ib=>null===H||void 0===H?void 0:H(ib),{once:!0});Sk(Xa,eb);if(eb.defaultPrevented)Ta.current=!1;else sa.onClose()}}),onPointerDown:Xa=>{var eb;null===(eb=a.onPointerDown)||void 0===eb||eb.call(a,Xa);Ta.current=!0},onPointerUp:Jf(a.onPointerUp,Xa=>{var eb;Ta.current||null===(eb=Xa.currentTarget)||void 0===eb||eb.click()}),onKeyDown:Jf(a.onKeyDown,Xa=>{const eb=""!==Ha.searchRef.current;k||eb&&" "===Xa.key||!Sq.includes(Xa.key)||(Xa.currentTarget.click(),Xa.preventDefault())})}))}),Uu=(0,Kg.forwardRef)((a,
d)=>{const {__scopeMenu:k,disabled:H=!1,textValue:fa}=a,la=rf(a,["__scopeMenu","disabled","textValue"]),sa=hC("MenuItem",k),Ha=sw(k),Ta=(0,Kg.useRef)(null);d=Tg(d,Ta);const [Xa,eb]=(0,Kg.useState)(!1),[ib,Bb]=(0,Kg.useState)("");(0,Kg.useEffect)(()=>{const Mb=Ta.current;if(Mb){var Fb;Bb((null!==(Fb=Mb.textContent)&&void 0!==Fb?Fb:"").trim())}},[la.children]);return(0,Kg.createElement)(Fi.ItemSlot,{scope:k,disabled:H,textValue:null!==fa&&void 0!==fa?fa:ib},(0,Kg.createElement)(ZB,Pe({asChild:!0},Ha,
{focusable:!H}),(0,Kg.createElement)(Lk.div,Pe({role:"menuitem","data-highlighted":Xa?"":void 0,"aria-disabled":H||void 0,"data-disabled":H?"":void 0},la,{ref:d,onPointerMove:Jf(a.onPointerMove,Qm(Mb=>{if(H)sa.onItemLeave(Mb);else sa.onItemEnter(Mb),Mb.defaultPrevented||Mb.currentTarget.focus()})),onPointerLeave:Jf(a.onPointerLeave,Qm(Mb=>sa.onItemLeave(Mb))),onFocus:Jf(a.onFocus,()=>eb(!0)),onBlur:Jf(a.onBlur,()=>eb(!1))}))))});mq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});mq("MenuItemIndicator",
{checked:!1});var iC=(0,Kg.forwardRef)((a,d)=>{a=rf(a,["__scopeMenu"]);return(0,Kg.createElement)(Lk.div,Pe({role:"separator","aria-orientation":"horizontal"},a,{ref:d}))});mq("MenuSub");var ty=a=>{const {__scopeMenu:d,open:k=!1,children:H,dir:fa,onOpenChange:la,modal:sa=!0}=a;a=rw(d);const [Ha,Ta]=(0,Kg.useState)(null),Xa=(0,Kg.useRef)(!1),eb=ii(la),ib=jo(fa);(0,Kg.useEffect)(()=>{const Bb=()=>{Xa.current=!0;document.addEventListener("pointerdown",Mb,{capture:!0,once:!0});document.addEventListener("pointermove",
Mb,{capture:!0,once:!0})},Mb=()=>Xa.current=!1;document.addEventListener("keydown",Bb,{capture:!0});return()=>{document.removeEventListener("keydown",Bb,{capture:!0});document.removeEventListener("pointerdown",Mb,{capture:!0});document.removeEventListener("pointermove",Mb,{capture:!0})}},[]);return(0,Kg.createElement)(gy,a,(0,Kg.createElement)(Pi,{scope:d,open:k,onOpenChange:eb,content:Ha,onContentChange:Ta},(0,Kg.createElement)(ry,{scope:d,onClose:(0,Kg.useCallback)(()=>eb(!1),[eb]),isUsingKeyboardRef:Xa,
dir:ib,modal:sa},H)))},[mH]=hj("DropdownMenu",[Ot]),Tq=Ot(),[Vu,Wu]=mH("DropdownMenu"),vw=(0,dp.forwardRef)((a,d)=>{const {__scopeDropdownMenu:k,disabled:H=!1}=a,fa=rf(a,["__scopeDropdownMenu","disabled"]),la=Wu("DropdownMenuTrigger",k),sa=Tq(k);return(0,dp.createElement)(Ns,Pe({asChild:!0},sa),(0,dp.createElement)(Lk.button,Pe({type:"button",id:la.triggerId,"aria-haspopup":"menu","aria-expanded":la.open,"aria-controls":la.open?la.contentId:void 0,"data-state":la.open?"open":"closed","data-disabled":H?
"":void 0,disabled:H},fa,{ref:Eg(d,la.triggerRef),onPointerDown:Jf(a.onPointerDown,Ha=>{H||0!==Ha.button||!1!==Ha.ctrlKey||(la.onOpenToggle(),la.open||Ha.preventDefault())}),onKeyDown:Jf(a.onKeyDown,Ha=>{if(!H){if(["Enter"," "].includes(Ha.key))la.onOpenToggle();if("ArrowDown"===Ha.key)la.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Ha.key)&&Ha.preventDefault()}})})))}),jC=(0,dp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:k}=a;const H=rf(a,["__scopeDropdownMenu"]),fa=Wu("DropdownMenuContent",
k);k=Tq(k);const la=(0,dp.useRef)(!1);return(0,dp.createElement)(Tu,Pe({id:fa.contentId,"aria-labelledby":fa.triggerId},k,H,{ref:d,onCloseAutoFocus:Jf(a.onCloseAutoFocus,sa=>{var Ha;la.current||null===(Ha=fa.triggerRef.current)||void 0===Ha||Ha.focus();la.current=!1;sa.preventDefault()}),onInteractOutside:Jf(a.onInteractOutside,sa=>{sa=sa.detail.originalEvent;const Ha=0===sa.button&&!0===sa.ctrlKey;sa=2===sa.button||Ha;if(!fa.modal||sa)la.current=!0}),style:Te(Xd({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Ir=(0,dp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:k}=a;a=rf(a,["__scopeDropdownMenu"]);k=Tq(k);return(0,dp.createElement)(uw,Pe({},k,a,{ref:d}))}),nH=a=>{const {__scopeDropdownMenu:d,children:k,dir:H,open:fa,defaultOpen:la,onOpenChange:sa,modal:Ha=!0}=a;a=Tq(d);const Ta=(0,dp.useRef)(null),[Xa=!1,eb]=Nh({prop:fa,defaultProp:la,onChange:sa});return(0,dp.createElement)(Vu,{scope:d,triggerId:Lh(),triggerRef:Ta,contentId:Lh(),open:Xa,onOpenChange:eb,onOpenToggle:(0,dp.useCallback)(()=>eb(ib=>!ib),
[eb]),modal:Ha},(0,dp.createElement)(ty,Pe({},a,{open:Xa,onOpenChange:eb,dir:H,modal:Ha}),k))},Gi=df(da(22)).default.createContext({}),oH=df(da(22)),uy=da(586),Wm=a=>{var {action:d}=a;a=rf(a,["action"]);var {renderers:k}=oH.useContext(Gi);k=null==k?void 0:k.KeyboardShortcut;return(0,uy.jsx)("div",Te(Xd({className:"tl-menu-right-slot"},a),{children:(0,uy.jsx)(k,{action:d})}))};da(22);var Xm=da(586),Ps=Xe(function(){const a=Yf(),d=k=>{k.preventDefault()};return(0,Xm.jsxs)(nH,{children:[(0,Xm.jsx)(vw,
{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,Xm.jsxs)(jC,{onCloseAutoFocus:k=>k.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,Xm.jsxs)(Ir,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,Xm.jsx)(Wm,{action:"whiteboard/zoom-to-fit"})]}),(0,Xm.jsxs)(Ir,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,
children:["Zoom to fit selection",(0,Xm.jsx)(Wm,{action:"whiteboard/zoom-to-selection"})]}),(0,Xm.jsxs)(Ir,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomIn,children:["Zoom in",(0,Xm.jsx)(Wm,{action:"whiteboard/zoom-in"})]}),(0,Xm.jsxs)(Ir,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,Xm.jsx)(Wm,{action:"whiteboard/zoom-out"})]}),(0,Xm.jsxs)(Ir,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,Xm.jsx)(Wm,{action:"whiteboard/reset-zoom"})]})]})]})}),
vy=da(22),ww=["horizontal","vertical"],Jr=(0,vy.forwardRef)((a,d)=>{const {decorative:k,orientation:H="horizontal"}=a;a=rf(a,["decorative","orientation"]);const fa=ww.includes(H)?H:"horizontal";return(0,vy.createElement)(Lk.div,Pe({"data-orientation":fa},k?{role:"none"}:{"aria-orientation":"vertical"===fa?fa:void 0,role:"separator"},a,{ref:d}))});Jr.propTypes={orientation(a,d,k){a=a[d];d=String(a);return a&&!ww.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${k}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var Al=da(586),kC=Xe(function(){const a=Yf(),{handlers:{t:d}}=Ls.useContext(Gi),k=Ls.useCallback(()=>{a.api.undo()},[a]),H=Ls.useCallback(()=>{a.api.redo()},[a]),fa=Ls.useCallback(()=>{a.api.zoomIn()},[a]),la=Ls.useCallback(()=>{a.api.zoomOut()},[a]),sa=Ls.useCallback(()=>{a.api.toggleGrid()},[a]),Ha=Ls.useCallback(()=>{a.api.toggleSnapToGrid()},[a]);return(0,Al.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",children:[!a.readOnly&&
(0,Al.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,Al.jsx)(hg,{tooltip:d("whiteboard/undo"),onClick:k,children:(0,Al.jsx)(kh,{name:"arrow-back-up"})}),(0,Al.jsx)(hg,{tooltip:d("whiteboard/redo"),onClick:H,children:(0,Al.jsx)(kh,{name:"arrow-forward-up"})})]}),(0,Al.jsxs)("div",{className:`tl-toolbar tl-zoom-bar ${a.readOnly?"":"ml-4"}`,children:[(0,Al.jsx)(hg,{tooltip:d("whiteboard/zoom-in"),onClick:fa,id:"tl-zoom-in",children:(0,Al.jsx)(kh,{name:"plus"})}),(0,Al.jsx)(hg,{tooltip:d("whiteboard/zoom-out"),
onClick:la,id:"tl-zoom-out",children:(0,Al.jsx)(kh,{name:"minus"})}),(0,Al.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Al.jsx)(Ps,{})]}),(0,Al.jsxs)("div",{className:"tl-toolbar tl-grid-bar ml-4",children:[(0,Al.jsx)(Mi,{tooltip:d("whiteboard/toggle-grid"),className:"tl-button",pressed:a.settings.showGrid,id:"tl-show-grid",onPressedChange:sa,children:(0,Al.jsx)(kh,{name:"grid-dots"})}),!a.readOnly&&(0,Al.jsx)(Mi,{tooltip:d("whiteboard/snap-to-grid"),className:"tl-button",
pressed:a.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:Ha,children:(0,Al.jsx)(kh,{name:a.settings.snapToGrid?"magnet":"magnet-off"})})]})]})}),xw=df(da(22)),Xu=df(da(31)),Yu=da(586),Zu=a=>`[${a.map(d=>{var k;return null!=(k=null==d?void 0:d.toFixed(2))?k:"-"}).join(", ")}]`,Eo=Xe(()=>{var a;const {viewport:{bounds:d,camera:{point:k,zoom:H}},inputs:fa}=Oe(),la=xw.default.useRef();xw.default.useEffect(()=>{const Ha=document.getElementById("tl-statusbar-anchor");la.current=Ha},[]);const sa=
[["Z",null!=(a=null==H?void 0:H.toFixed(2))?a:"null"],["MP",Zu(fa.currentPoint)],["MS",Zu(fa.currentScreenPoint)],["VP",Zu(k)],["VBR",Zu([d.maxX,d.maxY])]].map(Ha=>Ha.join("")).join("|");a=la.current?Xu.default.createPortal((0,Yu.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:sa}),la.current):null;return(0,Yu.jsx)(Yu.Fragment,{children:a})}),km=df(da(22)),Fo=da(586),Ap=Xe(a=>{var {id:d,icon:k,tooltip:H,tooltipSide:fa="left",handleClick:la}=a;a=rf(a,["id","icon","tooltip","tooltipSide",
"handleClick"]);var sa;const Ha=Yf(),Ta=null==(sa=[...Ha.Tools,Et,Ft])?void 0:sa.find(Xa=>Xa.id===d);sa=(sa=null==Ta?void 0:Ta.shortcut)&&H?(0,Fo.jsxs)("div",{className:"flex",children:[H,(0,Fo.jsx)(Wm,{action:sa})]}):H;return(0,Fo.jsx)(hg,Te(Xd({},a),{tooltipSide:fa,tooltip:sa,"data-tool":d,"data-selected":d===Ha.selectedTool.id,onClick:la,children:"string"===typeof k?(0,Fo.jsx)(kh,{name:k}):k}))}),pj=da(22),[wy]=hj("Popover",[Mt]),$u=Mt(),[xy,Qs]=wy("Popover"),yw=(0,pj.forwardRef)((a,d)=>{var {__scopePopover:k}=
a;const H=rf(a,["__scopePopover"]),fa=Qs("PopoverTrigger",k);k=$u(k);d=Tg(d,fa.triggerRef);a=(0,pj.createElement)(Lk.button,Pe({type:"button","aria-haspopup":"dialog","aria-expanded":fa.open,"aria-controls":fa.contentId,"data-state":fa.open?"open":"closed"},H,{ref:d,onClick:Jf(a.onClick,fa.onOpenToggle)}));return fa.hasCustomAnchor?a:(0,pj.createElement)(ey,Pe({asChild:!0},k),a)}),[,lC]=wy("PopoverPortal",{forceMount:void 0}),zw=(0,pj.forwardRef)((a,d)=>{var k=lC("PopoverContent",a.__scopePopover);
({forceMount:k=k.forceMount}=a);const H=rf(a,["forceMount"]);a=Qs("PopoverContent",a.__scopePopover);return(0,pj.createElement)(Qu,{present:k||a.open},a.modal?(0,pj.createElement)(mC,Pe({},H,{ref:d})):(0,pj.createElement)(Rt,Pe({},H,{ref:d})))}),mC=(0,pj.forwardRef)((a,d)=>{const k=Qs("PopoverContent",a.__scopePopover),H=(0,pj.useRef)(null);d=Tg(d,H);const fa=(0,pj.useRef)(!1);(0,pj.useEffect)(()=>{const la=H.current;if(la)return ny(la)},[]);return(0,pj.createElement)(Ak,{as:kq,allowPinchZoom:!0},
(0,pj.createElement)(yy,Pe({},a,{ref:d,trapFocus:k.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Jf(a.onCloseAutoFocus,la=>{var sa;la.preventDefault();fa.current||null===(sa=k.triggerRef.current)||void 0===sa||sa.focus()}),onPointerDownOutside:Jf(a.onPointerDownOutside,la=>{la=la.detail.originalEvent;const sa=0===la.button&&!0===la.ctrlKey;fa.current=2===la.button||sa},{checkForDefaultPrevented:!1}),onFocusOutside:Jf(a.onFocusOutside,la=>la.preventDefault(),{checkForDefaultPrevented:!1})})))}),
Rt=(0,pj.forwardRef)((a,d)=>{const k=Qs("PopoverContent",a.__scopePopover),H=(0,pj.useRef)(!1);return(0,pj.createElement)(yy,Pe({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:fa=>{var la;null===(la=a.onCloseAutoFocus)||void 0===la||la.call(a,fa);if(!fa.defaultPrevented){var sa;H.current||null===(sa=k.triggerRef.current)||void 0===sa||sa.focus();fa.preventDefault()}H.current=!1},onInteractOutside:fa=>{var la,sa;null===(la=a.onInteractOutside)||void 0===la||la.call(a,fa);fa.defaultPrevented||
(H.current=!0);la=fa.target;(null===(sa=k.triggerRef.current)||void 0===sa?0:sa.contains(la))&&fa.preventDefault()}}))}),yy=(0,pj.forwardRef)((a,d)=>{const {__scopePopover:k,trapFocus:H,onOpenAutoFocus:fa,onCloseAutoFocus:la,disableOutsidePointerEvents:sa,onEscapeKeyDown:Ha,onPointerDownOutside:Ta,onFocusOutside:Xa,onInteractOutside:eb}=a;a=rf(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));
const ib=Qs("PopoverContent",k),Bb=$u(k);Jh();return(0,pj.createElement)(VB,{asChild:!0,loop:!0,trapped:H,onMountAutoFocus:fa,onUnmountAutoFocus:la},(0,pj.createElement)($x,{asChild:!0,disableOutsidePointerEvents:sa,onInteractOutside:eb,onEscapeKeyDown:Ha,onPointerDownOutside:Ta,onFocusOutside:Xa,onDismiss:()=>ib.onOpenChange(!1)},(0,pj.createElement)(fy,Pe({"data-state":ib.open?"open":"closed",role:"dialog",id:ib.contentId},Bb,a,{ref:d,style:Te(Xd({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),
nC=(0,pj.forwardRef)((a,d)=>{var {__scopePopover:k}=a;a=rf(a,["__scopePopover"]);k=$u(k);return(0,pj.createElement)(MB,Pe({},k,a,{ref:d}))}),Rs=a=>{const {__scopePopover:d,children:k,open:H,defaultOpen:fa,onOpenChange:la,modal:sa=!1}=a;a=$u(d);const Ha=(0,pj.useRef)(null),[Ta,Xa]=(0,pj.useState)(!1),[eb=!1,ib]=Nh({prop:H,defaultProp:fa,onChange:la});return(0,pj.createElement)(gy,a,(0,pj.createElement)(xy,{scope:d,contentId:Lh(),triggerRef:Ha,open:eb,onOpenChange:ib,onOpenToggle:(0,pj.useCallback)(()=>
ib(Bb=>!Bb),[ib]),hasCustomAnchor:Ta,onCustomAnchorAdd:(0,pj.useCallback)(()=>Xa(!0),[]),onCustomAnchorRemove:(0,pj.useCallback)(()=>Xa(!1),[]),modal:sa},k))},zy=df(da(22)),nq=da(586),Ay=Xe(function(a){var {popoverSide:d="left",setGeometry:k,activeGeometry:H,chevron:fa=!0}=a;a=rf(a,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:la}}=zy.default.useContext(Gi);const sa=[{id:"box",icon:"square",tooltip:la("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:la("whiteboard/circle")},
{id:"polygon",icon:"triangle",tooltip:la("whiteboard/triangle")}];la={id:"shapes",icon:"triangle-square-circle",tooltip:la("whiteboard/shape")};la=H?sa.find(Ha=>Ha.id===H):la;return(0,nq.jsxs)(Rs,{children:[(0,nq.jsx)(yw,{asChild:!0,children:(0,nq.jsxs)("div",Te(Xd({},a),{className:"tl-geometry-tools-pane-anchor",children:[(0,nq.jsx)(Ap,Te(Xd({},la),{tooltipSide:d})),fa&&(0,nq.jsx)(kh,{"data-selected":H,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,nq.jsxs)(zw,{className:"tl-popover-content",
side:d,sideOffset:15,children:[(0,nq.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":"flex-row"}`,children:sa.map(Ha=>(0,nq.jsx)(Ap,{id:Ha.id,icon:Ha.icon,tooltip:H?Ha.tooltip:"",handleClick:k,tooltipSide:d},Ha.id))}),(0,nq.jsx)(nC,{className:"tl-popover-arrow"})]})]})}),ci=da(22),By=da(22),Cy=["PageUp","PageDown"],Dy=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],av={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown",
"ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[Aw,pH,qH]=Xk("Slider"),[Ey]=hj("Slider",[qH]),[Uq,fp]=Ey("Slider"),St=(0,ci.forwardRef)((a,d)=>{function k(Ce){const He=Tn(Yd,Ce);la(Ce,He)}function H(Ce){la(Ce,od.current)}function fa(){Yd[od.current]!==lf.current[od.current]&&nc(Yd)}function la(Ce,He,{commit:Gd}={commit:!1}){const cd=(String(Xa).split(".")[1]||"").length;Ce=om(Math.round((Ce-Ha)/Xa)*Xa+Ha,cd);
const Hd=nn(Ce,[Ha,Ta]);ve((ad=[])=>{const ud=fi(ad,Hd,He);var ye=Bb*Xa;if(0<ye){const Ve=En(ud);ye=Math.min(...Ve)>=ye}else ye=!0;return ye?(od.current=ud.indexOf(Hd),(ye=String(ud)!==String(ad))&&Gd&&nc(ud),ye?ud:ad):ad})}const {name:sa,min:Ha=0,max:Ta=100,step:Xa=1,orientation:eb="horizontal",disabled:ib=!1,minStepsBetweenThumbs:Bb=0,defaultValue:Mb=[Ha],value:Fb,onValueChange:$b=()=>{},onValueCommit:nc=()=>{},inverted:Sb=!1}=a,gc=rf(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),
[bc,Dc]=(0,ci.useState)(null);d=Tg(d,Ce=>Dc(Ce));const Ic=(0,ci.useRef)(new Set),od=(0,ci.useRef)(0);var Cd="horizontal"===eb;const Ge=bc?!!bc.closest("form"):!0;Cd=Cd?rH:sH;const [Yd=[],ve]=Nh({prop:Fb,defaultProp:Mb,onChange:Ce=>{var He;null===(He=[...Ic.current][od.current])||void 0===He||He.focus();$b(Ce)}}),lf=(0,ci.useRef)(Yd);return(0,ci.createElement)(Uq,{scope:a.__scopeSlider,disabled:ib,min:Ha,max:Ta,valueIndexToChangeRef:od,thumbs:Ic.current,values:Yd,orientation:eb},(0,ci.createElement)(Aw.Provider,
{scope:a.__scopeSlider},(0,ci.createElement)(Aw.Slot,{scope:a.__scopeSlider},(0,ci.createElement)(Cd,Pe({"aria-disabled":ib,"data-disabled":ib?"":void 0},gc,{ref:d,onPointerDown:Jf(gc.onPointerDown,()=>{ib||(lf.current=Yd)}),min:Ha,max:Ta,inverted:Sb,onSlideStart:ib?void 0:k,onSlideMove:ib?void 0:H,onSlideEnd:ib?void 0:fa,onHomeKeyDown:()=>!ib&&la(Ha,0,{commit:!0}),onEndKeyDown:()=>!ib&&la(Ta,Yd.length-1,{commit:!0}),onStepKeyDown:({event:Ce,direction:He})=>{if(!ib){Ce=Cy.includes(Ce.key)||Ce.shiftKey&&
Dy.includes(Ce.key);const Gd=od.current;la(Yd[Gd]+Xa*(Ce?10:1)*He,Gd,{commit:!0})}}})))),Ge&&Yd.map((Ce,He)=>(0,ci.createElement)(Go,{key:He,name:sa?sa+(1<Yd.length?"[]":""):void 0,value:Ce})))}),[Kr,Fy]=Ey("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),rH=(0,ci.forwardRef)((a,d)=>{function k(gc){const bc=Fb.current||Bb.getBoundingClientRect(),Dc=xl([0,bc.width],Sb?[H,fa]:[fa,H]);Fb.current=bc;return Dc(gc-bc.left)}const {min:H,max:fa,dir:la,inverted:sa,onSlideStart:Ha,onSlideMove:Ta,
onSlideEnd:Xa,onStepKeyDown:eb}=a,ib=rf(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Bb,Mb]=(0,ci.useState)(null);d=Tg(d,gc=>Mb(gc));const Fb=(0,ci.useRef)(),$b=jo(la),nc="ltr"===$b,Sb=nc&&!sa||!nc&&sa;return(0,ci.createElement)(Kr,{scope:a.__scopeSlider,startEdge:Sb?"left":"right",endEdge:Sb?"right":"left",direction:Sb?1:-1,size:"width"},(0,ci.createElement)(Gy,Pe({dir:$b,"data-orientation":"horizontal"},ib,{ref:d,style:Te(Xd({},ib.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),
onSlideStart:gc=>{gc=k(gc.clientX);null===Ha||void 0===Ha||Ha(gc)},onSlideMove:gc=>{gc=k(gc.clientX);null===Ta||void 0===Ta||Ta(gc)},onSlideEnd:()=>{Fb.current=void 0;null===Xa||void 0===Xa||Xa()},onStepKeyDown:gc=>{const bc=av[Sb?"from-left":"from-right"].includes(gc.key);null===eb||void 0===eb||eb({event:gc,direction:bc?-1:1})}})))}),sH=(0,ci.forwardRef)((a,d)=>{function k(Fb){const $b=Bb.current||ib.current.getBoundingClientRect(),nc=xl([0,$b.height],Mb?[fa,H]:[H,fa]);Bb.current=$b;return nc(Fb-
$b.top)}const {min:H,max:fa,inverted:la,onSlideStart:sa,onSlideMove:Ha,onSlideEnd:Ta,onStepKeyDown:Xa}=a,eb=rf(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),ib=(0,ci.useRef)(null);d=Tg(d,ib);const Bb=(0,ci.useRef)(),Mb=!la;return(0,ci.createElement)(Kr,{scope:a.__scopeSlider,startEdge:Mb?"bottom":"top",endEdge:Mb?"top":"bottom",size:"height",direction:Mb?1:-1},(0,ci.createElement)(Gy,Pe({"data-orientation":"vertical"},eb,{ref:d,style:Te(Xd({},eb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),
onSlideStart:Fb=>{Fb=k(Fb.clientY);null===sa||void 0===sa||sa(Fb)},onSlideMove:Fb=>{Fb=k(Fb.clientY);null===Ha||void 0===Ha||Ha(Fb)},onSlideEnd:()=>{Bb.current=void 0;null===Ta||void 0===Ta||Ta()},onStepKeyDown:Fb=>{const $b=av[Mb?"from-bottom":"from-top"].includes(Fb.key);null===Xa||void 0===Xa||Xa({event:Fb,direction:$b?-1:1})}})))}),Gy=(0,ci.forwardRef)((a,d)=>{const {__scopeSlider:k,onSlideStart:H,onSlideMove:fa,onSlideEnd:la,onHomeKeyDown:sa,onEndKeyDown:Ha,onStepKeyDown:Ta}=a,Xa=rf(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
eb=fp("Slider",k);return(0,ci.createElement)(Lk.span,Pe({},Xa,{ref:d,onKeyDown:Jf(a.onKeyDown,ib=>{"Home"===ib.key?(sa(ib),ib.preventDefault()):"End"===ib.key?(Ha(ib),ib.preventDefault()):Cy.concat(Dy).includes(ib.key)&&(Ta(ib),ib.preventDefault())}),onPointerDown:Jf(a.onPointerDown,ib=>{const Bb=ib.target;Bb.setPointerCapture(ib.pointerId);ib.preventDefault();eb.thumbs.has(Bb)?Bb.focus():H(ib)}),onPointerMove:Jf(a.onPointerMove,ib=>{ib.target.hasPointerCapture(ib.pointerId)&&fa(ib)}),onPointerUp:Jf(a.onPointerUp,
ib=>{const Bb=ib.target;Bb.hasPointerCapture(ib.pointerId)&&(Bb.releasePointerCapture(ib.pointerId),la(ib))})}))}),Me=(0,ci.forwardRef)((a,d)=>{var {__scopeSlider:k}=a;a=rf(a,["__scopeSlider"]);k=fp("SliderTrack",k);return(0,ci.createElement)(Lk.span,Pe({"data-disabled":k.disabled?"":void 0,"data-orientation":k.orientation},a,{ref:d}))}),ag=(0,ci.forwardRef)((a,d)=>{var {__scopeSlider:k}=a;const H=rf(a,["__scopeSlider"]),fa=fp("SliderRange",k);k=Fy("SliderRange",k);var la=(0,ci.useRef)(null);d=Tg(d,
la);var sa=fa.values.length;la=fa.values.map(Ha=>Ri(Ha,fa.min,fa.max));sa=1<sa?Math.min(...la):0;la=100-Math.max(...la);return(0,ci.createElement)(Lk.span,Pe({"data-orientation":fa.orientation,"data-disabled":fa.disabled?"":void 0},H,{ref:d,style:Te(Xd({},a.style),{[k.startEdge]:sa+"%",[k.endEdge]:la+"%"})}))}),Se=(0,ci.forwardRef)((a,d)=>{const k=pH(a.__scopeSlider),[H,fa]=(0,ci.useState)(null);d=Tg(d,sa=>fa(sa));const la=(0,ci.useMemo)(()=>H?k().findIndex(sa=>sa.ref.current===H):-1,[k,H]);return(0,ci.createElement)(Cf,
Pe({},a,{ref:d,index:la}))}),Cf=(0,ci.forwardRef)((a,d)=>{const {__scopeSlider:k,index:H}=a,fa=rf(a,["__scopeSlider","index"]),la=fp("SliderThumb",k),sa=Fy("SliderThumb",k),[Ha,Ta]=(0,ci.useState)(null);d=Tg(d,Mb=>Ta(Mb));var Xa=Yh(Ha);const eb=la.values[H],ib=void 0===eb?0:Ri(eb,la.min,la.max),Bb=pp(H,la.values.length);Xa=(Xa=null===Xa||void 0===Xa?void 0:Xa[sa.size])?wl(Xa,ib,sa.direction):0;(0,ci.useEffect)(()=>{if(Ha)return la.thumbs.add(Ha),()=>{la.thumbs.delete(Ha)}},[Ha,la.thumbs]);return(0,ci.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[sa.startEdge]:`calc(${ib}% + ${Xa}px)`}},(0,ci.createElement)(Aw.ItemSlot,{scope:a.__scopeSlider},(0,ci.createElement)(Lk.span,Pe({role:"slider","aria-label":a["aria-label"]||Bb,"aria-valuemin":la.min,"aria-valuenow":eb,"aria-valuemax":la.max,"aria-orientation":la.orientation,"data-orientation":la.orientation,"data-disabled":la.disabled?"":void 0,tabIndex:la.disabled?void 0:0},fa,{ref:d,style:void 0===eb?{display:"none"}:
a.style,onFocus:Jf(a.onFocus,()=>{la.valueIndexToChangeRef.current=H})}))))}),Go=a=>{const {value:d}=a;a=rf(a,["value"]);const k=(0,ci.useRef)(null),H=Dn(d);(0,ci.useEffect)(()=>{const fa=k.current,la=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(H!==d&&la){const sa=new Event("input",{bubbles:!0});la.call(fa,d);fa.dispatchEvent(sa)}},[H,d]);return(0,ci.createElement)("input",Pe({style:{display:"none"}},a,{ref:k,defaultValue:d}))},ml=St,bv=Me,ck=ag,oq=Se,Ae=df(da(22)),
Gf=da(586),In=Xe(a=>{var {side:d,align:k,alignOffset:H,label:fa,arrow:la,children:sa,border:Ha}=a;a=rf(a,"side align alignOffset label arrow children border".split(" "));const Ta=Ae.useRef(null),[Xa,eb]=Ae.useState(!1),{viewport:{bounds:ib,camera:{point:Bb,zoom:Mb}}}=Yf(),[Fb,$b]=Ae.useState(0);Ae.useEffect(()=>{if(Ta.current&&Xa){var nc=Ta.current.getBoundingClientRect();ff.boundsContain(ib,{minX:nc.x,minY:nc.y,maxX:nc.right,maxY:nc.bottom,width:nc.width,height:nc.height})||$b(Sb=>Sb+1)}},[Bb[0],
Bb[1],Mb,Xa]);return(0,Gf.jsxs)(Rs,{onOpenChange:nc=>eb(nc),children:[(0,Gf.jsx)(yw,Te(Xd({},a),{"data-border":Ha,className:"tl-button tl-popover-trigger-button",children:fa})),(0,Gf.jsxs)(zw,{ref:Ta,className:"tl-popover-content",align:k,alignOffset:H,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[sa,la&&(0,Gf.jsx)(nC,{className:"tl-popover-arrow"})]},"popover-content-"+Fb)]})}),xe=df(da(22)),Bk=da(586),oC=df(da(22)),kf=da(22),Tt=da(31),Wk=df(da(22)),Bl=
da(22),cv=da(22),Jn=da(31),nl="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const k=(0,cv.forwardRef)((H,fa)=>{var {asChild:la}=H;H=rf(H,["asChild"]);la=la?kq:d;(0,cv.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,cv.createElement)(la,Pe({},H,{ref:fa}))});k.displayName=`Primitive.${d}`;return Te(Xd({},a),{[d]:k})},{}),Vq,Bp=(0,Bl.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wg=(0,Bl.forwardRef)((a,
d)=>{var k;const {disableOutsidePointerEvents:H=!1,onEscapeKeyDown:fa,onPointerDownOutside:la,onFocusOutside:sa,onInteractOutside:Ha,onDismiss:Ta}=a,Xa=rf(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),eb=(0,Bl.useContext)(Bp),[ib,Bb]=(0,Bl.useState)(null),Mb=null!==(k=null===ib||void 0===ib?void 0:ib.ownerDocument)&&void 0!==k?k:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Fb]=(0,Bl.useState)({});
d=Tg(d,bc=>Bb(bc));k=Array.from(eb.layers);var [$b]=[...eb.layersWithOutsidePointerEventsDisabled].slice(-1);$b=k.indexOf($b);const nc=ib?k.indexOf(ib):-1;k=0<eb.layersWithOutsidePointerEventsDisabled.size;const Sb=nc>=$b;$b=Po(bc=>{const Dc=bc.target,Ic=[...eb.branches].some(od=>od.contains(Dc));Sb&&!Ic&&(null===la||void 0===la||la(bc),null===Ha||void 0===Ha||Ha(bc),bc.defaultPrevented||null===Ta||void 0===Ta||Ta())},Mb);const gc=Yk(bc=>{const Dc=bc.target;[...eb.branches].some(Ic=>Ic.contains(Dc))||
(null===sa||void 0===sa||sa(bc),null===Ha||void 0===Ha||Ha(bc),bc.defaultPrevented||null===Ta||void 0===Ta||Ta())},Mb);Jk(bc=>{nc===eb.layers.size-1&&(null===fa||void 0===fa||fa(bc),!bc.defaultPrevented&&Ta&&(bc.preventDefault(),Ta()))},Mb);(0,Bl.useEffect)(()=>{if(ib)return H&&(0===eb.layersWithOutsidePointerEventsDisabled.size&&(Vq=Mb.body.style.pointerEvents,Mb.body.style.pointerEvents="none"),eb.layersWithOutsidePointerEventsDisabled.add(ib)),eb.layers.add(ib),pm(),()=>{H&&1===eb.layersWithOutsidePointerEventsDisabled.size&&
(Mb.body.style.pointerEvents=Vq)}},[ib,Mb,H,eb]);(0,Bl.useEffect)(()=>()=>{ib&&(eb.layers.delete(ib),eb.layersWithOutsidePointerEventsDisabled.delete(ib),pm())},[ib,eb]);(0,Bl.useEffect)(()=>{const bc=()=>Fb({});document.addEventListener("dismissableLayer.update",bc);return()=>document.removeEventListener("dismissableLayer.update",bc)},[]);return(0,Bl.createElement)(nl.div,Pe({},Xa,{ref:d,style:Xd({pointerEvents:k?Sb?"auto":"none":void 0},a.style),onFocusCapture:Jf(a.onFocusCapture,gc.onFocusCapture),
onBlurCapture:Jf(a.onBlurCapture,gc.onBlurCapture),onPointerDownCapture:Jf(a.onPointerDownCapture,$b.onPointerDownCapture)}))}),ol=da(22),pq={bubbles:!1,cancelable:!0},pC=(0,ol.forwardRef)((a,d)=>{const {loop:k=!1,trapped:H=!1,onMountAutoFocus:fa,onUnmountAutoFocus:la}=a;a=rf(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [sa,Ha]=(0,ol.useState)(null),Ta=ii(fa),Xa=ii(la),eb=(0,ol.useRef)(null);d=Tg(d,Mb=>Ha(Mb));const ib=(0,ol.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,ol.useEffect)(()=>{if(H){let Mb=function($b){!ib.paused&&sa&&($b=$b.target,sa.contains($b)?eb.current=$b:Dl(eb.current,{select:!0}))},Fb=function($b){!ib.paused&&sa&&(sa.contains($b.relatedTarget)||Dl(eb.current,{select:!0}))};document.addEventListener("focusin",Mb);document.addEventListener("focusout",Fb);return()=>{document.removeEventListener("focusin",Mb);document.removeEventListener("focusout",Fb)}}},[H,sa,ib.paused]);(0,ol.useEffect)(()=>{if(sa){Lr.add(ib);const Mb=document.activeElement;
if(!sa.contains(Mb)){const Fb=new CustomEvent("focusScope.autoFocusOnMount",pq);sa.addEventListener("focusScope.autoFocusOnMount",Ta);sa.dispatchEvent(Fb);Fb.defaultPrevented||(dn(ug(Np(sa)),{select:!0}),document.activeElement===Mb&&Dl(sa))}return()=>{sa.removeEventListener("focusScope.autoFocusOnMount",Ta);setTimeout(()=>{const Fb=new CustomEvent("focusScope.autoFocusOnUnmount",pq);sa.addEventListener("focusScope.autoFocusOnUnmount",Xa);sa.dispatchEvent(Fb);Fb.defaultPrevented||Dl(null!==Mb&&void 0!==
Mb?Mb:document.body,{select:!0});sa.removeEventListener("focusScope.autoFocusOnUnmount",Xa);Lr.remove(ib)},0)}}},[sa,Ta,Xa,ib]);const Bb=(0,ol.useCallback)(Mb=>{if((k||H)&&!ib.paused){var Fb=document.activeElement;if("Tab"===Mb.key&&!Mb.altKey&&!Mb.ctrlKey&&!Mb.metaKey&&Fb){const nc=Mb.currentTarget;var $b=nc;const Sb=Np($b),gc=no(Sb,$b);$b=no(Sb.reverse(),$b);const [bc,Dc]=[gc,$b];bc&&Dc?Mb.shiftKey||Fb!==Dc?Mb.shiftKey&&Fb===bc&&(Mb.preventDefault(),k&&Dl(Dc,{select:!0})):(Mb.preventDefault(),k&&
Dl(bc,{select:!0})):Fb===nc&&Mb.preventDefault()}}},[k,H,ib.paused]);return(0,ol.createElement)(nl.div,Pe({tabIndex:-1},a,{ref:d,onKeyDown:Bb}))}),Lr=function(){let a=[];return{add(d){const k=a[0];d===k||null!==k&&void 0!==k&&k.pause();a=tn(a,d);a.unshift(d)},remove(d){var k;a=tn(a,d);null===(k=a[0])||void 0===k||k.resume()}}}(),Zf=da(22),[Bw,qq]=hj("Popper"),[Gg,Ut]=Bw("Popper"),Qj=(0,Zf.forwardRef)((a,d)=>{const {__scopePopper:k,virtualRef:H}=a;a=rf(a,["__scopePopper","virtualRef"]);const fa=Ut("PopperAnchor",
k),la=(0,Zf.useRef)(null);d=Tg(d,la);(0,Zf.useEffect)(()=>{fa.onAnchorChange((null===H||void 0===H?void 0:H.current)||la.current)});return H?null:(0,Zf.createElement)(nl.div,Pe({},a,{ref:d}))}),[pl]=Bw("PopperContent"),[Vt,dv]=Bw("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Hy=(0,Zf.forwardRef)((a,d)=>{var k,H,fa,la,sa,Ha,Ta,Xa;const {__scopePopper:eb,side:ib="bottom",sideOffset:Bb=0,align:Mb="center",alignOffset:Fb=0,arrowPadding:$b=0,collisionBoundary:nc=[],collisionPadding:Sb=0,sticky:gc=
"partial",hideWhenDetached:bc=!1,avoidCollisions:Dc=!0,onPlaced:Ic}=a,od=rf(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),Cd=Ut("PopperContent",eb),[Ge,Yd]=(0,Zf.useState)(null);d=Tg(d,wq=>Yd(wq));const [ve,lf]=(0,Zf.useState)(null);var Ce=Yh(ve),He=null!==(k=null===Ce||void 0===Ce?void 0:Ce.width)&&void 0!==k?k:0;k=null!==(H=null===Ce||void 0===Ce?void 0:Ce.height)&&void 0!==H?H:0;H=
ib+("center"!==Mb?"-"+Mb:"");Ce="number"===typeof Sb?Sb:Xd({top:0,right:0,bottom:0,left:0},Sb);const Gd=Array.isArray(nc)?nc:[nc],cd=0<Gd.length;Ce={padding:Ce,boundary:Gd.filter(Op),altBoundary:cd};const {reference:Hd,floating:ad,strategy:ud,x:ye,y:Ve,placement:zf,middlewareData:mf,update:Nf}=Uf({strategy:"fixed",placement:H,whileElementsMounted:Pf,middleware:[Wt(),FB({mainAxis:Bb+k,alignmentAxis:Fb}),Dc?GB(Xd({mainAxis:!0,crossAxis:!1,limiter:"partial"===gc?HB():void 0},Ce)):void 0,ve?KB({element:ve,
padding:$b}):void 0,Dc?DB(Xd({},Ce)):void 0,pG(Te(Xd({},Ce),{apply:({elements:wq,availableWidth:tu,availableHeight:DD})=>{wq.floating.style.setProperty("--radix-popper-available-width",`${tu}px`);wq.floating.style.setProperty("--radix-popper-available-height",`${DD}px`)}})),Wl({arrowWidth:He,arrowHeight:k}),bc?EB({strategy:"referenceHidden"}):void 0].filter(Pp)});Dm(()=>{Hd(Cd.anchor)},[Hd,Cd.anchor]);const Hg=null!==ye&&null!==Ve,[uf,Cg]=un(zf),bh=ii(Ic);Dm(()=>{Hg&&(null===bh||void 0===bh||bh())},
[Hg,bh]);He=null===(fa=mf.arrow)||void 0===fa?void 0:fa.x;fa=null===(la=mf.arrow)||void 0===la?void 0:la.y;la=0!==(null===(sa=mf.arrow)||void 0===sa?void 0:sa.centerOffset);const [Qi,ik]=(0,Zf.useState)();Dm(()=>{Ge&&ik(window.getComputedStyle(Ge).zIndex)},[Ge]);const {hasParent:Ek,positionUpdateFns:Mp}=dv("PopperContent",eb),hr=!Ek;(0,Zf.useLayoutEffect)(()=>{if(!hr)return Mp.add(Nf),()=>{Mp.delete(Nf)}},[hr,Mp,Nf]);Dm(()=>{hr&&Hg&&Array.from(Mp).reverse().forEach(wq=>requestAnimationFrame(wq))},
[hr,Hg,Mp]);sa=Te(Xd({"data-side":uf,"data-align":Cg},od),{ref:d,style:Te(Xd({},od.style),{animation:Hg?void 0:"none",opacity:null!==(Ha=mf.hide)&&void 0!==Ha&&Ha.referenceHidden?0:void 0})});return(0,Zf.createElement)("div",{ref:ad,"data-radix-popper-content-wrapper":"",style:{position:ud,left:0,top:0,transform:Hg?`translate3d(${Math.round(ye)}px, ${Math.round(Ve)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Qi,["--radix-popper-transform-origin"]:[null===(Ta=mf.transformOrigin)||
void 0===Ta?void 0:Ta.x,null===(Xa=mf.transformOrigin)||void 0===Xa?void 0:Xa.y].join(" ")},dir:a.dir},(0,Zf.createElement)(pl,{scope:eb,placedSide:uf,onArrowChange:lf,arrowX:He,arrowY:fa,shouldHideArrow:la},hr?(0,Zf.createElement)(Vt,{scope:eb,hasParent:!0,positionUpdateFns:Mp},(0,Zf.createElement)(nl.div,sa)):(0,Zf.createElement)(nl.div,sa)))}),Wt=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:k}=a,{width:H,height:fa}=d.reference;k.floating.style.setProperty("--radix-popper-anchor-width",
`${H}px`);k.floating.style.setProperty("--radix-popper-anchor-height",`${fa}px`);return{}}}),Wl=a=>({name:"transformOrigin",options:a,fn(d){var k,H,fa,la,sa;const {placement:Ha,rects:Ta,middlewareData:Xa}=d,eb=(d=0!==(null===(k=Xa.arrow)||void 0===k?void 0:k.centerOffset))?0:a.arrowWidth;k=d?0:a.arrowHeight;const [ib,Bb]=un(Ha),Mb={start:"0%",center:"50%",end:"100%"}[Bb],Fb=(null!==(H=null===(fa=Xa.arrow)||void 0===fa?void 0:fa.x)&&void 0!==H?H:0)+eb/2;H=(null!==(la=null===(sa=Xa.arrow)||void 0===
sa?void 0:sa.y)&&void 0!==la?la:0)+k/2;sa=la="";"bottom"===ib?(la=d?Mb:`${Fb}px`,sa=`${-k}px`):"top"===ib?(la=d?Mb:`${Fb}px`,sa=`${Ta.floating.height+k}px`):"right"===ib?(la=`${-k}px`,sa=d?Mb:`${H}px`):"left"===ib&&(la=`${Ta.floating.width+k}px`,sa=d?Mb:`${H}px`);return{data:{x:la,y:sa}}}}),qC=a=>{const {__scopePopper:d,children:k}=a,[H,fa]=(0,Zf.useState)(null);return(0,Zf.createElement)(Gg,{scope:d,anchor:H,onAnchorChange:fa},k)},rC=da(22),tH=df(da(31)),uH=(0,rC.forwardRef)((a,d)=>{var k;const {container:H=
null===globalThis||void 0===globalThis?void 0:null===(k=globalThis.document)||void 0===k?void 0:k.body}=a;a=rf(a,["container"]);return H?tH.default.createPortal((0,rC.createElement)(nl.div,Pe({},a,{ref:d})),H):null}),Wq=da(22),Mr=(0,Wq.forwardRef)((a,d)=>(0,Wq.createElement)(nl.span,Pe({},a,{ref:d,style:Xd({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),Ej=[" ","Enter","ArrowUp","ArrowDown"],
sC=[" ","Enter"],[Xt,Cw,Nr]=function(a){var d=a+"CollectionProvider";const [k,H]=hj(d),[fa,la]=k(d,{collectionRef:{current:null},itemMap:new Map}),sa=eb=>{const {scope:ib,children:Bb}=eb;eb=Wk.default.useRef(null);const Mb=Wk.default.useRef(new Map).current;return Wk.default.createElement(fa,{scope:ib,itemMap:Mb,collectionRef:eb},Bb)};Object.assign(sa,{displayName:d});const Ha=a+"CollectionSlot";d=Wk.default.forwardRef((eb,ib)=>{const {scope:Bb,children:Mb}=eb;eb=la(Ha,Bb);ib=Tg(ib,eb.collectionRef);
return Wk.default.createElement(kq,{ref:ib},Mb)});Object.assign(d,{displayName:Ha});const Ta=a+"CollectionItemSlot",Xa=Wk.default.forwardRef((eb,ib)=>{const {scope:Bb,children:Mb}=eb,Fb=rf(eb,["scope","children"]),$b=Wk.default.useRef(null);eb=Tg(ib,$b);const nc=la(Ta,Bb);Wk.default.useEffect(()=>{nc.itemMap.set($b,Xd({ref:$b},Fb));return()=>void nc.itemMap.delete($b)});return Wk.default.createElement(kq,{["data-radix-collection-item"]:"",ref:eb},Mb)});Object.assign(Xa,{displayName:Ta});return[{Provider:sa,
Slot:d,ItemSlot:Xa},function(eb){const ib=la(a+"CollectionConsumer",eb);return Wk.default.useCallback(()=>{const Bb=ib.collectionRef.current;if(!Bb)return[];const Mb=Array.from(Bb.querySelectorAll("[data-radix-collection-item]"));return Array.from(ib.itemMap.values()).sort((Fb,$b)=>Mb.indexOf(Fb.ref.current)-Mb.indexOf($b.ref.current))},[ib.collectionRef,ib.itemMap])},H]}("Select"),[Yt]=hj("Select",[Nr,qq]),Zt=qq(),[vH,rq]=Yt("Select"),[Iy,Jy]=Yt("Select"),Ky=(0,kf.forwardRef)((a,d)=>{const {__scopeSelect:k,
disabled:H=!1}=a;a=rf(a,["__scopeSelect","disabled"]);const fa=Zt(k),la=rq("SelectTrigger",k),sa=la.disabled||H;d=Tg(d,la.onTriggerChange);const Ha=Cw(k),[Ta,Xa,eb]=Gl(ib=>{const Bb=Ha().filter(Fb=>!Fb.disabled),Mb=Bb.find(Fb=>Fb.value===la.value);ib=Zl(Bb,ib,Mb);if(void 0!==ib)la.onValueChange(ib.value)});return(0,kf.createElement)(Qj,Pe({asChild:!0},fa),(0,kf.createElement)(nl.button,Pe({type:"button",role:"combobox","aria-controls":la.contentId,"aria-expanded":la.open,"aria-required":la.required,
"aria-autocomplete":"none",dir:la.dir,"data-state":la.open?"open":"closed",disabled:sa,"data-disabled":sa?"":void 0,"data-placeholder":void 0===la.value?"":void 0},a,{ref:d,onClick:Jf(a.onClick,ib=>{ib.currentTarget.focus()}),onPointerDown:Jf(a.onPointerDown,ib=>{const Bb=ib.target;Bb.hasPointerCapture(ib.pointerId)&&Bb.releasePointerCapture(ib.pointerId);0===ib.button&&!1===ib.ctrlKey&&(sa||(la.onOpenChange(!0),eb()),la.triggerPointerDownPosRef.current={x:Math.round(ib.pageX),y:Math.round(ib.pageY)},
ib.preventDefault())}),onKeyDown:Jf(a.onKeyDown,ib=>{const Bb=""!==Ta.current;ib.ctrlKey||ib.altKey||ib.metaKey||1!==ib.key.length||Xa(ib.key);Bb&&" "===ib.key||!Ej.includes(ib.key)||(sa||(la.onOpenChange(!0),eb()),ib.preventDefault())})})))}),tC=(0,kf.forwardRef)((a,d)=>{const {__scopeSelect:k,children:H,placeholder:fa}=a;a=rf(a,["__scopeSelect","className","style","children","placeholder"]);const la=rq("SelectValue",k),{onValueNodeHasChildrenChange:sa}=la,Ha=void 0!==H;d=Tg(d,la.onValueNodeChange);
Dm(()=>{sa(Ha)},[sa,Ha]);return(0,kf.createElement)(nl.span,Pe({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===la.value&&void 0!==fa?fa:H)}),uC=(0,kf.forwardRef)((a,d)=>{const {children:k}=a;a=rf(a,["__scopeSelect","children"]);return(0,kf.createElement)(nl.span,Pe({"aria-hidden":!0},a,{ref:d}),k||"")}),vC=(0,kf.forwardRef)((a,d)=>{const k=rq("SelectContent",a.__scopeSelect),[H,fa]=(0,kf.useState)();Dm(()=>{fa(new DocumentFragment)},[]);return k.open?(0,kf.createElement)(Ly,Pe({},a,{ref:d})):
H?(0,Tt.createPortal)((0,kf.createElement)(Or,{scope:a.__scopeSelect},(0,kf.createElement)(Xt.Slot,{scope:a.__scopeSelect},(0,kf.createElement)("div",null,a.children))),H):null}),[Or,Ho]=Yt("SelectContent"),Ly=(0,kf.forwardRef)((a,d)=>{const {__scopeSelect:k,position:H="item-aligned",onCloseAutoFocus:fa,onEscapeKeyDown:la,onPointerDownOutside:sa,side:Ha,sideOffset:Ta,align:Xa,alignOffset:eb,arrowPadding:ib,collisionBoundary:Bb,collisionPadding:Mb,sticky:Fb,hideWhenDetached:$b,avoidCollisions:nc}=
a;a=rf(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Sb=rq("SelectContent",k),[gc,bc]=(0,kf.useState)(null),[Dc,Ic]=(0,kf.useState)(null);d=Tg(d,uf=>bc(uf));const [od,Cd]=(0,kf.useState)(null),[Ge,Yd]=(0,kf.useState)(null),ve=Cw(k),[lf,Ce]=(0,kf.useState)(!1),He=(0,kf.useRef)(!1);(0,kf.useEffect)(()=>{if(gc)return ny(gc)},[gc]);
Jh();const Gd=(0,kf.useCallback)(uf=>{const [Cg,...bh]=ve().map(Ek=>Ek.ref.current),[Qi]=bh.slice(-1),ik=document.activeElement;for(const Ek of uf){if(Ek===ik)break;null===Ek||void 0===Ek||Ek.scrollIntoView({block:"nearest"});Ek===Cg&&Dc&&(Dc.scrollTop=0);Ek===Qi&&Dc&&(Dc.scrollTop=Dc.scrollHeight);null===Ek||void 0===Ek||Ek.focus();if(document.activeElement!==ik)break}},[ve,Dc]),cd=(0,kf.useCallback)(()=>Gd([od,gc]),[Gd,od,gc]);(0,kf.useEffect)(()=>{lf&&cd()},[lf,cd]);const {onOpenChange:Hd,triggerPointerDownPosRef:ad}=
Sb;(0,kf.useEffect)(()=>{if(gc){var uf=0,Cg=0;const bh=ik=>{var Ek,Mp,hr,wq;uf=Math.abs(Math.round(ik.pageX)-(null!==(Ek=null===(Mp=ad.current)||void 0===Mp?void 0:Mp.x)&&void 0!==Ek?Ek:0));Cg=Math.abs(Math.round(ik.pageY)-(null!==(hr=null===(wq=ad.current)||void 0===wq?void 0:wq.y)&&void 0!==hr?hr:0))},Qi=ik=>{10>=uf&&10>=Cg?ik.preventDefault():gc.contains(ik.target)||Hd(!1);document.removeEventListener("pointermove",bh);ad.current=null};null!==ad.current&&(document.addEventListener("pointermove",
bh),document.addEventListener("pointerup",Qi,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",bh);document.removeEventListener("pointerup",Qi,{capture:!0})}}},[gc,Hd,ad]);(0,kf.useEffect)(()=>{const uf=()=>Hd(!1);window.addEventListener("blur",uf);window.addEventListener("resize",uf);return()=>{window.removeEventListener("blur",uf);window.removeEventListener("resize",uf)}},[Hd]);const [ud,ye]=Gl(uf=>{const Cg=ve().filter(ik=>!ik.disabled),bh=Cg.find(ik=>ik.ref.current===
document.activeElement),Qi=Zl(Cg,uf,bh);Qi&&setTimeout(()=>Qi.ref.current.focus())}),Ve=(0,kf.useCallback)((uf,Cg,bh)=>{bh=!He.current&&!bh;if(void 0!==Sb.value&&Sb.value===Cg||bh)Cd(uf),bh&&(He.current=!0)},[Sb.value]),zf=(0,kf.useCallback)(()=>null===gc||void 0===gc?void 0:gc.focus(),[gc]),mf=(0,kf.useCallback)((uf,Cg,bh)=>{bh=!He.current&&!bh;(void 0!==Sb.value&&Sb.value===Cg||bh)&&Yd(uf)},[Sb.value]),Nf="popper"===H?My:wC,Hg=Nf===My?{side:Ha,sideOffset:Ta,align:Xa,alignOffset:eb,arrowPadding:ib,
collisionBoundary:Bb,collisionPadding:Mb,sticky:Fb,hideWhenDetached:$b,avoidCollisions:nc}:{};return(0,kf.createElement)(Or,{scope:k,content:gc,viewport:Dc,onViewportChange:Ic,itemRefCallback:Ve,selectedItem:od,onItemLeave:zf,itemTextRefCallback:mf,focusSelectedItem:cd,selectedItemText:Ge,position:H,isPositioned:lf,searchRef:ud},(0,kf.createElement)(Ak,{as:kq,allowPinchZoom:!0},(0,kf.createElement)(pC,{asChild:!0,trapped:Sb.open,onMountAutoFocus:uf=>{uf.preventDefault()},onUnmountAutoFocus:Jf(fa,
uf=>{var Cg;null===(Cg=Sb.trigger)||void 0===Cg||Cg.focus({preventScroll:!0});uf.preventDefault()})},(0,kf.createElement)(wg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:la,onPointerDownOutside:sa,onFocusOutside:uf=>uf.preventDefault(),onDismiss:()=>Sb.onOpenChange(!1)},(0,kf.createElement)(Nf,Pe({role:"listbox",id:Sb.contentId,"data-state":Sb.open?"open":"closed",dir:Sb.dir,onContextMenu:uf=>uf.preventDefault()},a,Hg,{onPlaced:()=>Ce(!0),ref:d,style:Xd({display:"flex",flexDirection:"column",
outline:"none"},a.style),onKeyDown:Jf(a.onKeyDown,uf=>{var Cg=uf.ctrlKey||uf.altKey||uf.metaKey;"Tab"===uf.key&&uf.preventDefault();Cg||1!==uf.key.length||ye(uf.key);if(["ArrowUp","ArrowDown","Home","End"].includes(uf.key)){let bh=ve().filter(Qi=>!Qi.disabled).map(Qi=>Qi.ref.current);["ArrowUp","End"].includes(uf.key)&&(bh=bh.slice().reverse());["ArrowUp","ArrowDown"].includes(uf.key)&&(Cg=bh.indexOf(uf.target),bh=bh.slice(Cg+1));setTimeout(()=>Gd(bh));uf.preventDefault()}})}))))))}),wC=(0,kf.forwardRef)((a,
d)=>{const {__scopeSelect:k,onPlaced:H}=a;a=rf(a,["__scopeSelect","onPlaced"]);const fa=rq("SelectContent",k);var la=Ho("SelectContent",k);const [sa,Ha]=(0,kf.useState)(null),[Ta,Xa]=(0,kf.useState)(null);d=Tg(d,Dc=>Xa(Dc));const eb=Cw(k),ib=(0,kf.useRef)(!1),Bb=(0,kf.useRef)(!0),{viewport:Mb,selectedItem:Fb,selectedItemText:$b,focusSelectedItem:nc}=la,Sb=(0,kf.useCallback)(()=>{if(fa.trigger&&fa.valueNode&&sa&&Ta&&Mb&&Fb&&$b){var Dc=fa.trigger.getBoundingClientRect(),Ic=Ta.getBoundingClientRect(),
od=fa.valueNode.getBoundingClientRect(),Cd=$b.getBoundingClientRect();"rtl"!==fa.dir?(Cd=od.left-(Cd.left-Ic.left),od=Dc.width+(Dc.left-Cd),Ic=nn(Cd,[10,window.innerWidth-10-Math.max(od,Ic.width)]),sa.style.minWidth=od+"px",sa.style.left=Ic+"px"):(Cd=window.innerWidth-od.right-(Ic.right-Cd.right),od=Dc.width+(window.innerWidth-Dc.right-Cd),Ic=nn(Cd,[10,window.innerWidth-10-Math.max(od,Ic.width)]),sa.style.minWidth=od+"px",sa.style.right=Ic+"px");const He=eb();Ic=window.innerHeight-20;var Ge=Mb.scrollHeight,
Yd=window.getComputedStyle(Ta);od=parseInt(Yd.borderTopWidth,10);var ve=parseInt(Yd.paddingTop,10);Cd=parseInt(Yd.borderBottomWidth,10);Yd=parseInt(Yd.paddingBottom,10);var lf=od+ve+Ge+Yd+Cd;Ge=Math.min(5*Fb.offsetHeight,lf);var Ce=window.getComputedStyle(Mb);Yd=parseInt(Ce.paddingTop,10);Ce=parseInt(Ce.paddingBottom,10);const Gd=Dc.top+Dc.height/2-10,cd=Ic-Gd;Dc=Fb.offsetHeight/2;ve=od+ve+(Fb.offsetTop+Dc);lf-=ve;ve<=Gd?(od=Fb===He[He.length-1].ref.current,sa.style.bottom="0px",sa.style.height=ve+
Math.max(cd,Dc+(od?Ce:0)+(Ta.clientHeight-Mb.offsetTop-Mb.offsetHeight)+Cd)+"px"):(Cd=Fb===He[0].ref.current,sa.style.top="0px",sa.style.height=Math.max(Gd,od+Mb.offsetTop+(Cd?Yd:0)+Dc)+lf+"px",Mb.scrollTop=ve-Gd+Mb.offsetTop);sa.style.margin="10px 0";sa.style.minHeight=Ge+"px";sa.style.maxHeight=Ic+"px";null===H||void 0===H||H();requestAnimationFrame(()=>ib.current=!0)}},[eb,fa.trigger,fa.valueNode,sa,Ta,Mb,Fb,$b,fa.dir,H]);Dm(()=>Sb(),[Sb]);const [gc,bc]=(0,kf.useState)();Dm(()=>{Ta&&bc(window.getComputedStyle(Ta).zIndex)},
[Ta]);la=(0,kf.useCallback)(Dc=>{Dc&&!0===Bb.current&&(Sb(),null===nc||void 0===nc||nc(),Bb.current=!1)},[Sb,nc]);return(0,kf.createElement)($t,{scope:k,contentWrapper:sa,shouldExpandOnScrollRef:ib,onScrollButtonChange:la},(0,kf.createElement)("div",{ref:Ha,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:gc}},(0,kf.createElement)(nl.div,Pe({},a,{ref:d,style:Xd({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),My=(0,kf.forwardRef)((a,d)=>{const {__scopeSelect:k,align:H=
"start",collisionPadding:fa=10}=a;a=rf(a,["__scopeSelect","align","collisionPadding"]);const la=Zt(k);return(0,kf.createElement)(Hy,Pe({},la,a,{ref:d,align:H,collisionPadding:fa,style:Te(Xd({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)",
"--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[$t,Pr]=Yt("SelectContent",{}),ev=(0,kf.forwardRef)((a,d)=>{const {__scopeSelect:k}=a;a=rf(a,["__scopeSelect"]);const H=Ho("SelectViewport",k),fa=Pr("SelectViewport",k);d=Tg(d,H.onViewportChange);const la=(0,kf.useRef)(0);return(0,kf.createElement)(kf.Fragment,null,(0,kf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,kf.createElement)(Xt.Slot,{scope:k},(0,kf.createElement)(nl.div,Pe({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:Xd({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:Jf(a.onScroll,sa=>{sa=sa.currentTarget;const {contentWrapper:Ha,shouldExpandOnScrollRef:Ta}=fa;if(null!==Ta&&void 0!==Ta&&Ta.current&&Ha){var Xa=Math.abs(la.current-sa.scrollTop);if(0<Xa){var eb=window.innerHeight-20,ib=parseFloat(Ha.style.minHeight);const Bb=parseFloat(Ha.style.height);ib=Math.max(ib,
Bb);ib<eb&&(Xa=ib+Xa,eb=Math.min(eb,Xa),Xa-=eb,Ha.style.height=eb+"px","0px"===Ha.style.bottom&&(sa.scrollTop=0<Xa?Xa:0,Ha.style.justifyContent="flex-end"))}}la.current=sa.scrollTop})}))))});Yt("SelectGroup");var [fv,gv]=Yt("SelectItem"),Qr=(0,kf.forwardRef)((a,d)=>{const {__scopeSelect:k,value:H,disabled:fa=!1,textValue:la}=a;a=rf(a,["__scopeSelect","value","disabled","textValue"]);const sa=rq("SelectItem",k),Ha=Ho("SelectItem",k),Ta=sa.value===H,[Xa,eb]=(0,kf.useState)(null!==la&&void 0!==la?la:
""),[ib,Bb]=(0,kf.useState)(!1);d=Tg(d,$b=>{var nc;return null===(nc=Ha.itemRefCallback)||void 0===nc?void 0:nc.call(Ha,$b,H,fa)});const Mb=Lh(),Fb=()=>{fa||(sa.onValueChange(H),sa.onOpenChange(!1))};return(0,kf.createElement)(fv,{scope:k,value:H,disabled:fa,textId:Mb,isSelected:Ta,onItemTextChange:(0,kf.useCallback)($b=>{eb(nc=>{var Sb;return nc||(null!==(Sb=null===$b||void 0===$b?void 0:$b.textContent)&&void 0!==Sb?Sb:"").trim()})},[])},(0,kf.createElement)(Xt.ItemSlot,{scope:k,value:H,disabled:fa,
textValue:Xa},(0,kf.createElement)(nl.div,Pe({role:"option","aria-labelledby":Mb,"data-highlighted":ib?"":void 0,"aria-selected":Ta&&ib,"data-state":Ta?"checked":"unchecked","aria-disabled":fa||void 0,"data-disabled":fa?"":void 0,tabIndex:fa?void 0:-1},a,{ref:d,onFocus:Jf(a.onFocus,()=>Bb(!0)),onBlur:Jf(a.onBlur,()=>Bb(!1)),onPointerUp:Jf(a.onPointerUp,Fb),onPointerMove:Jf(a.onPointerMove,$b=>{if(fa){var nc;null===(nc=Ha.onItemLeave)||void 0===nc||nc.call(Ha)}else $b.currentTarget.focus({preventScroll:!0})}),
onPointerLeave:Jf(a.onPointerLeave,$b=>{if($b.currentTarget===document.activeElement){var nc;null===(nc=Ha.onItemLeave)||void 0===nc||nc.call(Ha)}}),onKeyDown:Jf(a.onKeyDown,$b=>{var nc;if(""===(null===(nc=Ha.searchRef)||void 0===nc?void 0:nc.current)||" "!==$b.key)sC.includes($b.key)&&Fb()," "===$b.key&&$b.preventDefault()})}))))}),gp=(0,kf.forwardRef)((a,d)=>{var {__scopeSelect:k}=a;a=rf(a,["__scopeSelect","className","style"]);const H=rq("SelectItemText",k),fa=Ho("SelectItemText",k),la=gv("SelectItemText",
k);k=Jy("SelectItemText",k);const [sa,Ha]=(0,kf.useState)(null);d=Tg(d,Bb=>Ha(Bb),la.onItemTextChange,Bb=>{var Mb;return null===(Mb=fa.itemTextRefCallback)||void 0===Mb?void 0:Mb.call(fa,Bb,la.value,la.disabled)});const Ta=null===sa||void 0===sa?void 0:sa.textContent,Xa=(0,kf.useMemo)(()=>(0,kf.createElement)("option",{key:la.value,value:la.value,disabled:la.disabled},Ta),[la.disabled,la.value,Ta]),{onNativeOptionAdd:eb,onNativeOptionRemove:ib}=k;Dm(()=>{eb(Xa);return()=>ib(Xa)},[eb,ib,Xa]);return(0,kf.createElement)(kf.Fragment,
null,(0,kf.createElement)(nl.span,Pe({id:la.textId},a,{ref:d})),la.isSelected&&H.valueNode&&!H.valueNodeHasChildren?(0,Tt.createPortal)(a.children,H.valueNode):null)}),xC=(0,kf.forwardRef)((a,d)=>{const k=Ho("SelectScrollUpButton",a.__scopeSelect),H=Pr("SelectScrollUpButton",a.__scopeSelect),[fa,la]=(0,kf.useState)(!1);d=Tg(d,H.onScrollButtonChange);Dm(()=>{if(k.viewport&&k.isPositioned){let sa=function(){la(0<Ha.scrollTop)};const Ha=k.viewport;sa();Ha.addEventListener("scroll",sa);return()=>Ha.removeEventListener("scroll",
sa)}},[k.viewport,k.isPositioned]);return fa?(0,kf.createElement)(Ss,Pe({},a,{ref:d,onAutoScroll:()=>{const {viewport:sa,selectedItem:Ha}=k;sa&&Ha&&(sa.scrollTop-=Ha.offsetHeight)}})):null}),Io=(0,kf.forwardRef)((a,d)=>{const k=Ho("SelectScrollDownButton",a.__scopeSelect),H=Pr("SelectScrollDownButton",a.__scopeSelect),[fa,la]=(0,kf.useState)(!1);d=Tg(d,H.onScrollButtonChange);Dm(()=>{if(k.viewport&&k.isPositioned){let sa=function(){la(Math.ceil(Ha.scrollTop)<Ha.scrollHeight-Ha.clientHeight)};const Ha=
k.viewport;sa();Ha.addEventListener("scroll",sa);return()=>Ha.removeEventListener("scroll",sa)}},[k.viewport,k.isPositioned]);return fa?(0,kf.createElement)(Ss,Pe({},a,{ref:d,onAutoScroll:()=>{const {viewport:sa,selectedItem:Ha}=k;sa&&Ha&&(sa.scrollTop+=Ha.offsetHeight)}})):null}),Ss=(0,kf.forwardRef)((a,d)=>{const {__scopeSelect:k,onAutoScroll:H}=a;a=rf(a,["__scopeSelect","onAutoScroll"]);const fa=Ho("SelectScrollButton",k),la=(0,kf.useRef)(null),sa=Cw(k),Ha=(0,kf.useCallback)(()=>{null!==la.current&&
(window.clearInterval(la.current),la.current=null)},[]);(0,kf.useEffect)(()=>()=>Ha(),[Ha]);Dm(()=>{var Ta;const Xa=sa().find(eb=>eb.ref.current===document.activeElement);null===Xa||void 0===Xa||null===(Ta=Xa.ref.current)||void 0===Ta||Ta.scrollIntoView({block:"nearest"})},[sa]);return(0,kf.createElement)(nl.div,Pe({"aria-hidden":!0},a,{ref:d,style:Xd({flexShrink:0},a.style),onPointerMove:Jf(a.onPointerMove,()=>{var Ta;null===(Ta=fa.onItemLeave)||void 0===Ta||Ta.call(fa);null===la.current&&(la.current=
window.setInterval(H,50))}),onPointerLeave:Jf(a.onPointerLeave,()=>{Ha()})}))}),hv=(0,kf.forwardRef)((a,d)=>{const {value:k}=a;a=rf(a,["value"]);const H=(0,kf.useRef)(null);d=Tg(d,H);const fa=Dn(k);(0,kf.useEffect)(()=>{const la=H.current,sa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(fa!==k&&sa){const Ha=new Event("change",{bubbles:!0});sa.call(la,k);la.dispatchEvent(Ha)}},[fa,k]);return(0,kf.createElement)(Mr,{asChild:!0},(0,kf.createElement)("select",Pe({},
a,{ref:d,defaultValue:k})))});hv.displayName="BubbleSelect";var Rr=a=>{const {__scopeSelect:d,children:k,open:H,defaultOpen:fa,onOpenChange:la,value:sa,defaultValue:Ha,onValueChange:Ta,dir:Xa,name:eb,autoComplete:ib,disabled:Bb,required:Mb}=a,Fb=Zt(d),[$b,nc]=(0,kf.useState)(null),[Sb,gc]=(0,kf.useState)(null),[bc,Dc]=(0,kf.useState)(!1),Ic=jo(Xa),[od=!1,Cd]=Nh({prop:H,defaultProp:fa,onChange:la}),[Ge,Yd]=Nh({prop:sa,defaultProp:Ha,onChange:Ta}),ve=(0,kf.useRef)(null),lf=$b?!!$b.closest("form"):!0,
[Ce,He]=(0,kf.useState)(new Set),Gd=Array.from(Ce).map(cd=>cd.props.value).join(";");return(0,kf.createElement)(qC,Fb,(0,kf.createElement)(vH,{required:Mb,scope:d,trigger:$b,onTriggerChange:nc,valueNode:Sb,onValueNodeChange:gc,valueNodeHasChildren:bc,onValueNodeHasChildrenChange:Dc,contentId:Lh(),value:Ge,onValueChange:Yd,open:od,onOpenChange:Cd,dir:Ic,triggerPointerDownPosRef:ve,disabled:Bb},(0,kf.createElement)(Xt.Provider,{scope:d},(0,kf.createElement)(Iy,{scope:a.__scopeSelect,onNativeOptionAdd:(0,kf.useCallback)(cd=>
{He(Hd=>(new Set(Hd)).add(cd))},[]),onNativeOptionRemove:(0,kf.useCallback)(cd=>{He(Hd=>{Hd=new Set(Hd);Hd.delete(cd);return Hd})},[])},k)),lf?(0,kf.createElement)(hv,{key:Gd,"aria-hidden":!0,required:Mb,tabIndex:-1,name:eb,autoComplete:ib,value:Ge,onChange:cd=>Yd(cd.target.value),disabled:Bb},void 0===Ge?(0,kf.createElement)("option",{value:""}):null,Array.from(Ce)):null))},yC=Ky,AC=tC,BC=uC,Em=a=>(0,kf.createElement)(uH,Pe({asChild:!0},a)),Ny=vC,zC=ev,$n=Qr,td=gp,CC=xC,Hh=Io,Lg=da(586),DC=df(da(22)),
iv=da(586),Fm=da(586),EC=Xe(function(){const a=Yf(),{handlers:{t:d}}=km.useContext(Gi),k=km.useCallback(sa=>{a.api.setColor(sa)},[]),H=km.useCallback(sa=>{(sa=sa.currentTarget.dataset.tool)&&a.selectTool(sa)},[]),[fa,la]=km.useState(()=>{var sa;return null!=(sa=Object.values(pr).find(Ha=>Ha===a.selectedTool.id))?sa:Object.values(pr)[0]});km.useEffect(()=>{la(sa=>{var Ha;return null!=(Ha=Object.values(pr).find(Ta=>Ta===a.selectedTool.id))?Ha:sa})},[a.selectedTool.id]);return(0,Fm.jsx)("div",{className:"tl-primary-tools",
"data-html2canvas-ignore":"true",children:(0,Fm.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,Fm.jsx)(Ap,{handleClick:()=>a.selectTool("select"),tooltip:d("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,Fm.jsx)(Ap,{handleClick:()=>a.selectTool("move"),tooltip:d("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,Fm.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,Fm.jsx)(Ap,{handleClick:()=>a.selectTool("logseq-portal"),
tooltip:d("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,Fm.jsx)(Ap,{handleClick:()=>a.selectTool("pencil"),tooltip:d("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,Fm.jsx)(Ap,{handleClick:()=>a.selectTool("highlighter"),tooltip:d("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,Fm.jsx)(Ap,{handleClick:()=>a.selectTool("erase"),tooltip:d("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,Fm.jsx)(Ap,{handleClick:()=>a.selectTool("line"),tooltip:d("whiteboard/connector"),
id:"line",icon:"connector"}),(0,Fm.jsx)(Ap,{handleClick:()=>a.selectTool("text"),tooltip:d("whiteboard/text"),id:"text",icon:"text"}),(0,Fm.jsx)(Ay,{activeGeometry:fa,setGeometry:H}),(0,Fm.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,Fm.jsx)(Fn,{popoverSide:"left",color:a.settings.color,setColor:k}),(0,Fm.jsx)(Un,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),Oy=da(586),Dw=Xe(function(){const a=Yf();return(0,Oy.jsxs)("div",
{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,Oy.jsx)("div",{style:{flex:1}}),(0,Oy.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),Ts=da(586),FC=Xe(function(){const a=Yf();return(0,Ts.jsxs)(Ts.Fragment,{children:[xf()&&(0,Ts.jsx)(Dw,{}),xf()&&(0,Ts.jsx)(Eo,{}),!a.readOnly&&(0,Ts.jsx)(EC,{}),(0,Ts.jsx)(kC,{})]})}),Jo=df(da(22)),Xl=df(da(22)),Py=df(da(22)),GC=df(da(22)),Xq=da(586),Qy=({id:a,showReferenceContent:d=
!1})=>{var k;const {handlers:{isWhiteboardPage:H,redirectToPage:fa,sidebarAddBlock:la,queryBlockByUUID:sa},renderers:{Breadcrumb:Ha,PageName:Ta}}=GC.default.useContext(Gi);var Xa="";let eb=dl(a)?"B":"P",ib="";if(dl(a)){Xa=sa(a);if(!Xa)return(0,Xq.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});ib=Xa.content;Xa="whiteboard-shape"===(null==(k=Xa.properties)?void 0:k["ls-type"])?"link-to-whiteboard":"link-to-block"}else Xa=H(a)?"link-to-whiteboard":"link-to-page";k=ib&&
23<ib.length?ib.slice(0,20)+"...":ib;return(0,Xq.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Bb=>{Bb.stopPropagation();Bb.shiftKey?la(a,"B"===eb?"block":"page"):fa(a)},children:[(0,Xq.jsx)(kh,{name:Xa}),(0,Xq.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===eb?(0,Xq.jsx)(Ta,{pageName:a}):(0,Xq.jsxs)(Xq.Fragment,{children:[(0,Xq.jsx)(Ha,{levelLimit:1,blockId:a,endSeparator:d}),d&&k]})})]})},Ck=df(da(22)),Kn=da(22),HC=["children"],
au="undefined"!==typeof document?Kn.useLayoutEffect:Kn.useEffect,ah=df(da(22)),yh=da(22),IC=da(31),jv,Cl,wH="undefined"!=typeof document?yh.useLayoutEffect:yh.useEffect;!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(Cl||={});var JC=((jv={})[Cl.DEBUG]="debug",jv[Cl.INFO]="log",jv[Cl.WARN]="warn",jv[Cl.ERROR]="error",jv),Yq=Qh(function(){var a=Rf(Cl.ERROR);return{log:Rf(function(d,k,H){var fa;void 0===H&&(H=Cl.INFO);H>=(null!=(fa=("undefined"==typeof globalThis?
window:globalThis).VIRTUOSO_LOG_LEVEL)?fa:a(4))&&console[JC[H]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",d,k)}),logLevel:a}},[],{singleton:!0}),Ln=Qh(function(){var a=xg(),d=xg(),k=Rf(0),H=xg(),fa=Rf(0),la=xg(),sa=xg(),Ha=Rf(0),Ta=Rf(0),Xa=Rf(0),eb=Rf(0),ib=xg(),Bb=xg(),Mb=Rf(!1),Fb=Rf(!1);return Hf(af(a,Wf(function($b){return $b.scrollTop})),d),Hf(af(a,Wf(function($b){return $b.scrollHeight})),sa),Hf(d,fa),{scrollContainerState:a,scrollTop:d,viewportHeight:la,
headerHeight:Ha,fixedHeaderHeight:Ta,fixedFooterHeight:Xa,footerHeight:eb,scrollHeight:sa,smoothScrollTargetReached:H,react18ConcurrentRendering:Fb,scrollTo:ib,scrollBy:Bb,statefulScrollTop:fa,deviation:k,scrollingInProgress:Mb}},[],{singleton:!0}),yi={lvl:0},Ry=Qh(function(){return{recalcInProgress:Rf(!1)}},[],{singleton:!0}),xH={offsetHeight:"height",offsetWidth:"width"},Zq=Qh(function(a){var d=a[0].log,k=a[1].recalcInProgress;a=xg();var H=xg(),fa=Wi(H,0),la=xg(),sa=xg(),Ha=Rf(0),Ta=Rf([]),Xa=Rf(void 0),
eb=Rf(void 0),ib=Rf(function(gc,bc){return ul(gc,xH[bc])}),Bb=Rf(void 0),Mb=Rf(0),Fb={offsetTree:[],sizeTree:yi,groupOffsetTree:yi,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},$b=Wi(af(a,Qg(Ta,d,Mb),Rl(mi,Fb),qi()),Fb);Hf(af(Ta,wh(function(gc){return 0<gc.length}),Qg($b,Mb),Wf(function(gc){var bc=gc[0],Dc=gc[1],Ic=gc[2];gc=bc.reduce(function(od,Cd,Ge){return Ga(od,Cd,Wg(Cd,Dc.offsetTree,Ic)||Ge)},yi);return hh({},Dc,{groupIndices:bc,groupOffsetTree:gc})})),$b);Hf(af(H,Qg($b),wh(function(gc){return gc[0]<
gc[1].lastIndex}),Wf(function(gc){var bc=gc[1];return[{startIndex:gc[0],endIndex:bc.lastIndex,size:bc.lastSize}]})),a);Hf(Xa,eb);var nc=Wi(af(Xa,Wf(function(gc){return void 0===gc})),!0);Hf(af(eb,wh(function(gc){return void 0!==gc&&$b(4).sizeTree===yi}),Wf(function(gc){return[{startIndex:0,endIndex:0,size:gc}]})),a);Fb=Sj(af(a,Qg($b),Rl(function(gc,bc){bc=bc[1];return{changed:bc!==gc.sizes,sizes:bc}},{changed:!1,sizes:Fb}),Wf(function(gc){return gc.changed})));qh(af(Ha,Rl(function(gc,bc){return{diff:gc.prev-
bc,prev:bc}},{diff:0,prev:0}),Wf(function(gc){return gc.diff})),function(gc){0<gc?(k(0,!0),la(0,gc)):0>gc&&sa(0,gc)});qh(af(Ha,Qg(d)),function(gc){0>gc[0]&&(0,gc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:Ha},Cl.ERROR)});d=Sj(la);Hf(af(la,Qg($b),Wf(function(gc){var bc=gc[0];gc=gc[1];if(0<gc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return lb(gc.sizeTree).reduce(function(Dc,
Ic){var od=Ic.k;Ic=Ic.v;return{ranges:[].concat(Dc.ranges,[{startIndex:Dc.prevIndex,endIndex:od+bc-1,size:Dc.prevSize}]),prevIndex:od+bc,prevSize:Ic}},{ranges:[],prevIndex:0,prevSize:gc.lastSize}).ranges})),a);var Sb=Sj(af(sa,Qg($b,Mb),Wf(function(gc){return Wg(-gc[0],gc[1].offsetTree,gc[2])})));return Hf(af(sa,Qg($b,Mb),Wf(function(gc){var bc=gc[0],Dc=gc[1];gc=gc[2];if(0<Dc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Ic=lb(Dc.sizeTree).reduce(function(od,
Cd){return Ga(od,Math.max(0,Cd.k+bc),Cd.v)},yi);return hh({},Dc,{sizeTree:Ic},Ji(Dc.offsetTree,0,Ic,gc))})),$b),{data:Bb,totalCount:H,sizeRanges:a,groupIndices:Ta,defaultItemSize:eb,fixedItemSize:Xa,unshiftWith:la,shiftWith:sa,shiftWithOffset:Sb,beforeUnshiftWith:d,firstItemIndex:Ha,gap:Mb,sizes:$b,listRefresh:Fb,statefulTotalCount:fa,trackItemSizes:nc,itemSize:ib}},Vi(Yq,Ry),{singleton:!0}),yH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,kv=Qh(function(a){function d(){nc&&
(nc(),nc=null);gc&&(gc(),gc=null);Sb&&(clearTimeout(Sb),Sb=null);Ha(0,!1)}var k=a[0],H=k.sizes,fa=k.totalCount,la=k.listRefresh;k=k.gap;var sa=a[1],Ha=sa.scrollingInProgress,Ta=sa.viewportHeight,Xa=sa.scrollTo,eb=sa.smoothScrollTargetReached,ib=sa.headerHeight,Bb=sa.footerHeight,Mb=sa.fixedHeaderHeight;sa=sa.fixedFooterHeight;a=a[2].log;var Fb=xg(),$b=Rf(0),nc=null,Sb=null,gc=null;return Hf(af(Fb,Qg(H,Ta,fa,$b,ib,Bb,a),Qg(k,Mb,sa),Wf(function(bc){var Dc=bc[0],Ic=Dc[0],od=Dc[1],Cd=Dc[2],Ge=Dc[3],Yd=
Dc[4],ve=Dc[5],lf=Dc[6],Ce=Dc[7],He=bc[1];Dc=bc[2];bc=bc[3];var Gd=Fh(Ic),cd=Gd.align,Hd=Gd.behavior,ad=Gd.offset;--Ge;Gd=ai(Gd,od,Ge);ve=Wg(Gd,od.offsetTree,He)+ve;"end"===cd?(ve+=Dc+xa(od.sizeTree,Gd)[1]-Cd+bc,Gd===Ge&&(ve+=lf)):"center"===cd?ve+=(Dc+xa(od.sizeTree,Gd)[1]-Cd+bc)/2:ve-=Yd;ad&&(ve+=ad);var ud=function(Ve){d();Ve?(Ce("retrying to scroll to",{location:Ic},Cl.DEBUG),Fb(0,Ic)):Ce("list did not change, scroll successful",{},Cl.DEBUG)};if(d(),"smooth"===Hd){var ye=!1;gc=qh(la,function(Ve){ye=
ye||Ve});nc=zj(eb,function(){ud(ye)})}else nc=zj(af(la,function(Ve){var zf=setTimeout(function(){Ve(!1)},150);return function(mf){mf&&(Ve(!0),clearTimeout(zf))}}),ud);Sb=setTimeout(function(){d()},1200);Ha(0,!0);return Ce("scrolling from index to",{index:Gd,top:ve,behavior:Hd},Cl.DEBUG),{top:ve,behavior:Hd}})),Xa),{scrollToIndex:Fb,topListHeight:$b}},Vi(Zq,Ln,Yq),{singleton:!0}),zH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},
lv=Qh(function(a){var d=a[0],k=d.scrollContainerState;a=d.scrollTop;var H=d.viewportHeight,fa=d.headerHeight,la=d.footerHeight,sa=d.scrollBy;d=Rf(!1);var Ha=Rf(!0),Ta=xg(),Xa=xg(),eb=Rf(4),ib=Rf(0),Bb=Wi(af(yo(af(Bh(a),oj(1),qm(!0)),af(Bh(a),oj(1),qm(!1),Rm(100))),qi()),!1),Mb=Wi(af(yo(af(sa,qm(!0)),af(sa,qm(!1),Rm(200))),qi()),!1);Hf(af(Cj(Bh(a),Bh(ib)),Wf(function(Fb){return Fb[0]<=Fb[1]}),qi()),Ha);Hf(af(Ha,Am(50)),Xa);H=Sj(af(Cj(k,Bh(H),Bh(fa),Bh(la),Bh(eb)),Rl(function(Fb,$b){var nc,Sb,gc=$b[0],
bc=gc.scrollTop;gc=gc.scrollHeight;var Dc=$b[1],Ic={viewportHeight:Dc,scrollTop:bc,scrollHeight:gc};return bc+Dc-gc>-$b[4]?(bc>Fb.state.scrollTop?(nc="SCROLLED_DOWN",Sb=Fb.state.scrollTop-bc):(nc="SIZE_DECREASED",Sb=Fb.state.scrollTop-bc||Fb.scrollTopDelta),{atBottom:!0,state:Ic,atBottomBecause:nc,scrollTopDelta:Sb}):{atBottom:!1,notAtBottomBecause:Ic.scrollHeight>Fb.state.scrollHeight?"SIZE_INCREASED":Dc<Fb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":bc<Fb.state.scrollTop?"SCROLLING_UPWARDS":
"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Ic}},zH),qi(function(Fb,$b){return Fb&&Fb.atBottom===$b.atBottom})));fa=Wi(af(k,Rl(function(Fb,$b){var nc=$b.scrollTop,Sb=$b.scrollHeight;$b=$b.viewportHeight;return 1.01>Math.abs(Fb.scrollHeight-Sb)?{scrollTop:nc,scrollHeight:Sb,jump:0,changed:!1}:Fb.scrollTop!==nc&&1>Sb-(nc+$b)?{scrollHeight:Sb,scrollTop:nc,jump:Fb.scrollTop-nc,changed:!0}:{scrollHeight:Sb,scrollTop:nc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),wh(function(Fb){return Fb.changed}),
Wf(function(Fb){return Fb.jump})),0);Hf(af(H,Wf(function(Fb){return Fb.atBottom})),d);Hf(af(d,Am(50)),Ta);la=Rf("down");Hf(af(k,Wf(function(Fb){return Fb.scrollTop}),qi(),Rl(function(Fb,$b){return Mb(4)?{direction:Fb.direction,prevScrollTop:$b}:{direction:$b<Fb.prevScrollTop?"up":"down",prevScrollTop:$b}},{direction:"down",prevScrollTop:0}),Wf(function(Fb){return Fb.direction})),la);Hf(af(k,Am(50),qm("none")),la);k=Rf(0);return Hf(af(Bb,wh(function(Fb){return!Fb}),qm(0)),k),Hf(af(a,Am(100),Qg(Bb),
wh(function(Fb){return!!Fb[1]}),Rl(function(Fb,$b){return[Fb[1],$b[0]]},[0,0]),Wf(function(Fb){return Fb[1]-Fb[0]})),k),{isScrolling:Bb,isAtTop:Ha,isAtBottom:d,atBottomState:H,atTopStateChange:Xa,atBottomStateChange:Ta,scrollDirection:la,atBottomThreshold:eb,atTopThreshold:ib,scrollVelocity:k,lastJumpDueToItemResize:fa}},Vi(Ln)),Us=Qh(function(a){var d=a[0].log;a=Rf(!1);var k=Sj(af(a,wh(function(H){return H}),qi()));return qh(a,function(H){H&&d(4)("props updated",{},Cl.DEBUG)}),{propsReady:a,didMount:k}},
Vi(Yq),{singleton:!0}),Ew=Qh(function(a){var d=a[0],k=d.sizes,H=d.listRefresh;d=d.defaultItemSize;var fa=a[1].scrollTop,la=a[2].scrollToIndex;a=a[3].didMount;var sa=Rf(!0),Ha=Rf(0);return Hf(af(a,Qg(Ha),wh(function(Ta){return!!Ta[1]}),qm(!1)),sa),qh(af(Cj(H,a),Qg(sa,k,d),wh(function(Ta){var Xa=Ta[1],eb=Ta[3];return Ta[0][1]&&(Ta[2].sizeTree!==yi||void 0!==eb)&&!Xa}),Qg(Ha)),function(Ta){var Xa=Ta[1];setTimeout(function(){zj(fa,function(){sa(0,!0)});la(0,Xa)})}),{scrolledToInitialItem:sa,initialTopMostItemIndex:Ha}},
Vi(Zq,Ln,kv,Us),{singleton:!0}),KC=Qh(function(a){function d($b){Ta(0,{index:"LAST",align:"end",behavior:$b})}function k($b){var nc=zj(Ha,function(Sb){!$b||Sb.atBottom||"SIZE_INCREASED"!==Sb.notAtBottomBecause||Fb||(ib(4)("scrolling to bottom due to increased size",{},Cl.DEBUG),d("auto"))});setTimeout(nc,100)}var H=a[0],fa=H.totalCount,la=H.listRefresh,sa=a[1];H=sa.isAtBottom;var Ha=sa.atBottomState,Ta=a[2].scrollToIndex;sa=a[3].scrolledToInitialItem;var Xa=a[4],eb=Xa.propsReady;Xa=Xa.didMount;var ib=
a[5].log;a=a[6].scrollingInProgress;var Bb=Rf(!1),Mb=xg(),Fb=null;return qh(af(Cj(af(Bh(fa),oj(1)),Xa),Qg(Bh(Bb),H,sa,a),Wf(function($b){var nc=$b[0],Sb=nc[0];nc=nc[1]&&$b[3];var gc="auto";nc&&(gc=$b[1],$b=$b[2]||$b[4],gc="function"==typeof gc?tk(gc($b)):$b&&tk(gc),nc=nc&&!!gc);return{totalCount:Sb,shouldFollow:nc,followOutputBehavior:gc}}),wh(function($b){return $b.shouldFollow})),function($b){var nc=$b.totalCount,Sb=$b.followOutputBehavior;Fb&&(Fb(),Fb=null);Fb=zj(la,function(){ib(4)("following output to ",
{totalCount:nc},Cl.DEBUG);d(Sb);Fb=null})}),qh(af(Cj(Bh(Bb),fa,eb),wh(function($b){return $b[0]&&$b[2]}),Rl(function($b,nc){nc=nc[1];return{refreshed:$b.value===nc,value:nc}},{refreshed:!1,value:0}),wh(function($b){return $b.refreshed}),Qg(Bb,fa)),function($b){k(!1!==$b[1])}),qh(Mb,function(){k(!1!==Bb(4))}),qh(Cj(Bh(Bb),Ha),function($b){var nc=$b[1];$b[0]&&!nc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===nc.notAtBottomBecause&&d("auto")}),{followOutput:Bb,autoscrollToBottom:Mb}},Vi(Zq,lv,kv,Ew,Us,Yq,
Ln)),Sy=Qh(function(a){var d=a[0],k=d.totalCount,H=d.groupIndices;d=d.sizes;var fa=a[1];a=fa.scrollTop;fa=fa.headerHeight;var la=xg(),sa=xg(),Ha=Sj(af(la,Wf(qk)));return Hf(af(Ha,Wf(function(Ta){return Ta.totalCount})),k),Hf(af(Ha,Wf(function(Ta){return Ta.groupIndices})),H),Hf(af(Cj(a,d,fa),wh(function(Ta){return Ta[1].groupOffsetTree!==yi}),Wf(function(Ta){return xa(Ta[1].groupOffsetTree,Math.max(Ta[0]-Ta[2],0),"v")[0]}),qi(),Wf(function(Ta){return[Ta]})),sa),{groupCounts:la,topItemsIndexes:sa}},
Vi(Zq,Ln)),Ty=Qh(function(a){var d=a[0];a=d.scrollTop;var k=d.viewportHeight,H=d.deviation,fa=d.headerHeight,la=d.fixedHeaderHeight;d=xg();var sa=Rf(0),Ha=Rf(0),Ta=Rf(0);a=Wi(af(Cj(Bh(a),Bh(k),Bh(fa),Bh(d,Tj),Bh(Ta),Bh(sa),Bh(la),Bh(H),Bh(Ha)),Wf(function(Xa){var eb=Xa[0],ib=Xa[1],Bb=Xa[2],Mb=Xa[3],Fb=Mb[0];Mb=Mb[1];var $b=Xa[4],nc=Xa[6],Sb=Xa[7],gc=Xa[8],bc=eb-Sb;Xa=Xa[5]+nc;var Dc=Math.max(Bb-bc,0),Ic="none",od="number"==typeof gc?gc:gc.top||0;gc="number"==typeof gc?gc:gc.bottom||0;return Fb-=Sb,
Mb+=Bb+nc,Fb+(Bb+nc)>eb+Xa-od&&(Ic="up"),Mb-Sb<eb-Dc+ib+gc&&(Ic="down"),"none"!==Ic?[Math.max(bc-Bb-mn($b,"top",Ic)-od,0),bc-Dc-nc+ib+mn($b,"bottom",Ic)+gc]:null}),wh(function(Xa){return null!=Xa}),qi(Tj)),[0,0]);return{listBoundary:d,overscan:Ta,topListHeight:sa,increaseViewportBy:Ha,visibleRange:a}},Vi(Ln),{singleton:!0}),LC={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},bu=Qh(function(a){var d=a[0],k=d.sizes,H=d.totalCount,fa=d.data,
la=d.firstItemIndex,sa=d.gap,Ha=a[1],Ta=a[2],Xa=Ta.visibleRange;d=Ta.listBoundary;Ta=Ta.topListHeight;var eb=a[3],ib=eb.scrolledToInitialItem,Bb=eb.initialTopMostItemIndex;eb=a[4].topListHeight;var Mb=a[5],Fb=a[6].didMount,$b=a[7].recalcInProgress;a=Rf([]);var nc=xg();Hf(Ha.topItemsIndexes,a);k=Wi(af(Cj(Fb,$b,Bh(Xa,Tj),Bh(H),Bh(k),Bh(Bb),ib,Bh(a),Bh(la),Bh(sa),fa),wh(function(Sb){return Sb[0]&&!Sb[1]}),Wf(function(Sb){var gc=Sb[2],bc=gc[0],Dc=gc[1];gc=Sb[3];var Ic=Sb[5],od=Sb[6],Cd=Sb[7],Ge=Sb[8],
Yd=Sb[9],ve=Sb[10];Sb=Sb[4];var lf=Sb.sizeTree,Ce=Sb.offsetTree;if(0===gc||0===bc&&0===Dc)return hh({},LC,{totalCount:gc});if(lf===yi)return Gq(function(mf,Nf,Hg){return Nf.groupOffsetTree!==yi?(mf=Ph(mf,Nf),[{index:xa(Nf.groupOffsetTree,mf)[0],size:0,offset:0},{index:mf,size:0,offset:0,data:Hg&&Hg[0]}]):[{index:mf,size:0,offset:0,data:Hg&&Hg[0]}]}("number"==typeof Ic?Ic:"LAST"===Ic.index?gc-1:Ic.index,Sb,ve),[],gc,Yd,Sb,Ge);Ic=[];if(0<Cd.length){var He,Gd=Cd[0],cd=Cd[Cd.length-1],Hd=0;for(lf=Aj(yd(lf,
Gd,cd));!(He=lf()).done;){var ad=He.value;He=ad.value;var ud=Math.min(ad.end,cd);for(ad=Math.max(ad.start,Gd);ad<=ud;ad++)Ic.push({index:ad,size:He,offset:Hd,data:ve&&ve[ad]}),Hd+=He}}if(!od)return Gq([],Ic,gc,Yd,Sb,Ge);var ye=0<Cd.length?Cd[Cd.length-1]+1:0,Ve=function(mf,Nf,Hg,uf){return void 0===uf&&(uf=0),0<uf&&(Nf=Math.max(Nf,mf[yg(mf,uf,tg)].offset)),zd((bh=Hg,ik=yg(Cg=mf,Nf,Qi=Ah),Ek=yg(Cg,bh,Qi,ik),Cg.slice(ik,Ek+1)),ti);var Cg,bh,Qi,ik,Ek}(Ce,bc,Dc,ye);if(0===Ve.length)return null;var zf=
gc-1;return Gq(Nk([],function(mf){for(var Nf,Hg=Aj(Ve);!(Nf=Hg()).done;){var uf=Nf.value,Cg=uf.value;Nf=Cg.offset;var bh=uf.start,Qi=Cg.size;Cg.offset<bc&&(Cg=(bh+=Math.floor((bc-Cg.offset+Yd)/(Qi+Yd)))-uf.start,Nf+=Cg*Qi+Cg*Yd);bh<ye&&(Nf+=(ye-bh)*Qi,bh=ye);for(uf=Math.min(uf.end,zf);bh<=uf&&!(Nf>=Dc);bh++)mf.push({index:bh,size:Qi,offset:Nf,data:ve&&ve[bh]}),Nf+=Qi+Yd}}),Ic,gc,Yd,Sb,Ge)}),wh(function(Sb){return null!==Sb}),qi()),LC);return Hf(af(fa,wh(function(Sb){return void 0!==Sb}),Wf(function(Sb){return Sb.length})),
H),Hf(af(k,Wf(function(Sb){return Sb.topListHeight})),eb),Hf(eb,Ta),Hf(af(k,Wf(function(Sb){return[Sb.top,Sb.bottom]})),d),Hf(af(k,Wf(function(Sb){return Sb.items})),nc),hh({listState:k,topItemsIndexes:a,endReached:Sj(af(k,wh(function(Sb){return 0<Sb.items.length}),Qg(H,fa),wh(function(Sb){var gc=Sb[0].items;return gc[gc.length-1].originalIndex===Sb[1]-1}),Wf(function(Sb){return[Sb[1]-1,Sb[2]]}),qi(Tj),Wf(function(Sb){return Sb[0]}))),startReached:Sj(af(k,Am(200),wh(function(Sb){var gc=Sb.items;return 0<
gc.length&&gc[0].originalIndex===Sb.topItems.length}),Wf(function(Sb){return Sb.items[0].index}),qi())),rangeChanged:Sj(af(k,wh(function(Sb){return 0<Sb.items.length}),Wf(function(Sb){Sb=Sb.items;for(var gc=0,bc=Sb.length-1;"group"===Sb[gc].type&&gc<bc;)gc++;for(;"group"===Sb[bc].type&&bc>gc;)bc--;return{startIndex:Sb[gc].index,endIndex:Sb[bc].index}}),qi(fn))),itemsRendered:nc},Mb)},Vi(Zq,Sy,Ty,Ew,kv,lv,Us,Ry),{singleton:!0}),AH=Qh(function(a){var d=a[0],k=d.sizes,H=d.firstItemIndex,fa=d.data;d=
d.gap;var la=a[1].listState;a=a[2].didMount;var sa=Rf(0);return Hf(af(a,Qg(sa),wh(function(Ha){return 0!==Ha[1]}),Qg(k,H,d,fa),Wf(function(Ha){var Ta=Ha[0][1],Xa=Ha[1],eb=Ha[2],ib=Ha[3];Ha=Ha[4];var Bb=void 0===Ha?[]:Ha;Ha=0;if(0<Xa.groupIndices.length)for(var Mb,Fb=Aj(Xa.groupIndices);!((Mb=Fb()).done||Mb.value-Ha>=Ta);)Ha++;Ta+=Ha;return Gq(Array.from({length:Ta}).map(function($b,nc){return{index:nc,size:0,offset:0,data:Bb[nc]}}),[],Ta,ib,Xa,eb)})),la),{initialItemCount:sa}},Vi(Zq,bu,Us),{singleton:!0}),
sq=Qh(function(a){a=a[0].scrollVelocity;var d=Rf(!1),k=xg(),H=Rf(!1);return Hf(af(a,Qg(H,d,k),wh(function(fa){return!!fa[1]}),Wf(function(fa){var la=fa[0],sa=fa[1],Ha=fa[2];fa=fa[3];var Ta=sa.enter;if(Ha){if((0,sa.exit)(la,fa))return!1}else if(Ta(la,fa))return!0;return Ha}),qi()),d),qh(af(Cj(d,a,k),Qg(H)),function(fa){var la=fa[0];fa=fa[1];return la[0]&&fa&&fa.change&&fa.change(la[1],la[2])}),{isSeeking:d,scrollSeekConfiguration:H,scrollVelocity:a,scrollSeekRangeChanged:k}},Vi(lv),{singleton:!0}),
Uy=Qh(function(a){a=a[0].topItemsIndexes;var d=Rf(0);return Hf(af(d,wh(function(k){return 0<k}),Wf(function(k){return Array.from({length:k}).map(function(H,fa){return fa})})),a),{topItemCount:d}},Vi(bu)),cu=Qh(function(a){var d=a[0],k=d.footerHeight,H=d.headerHeight,fa=d.fixedHeaderHeight;d=d.fixedFooterHeight;var la=a[1].listState;a=xg();k=Wi(af(Cj(k,d,H,fa,la),Wf(function(sa){var Ha=sa[4];return sa[0]+sa[1]+sa[2]+sa[3]+Ha.offsetBottom+Ha.bottom})),0);return Hf(Bh(k),a),{totalListHeight:k,totalListHeightChanged:a}},
Vi(Ln,bu),{singleton:!0}),Fw=Uo(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),Vy=Qh(function(a){function d(nc){0<nc?(H(0,{top:-nc,behavior:"auto"}),la(0,0)):(la(0,0),H(0,{top:-nc,behavior:"auto"}))}var k=a[0],H=k.scrollBy,fa=k.scrollTop,la=k.deviation,sa=k.scrollingInProgress,Ha=a[1];k=Ha.isScrolling;var Ta=Ha.isAtBottom,Xa=Ha.scrollDirection,eb=a[3],ib=eb.beforeUnshiftWith,Bb=eb.shiftWithOffset,Mb=eb.sizes;eb=eb.gap;var Fb=a[4].log,$b=a[5].recalcInProgress;
a=Sj(af(a[2].listState,Qg(Ha.lastJumpDueToItemResize),Rl(function(nc,Sb){var gc=nc[1],bc=Sb[0],Dc=bc.items,Ic=bc.totalCount;bc=bc.bottom+bc.offsetBottom;var od=0;return nc[2]===Ic&&0<gc.length&&0<Dc.length&&(0===Dc[0].originalIndex&&0===gc[0].originalIndex||0!=(od=bc-nc[3])&&(od+=Sb[1])),[od,Dc,Ic,bc]},[0,[],0,0]),wh(function(nc){return 0!==nc[0]}),Qg(fa,Xa,sa,Ta,Fb),wh(function(nc){return!nc[3]&&0!==nc[1]&&"up"===nc[2]}),Wf(function(nc){var Sb=nc[0][0];return(0,nc[5])("Upward scrolling compensation",
{amount:Sb},Cl.DEBUG),Sb})));return qh(af(a,Qg(la,k)),function(nc){var Sb=nc[0],gc=nc[1];nc[2]&&Fw()?la(0,gc-Sb):d(-Sb)}),qh(af(Cj(Wi(k,!1),la,$b),wh(function(nc){return!nc[0]&&!nc[2]&&0!==nc[1]}),Wf(function(nc){return nc[1]}),Am(1)),d),Hf(af(Bb,Wf(function(nc){return{top:-nc}})),H),qh(af(ib,Qg(Mb,eb),Wf(function(nc){var Sb=nc[0];return Sb*nc[1].lastSize+Sb*nc[2]})),function(nc){la(0,nc);requestAnimationFrame(function(){vn(H,{top:nc});requestAnimationFrame(function(){la(0,0);$b(0,!1)})})}),{deviation:la}},
Vi(Ln,lv,bu,Zq,Yq,Ry)),MC=Qh(function(a){var d=a[0].totalListHeight,k=a[1].didMount,H=a[2].scrollTo;a=Rf(0);return qh(af(k,Qg(a),wh(function(fa){return 0!==fa[1]}),Wf(function(fa){return{top:fa[1]}})),function(fa){zj(af(d,wh(function(la){return 0!==la})),function(){setTimeout(function(){H(0,fa)})})}),{initialScrollTop:a}},Vi(cu,Us,Ln),{singleton:!0}),Wy=Qh(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var k=Rf(!1);return{alignToBottom:k,paddingTopAddition:Wi(af(Cj(k,d,a),wh(function(H){return H[0]}),
Wf(function(H){return Math.max(0,H[1]-H[2])}),qi()),0)}},Vi(Ln,cu),{singleton:!0}),Gw=Qh(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var k=xg(),H=xg(),fa=xg(),la=Rf(!1),sa=Rf(void 0);return Hf(af(Cj(k,H),Wf(function(Ha){var Ta=Ha[0];return{scrollTop:Math.max(0,Ta.scrollTop-Ha[1].offsetTop),scrollHeight:Ta.scrollHeight,viewportHeight:Ta.viewportHeight}})),d),Hf(af(a,Qg(H),Wf(function(Ha){var Ta=Ha[0];return hh({},Ta,{top:Ta.top+Ha[1].offsetTop})})),fa),{useWindowScroll:la,customScrollParent:sa,
windowScrollContainerState:k,windowViewportRect:H,windowScrollTo:fa}},Vi(Ln)),Vs=["done","behavior","align"],Sr=Qh(function(a){var d=a[0],k=d.sizes,H=d.totalCount;d=d.gap;var fa=a[1],la=fa.scrollTop,sa=fa.viewportHeight,Ha=fa.headerHeight,Ta=fa.fixedHeaderHeight,Xa=fa.fixedFooterHeight,eb=fa.scrollingInProgress;a=a[2].scrollToIndex;fa=xg();return Hf(af(fa,Qg(k,sa,H,Ha,Ta,Xa,la),Qg(d),Wf(function(ib){var Bb=ib[0],Mb=Bb[0],Fb=Bb[1],$b=Bb[2],nc=Bb[3],Sb=Bb[4],gc=Bb[5],bc=Bb[6];Bb=Bb[7];var Dc=ib[1];
ib=Mb.done;var Ic=Mb.behavior,od=Mb.align,Cd=en(Mb,Vs),Ge=null;Mb=ai(Mb,Fb,nc-1);Sb=Wg(Mb,Fb.offsetTree,Dc)+Sb+gc;return Sb<Bb+gc?Ge=hh({},Cd,{behavior:Ic,align:null!=od?od:"start"}):Sb+xa(Fb.sizeTree,Mb)[1]>Bb+$b-bc&&(Ge=hh({},Cd,{behavior:Ic,align:null!=od?od:"end"})),Ge?ib&&zj(af(eb,oj(1),wh(function(Yd){return!1===Yd})),ib):ib&&ib(),Ge}),wh(function(ib){return null!==ib})),a),{scrollIntoView:fa}},Vi(Zq,Ln,kv,bu,Yq),{singleton:!0}),Xy=["listState","topItemsIndexes"],NC=Qh(function(a){return hh({},
a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},Vi(Ty,AH,Us,sq,cu,MC,Wy,Gw,Sr)),du=Qh(function(a){var d=a[0],k=d.totalCount,H=d.sizeRanges,fa=d.fixedItemSize,la=d.defaultItemSize,sa=d.trackItemSizes,Ha=d.itemSize,Ta=d.data,Xa=d.firstItemIndex,eb=d.groupIndices,ib=d.statefulTotalCount;d=d.gap;var Bb=a[1],Mb=Bb.initialTopMostItemIndex;Bb=Bb.scrolledToInitialItem;var Fb=a[2],$b=a[3],nc=a[4],Sb=nc.listState,gc=nc.topItemsIndexes;nc=en(nc,Xy);var bc=a[5].scrollToIndex,Dc=a[7].topItemCount,Ic=a[8].groupCounts,
od=a[9];a=a[10];return Hf(nc.rangeChanged,od.scrollSeekRangeChanged),Hf(af(od.windowViewportRect,Wf(function(Cd){return Cd.visibleHeight})),Fb.viewportHeight),hh({totalCount:k,data:Ta,firstItemIndex:Xa,sizeRanges:H,initialTopMostItemIndex:Mb,scrolledToInitialItem:Bb,topItemsIndexes:gc,topItemCount:Dc,groupCounts:Ic,fixedItemHeight:fa,defaultItemHeight:la,gap:d},$b,{statefulTotalCount:ib,listState:Sb,scrollToIndex:bc,trackItemSizes:sa,itemSize:Ha,groupIndices:eb},nc,od,Fb,a)},Vi(Zq,Ew,Ln,KC,bu,kv,
Vy,Uy,Sy,NC,Yq)),OC=Uo(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),mv=ah.createContext(void 0),Cp=ah.createContext(void 0),PC=["placeholder"],Yy=["style","children"],QC=["style","children"],RC=Qh(function(){var a=Rf(function(Ta){return"Item "+Ta}),d=Rf(null),k=Rf(function(Ta){return"Group "+Ta}),H=Rf({}),fa=Rf(Zp),la=Rf("div"),sa=Rf(Yi),Ha=function(Ta,
Xa){return void 0===Xa&&(Xa=null),Wi(af(H,Wf(function(eb){return eb[Ta]}),qi()),Xa)};return{context:d,itemContent:a,groupContent:k,components:H,computeItemKey:fa,headerFooterTag:la,scrollerRef:sa,FooterComponent:Ha("Footer"),HeaderComponent:Ha("Header"),TopItemListComponent:Ha("TopItemList"),ListComponent:Ha("List","div"),ItemComponent:Ha("Item","div"),GroupComponent:Ha("Group","div"),ScrollerComponent:Ha("Scroller","div"),EmptyPlaceholder:Ha("EmptyPlaceholder"),ScrollSeekPlaceholder:Ha("ScrollSeekPlaceholder")}}),
Hw=Qh(function(a){function d(fa,la,sa){Hf(af(fa,Qg(H.components),Wf(function(Ha){var Ta,Xa=Ha[0];Ha=Ha[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+la+" instead."),hh({},Ha,((Ta={})[la]=Xa,Ta))})),H.components)}var k=a[0],H=a[1];a={item:Fk(H.itemContent,"Rename the %citem%c prop to %citemContent."),group:Fk(H.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Fk(k.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Fk(k.fixedItemHeight,
"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Fk(k.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:xg(),maxHeightCacheSize:xg(),footer:xg(),header:xg(),HeaderContainer:xg(),FooterContainer:xg(),ItemContainer:xg(),ScrollContainer:xg(),GroupContainer:xg(),ListContainer:xg(),emptyComponent:xg(),scrollSeek:xg()};return qh(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.",
"color: red;","color: inherit;","color: blue;")}),qh(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),qh(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),qh(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),
qh(a.scrollSeek,function(fa){var la=fa.placeholder;fa=en(fa,PC);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=hh({},(0,H.components)(4),{ScrollSeekPlaceholder:la});(0,H.components)(0,la);(0,k.scrollSeekConfiguration)(0,fa)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,
"Scroller","ScrollContainer"),d(a.emptyComponent,"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),hh({},k,H,a)},Vi(du,RC)),SC=function(a){return ah.createElement("div",{style:{height:a.height}})},Mn={position:OC(),zIndex:1,overflowAnchor:"none"},BH={overflowAnchor:"none"},eu=ah.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=$h("listState"),k=ao("sizeRanges"),H=$h("useWindowScroll"),fa=$h("customScrollParent"),la=ao("windowScrollContainerState"),sa=ao("scrollContainerState");
H=fa||H?la:sa;var Ha=$h("itemContent"),Ta=$h("context"),Xa=$h("groupContent");la=$h("trackItemSizes");sa=$h("itemSize");var eb=$h("log"),ib=ao("gap");k=qr(k,sa,la,a?Yi:H,eb,ib,fa).callbackRef;fa=ah.useState(0);var Bb=fa[0],Mb=fa[1];Ni("deviation",function(Dc){Bb!==Dc&&Mb(Dc)});fa=$h("EmptyPlaceholder");var Fb=$h("ScrollSeekPlaceholder")||SC;H=$h("ListComponent");var $b=$h("ItemComponent"),nc=$h("GroupComponent"),Sb=$h("computeItemKey"),gc=$h("isSeeking"),bc=0<$h("groupIndices").length;la=$h("paddingTopAddition");
la=a?{}:{boxSizing:"border-box",paddingTop:d.offsetTop+la,paddingBottom:d.offsetBottom,marginTop:Bb};return!a&&0===d.totalCount&&fa?(0,yh.createElement)(fa,Bj(fa,Ta)):(0,yh.createElement)(H,hh({},Bj(H,Ta),{ref:k,style:la,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function(Dc){var Ic=Dc.originalIndex,od=Sb(Ic+d.firstItemIndex,Dc.data,Ta);return gc?(0,yh.createElement)(Fb,hh({},Bj(Fb,Ta),{key:od,index:Dc.index,height:Dc.size,type:Dc.type||"item"},"group"===
Dc.type?{}:{groupIndex:Dc.groupIndex})):"group"===Dc.type?(0,yh.createElement)(nc,hh({},Bj(nc,Ta),{key:od,"data-index":Ic,"data-known-size":Dc.size,"data-item-index":Dc.index,style:Mn}),Xa(Dc.index)):(0,yh.createElement)($b,hh({},Bj($b,Ta),{key:od,"data-index":Ic,"data-known-size":Dc.size,"data-item-index":Dc.index,"data-item-group-index":Dc.groupIndex,style:BH}),bc?Ha(Dc.index,Dc.groupIndex,Dc.data,Ta):Ha(Dc.index,Dc.data,Ta))}))}),CH={height:"100%",outline:"none",overflowY:"auto",position:"relative",
WebkitOverflowScrolling:"touch"},fu={width:"100%",height:"100%",position:"absolute",top:0},TC={width:"100%",position:OC(),top:0},Iw=ah.memo(function(){var a=$h("HeaderComponent"),d=ao("headerHeight"),k=$h("headerFooterTag"),H=ni(function(la){return d(ul(la,"height"))}),fa=$h("context");return a?(0,yh.createElement)(k,{ref:H},(0,yh.createElement)(a,Bj(a,fa))):null}),Jw=ah.memo(function(){var a=$h("FooterComponent"),d=ao("footerHeight"),k=$h("headerFooterTag"),H=ni(function(la){return d(ul(la,"height"))}),
fa=$h("context");return a?(0,yh.createElement)(k,{ref:H},(0,yh.createElement)(a,Bj(a,fa))):null}),DH=function(a){a=a.children;var d=(0,yh.useContext)(mv),k=ao("viewportHeight"),H=ao("fixedItemHeight"),fa=ni(Fl(k,function(la){return ul(la,"height")}));return ah.useEffect(function(){d&&(k(d.viewportHeight),H(d.itemHeight))},[d,k,H]),ah.createElement("div",{style:fu,ref:fa,"data-viewport-type":"element"},a)},UC=function(a){a=a.children;var d=(0,yh.useContext)(mv),k=ao("windowViewportRect"),H=ao("fixedItemHeight"),
fa=$h("customScrollParent");fa=ih(k,fa);return ah.useEffect(function(){d&&(H(d.itemHeight),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,k,H]),ah.createElement("div",{ref:fa,style:fu,"data-viewport-type":"window"},a)},VC=function(a){a=a.children;var d=$h("TopItemListComponent"),k=$h("headerHeight");k=hh({},TC,{marginTop:k+"px"});var H=$h("context");return(0,yh.createElement)(d||"div",{style:k,context:H},a)},nv=wj(Hw,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ah.memo(function(a){var d=$h("useWindowScroll"),k=0<$h("topItemsIndexes").length,H=$h("customScrollParent"),fa=H||d?UC:DH;return ah.createElement(H||d?ov:Tr,hh({},a),ah.createElement(fa,null,ah.createElement(Iw,null),ah.createElement(eu,null),ah.createElement(Jw,
null)),k&&ah.createElement(VC,null,ah.createElement(eu,{showTopList:!0})))})),Zy=nv.Component,ao=nv.usePublisher,$h=nv.useEmitterValue,Ni=nv.useEmitter,Tr=po({usePublisher:ao,useEmitterValue:$h,useEmitter:Ni}),ov=Rp({usePublisher:ao,useEmitterValue:$h,useEmitter:Ni}),pv={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},bo={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},$y=Math.round,Kw=Math.ceil,qv=Math.floor,az=Math.min,Hi=Math.max,
gu=Qh(function(a){var d=a[0],k=d.overscan,H=d.visibleRange,fa=d.listBoundary,la=a[1];d=la.scrollTop;var sa=la.viewportHeight,Ha=la.scrollBy,Ta=la.scrollTo,Xa=la.smoothScrollTargetReached,eb=la.scrollContainerState,ib=la.footerHeight;la=la.headerHeight;var Bb=a[2],Mb=a[3],Fb=a[4],$b=Fb.propsReady,nc=Fb.didMount,Sb=a[5];Fb=Sb.windowViewportRect;var gc=Sb.windowScrollTo,bc=Sb.useWindowScroll,Dc=Sb.customScrollParent;Sb=Sb.windowScrollContainerState;a=a[6];var Ic=Rf(0),od=Rf(0),Cd=Rf(pv),Ge=Rf({height:0,
width:0}),Yd=Rf({height:0,width:0}),ve=xg(),lf=xg(),Ce=Rf(0),He=Rf(void 0),Gd=Rf({row:0,column:0});Hf(af(Cj(nc,od,He),wh(function(cd){return 0!==cd[1]}),Wf(function(cd){return{items:Sp(0,cd[1]-1,cd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Cd);Hf(af(Cj(Bh(Ic),H,Bh(Gd,wn),Bh(Yd,function(cd,Hd){return cd&&cd.width===Hd.width&&cd.height===Hd.height}),He),Qg(Ge),Wf(function(cd){var Hd=cd[0],ad=Hd[0],ud=Hd[1],ye=ud[0],Ve=ud[1],zf=Hd[2],mf=Hd[3],Nf=Hd[4],Hg=cd[1];cd=zf.row;
var uf=zf.column;Hd=mf.height;ud=mf.width;var Cg=Hg.width;if(0===ad||0===Cg)return pv;if(0===ud)return hh({},bo,{items:Sp(0,0,Nf)});uf=Hi(1,qv((Cg+uf)/(ud+uf)));ye=uf*qv((ye+cd)/(Hd+cd));Ve=uf*Kw((Ve+cd)/(Hd+cd))-1;Ve=az(ad-1,Hi(Ve,uf-1));ye=Sp(az(Ve,Hi(0,ye)),Ve,Nf);mf=ro(Hg,zf,mf,ye);zf=mf.top;mf=mf.bottom;ad=Kw(ad/uf);return{items:ye,offsetTop:zf,offsetBottom:ad*Hd+(ad-1)*cd-mf,top:zf,bottom:mf,itemHeight:Hd,itemWidth:ud}})),Cd);Hf(af(He,wh(function(cd){return void 0!==cd}),Wf(function(cd){return cd.length})),
Ic);Hf(af(Ge,Wf(function(cd){return cd.height})),sa);Hf(af(Cj(Ge,Yd,Cd,Gd),Wf(function(cd){cd=ro(cd[0],cd[3],cd[1],cd[2].items);return[cd.top,cd.bottom]}),qi(Tj)),fa);H=Sj(af(Bh(Cd),wh(function(cd){return 0<cd.items.length}),Qg(Ic),wh(function(cd){var Hd=cd[0].items;return Hd[Hd.length-1].index===cd[1]-1}),Wf(function(cd){return cd[1]-1}),qi()));fa=Sj(af(Bh(Cd),wh(function(cd){cd=cd.items;return 0<cd.length&&0===cd[0].index}),qm(0),qi()));sa=Sj(af(Bh(Cd),wh(function(cd){return 0<cd.items.length}),
Wf(function(cd){cd=cd.items;return{startIndex:cd[0].index,endIndex:cd[cd.length-1].index}}),qi(fn)));Hf(sa,Mb.scrollSeekRangeChanged);Hf(af(ve,Qg(Ge,Yd,Ic,Gd),Wf(function(cd){var Hd=cd[1],ad=cd[2],ud=cd[3],ye=cd[4],Ve=Fh(cd[0]);cd=Ve.align;var zf=Ve.behavior,mf=Ve.offset;Ve=Ve.index;"LAST"===Ve&&(Ve=ud-1);ud=Zk(Hd,ye,ad,Hi(0,Ve,az(ud-1,Ve)));return"end"===cd?ud=$y(ud-Hd.height+ad.height):"center"===cd&&(ud=$y(ud-Hd.height/2+ad.height/2)),mf&&(ud+=mf),{top:ud,behavior:zf}})),Ta);nc=Wi(af(Cd,Wf(function(cd){return cd.offsetBottom+
cd.bottom})),0);return Hf(af(Fb,Wf(function(cd){return{width:cd.visibleWidth,height:cd.visibleHeight}})),Ge),hh({data:He,totalCount:Ic,viewportDimensions:Ge,itemDimensions:Yd,scrollTop:d,scrollHeight:lf,overscan:k,scrollBy:Ha,scrollTo:Ta,scrollToIndex:ve,smoothScrollTargetReached:Xa,windowViewportRect:Fb,windowScrollTo:gc,useWindowScroll:bc,customScrollParent:Dc,windowScrollContainerState:Sb,deviation:Ce,scrollContainerState:eb,footerHeight:ib,headerHeight:la,initialItemCount:od,gap:Gd},Mb,{gridState:Cd,
totalListHeight:nc},Bb,{startReached:fa,endReached:H,rangeChanged:sa,propsReady:$b},a)},Vi(Ty,Ln,lv,sq,Us,Gw,Yq)),rv=["placeholder"],EH=Qh(function(){var a=Rf(function(Xa){return"Item "+Xa}),d=Rf({}),k=Rf(null),H=Rf("virtuoso-grid-item"),fa=Rf("virtuoso-grid-list"),la=Rf(Zp),sa=Rf("div"),Ha=Rf(Yi),Ta=function(Xa,eb){return void 0===eb&&(eb=null),Wi(af(d,Wf(function(ib){return ib[Xa]}),qi()),eb)};return{context:k,itemContent:a,components:d,computeItemKey:la,itemClassName:H,listClassName:fa,headerFooterTag:sa,
scrollerRef:Ha,FooterComponent:Ta("Footer"),HeaderComponent:Ta("Header"),ListComponent:Ta("List","div"),ItemComponent:Ta("Item","div"),ScrollerComponent:Ta("Scroller","div"),ScrollSeekPlaceholder:Ta("ScrollSeekPlaceholder","div")}}),dk=Qh(function(a){function d(fa,la,sa){Hf(af(fa,Qg(H.components),Wf(function(Ha){var Ta,Xa=Ha[0];Ha=Ha[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+la+" instead."),hh({},Ha,((Ta={})[la]=Xa,Ta))})),H.components)}var k=a[0],H=
a[1];a={item:Fk(H.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:xg(),ScrollContainer:xg(),ListContainer:xg(),emptyComponent:xg(),scrollSeek:xg()};return qh(a.scrollSeek,function(fa){var la=fa.placeholder;fa=en(fa,rv);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=hh({},(0,H.components)(4),{ScrollSeekPlaceholder:la});(0,H.components)(0,la);(0,k.scrollSeekConfiguration)(0,
fa)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),hh({},k,H,a)},Vi(gu,EH)),Ws=ah.memo(function(){var a=ek("gridState"),d=ek("listClassName"),k=ek("itemClassName"),H=ek("itemContent"),fa=ek("computeItemKey"),la=ek("isSeeking"),sa=Ym("scrollHeight"),Ha=ek("ItemComponent"),Ta=ek("ListComponent"),Xa=ek("ScrollSeekPlaceholder"),eb=ek("context"),ib=Ym("itemDimensions"),Bb=Ym("gap"),Mb=ek("log"),Fb=ni(function($b){sa($b.parentElement.parentElement.scrollHeight);
var nc=$b.firstChild;nc&&ib(nc.getBoundingClientRect());Bb({row:cm("row-gap",getComputedStyle($b).rowGap,Mb),column:cm("column-gap",getComputedStyle($b).columnGap,Mb)})});return(0,yh.createElement)(Ta,hh({ref:Fb,className:d},Bj(Ta,eb),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function($b){var nc=fa($b.index,$b.data,eb);return la?(0,yh.createElement)(Xa,hh({key:nc},Bj(Xa,eb),{index:$b.index,height:a.itemHeight,width:a.itemWidth})):(0,yh.createElement)(Ha,hh({},Bj(Ha,
eb),{className:k,"data-index":$b.index,key:nc}),H($b.index,$b.data,eb))}))}),WC=ah.memo(function(){var a=ek("HeaderComponent"),d=Ym("headerHeight"),k=ek("headerFooterTag"),H=ni(function(la){return d(ul(la,"height"))}),fa=ek("context");return a?(0,yh.createElement)(k,{ref:H},(0,yh.createElement)(a,Bj(a,fa))):null}),XC=ah.memo(function(){var a=ek("FooterComponent"),d=Ym("footerHeight"),k=ek("headerFooterTag"),H=ni(function(la){return d(ul(la,"height"))}),fa=ek("context");return a?(0,yh.createElement)(k,
{ref:H},(0,yh.createElement)(a,Bj(a,fa))):null}),Mg=function(a){a=a.children;var d=(0,yh.useContext)(Cp),k=Ym("itemDimensions"),H=Ym("viewportDimensions"),fa=ni(function(la){H(la.getBoundingClientRect())});return ah.useEffect(function(){d&&(H({height:d.viewportHeight,width:d.viewportWidth}),k({height:d.itemHeight,width:d.itemWidth}))},[d,H,k]),ah.createElement("div",{style:fu,ref:fa},a)},Lw=function(a){a=a.children;var d=(0,yh.useContext)(Cp),k=Ym("windowViewportRect"),H=Ym("itemDimensions"),fa=ek("customScrollParent");
fa=ih(k,fa);return ah.useEffect(function(){d&&(H({height:d.itemHeight,width:d.itemWidth}),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,k,H]),ah.createElement("div",{ref:fa,style:fu},a)},co=wj(dk,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},ah.memo(function(a){a=hh({},a);var d=ek("useWindowScroll"),k=ek("customScrollParent"),H=k||d?Lw:Mg;return ah.createElement(k||d?hu:YC,hh({},a),ah.createElement(H,null,ah.createElement(WC,null),ah.createElement(Ws,null),ah.createElement(XC,null)))})),Ym=co.usePublisher,ek=co.useEmitterValue,Mw=co.useEmitter,YC=po({usePublisher:Ym,useEmitterValue:ek,useEmitter:Mw}),hu=Rp({usePublisher:Ym,useEmitterValue:ek,useEmitter:Mw}),Nw=Qh(function(){var a=Rf(function(Ta){return ah.createElement("td",
null,"Item $",Ta)}),d=Rf(null),k=Rf(null),H=Rf(null),fa=Rf({}),la=Rf(Zp),sa=Rf(Yi),Ha=function(Ta,Xa){return void 0===Xa&&(Xa=null),Wi(af(fa,Wf(function(eb){return eb[Ta]}),qi()),Xa)};return{context:d,itemContent:a,fixedHeaderContent:k,fixedFooterContent:H,components:fa,computeItemKey:la,scrollerRef:sa,TableComponent:Ha("Table","table"),TableHeadComponent:Ha("TableHead","thead"),TableFooterComponent:Ha("TableFoot","tfoot"),TableBodyComponent:Ha("TableBody","tbody"),TableRowComponent:Ha("TableRow",
"tr"),ScrollerComponent:Ha("Scroller","div"),EmptyPlaceholder:Ha("EmptyPlaceholder"),ScrollSeekPlaceholder:Ha("ScrollSeekPlaceholder"),FillerRow:Ha("FillerRow")}}),iu=Qh(function(a){return hh({},a[0],a[1])},Vi(du,Nw)),ZC=function(a){return ah.createElement("tr",null,ah.createElement("td",{style:{height:a.height}}))},$C=function(a){return ah.createElement("tr",null,ah.createElement("td",{style:{height:a.height,padding:0,border:0}}))},Nn=ah.memo(function(){var a=qj("listState"),d=hp("sizeRanges"),k=
qj("useWindowScroll"),H=qj("customScrollParent"),fa=hp("windowScrollContainerState"),la=hp("scrollContainerState");k=H||k?fa:la;var sa=qj("itemContent");fa=qj("trackItemSizes");H=qr(d,qj("itemSize"),fa,k,qj("log"),void 0,H);d=H.callbackRef;var Ha=H.ref;H=ah.useState(0);var Ta=H[0],Xa=H[1];Pw("deviation",function(Sb){Ta!==Sb&&(Ha.current.style.marginTop=Sb+"px",Xa(Sb))});fa=qj("EmptyPlaceholder");var eb=qj("ScrollSeekPlaceholder")||ZC;k=qj("FillerRow")||$C;H=qj("TableBodyComponent");var ib=qj("TableRowComponent"),
Bb=qj("computeItemKey"),Mb=qj("isSeeking");la=qj("paddingTopAddition");var Fb=qj("firstItemIndex"),$b=qj("statefulTotalCount"),nc=qj("context");if(0===$b&&fa)return(0,yh.createElement)(fa,Bj(fa,nc));fa=a.offsetTop+la+Ta;la=a.offsetBottom;fa=0<fa?ah.createElement(k,{height:fa,key:"padding-top"}):null;k=0<la?ah.createElement(k,{height:la,key:"padding-bottom"}):null;a=a.items.map(function(Sb){var gc=Sb.originalIndex,bc=Bb(gc+Fb,Sb.data,nc);return Mb?(0,yh.createElement)(eb,hh({},Bj(eb,nc),{key:bc,index:Sb.index,
height:Sb.size,type:Sb.type||"item"})):(0,yh.createElement)(ib,hh({},Bj(ib,nc),{key:bc,"data-index":gc,"data-known-size":Sb.size,"data-item-index":Sb.index,style:{overflowAnchor:"none"}}),sa(Sb.index,Sb.data,nc))});return(0,yh.createElement)(H,hh({ref:d,"data-test-id":"virtuoso-item-list"},Bj(H,nc)),[fa].concat(a,[k]))}),Ow=function(a){a=a.children;var d=(0,yh.useContext)(mv),k=hp("viewportHeight"),H=hp("fixedItemHeight"),fa=ni(Fl(k,function(la){return ul(la,"height")}));return ah.useEffect(function(){d&&
(k(d.viewportHeight),H(d.itemHeight))},[d,k,H]),ah.createElement("div",{style:fu,ref:fa,"data-viewport-type":"element"},a)},bz=function(a){a=a.children;var d=(0,yh.useContext)(mv),k=hp("windowViewportRect"),H=hp("fixedItemHeight"),fa=qj("customScrollParent");fa=ih(k,fa);return ah.useEffect(function(){d&&(H(d.itemHeight),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,k,H]),ah.createElement("div",{ref:fa,style:fu,"data-viewport-type":"window"},a)},sv=wj(iu,{required:{},optional:{context:"context",
followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",
fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},
events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ah.memo(function(a){var d=qj("useWindowScroll"),k=qj("customScrollParent"),H=hp("fixedHeaderHeight"),fa=hp("fixedFooterHeight"),la=qj("fixedHeaderContent"),sa=qj("fixedFooterContent"),Ha=qj("context");
H=ni(Fl(H,function(ib){return ul(ib,"height")}));var Ta=ni(Fl(fa,function(ib){return ul(ib,"height")}));fa=k||d?aD:FH;d=k||d?bz:Ow;k=qj("TableComponent");var Xa=qj("TableHeadComponent"),eb=qj("TableFooterComponent");la=la?ah.createElement(Xa,hh({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:H},Bj(Xa,Ha)),la()):null;sa=sa?ah.createElement(eb,hh({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Ta},Bj(eb,Ha)),sa()):null;return ah.createElement(fa,hh({},a),ah.createElement(d,
null,ah.createElement(k,hh({style:{borderSpacing:0}},Bj(k,Ha)),[la,ah.createElement(Nn,{key:"TableBody"}),sa])))})),hp=sv.usePublisher,qj=sv.useEmitterValue,Pw=sv.useEmitter,FH=po({usePublisher:hp,useEmitterValue:qj,useEmitter:Pw}),aD=Rp({usePublisher:hp,useEmitterValue:qj,useEmitter:Pw}),ju=df(da(22)),Zm=function(a){function d(k){k=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+k+" for more information.")||this;if(void 0===
k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}Yp(d,a);return d}(Aq(Error)),Qw={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",
floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",
lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",
mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",
sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},bD=/^#[a-fA-F0-9]{6}$/,cD=/^#[a-fA-F0-9]{8}$/,cz=/^#[a-fA-F0-9]{3}$/,Ko=/^#[a-fA-F0-9]{4}$/,Xs=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,
lm=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Rw=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,tv=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,eo=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},kj=kr(lr,lr.length,[]),ku=
da(586),Gm=df(da(22)),fo=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const k=a.ownerDocument,H=k.activeElement;H!==a&&a.focus();k.execCommand("insertText",!1,d)||fo.insertTextFirefox(a,d);H===k.body?a.blur():H instanceof HTMLElement&&H!==a&&H.focus()}static set(a,d){a.select();fo.insert(a,d)}static getSelection(a){const {selectionStart:d,
selectionEnd:k}=a;return a.value.slice(d?d:void 0,k?k:void 0)}static wrapSelection(a,d,k){const {selectionStart:H,selectionEnd:fa}=a,la=fo.getSelection(a);fo.insert(a,d+la+(null!=k?k:d));a.selectionStart=(H||0)+d.length;a.selectionEnd=(fa||0)+d.length}static replace(a,d,k){let H=0;a.value.replace(d,(...fa)=>{const la=H+fa[fa.length-2],sa=fa[0].length;a.selectionStart=la;a.selectionEnd=la+sa;fa="string"===typeof k?k:k(...fa);fo.insert(a,fa);a.selectionStart=la;H+=fa.length-sa;return fa})}static findLineEnd(a,
d){const k=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(k)?d:k+1}static indent(a){var d;const {selectionStart:k,selectionEnd:H,value:fa}=a;var la=fa.slice(k,H);if((la=null==(d=/\n/g.exec(la))?void 0:d.length)&&0<la){d=fa.lastIndexOf("\n",k-1)+1;var sa=a.value.slice(d,H-1);la=sa.replace(/^|\n/g,"$\x26  ");sa=la.length-sa.length;a.setSelectionRange(d,H-1);fo.insert(a,la);a.setSelectionRange(k+1,H+sa)}else fo.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:k,value:H}=a;var fa=
H.lastIndexOf("\n",d-1)+1;const la=fo.findLineEnd(H,k);var sa=a.value.slice(fa,la);const Ha=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-Ha.length;a.setSelectionRange(fa,la);fo.insert(a,Ha);fa=(fa=/\t| {1,2}/.exec(H.slice(fa,d)))?fa[0].length:0;a.setSelectionRange(d-fa,Math.max(d-fa,k-sa))}},Sw=da(586),lu=a=>a.stopPropagation(),mu=Gm.memo(function({font:a,text:d,color:k,fontStyle:H,fontSize:fa,fontWeight:la,offsetX:sa=0,offsetY:Ha=0,scale:Ta=1,isEditing:Xa=!1,pointerEvents:eb=!1,onBlur:ib,onChange:Bb}){const Mb=
Gm.useRef(null),Fb=Gm.useRef(!1),$b=Gm.useCallback(Ic=>{Bb(It.normalizeText(Ic.currentTarget.value))},[Bb]),nc=Gm.useCallback(Ic=>{if("Escape"!==Ic.key)if("Tab"===Ic.key&&0===d.length)Ic.preventDefault();else{if("Meta"!==Ic.key&&!Ic.metaKey)Ic.stopPropagation();else if("z"===Ic.key&&Ic.metaKey){document.execCommand(Ic.shiftKey?"redo":"undo",!1);Ic.stopPropagation();Ic.preventDefault();return}"Tab"===Ic.key&&(Ic.preventDefault(),Ic.shiftKey?fo.unindent(Ic.currentTarget):fo.indent(Ic.currentTarget),
null==Bb?void 0:Bb(It.normalizeText(Ic.currentTarget.value)))}},[Bb]),Sb=Gm.useCallback(Ic=>{Xa&&(Ic.currentTarget.setSelectionRange(0,0),null==ib?void 0:ib())},[ib]),gc=Gm.useCallback(Ic=>{Xa&&Fb.current&&document.activeElement===Ic.currentTarget&&Ic.currentTarget.select()},[Xa]),bc=Gm.useCallback(Ic=>{Xa&&Ic.stopPropagation()},[Xa]);Gm.useEffect(()=>{Xa&&requestAnimationFrame(()=>{Fb.current=!0;const Ic=Mb.current;Ic&&(Ic.focus(),Ic.select())})},[Xa,ib]);const Dc=Gm.useRef(null);Gm.useLayoutEffect(()=>
{const Ic=Dc.current;if(Ic){var od=Uj(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:fa,lineHeight:1,fontWeight:la},4);Ic.style.transform=`scale(${Ta}, ${Ta}) translate(${sa}px, ${Ha}px)`;Ic.style.width=od[0]+1+"px";Ic.style.height=od[1]+1+"px"}},[d,la,fa,Ha,sa,Ta]);return(0,Sw.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Sw.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Dc,style:{font:a,fontStyle:H,fontSize:fa,fontWeight:la,color:k,pointerEvents:eb?"all":"none",
userSelect:Xa?"text":"none"},children:[Xa?(0,Sw.jsx)("textarea",{ref:Mb,style:{font:a,color:k,fontStyle:H,fontSize:fa,fontWeight:la},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:k,onFocus:gc,onChange:$b,onKeyDown:nc,onBlur:Sb,onPointerDown:bc,onContextMenu:lu,onCopy:lu,onPaste:lu,onCut:lu}):
d,""]})})}),ip=da(586),go={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},On=class extends on{constructor(){super(...arguments);fb(this,"canEdit",!0);fb(this,"ReactComponent",Xe(({events:a,isErasing:d,isBinding:k,isSelected:H,isEditing:fa,onEditingEnd:la})=>{const {props:{size:[sa,Ha],stroke:Ta,fill:Xa,noFill:eb,strokeWidth:ib,strokeType:Bb,borderRadius:Mb,opacity:Fb,label:$b,italic:nc,fontWeight:Sb,fontSize:gc}}=this;var bc=$b||fa?Uj($b,{fontFamily:"var(--ls-font-family)",fontSize:gc,lineHeight:1,fontWeight:Sb},
4):[0,0];const Dc=Rd.mul(this.props.size,.5);bc=Math.max(.5,Math.min(1,sa/bc[0],Ha/bc[1]));const Ic=this.getBounds(),od=ju.useMemo(()=>Rd.sub(Dc,Rd.toFixed([Ic.width/2,Ic.height/2])),[Ic,bc,Dc]),Cd=ju.useCallback(Ge=>{var Yd;null==(Yd=this.update)?void 0:Yd.call(this,{label:Ge})},[$b]);return(0,ip.jsxs)("div",Te(Xd({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,ip.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:$b,color:ch(Ta,"text"),offsetX:od[0],
offsetY:od[1],fontSize:gc,scale:bc,isEditing:fa,onChange:Cd,onBlur:la,fontStyle:nc?"italic":"normal",fontWeight:Sb,pointerEvents:!!$b}),(0,ip.jsxs)(cp,{opacity:d?.2:Fb,children:[k&&(0,ip.jsx)(is,{mode:"svg",strokeWidth:ib,size:[sa,Ha]}),(0,ip.jsx)("rect",{className:H||!eb?"tl-hitarea-fill":"tl-hitarea-stroke",x:ib/2,y:ib/2,rx:Mb,ry:Mb,width:Math.max(.01,sa-ib),height:Math.max(.01,Ha-ib),pointerEvents:"all"}),(0,ip.jsx)("rect",{x:ib/2,y:ib/2,rx:Mb,ry:Mb,width:Math.max(.01,sa-ib),height:Math.max(.01,
Ha-ib),strokeWidth:ib,stroke:ch(Ta,"stroke"),strokeDasharray:"dashed"===Bb?"8 2":void 0,fill:eb?"none":ch(Xa,"background")})]})]}))}));fb(this,"setScaleLevel",a=>Mh(this,null,function*(){this.update({scaleLevel:a,fontSize:go[null!=a?a:"md"],strokeWidth:go[null!=a?a:"md"]/10});this.onResetBounds()}));fb(this,"ReactIndicator",Xe(()=>{const {props:{size:[a,d],borderRadius:k,isLocked:H}}=this;return(0,ip.jsx)("g",{children:(0,ip.jsx)("rect",{width:a,height:d,rx:k,ry:k,fill:"transparent",strokeDasharray:H?
"8 2":void 0})})}));fb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return Pm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};fb(On,"id","box");fb(On,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,
opacity:1,label:""});Pd([nf],On.prototype,"scaleLevel",1);Pd([jg],On.prototype,"setScaleLevel",2);var Tw=df(da(22)),jp=da(586),uv={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Ys=class extends wx{constructor(){super(...arguments);fb(this,"canEdit",!0);fb(this,"ReactComponent",Xe(({isSelected:a,isErasing:d,events:k,isEditing:H,onEditingEnd:fa})=>{const {size:[la,sa],stroke:Ha,fill:Ta,noFill:Xa,strokeWidth:eb,strokeType:ib,opacity:Bb,label:Mb,italic:Fb,fontWeight:$b,fontSize:nc}=this.props;var Sb=Mb||H?Uj(Mb,
{fontFamily:"var(--ls-font-family)",fontSize:nc,lineHeight:1,fontWeight:$b},4):[0,0];const gc=Rd.mul(this.props.size,.5);Sb=Math.max(.5,Math.min(1,la/Sb[0],sa/Sb[1]));const bc=this.getBounds(),Dc=Tw.useMemo(()=>Rd.sub(gc,Rd.toFixed([bc.width/2,bc.height/2])),[bc,Sb,gc]),Ic=Tw.useCallback(od=>{var Cd;null==(Cd=this.update)?void 0:Cd.call(this,{label:od})},[Mb]);return(0,jp.jsxs)("div",Te(Xd({},k),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,jp.jsx)(mu,
{font:"18px / 1 var(--ls-font-family)",text:Mb,color:ch(Ha,"text"),offsetX:Dc[0],offsetY:Dc[1],scale:Sb,isEditing:H,onChange:Ic,onBlur:fa,fontStyle:Fb?"italic":"normal",fontSize:nc,fontWeight:$b,pointerEvents:!!Mb}),(0,jp.jsxs)(cp,Te(Xd({},k),{opacity:d?.2:Bb,children:[(0,jp.jsx)("ellipse",{className:a||!Xa?"tl-hitarea-fill":"tl-hitarea-stroke",cx:la/2,cy:sa/2,rx:Math.max(.01,(la-eb)/2),ry:Math.max(.01,(sa-eb)/2)}),(0,jp.jsx)("ellipse",{cx:la/2,cy:sa/2,rx:Math.max(.01,(la-eb)/2),ry:Math.max(.01,(sa-
eb)/2),strokeWidth:eb,stroke:ch(Ha,"stroke"),strokeDasharray:"dashed"===ib?"8 2":void 0,fill:Xa?"none":ch(Ta,"background")})]}))]}))}));fb(this,"setScaleLevel",a=>Mh(this,null,function*(){this.update({scaleLevel:a,fontSize:uv[null!=a?a:"md"],strokeWidth:uv[null!=a?a:"md"]/10});this.onResetBounds()}));fb(this,"ReactIndicator",Xe(()=>{const {size:[a,d],isLocked:k}=this.props;return(0,jp.jsx)("g",{children:(0,jp.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:k?
"8 2":"undefined"})})}));fb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return Pm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,k],stroke:H,fill:fa,noFill:la,strokeWidth:sa,strokeType:Ha,opacity:Ta}=this.props;return(0,jp.jsxs)("g",{opacity:Ta,children:[(0,jp.jsx)("ellipse",{className:la?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:k/2,rx:Math.max(.01,(d-sa)/2),ry:Math.max(.01,
(k-sa)/2)}),(0,jp.jsx)("ellipse",{cx:d/2,cy:k/2,rx:Math.max(.01,(d-sa)/2),ry:Math.max(.01,(k-sa)/2),strokeWidth:sa,stroke:ch(H,"stroke"),strokeDasharray:"dashed"===Ha?"8 2":void 0,fill:la?"none":ch(fa,"background")})]})}};fb(Ys,"id","ellipse");fb(Ys,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});Pd([nf],Ys.prototype,"scaleLevel",1);Pd([jg],Ys.prototype,
"setScaleLevel",2);var Ur=da(586),Uw=class extends Wv{constructor(){super(...arguments);fb(this,"ReactComponent",Xe(({events:a})=>{const d=this.getBounds(),k=Yf(),H=k.selectedShapesArray.some(la=>k.shapesInGroups([this]).includes(la)),fa=this.ReactIndicator;return(0,Ur.jsxs)(cp,Te(Xd({},a),{className:"tl-group-container",children:[(0,Ur.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),H&&(0,Ur.jsx)("g",{stroke:"var(--color-selectedFill)",
children:(0,Ur.jsx)(fa,{})})]}))}));fb(this,"ReactIndicator",Xe(()=>{const a=this.getBounds();return(0,Ur.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};fb(Uw,"id","group");fb(Uw,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var vv=da(586),dz={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Vr=class extends Bt{constructor(a={}){super(a);fb(this,"ReactComponent",Xe(({events:d,isErasing:k})=>{const {pointsPath:H,
props:{stroke:fa,strokeWidth:la,opacity:sa}}=this;return(0,vv.jsx)(cp,Te(Xd({},d),{opacity:k?.2:1,children:(0,vv.jsx)("path",{d:H,strokeWidth:16*la,stroke:ch(fa,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:sa})}))}));fb(this,"setScaleLevel",d=>Mh(this,null,function*(){this.update({scaleLevel:d,strokeWidth:dz[null!=d?d:"md"]});this.onResetBounds()}));fb(this,"ReactIndicator",Xe(()=>{const {pointsPath:d,props:k}=this;return(0,vv.jsx)("path",{d,fill:"none",
strokeDasharray:k.isLocked?"8 2":"undefined"})}));fb(this,"validateProps",d=>{d=Pm(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});og(this)}get pointsPath(){const {points:a}=this.props;return wu.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:k,opacity:H}}=this;return(0,vv.jsx)("path",{d:a,strokeWidth:16*k,stroke:ch(d,"stroke"),fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:H})}};fb(Vr,"id","highlighter");fb(Vr,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});Pd([nf],Vr.prototype,"pointsPath",1);Pd([nf],Vr.prototype,"scaleLevel",1);Pd([jg],Vr.prototype,"setScaleLevel",2);var Zs=df(da(22)),Ue=da(586),Fg={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Dp=class extends on{constructor(){super(...arguments);
fb(this,"canChangeAspectRatio",!0);fb(this,"canFlip",!1);fb(this,"canEdit",!0);fb(this,"htmlAnchorRef",Zs.createRef());fb(this,"setScaleLevel",a=>Mh(this,null,function*(){var d;const k=Rd.mul(this.props.size,Fg[null!=a?a:"md"]/Fg[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield Il();this.update({size:k})}));fb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const k=this.htmlAnchorRef.current.getBoundingClientRect(),[H,fa]=Rd.div([k.width,k.height],null!=(d=
null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(H||400,1400),10),Math.max(Math.min(fa||400,1400),10)]})}return this});fb(this,"ReactComponent",Xe(({events:a,isErasing:d,isEditing:k})=>{const {props:{html:H,scaleLevel:fa}}=this,la=hn(),sa=Yf(),Ha=sa.selectedIds.has(this.id),Ta=la||Ha&&!k||"select"!==sa.selectedTool.id,Xa=Zs.useCallback(ib=>{Ta||ib.stopPropagation()},[Ta]),eb=Fg[null!=fa?fa:"md"];Zs.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:sa.viewport.camera.zoom}),
sa.persist(!0))},[]);return(0,Ue.jsx)(Bo,Te(Xd({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Ue.jsx)("div",{onWheelCapture:Xa,onPointerDown:Xa,onPointerUp:Xa,className:"tl-html-container",style:{pointerEvents:la||!k&&!Ha?"none":"all",overflow:k?"auto":"hidden",width:`calc(100% / ${eb})`,height:`calc(100% / ${eb})`,transform:`scale(${eb})`},children:(0,Ue.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:H.trim()}})})}))}));
fb(this,"ReactIndicator",Xe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,Ue.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}));fb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return Pm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};fb(Dp,"id","html");fb(Dp,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});Pd([nf],
Dp.prototype,"scaleLevel",1);Pd([jg],Dp.prototype,"setScaleLevel",2);var ez=df(da(22)),nu=da(586),Wr=class extends on{constructor(){super(...arguments);fb(this,"frameRef",ez.createRef());fb(this,"canEdit",!0);fb(this,"onIFrameSourceChange",a=>{this.update({url:a})});fb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});fb(this,"ReactComponent",Xe(({events:a,isErasing:d,isEditing:k})=>{ez.useRef(null);const H=
Yf();return(0,nu.jsx)(Bo,Te(Xd({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,nu.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:k||H.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,nu.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,nu.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));
fb(this,"ReactIndicator",Xe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,nu.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}))}};fb(Wr,"id","iframe");fb(Wr,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});Pd([jg],Wr.prototype,"onIFrameSourceChange",2);Pd([jg],Wr.prototype,"reload",2);var fz=df(da(22)),$s=da(586),wv=class extends xx{constructor(){super(...arguments);fb(this,"ReactComponent",Xe(({events:a,
isErasing:d,isBinding:k,asset:H})=>{const {props:{opacity:fa,objectFit:la,clipping:sa,size:[Ha,Ta]}}=this,[Xa,eb,ib,Bb]=Array.isArray(sa)?sa:[sa,sa,sa,sa],{handlers:Mb}=fz.useContext(Gi);return(0,$s.jsxs)(Bo,Te(Xd({},a),{opacity:d?.2:fa,children:[k&&(0,$s.jsx)(is,{mode:"html",strokeWidth:4,size:[Ha,Ta]}),(0,$s.jsx)("div",{"data-asset-loaded":!!H,className:"tl-image-shape-container",children:H?(0,$s.jsx)("img",{src:Mb?Mb.makeAssetUrl(H.src):H.src,draggable:!1,style:{position:"relative",top:-Xa,left:-Bb,
width:Ha+(Bb-eb),height:Ta+(Xa-ib),objectFit:la}}):"Asset is missing"})]}))}));fb(this,"ReactIndicator",Xe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,$s.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,k;const H=this.getBounds(),{assetId:fa,clipping:la}=this.props;if(a=a.find(sa=>sa.id===fa)){Array.isArray(la);const sa=null==(k=null==(d=window.logseq)?void 0:d.api)?void 0:k.make_asset_url;return(0,$s.jsx)("image",
{width:H.width,height:H.height,href:sa?sa(a.src):a.src})}return super.getShapeSVGJsx({})}};fb(wv,"id","image");fb(wv,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Ii=df(da(22)),dD=df(da(22)),Vw=da(586),$q=da(586),eD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ou=dD.memo(function({style:a,start:d,end:k,decorationStart:H,decorationEnd:fa,scaleLevel:la}){const sa=Rd.dist(d,k);if(2>sa)return null;
const {strokeWidth:Ha}=a,Ta=1+Ha*eD[null!=la?la:"md"]/10,Xa="M"+Rd.toFixed(d)+"L"+Rd.toFixed(k);la=Math.min(sa/3,Ha*eD[null!=la?la:"md"]);H=H?Bq(d,k,la):null;fa=fa?Bq(k,d,la):null;return(0,$q.jsxs)($q.Fragment,{children:[(0,$q.jsx)("path",{className:"tl-stroke-hitarea",d:Xa}),(0,$q.jsx)("path",{d:Xa,strokeWidth:Ta,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),H&&(0,$q.jsx)(zq,{left:H.left,middle:d,right:H.right,
stroke:a.stroke,strokeWidth:Ta}),fa&&(0,$q.jsx)(zq,{left:fa.left,middle:k,right:fa.right,stroke:a.stroke,strokeWidth:Ta})]})}),xv=da(586),Pn=da(586),Xr={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},at=class extends Iu{constructor(){super(...arguments);fb(this,"hideSelection",!0);fb(this,"canEdit",!0);fb(this,"ReactComponent",Xe(({events:a,isErasing:d,isEditing:k,onEditingEnd:H})=>{const {stroke:fa,handles:{start:la,end:sa},opacity:Ha,label:Ta,italic:Xa,fontWeight:eb,fontSize:ib,id:Bb}=this.props,Mb=Ta||
k?Uj(Ta||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:ib,lineHeight:1,fontWeight:eb},6):[0,0],Fb=Rd.med(la.point,sa.point);var $b=Rd.dist(la.point,sa.point);$b=Math.max(.5,Math.min(1,Math.max($b/(Mb[1]+128),$b/(Mb[0]+128))));const nc=this.getBounds(),Sb=Ii.useMemo(()=>Rd.sub(Fb,Rd.toFixed([nc.width/2,nc.height/2])),[nc,$b,Fb]),gc=Ii.useCallback(bc=>{var Dc;null==(Dc=this.update)?void 0:Dc.call(this,{label:bc})},[Ta]);return(0,Pn.jsxs)("div",Te(Xd({},a),{style:{width:"100%",height:"100%",
overflow:"hidden"},className:"tl-line-container",children:[(0,Pn.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:Ta,fontSize:ib,color:ch(fa,"text"),offsetX:Sb[0],offsetY:Sb[1],scale:$b,isEditing:k,onChange:gc,onBlur:H,fontStyle:Xa?"italic":"normal",fontWeight:eb,pointerEvents:!!Ta}),(0,Pn.jsxs)(cp,{opacity:d?.2:Ha,id:Bb+"_svg",children:[(0,Pn.jsx)(gs,{id:Bb,bounds:nc,labelSize:Mb,offset:Sb,scale:$b}),(0,Pn.jsx)("g",{pointerEvents:"none",mask:Ta||k?`url(#${Bb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));
fb(this,"setScaleLevel",a=>Mh(this,null,function*(){this.update({scaleLevel:a,fontSize:Xr[null!=a?a:"md"]});this.onResetBounds()}));fb(this,"ReactIndicator",Xe(({isEditing:a})=>{const {id:d,decorations:k,label:H,strokeWidth:fa,fontSize:la,fontWeight:sa,handles:{start:Ha,end:Ta},isLocked:Xa}=this.props,eb=this.getBounds(),ib=H||a?Uj(H,{fontFamily:"var(--ls-font-family)",fontSize:la,lineHeight:1,fontWeight:sa},6):[0,0],Bb=Rd.med(Ha.point,Ta.point);var Mb=Rd.dist(Ha.point,Ta.point);Mb=Math.max(.5,Math.min(1,
Math.max(Mb/(ib[1]+128),Mb/(ib[0]+128))));const Fb=Ii.useMemo(()=>Rd.sub(Bb,Rd.toFixed([eb.width/2,eb.height/2])),[eb,Mb,Bb]);return(0,Pn.jsxs)("g",{children:[(0,Pn.jsx)("path",{mask:H?`url(#${d}_clip)`:"",d:Nl({strokeWidth:fa},Ha.point,Ta.point,null==k?void 0:k.start,null==k?void 0:k.end),strokeDasharray:Xa?"8 2":"undefined"}),H&&!a&&(0,Pn.jsx)("rect",{x:eb.width/2-ib[0]/2*Mb+Fb[0],y:eb.height/2-ib[1]/2*Mb+Fb[1],width:ib[0]*Mb,height:ib[1]*Mb,rx:4*Mb,ry:4*Mb,fill:"transparent"})]})}));fb(this,"validateProps",
a=>Pm(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,fill:k,strokeWidth:H,strokeType:fa,decorations:la,label:sa,scaleLevel:Ha,handles:{start:Ta,end:Xa}}=this.props,eb=Rd.med(Ta.point,Xa.point);return(0,Pn.jsxs)(Pn.Fragment,{children:[(0,Pn.jsx)(ou,{style:{stroke:ch(d,"text"),fill:k,strokeWidth:H,strokeType:fa},scaleLevel:Ha,start:Ta.point,end:Xa.point,decorationStart:null==la?void 0:la.start,decorationEnd:null==la?void 0:la.end}),
a&&(0,Pn.jsx)(Pn.Fragment,{children:(0,Pn.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${eb[0]}, ${eb[1]})`,textAnchor:"middle",fill:ch(d,"text"),stroke:ch(d,"text"),children:sa})})]})}};fb(at,"id","line");fb(at,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",
strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});Pd([nf],at.prototype,"scaleLevel",1);Pd([jg],at.prototype,"setScaleLevel",2);var Qn=df(da(22)),dj=da(586),kp={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Ep=Xe(({type:a,fill:d,opacity:k,children:H})=>{const fa="var(--ls-secondary-background-color)"!==d?ch(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?Oi(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,dj.jsxs)("div",
{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,dj.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:k,background:"P"===a?fa:`linear-gradient(0deg, ${d}, ${fa})`}}),(0,dj.jsx)("div",{className:"relative",children:H})]})}),Dk=class extends on{constructor(a={}){var d;super(a);fb(this,"hideRotateHandle",!0);fb(this,"canChangeAspectRatio",!0);fb(this,"canFlip",!0);fb(this,"canEdit",!0);fb(this,"persist",null);fb(this,
"initialHeightCalculated",!0);fb(this,"getInnerHeight",null);fb(this,"setCollapsed",k=>Mh(this,null,function*(){var H;if("B"===this.props.blockType){if(this.update({compact:k}),this.canResize[1]=!k,!k)this.onResetBounds()}else{const fa=this.props.size[1];this.canResize[1]=!k;this.update({isAutoResizing:!k,collapsed:k,size:[this.props.size[0],k?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:k?fa:this.props.collapsedHeight})}null==(H=this.persist)?void 0:H.call(this)}));fb(this,
"setScaleLevel",k=>Mh(this,null,function*(){var H;const fa=Rd.mul(this.props.size,kp[null!=k?k:"md"]/kp[null!=(H=this.props.scaleLevel)?H:"md"]);this.update({scaleLevel:k});yield Il();this.update({size:fa})}));fb(this,"onResetBounds",k=>{k=this.getAutoResizeHeight();null!==k&&1<Math.abs(k-this.props.size[1])&&(this.update({size:[this.props.size[0],k]}),this.initialHeightCalculated=!0);return this});fb(this,"onResize",(k,H)=>{var fa;const {bounds:la,rotation:sa,scale:[Ha,Ta]}=H;k=[...this.scale];0>
Ha&&(k[0]*=-1);0>Ta&&(k[1]*=-1);H=la.height;this.props.isAutoResizing&&(H=null!=(fa=this.getAutoResizeHeight())?fa:H);return this.update({point:[la.minX,la.minY],size:[Math.max(1,la.width),Math.max(1,H)],scale:k,rotation:sa})});fb(this,"PortalComponent",Xe(({})=>{const {props:{pageId:k,fill:H,opacity:fa}}=this,{renderers:la}=Qn.useContext(Gi),sa=Yf(),Ha=Qn.useRef(null),[,Ta]=this.useComponentSize(Ha,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");
if(null==la||!la.Page)return null;const {Page:Xa,Block:eb}=la,[ib,Bb]=Qn.useState(!1);Qn.useEffect(()=>{var Mb,Fb;if(this.props.isAutoResizing){const $b=(null!=(Fb=null==(Mb=this.getInnerHeight)?void 0:Mb.call(this))?Fb:Ta)+this.getHeaderHeight();Ta&&1<Math.abs($b-this.props.size[1])&&(this.update({size:[this.props.size[0],$b]}),ib&&sa.persist(!0))}},[Ta,this.props.isAutoResizing]);Qn.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();sa.persist(!0)})},[this.initialHeightCalculated]);
Qn.useEffect(()=>{setTimeout(function(){Bb(!0)})},[]);return(0,dj.jsxs)(dj.Fragment,{children:[(0,dj.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>sa.viewport.camera.zoom?"optimizeSpeed":"auto",background:H&&"var(--ls-secondary-background-color)"!==H?Oi(H)?`var(--ls-highlight-color-${H})`:H:"var(--ls-secondary-background-color)",opacity:fa}}),(0,dj.jsx)("div",{ref:Ha,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?
"visible":"auto"},children:(ib||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,dj.jsx)(eb,{blockId:k}):(0,dj.jsx)(Xa,{pageName:k}))})]})}));fb(this,"ReactComponent",Xe(k=>{var H;const {events:fa,isErasing:la,isEditing:sa,isBinding:Ha}=k,{props:{opacity:Ta,pageId:Xa,fill:eb,scaleLevel:ib,strokeWidth:Bb,size:Mb}}=this,Fb=Yf(),{renderers:$b,handlers:nc}=Qn.useContext(Gi);this.persist=()=>Fb.persist();const Sb=hn(),gc=Fb.selectedIds.has(this.id)&&1===Fb.selectedIds.size,
bc=Fb.isIn("logseq-portal.creating")&&!Xa,Dc=(Sb||gc&&!sa||"select"!==Fb.selectedTool.id)&&!bc,Ic=Qn.useCallback(cd=>{Dc||cd.stopPropagation()},[Dc]),od=1===Fb.selectedShapesArray.length&&Fb.selectedShapesArray.some(cd=>"logseq-portal"===cd.type&&cd.props.id!==this.props.id&&Xa&&cd.props.pageId===Xa),Cd=kp[null!=ib?ib:"md"];Qn.useEffect(()=>this.props.collapsed&&sa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):
()=>{},[sa,this.props.collapsed]);Qn.useEffect(()=>{if(bc){const cd=[Fb.viewport.bounds.width,Fb.viewport.bounds.height],Hd=Fb.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(Hd[0]>cd[0]-400||Hd[1]>cd[1]-240||1.5<Fb.viewport.camera.zoom||.5>Fb.viewport.camera.zoom)&&Fb.viewport.zoomToBounds(Te(Xd({},this.bounds),{minY:this.bounds.maxY+25}))}},[Fb.viewport.bounds.height.toFixed(2)]);const Ge=Qn.useCallback(cd=>{this.initialHeightCalculated=!1;const Hd=dl(cd)?"B":"P";this.update({pageId:cd,
size:[400,320],blockType:Hd,compact:"B"===Hd});Fb.selectTool("select");Fb.history.resume();Fb.history.persist()},[]),Yd=this.PortalComponent;var ve=Qn.useMemo(()=>{var cd;if(Xa&&"B"===this.props.blockType)return null==(cd=null==nc?void 0:nc.queryBlockByUUID(Xa))?void 0:cd.content},[null==nc?void 0:nc.queryBlockByUUID,Xa]);ve="B"===this.props.blockType&&"string"!==typeof ve;const lf=(!this.props.collapsed||sa)&&!ve;if(null==$b||!$b.Page)return null;const {Breadcrumb:Ce,PageName:He}=$b,Gd={width:`calc(100% / ${Cd})`,
height:`calc(100% / ${Cd})`,opacity:la?.2:1};1!==Cd&&(Gd.transform=`scale(${Cd})`);return(0,dj.jsxs)(Bo,Te(Xd({style:{pointerEvents:"all"}},fa),{children:[Ha&&(0,dj.jsx)(is,{mode:"html",strokeWidth:Bb,size:Mb}),(0,dj.jsx)("div",{"data-inner-events":!Dc,onWheelCapture:Ic,onPointerDown:Ic,onPointerUp:Ic,style:{width:"100%",height:"100%",pointerEvents:Sb||!sa&&!gc?"none":"all"},children:bc?(0,dj.jsx)(ft,{onChange:Ge,onAddBlock:cd=>{setTimeout(()=>{var Hd,ad,ud;Fb.api.editShape(this);null==(ud=null==
(ad=null==(Hd=window.logseq)?void 0:Hd.api)?void 0:ad.edit_block)?void 0:ud.call(ad,cd)})},placeholder:"Create or search your graph..."}):(0,dj.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":Xa,"data-portal-selected":od,"data-editing":sa,style:Gd,children:[!this.props.compact&&!ve&&(0,dj.jsx)(Ep,{type:null!=(H=this.props.blockType)?H:"P",fill:eb,opacity:Ta,children:"P"===this.props.blockType?(0,dj.jsx)(He,{pageName:Xa}):(0,dj.jsx)(Ce,{blockId:Xa})}),
ve&&(0,dj.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),lf&&(0,dj.jsx)(Yd,Xd({},k))]})})]}))}));fb(this,"ReactIndicator",Xe(()=>{const k=this.getBounds();return(0,dj.jsx)("rect",{width:k.width,height:k.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));fb(this,"validateProps",k=>{var H;if(void 0!==k.size){const fa=kp[null!=(H=this.props.scaleLevel)?H:"md"];k.size[0]=Math.max(k.size[0],60*fa);k.size[1]=Math.max(k.size[1],40*fa)}return Pm(this,
k)});og(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [k,H]=Qn.useState([0,0]),fa=Yf();Qn.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const la=
d?a.current.querySelector(d):a.current;if(la){const sa=()=>{const {width:Ta,height:Xa}=la.getBoundingClientRect(),eb=Rd.div([Ta,Xa],fa.viewport.camera.zoom);H(eb);return eb};sa();this.getInnerHeight=()=>sa()[1];const Ha=new ResizeObserver(()=>{sa()});Ha.observe(la);return()=>{Ha.disconnect()}}}return()=>{}},10)},[a,d]);return k}getHeaderHeight(){var a;const d=kp[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+
this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,k;const H=this.getBounds();return(0,dj.jsxs)(dj.Fragment,{children:[(0,dj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Oi(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:ch(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:H.width,rx:8,ry:8,
height:H.height}),!this.props.compact&&(0,dj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?ch(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(k=this.props.opacity)?k:.2,x:1,y:1,width:H.width-2,height:38,rx:8,ry:8}),(0,dj.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${H.width/2}, ${10+H.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",
stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};fb(Dk,"id","logseq-portal");fb(Dk,"defaultSearchQuery","");fb(Dk,"defaultSearchFilter",null);fb(Dk,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});Pd([nf],Dk.prototype,"collapsed",
1);Pd([jg],Dk.prototype,"setCollapsed",2);Pd([nf],Dk.prototype,"scaleLevel",1);Pd([jg],Dk.prototype,"setScaleLevel",2);var {min:Fp,PI:fD}=Math,ar=fD+1E-4,yv=da(586),Gp={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},bt={easing:a=>Math.sin(a*Math.PI/2),simulatePressure:!0},gz={easing:a=>a*a,simulatePressure:!1},mg=class extends Bt{constructor(a={}){super(a);fb(this,"ReactComponent",Xe(({events:d,isErasing:k})=>{const {props:{opacity:H}}=this;return(0,yv.jsx)(cp,Te(Xd({},d),{opacity:k?.2:H,children:this.getShapeSVGJsx()}))}));
fb(this,"setScaleLevel",d=>Mh(this,null,function*(){this.update({scaleLevel:d,strokeWidth:Gp[null!=d?d:"md"]});this.onResetBounds()}));fb(this,"ReactIndicator",Xe(()=>{const {pointsPath:d}=this;return(0,yv.jsx)("path",{d,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));fb(this,"validateProps",d=>{d=Pm(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});og(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=Te(Xd({size:1+1.5*a.strokeWidth,
thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?bt:gz),{last:a.isComplete}),a=Yj(a.points,d),d=wu.getSvgPathFromStroke(Dq(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:k,strokeType:H}}=this;return(0,yv.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:k/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:ch(d,"text"),fill:ch(d,"text"),strokeDasharray:"dashed"===H?"12 4":void 0})}};
fb(mg,"id","pencil");fb(mg,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Pd([nf],mg.prototype,"pointsPath",1);Pd([nf],mg.prototype,"scaleLevel",1);Pd([jg],mg.prototype,"setScaleLevel",2);var zv=df(da(22)),Lo=da(586),br={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Mo=class extends Br{constructor(){super(...arguments);fb(this,"canEdit",!0);fb(this,"ReactComponent",Xe(({events:a,isErasing:d,
isSelected:k,isEditing:H,onEditingEnd:fa})=>{const {offset:[la,sa],props:{stroke:Ha,fill:Ta,noFill:Xa,strokeWidth:eb,opacity:ib,strokeType:Bb,label:Mb,italic:Fb,fontWeight:$b,fontSize:nc}}=this,Sb=this.getVertices(eb/2).join();var gc=Mb||H?Uj(Mb,{fontFamily:"var(--ls-font-family)",fontSize:nc,lineHeight:1,fontWeight:$b},4):[0,0];const bc=[this.props.size[0]/2,2*this.props.size[1]/3];gc=Math.max(.5,Math.min(1,this.props.size[0]/(2*gc[0]),this.props.size[1]/(2*gc[1])));const Dc=this.getBounds(),Ic=
zv.useMemo(()=>Rd.sub(bc,Rd.toFixed([Dc.width/2,Dc.height/2])),[Dc,gc,bc]),od=zv.useCallback(Cd=>{var Ge;null==(Ge=this.update)?void 0:Ge.call(this,{label:Cd})},[Mb]);return(0,Lo.jsxs)("div",Te(Xd({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Lo.jsx)(mu,{font:"20px / 1 var(--ls-font-family)",text:Mb,fontSize:nc,color:ch(Ha,"text"),offsetX:Ic[0],offsetY:Ic[1]/gc,scale:gc,isEditing:H,onChange:od,onBlur:fa,fontStyle:Fb?"italic":"normal",fontWeight:$b,pointerEvents:!!Mb}),(0,Lo.jsx)(cp,
{opacity:d?.2:ib,children:(0,Lo.jsxs)("g",{transform:`translate(${la}, ${sa})`,children:[(0,Lo.jsx)("polygon",{className:k||!Xa?"tl-hitarea-fill":"tl-hitarea-stroke",points:Sb}),(0,Lo.jsx)("polygon",{points:Sb,stroke:ch(Ha,"stroke"),fill:Xa?"none":ch(Ta,"background"),strokeWidth:eb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Bb?"8 2":void 0})]})})]}))}));fb(this,"setScaleLevel",a=>Mh(this,null,function*(){this.update({scaleLevel:a,fontSize:br[null!=a?a:"md"],strokeWidth:br[null!=a?
a:"md"]/10});this.onResetBounds()}));fb(this,"ReactIndicator",Xe(()=>{const {offset:[a,d],props:{strokeWidth:k,isLocked:H}}=this;return(0,Lo.jsx)("g",{children:(0,Lo.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(k/2).join(),strokeDasharray:H?"8 2":"undefined"})})}));fb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return Pm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,k],props:{stroke:H,
fill:fa,noFill:la,strokeWidth:sa,opacity:Ha,strokeType:Ta}}=this;a=this.getVertices(sa/2).join();return(0,Lo.jsxs)("g",{transform:`translate(${d}, ${k})`,opacity:Ha,children:[(0,Lo.jsx)("polygon",{className:la?"tl-hitarea-stroke":"tl-hitarea-fill",points:a}),(0,Lo.jsx)("polygon",{points:a,stroke:ch(H,"stroke"),fill:la?"none":ch(fa,"background"),strokeWidth:sa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Ta?"8 2":void 0})]})}};fb(Mo,"id","polygon");fb(Mo,"defaultProps",{id:"polygon",
parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});Pd([nf],Mo.prototype,"scaleLevel",1);Pd([jg],Mo.prototype,"setScaleLevel",2);var lp=df(da(22)),Hm=da(586),gD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},$m=class extends yx{constructor(){super(...arguments);fb(this,"ReactComponent",Xe(({events:a,isErasing:d,isEditing:k,onEditingEnd:H})=>{const {props:{opacity:fa,
fontFamily:la,fontSize:sa,fontWeight:Ha,italic:Ta,lineHeight:Xa,text:eb,stroke:ib,padding:Bb}}=this,Mb=lp.useRef(null),Fb=lp.useRef(!1),$b=lp.useRef(null),nc=lp.useCallback(Ic=>{const {isSizeLocked:od}=this.props;Ic=It.normalizeText(Ic.currentTarget.value);od?this.update({text:Ic,size:this.getAutoSizedBoundingBox({text:Ic})}):this.update({text:Ic})},[]),Sb=lp.useCallback(Ic=>{if("Escape"!==Ic.key)if("Tab"===Ic.key&&0===eb.length)Ic.preventDefault();else{if("Meta"!==Ic.key&&!Ic.metaKey)Ic.stopPropagation();
else if("z"===Ic.key&&Ic.metaKey){Ic.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Ic.stopPropagation();Ic.preventDefault();return}"Tab"===Ic.key&&(Ic.preventDefault(),Ic.shiftKey?fo.unindent(Ic.currentTarget):fo.indent(Ic.currentTarget),this.update({text:It.normalizeText(Ic.currentTarget.value)}))}},[]),gc=lp.useCallback(Ic=>{k&&(null==H?void 0:H())},[H]),bc=lp.useCallback(Ic=>{k&&Fb.current&&document.activeElement===Ic.currentTarget&&Ic.currentTarget.select()},[k]),Dc=
lp.useCallback(Ic=>{k&&Ic.stopPropagation()},[k]);lp.useEffect(()=>{k&&requestAnimationFrame(()=>{Fb.current=!0;const Ic=Mb.current;Ic&&(Ic.focus(),Ic.select())})},[k,H]);lp.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,Hm.jsx)(Bo,Te(Xd({},a),{opacity:d?.2:fa,children:(0,Hm.jsx)("div",{ref:$b,className:"tl-text-shape-wrapper","data-hastext":!!eb,"data-isediting":k,style:{fontFamily:la,fontStyle:Ta?"italic":"normal",fontSize:sa,fontWeight:Ha,
padding:Bb,lineHeight:Xa,color:ch(ib,"text")},children:k?(0,Hm.jsx)("textarea",{ref:Mb,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:eb,onFocus:bc,onChange:nc,onKeyDown:Sb,onBlur:gc,onPointerDown:Dc}):(0,Hm.jsxs)(Hm.Fragment,{children:[eb,""]})})}))}));fb(this,"setScaleLevel",a=>Mh(this,null,function*(){this.update({scaleLevel:a,
fontSize:gD[null!=a?a:"md"]});this.onResetBounds()}));fb(this,"ReactIndicator",Xe(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:k},bounds:H}=this;return a?null:(0,Hm.jsx)("rect",{width:H.width,height:H.height,rx:d,ry:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}));fb(this,"validateProps",a=>Pm(this,a));fb(this,"getBounds",()=>{const [a,d]=this.props.point,[k,H]=this.props.size;return{minX:a,minY:d,maxX:a+k,maxY:d+H,width:k,height:H}});fb(this,"onResizeStart",({isSingle:a})=>
{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});fb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:k=this.props.fontFamily,fontSize:H=this.props.fontSize,fontWeight:fa=this.props.fontWeight,lineHeight:la=this.props.lineHeight,padding:sa=
this.props.padding}=a,[Ha,Ta]=Uj(d,{fontFamily:k,fontSize:H,lineHeight:la,fontWeight:fa},sa);return[Ha,Ta]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:d,stroke:k,fontSize:H,fontFamily:fa}}=this;a=this.getBounds();return(0,Hm.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,Hm.jsx)("div",{style:{color:ch(k,"text"),fontSize:H,fontFamily:fa,display:"contents"},children:d})})}};
fb($m,"id","text");fb($m,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Pd([nf],$m.prototype,"scaleLevel",1);Pd([jg],$m.prototype,"setScaleLevel",2);var ct=df(da(22)),pu=da(586),Yr=class extends on{constructor(){super(...arguments);fb(this,"canFlip",!1);fb(this,"canEdit",
!0);fb(this,"canChangeAspectRatio",!1);fb(this,"ReactComponent",Xe(({events:a,isErasing:d,asset:k,isEditing:H})=>{const {props:{opacity:fa}}=this,la=hn();var sa=Yf();const Ha=sa.selectedIds.has(this.id),Ta=la||Ha&&!H||"select"!==sa.selectedTool.id;sa=ct.useCallback(eb=>{Ta||eb.stopPropagation()},[Ta]);const {handlers:Xa}=ct.useContext(Gi);return(0,pu.jsx)(Bo,Te(Xd({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:fa}},a),{children:(0,pu.jsx)("div",{onWheelCapture:sa,onPointerDown:sa,onPointerUp:sa,
className:"tl-video-container",style:{pointerEvents:la||!H&&!Ha?"none":"all",overflow:H?"auto":"hidden"},children:k&&(0,pu.jsx)("video",{controls:!0,src:Xa?Xa.makeAssetUrl(k.src):k.src})})}))}));fb(this,"ReactIndicator",Xe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,pu.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}))}};fb(Yr,"id","video");fb(Yr,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",
clipping:0,isAspectRatioLocked:!0});var Yl=da(586),Av=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,Ww=class extends on{constructor(){super(...arguments);fb(this,"aspectRatio",480/853);fb(this,"canChangeAspectRatio",!1);fb(this,"canFlip",!1);fb(this,"canEdit",!0);fb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:Ww.defaultProps.size})});fb(this,"ReactComponent",Xe(({events:a,isErasing:d,isEditing:k})=>{const H=Yf();return(0,Yl.jsx)(Bo,
Te(Xd({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,Yl.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:k||H.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,Yl.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Yl.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",
width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,Yl.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,Yl.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,Yl.jsxs)("g",
{children:[(0,Yl.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,Yl.jsx)("g",{children:(0,Yl.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,Yl.jsxs)("g",{fill:"#fff",children:[(0,Yl.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,Yl.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));fb(this,"ReactIndicator",Xe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,Yl.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}));fb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return Pm(this,a)})}get embedId(){var a,d;const k=this.props.url,
H=k.match(Av);return null!=(d=null!=(a=null==H?void 0:H[1])?a:k)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,Yl.jsxs)("g",{children:[(0,Yl.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,Yl.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Yl.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},cr=Ww;fb(cr,"id","youtube");fb(cr,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});Pd([nf],cr.prototype,"embedId",1);Pd([jg],cr.prototype,"onYoutubeLinkChange",2);var Zr=df(da(22)),tq=da(586),Xw=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,hz=class extends on{constructor(){super(...arguments);fb(this,"canFlip",!1);fb(this,"canEdit",!0);fb(this,"initialHeightCalculated",
!0);fb(this,"getInnerHeight",null);fb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:hz.defaultProps.size})});fb(this,"ReactComponent",Xe(({events:a,isErasing:d,isEditing:k})=>{const {renderers:{Tweet:H}}=Zr.useContext(Gi),fa=Yf(),la=Zr.useRef(null),[,sa]=this.useComponentSize(la);Zr.useEffect(()=>{var Ha,Ta;const Xa=null!=(Ta=null==(Ha=this.getInnerHeight)?void 0:Ha.call(this))?Ta:sa;sa&&1<Math.abs(Xa-this.props.size[1])&&(this.update({size:[this.props.size[0],Xa]}),fa.persist(!0))},[sa]);
Zr.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();fa.persist(!0)})},[this.initialHeightCalculated]);return(0,tq.jsx)(Bo,Te(Xd({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,tq.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:k||fa.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,tq.jsx)("div",{ref:la,children:(0,tq.jsx)(H,{tweetId:this.embedId})}):null})}))}));
fb(this,"ReactIndicator",Xe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,tq.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}));fb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});fb(this,"onResize",(a,d)=>{var k;const {bounds:H,rotation:fa,scale:[la,sa]}=d;a=[...this.scale];0>la&&(a[0]*=-1);0>sa&&(a[1]*=
-1);d=null!=(k=this.getAutoResizeHeight())?k:H.height;return this.update({point:[H.minX,H.minY],size:[Math.max(1,H.width),Math.max(1,d)],scale:a,rotation:fa})});fb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return Pm(this,a)})}get embedId(){var a,d;const k=this.props.url,H=k.match(Xw);return null!=(d=null!=(a=null==H?void 0:H[1])?a:k)?d:""}useComponentSize(a,d=""){const [k,H]=Zr.useState([0,0]),fa=Yf();Zr.useEffect(()=>
{if(null==a?0:a.current){const la=d?a.current.querySelector(d):a.current;if(la){const sa=()=>{const {width:Ta,height:Xa}=la.getBoundingClientRect(),eb=Rd.div([Ta,Xa],fa.viewport.camera.zoom);H(eb);return eb};sa();this.getInnerHeight=()=>sa()[1];const Ha=new ResizeObserver(()=>{sa()});Ha.observe(la);return()=>{Ha.disconnect()}}}return()=>{}},[a,d]);return k}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,tq.jsxs)("g",
{children:[(0,tq.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,tq.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,tq.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},dt=hz;fb(dt,"id","tweet");fb(dt,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});Pd([nf],dt.prototype,"embedId",1);Pd([jg],dt.prototype,"onTwitterLinkChange",2);var Yw=df(da(22)),Bv=da(586),Hp=class extends on{constructor(){super(...arguments);fb(this,"frameRef",Yw.createRef());fb(this,"canChangeAspectRatio",!0);fb(this,"canFlip",!0);fb(this,"canEdit",!0);fb(this,"ReactComponent",
Xe(({events:a,asset:d,isErasing:k,isEditing:H})=>{Yw.useRef(null);const {handlers:fa}=Yw.useContext(Gi);Yf();const la=hn();return(0,Bv.jsx)(Bo,Te(Xd({style:{overflow:"hidden",pointerEvents:"all",opacity:k?.2:1}},a),{children:d?(0,Bv.jsx)("embed",{src:fa?fa.inflateAsset(d.src).url:d.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!la&&H?"all":"none"}}):null}))}));fb(this,"ReactIndicator",Xe(()=>{const {props:{size:[a,
d],isLocked:k}}=this;return(0,Bv.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}))}};fb(Hp,"id","pdf");fb(Hp,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});da(586);var Zw=[On,Ys,Vr,wv,Yr,at,mg,Mo,$m,cr,dt,Wr,Dp,Hp,Dk,Uw],Im=class extends Oq{constructor(){super(...arguments);fb(this,"Shape",On)}};fb(Im,"id","box");fb(Im,"shortcut","whiteboard/rectangle");var et=class extends Oq{constructor(){super(...arguments);
fb(this,"Shape",Ys)}};fb(et,"id","ellipse");fb(et,"shortcut","whiteboard/ellipse");var an=class extends Xv{};fb(an,"id","erase");fb(an,"shortcut","whiteboard/eraser");var iz=class extends Ju{constructor(){super(...arguments);fb(this,"Shape",Vr);fb(this,"simplify",!0);fb(this,"simplifyTolerance",.618)}};fb(iz,"id","highlighter");fb(iz,"shortcut","whiteboard/highlighter");var Jm=class extends Yv{constructor(){super(...arguments);fb(this,"Shape",at)}};fb(Jm,"id","line");fb(Jm,"shortcut","whiteboard/connector");
var mp=class extends Ju{constructor(){super(...arguments);fb(this,"Shape",mg);fb(this,"simplify",!1)}};fb(mp,"id","pencil");fb(mp,"shortcut","whiteboard/pencil");var jz=class extends Oq{constructor(){super(...arguments);fb(this,"Shape",Mo)}};fb(jz,"id","polygon");var kz=class extends Zv{constructor(){super(...arguments);fb(this,"Shape",$m)}};fb(kz,"id","text");fb(kz,"shortcut","whiteboard/text");var hD=class extends Oq{constructor(){super(...arguments);fb(this,"Shape",cr)}};fb(hD,"id","youtube");
var ql=class extends ri{constructor(){super(...arguments);fb(this,"creatingShape");fb(this,"offset",[0,0]);fb(this,"onEnter",()=>{this.app.history.pause();gd(()=>{var a=Rd.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(a=Rd.snap(a,8));this.creatingShape=a=new Dk({id:Lj(),parentId:this.app.currentPage.id,point:a,size:Dk.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});
fb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});fb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};fb(ql,"id","creating");var dr=class extends ri{constructor(){super(...arguments);
fb(this,"cursor","crosshair");fb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};fb(dr,"id","idle");var qn=class extends Cr{constructor(){super(...arguments);fb(this,"Shape",Dk);fb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};fb(qn,"id","logseq-portal");fb(qn,"shortcut","whiteboard/portal");fb(qn,"states",[dr,ql]);fb(qn,"initial","idle");var $w=class extends Oq{constructor(){super(...arguments);fb(this,"Shape",Dp)}};fb($w,"id","youtube");var zh=class extends Oq{constructor(){super(...arguments);
fb(this,"Shape",Wr)}};fb(zh,"id","iframe");var GH=df(da(589)),np=da(586),iD=new Map(Zw.map(a=>[a.id,a])),uh=class{constructor(a){fb(this,"shapes");fb(this,"pageId");fb(this,"assets");a&&this.load(a)}load(a){var d;const k=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==k?void 0:k.id;this.assets=a.assets;this.shapes=null==k?void 0:k.shapes.map(H=>{var fa=H.type;if(!fa)throw Error("No shape type provided.");const la=iD.get(fa);if(!la)throw Error(`Could not find shape class for ${fa}`);
return new la(H)}).filter(H=>"group"!==H.type)}generatePreviewJsx(a,d){var k,H;const fa=[...(null!=(k=this.shapes)?k:[]).map(Xa=>Xa.getRotatedBounds())];(k=null==a?void 0:a.currentView)&&fa.push(k);let la=ff.getCommonBounds(fa);if(!la)return null;la=ff.expandBounds(la,16);la=d?ff.ensureRatio(la,d):la;const sa=Xa=>[(Xa[0]-la.minX).toFixed(2),(Xa[1]-la.minY).toFixed(2)],[Ha,Ta]=k?sa([k.minX,k.minY]):[0,0];return la&&(0,np.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":la.minX.toFixed(2),
"data-common-bound-y":la.minY.toFixed(2),"data-common-bound-width":la.width.toFixed(2),"data-common-bound-height":la.height.toFixed(2),viewBox:[0,0,la.width,la.height].join(" "),children:[(0,np.jsx)("defs",{children:k&&(0,np.jsxs)(np.Fragment,{children:[(0,np.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Ha}, ${Ta})`,width:k.width,height:k.height}),(0,np.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,np.jsx)("rect",{width:la.width,height:la.height,fill:"white"}),(0,np.jsx)("use",
{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,np.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(H=this.shapes)?void 0:H.map(Xa=>{var eb,ib;const {bounds:Bb,props:{rotation:Mb}}=Xa,[Fb,$b]=sa([Bb.minX,Bb.minY]),nc=+(180*((null!=Mb?Mb:0)+(null!=(eb=Bb.rotation)?eb:0))/Math.PI).toFixed(2),[Sb,gc]=[(Bb.width/2).toFixed(2),(Bb.height/2).toFixed(2)];return(0,np.jsx)("g",{transform:[`translate(${Fb}, ${$b})`,`rotate(${nc}, ${Sb}, ${gc})`].join(" "),children:Xa.getShapeSVGJsx({assets:null!=
(ib=this.assets)?ib:[]})},Xa.id)})}),(0,np.jsx)("rect",{mask:k?`url(#${this.pageId}-camera-mask)`:"",width:la.width,height:la.height,fill:"transparent"}),k&&(0,np.jsx)("use",{id:"minimap-camera-rect","data-x":Ha,"data-y":Ta,"data-width":k.width,"data-height":k.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?GH.default.renderToString(a):""}},qu=df(da(22)),No=da(586),Ip=qu.forwardRef((a,
d)=>{var {value:k,className:H}=a;a=rf(a,["autoResize","value","className"]);return(0,No.jsx)("div",{className:"tl-input"+(H?" "+H:""),children:(0,No.jsxs)("div",{className:"tl-input-sizer",children:[(0,No.jsx)("div",{className:"tl-input-hidden",children:k}),(0,No.jsx)("input",Xd({ref:d,value:k,className:"tl-text-input",type:"text"},a))]})})}),Ih=da(586),Jp=({type:a,active:d})=>(0,Ih.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,Ih.jsx)("i",{className:`tie tie-${({B:"block",P:"page",
WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),jD=(a,d)=>(0,Ih.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((k,H)=>1===H%2?(0,Ih.jsx)("mark",{className:"tl-highlighted",children:k}):k).map((k,H)=>(0,Ih.jsx)(Ck.default.Fragment,{children:k},H))}),HH=(a,d)=>{const {handlers:k}=Ck.default.useContext(Gi),[H,fa]=Ck.default.useState(null),la=vo(a,200);Ck.default.useEffect(()=>{let sa=
!1;if(0<la.length){const Ha={"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?Ha["pages?"]=!1:"P"===d&&(Ha["blocks?"]=!1);k.search(la,Ha).then(Ta=>{sa||fa(Ta)})}else fa(null);return()=>{sa=!0}},[la,null==k?void 0:k.search]);return H},ft=Xe(({className:a,style:d,placeholder:k,onChange:H,onBlur:fa,onAddBlock:la})=>{const [sa,Ha]=Ck.default.useState(Dk.defaultSearchQuery),[Ta,Xa]=Ck.default.useState(Dk.defaultSearchFilter),eb=Ck.default.useRef(null),{handlers:ib,renderers:Bb}=Ck.default.useContext(Gi),
Mb=ib.t,Fb=Ck.default.useCallback(Yd=>{var ve;setTimeout(()=>H(Yd));null==(ve=eb.current)?void 0:ve.blur();Yd&&(Dk.defaultSearchQuery="",Dk.defaultSearchFilter=null)},[]),$b=Ck.default.useCallback(Yd=>{if(Yd=null==ib?void 0:ib.addNewBlock(Yd))Fb(Yd),null==la?void 0:la(Yd);return Yd},[la]),nc=Ck.default.useRef(null),[Sb,gc]=Ck.default.useState(0),bc=HH(sa,Ta),[Dc,Ic]=Ck.default.useState("circle-plus"),[od,Cd]=Ck.default.useState(!1);Ck.default.useEffect(()=>{setTimeout(()=>{var Yd;null==(Yd=eb.current)?
void 0:Yd.focus()})},[Ta]);Ck.default.useEffect(()=>{Dk.defaultSearchQuery=sa;Dk.defaultSearchFilter=Ta},[sa,Ta]);const Ge=Ck.default.useMemo(()=>{var Yd;const ve=[],lf=null==Bb?void 0:Bb.Breadcrumb;if(!lf||!ib)return[];la&&ve.push({actionIcon:"circle-plus",onChosen:()=>!!$b(sa),element:(0,Ih.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ih.jsx)(Jp,{active:!0,type:"BA"}),0<sa.length?(0,Ih.jsxs)(Ih.Fragment,{children:[(0,Ih.jsx)("strong",{children:Mb("whiteboard/new-block")}),sa]}):
(0,Ih.jsx)("strong",{children:Mb("whiteboard/new-block-no-colon")})]})});(null==(Yd=null==bc?void 0:bc.pages)?0:Yd.some(Ce=>Ce.toLowerCase()===sa.toLowerCase()))||!sa||ve.push({actionIcon:"circle-plus",onChosen:()=>{Fb(sa);return!0},element:(0,Ih.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ih.jsx)(Jp,{active:!0,type:"PA"}),(0,Ih.jsx)("strong",{children:Mb("whiteboard/new-page")}),sa]})},{actionIcon:"circle-plus",onChosen:()=>{null==ib?void 0:ib.addNewWhiteboard(sa);Fb(sa);return!0},
element:(0,Ih.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ih.jsx)(Jp,{active:!0,type:"WA"}),(0,Ih.jsx)("strong",{children:Mb("whiteboard/new-whiteboard")}),sa]})});0===sa.length&&null===Ta&&ve.push({actionIcon:"search",onChosen:()=>{Xa("B");return!0},element:(0,Ih.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ih.jsx)(Jp,{type:"BS"}),Mb("whiteboard/search-only-blocks")]})},{actionIcon:"search",onChosen:()=>{Xa("P");return!0},element:(0,Ih.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,Ih.jsx)(Jp,{type:"PS"}),Mb("whiteboard/search-only-pages")]})});Ta&&"P"!==Ta||!bc||!bc.pages||ve.push(...bc.pages.map(Ce=>({actionIcon:"search",onChosen:()=>{Fb(Ce);return!0},element:(0,Ih.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ih.jsx)(Jp,{type:ib.isWhiteboardPage(Ce)?"WP":"P"}),jD(Ce,sa)]})})));Ta&&"B"!==Ta||!bc||!bc.blocks||ve.push(...bc.blocks.filter(Ce=>Ce.content&&Ce.uuid).map(({content:Ce,uuid:He})=>{const Gd=ib.queryBlockByUUID(He);return{actionIcon:"search",
onChosen:()=>{var cd,Hd,ad;return Gd?(Fb(He),null==(ad=null==(Hd=null==(cd=window.logseq)?void 0:cd.api)?void 0:Hd.set_blocks_id)?void 0:ad.call(Hd,[He]),!0):!1},element:Gd?(0,Ih.jsxs)(Ih.Fragment,{children:[(0,Ih.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ih.jsx)(Jp,{type:"B"}),(0,Ih.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,Ih.jsx)(lf,{blockId:He})})]}),(0,Ih.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ih.jsx)("div",{className:"tl-quick-search-option-placeholder"}),
jD(Ce,sa)]})]}):(0,Ih.jsx)("div",{className:"tl-quick-search-option-row",children:Mb("whiteboard/cache-outdated")})}}));return ve},[sa,Ta,bc,null==Bb?void 0:Bb.Breadcrumb,ib]);Ck.default.useEffect(()=>{const Yd=ve=>{var lf,Ce;let He=Sb;"ArrowDown"===ve.key?He=Math.min(Ge.length-1,Sb+1):"ArrowUp"===ve.key?He=Math.max(0,Sb-1):"Enter"===ve.key?(null==(lf=Ge[Sb])?void 0:lf.onChosen(),ve.stopPropagation(),ve.preventDefault()):"Backspace"===ve.key&&0===sa.length?Xa(null):"Escape"===ve.key&&Fb("");He!==
Sb&&(lf=Ge[He],gc(He),Ic(lf.actionIcon),ve.stopPropagation(),ve.preventDefault(),(ve=null==(Ce=nc.current)?void 0:Ce.querySelector(".tl-quick-search-option:nth-child("+(He+1)+")"))&&(null==ve?void 0:ve.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",Yd,!0);return()=>{document.removeEventListener("keydown",Yd,!0)}},[Ge,Sb,sa]);return(0,Ih.jsxs)("div",{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,Ih.jsx)(WG,{icon:Dc,onClick:()=>{var Yd;null==(Yd=Ge[Sb])?void 0:
Yd.onChosen()}}),(0,Ih.jsxs)("div",{className:"tl-quick-search-input-container",children:[Ta&&(0,Ih.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,Ih.jsx)(Jp,{type:Ta}),"B"===Ta?"Search blocks":"Search pages",(0,Ih.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>Xa(null),children:(0,Ih.jsx)(kh,{name:"x"})})]}),(0,Ih.jsx)(Ip,{ref:eb,type:"text",value:sa,className:"tl-quick-search-input",placeholder:null!=k?k:"Create or search your graph...",onChange:Yd=>
Ha(Yd.target.value),onKeyDown:Yd=>{"Enter"===Yd.key&&Fb(sa);Yd.stopPropagation()},onFocus:()=>{Cd(!0)},onBlur:()=>{Cd(!1);null==fa?void 0:fa()}})]}),0<Ge.length&&(0,Ih.jsx)("div",{onWheelCapture:Yd=>Yd.stopPropagation(),className:"tl-quick-search-options",ref:nc,style:{visibility:od?"visible":"hidden",pointerEvents:od?"all":"none"},children:(0,Ih.jsx)(Zy,{style:{height:40*Math.min(Math.max(1,Ge.length),12)},totalCount:Ge.length,itemContent:Yd=>{const {actionIcon:ve,onChosen:lf,element:Ce}=Ge[Yd];
return(0,Ih.jsx)("div",{"data-focused":Yd===Sb,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Ic(ve);gc(Yd)},onPointerDownCapture:He=>{lf()&&(He.stopPropagation(),He.preventDefault())},children:Ce},Yd)}})})]})}),si=da(586),ax=Xe(function(a){var {pageId:d,portalType:k,refs:H,side:fa,onRefsChange:la}=a;a=rf(a,"pageId portalType shapeType refs side onRefsChange".split(" "));const {handlers:{t:sa}}=Py.default.useContext(Gi),Ha=H.length+(d?1:0),Ta=0===H.length,Xa=ib=>{ib&&!H.includes(ib)&&
Ta&&la([...H,ib])},eb=!(!d||!k);return(0,si.jsx)(In,Te(Xd({},a),{side:fa,align:"start",alignOffset:-6,label:(0,si.jsx)(Rj,{content:sa("whiteboard/link"),sideOffset:14,children:(0,si.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,si.jsx)(kh,{name:0<Ha?"link":"add-link"}),0<Ha&&(0,si.jsx)("div",{className:"tl-shape-links-count",children:Ha})]})}),children:(0,si.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":eb,children:[eb&&(0,si.jsxs)("div",
{className:"tl-shape-links-reference-panel",children:[(0,si.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,si.jsx)(kh,{className:"opacity-50",name:"internal-link"}),sa("whiteboard/references")]}),(0,si.jsx)(Nm,{type:k,id:d})]}),(0,si.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,si.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,si.jsx)(kh,{className:"opacity-50",name:"add-link"}),sa("whiteboard/link-to-any-page-or-block")]}),
Ta&&(0,si.jsx)(ft,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:sa("whiteboard/start-typing-to-search"),onChange:Xa}),0<H.length&&(0,si.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:H.map((ib,Bb)=>(0,si.jsx)(Nm,{id:ib,type:dl(ib)?"B":"P",onRemove:()=>{la(H.filter((Mb,Fb)=>Bb!==Fb))},showContent:!0},ib))})]})]})}))}),fk=df(da(22)),[Cv]=hj("ToggleGroup",[lw]),Dv=lw(),kD=fk.default.forwardRef((a,d)=>{const {type:k}=a;a=rf(a,["type"]);if("single"===k)return fk.default.createElement(IH,
Pe({},a,{ref:d}));if("multiple"===k)return fk.default.createElement(JH,Pe({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[lz,Kp]=Cv("ToggleGroup"),IH=fk.default.forwardRef((a,d)=>{const {value:k,defaultValue:H,onValueChange:fa=()=>{}}=a,la=rf(a,["value","defaultValue","onValueChange"]),[sa,Ha]=Nh({prop:k,defaultProp:H,onChange:fa});return fk.default.createElement(lz,{scope:a.__scopeToggleGroup,type:"single",value:sa?[sa]:[],onItemActivate:Ha,onItemDeactivate:fk.default.useCallback(()=>
Ha(""),[Ha])},fk.default.createElement(mD,Pe({},la,{ref:d})))}),JH=fk.default.forwardRef((a,d)=>{const {value:k,defaultValue:H,onValueChange:fa=()=>{}}=a,la=rf(a,["value","defaultValue","onValueChange"]),[sa=[],Ha]=Nh({prop:k,defaultProp:H,onChange:fa}),Ta=fk.default.useCallback(eb=>Ha((ib=[])=>[...ib,eb]),[Ha]),Xa=fk.default.useCallback(eb=>Ha((ib=[])=>ib.filter(Bb=>Bb!==eb)),[Ha]);return fk.default.createElement(lz,{scope:a.__scopeToggleGroup,type:"multiple",value:sa,onItemActivate:Ta,onItemDeactivate:Xa},
fk.default.createElement(mD,Pe({},la,{ref:d})))}),[KH,lD]=Cv("ToggleGroup"),mD=fk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:k,disabled:H=!1,rovingFocus:fa=!0,orientation:la,dir:sa,loop:Ha=!0}=a;var Ta=rf(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=Dv(k);const Xa=jo(sa);Ta=Xd({role:"group",dir:Xa},Ta);return fk.default.createElement(KH,{scope:k,rovingFocus:fa,disabled:H},fa?fk.default.createElement(YB,Pe({asChild:!0},a,{orientation:la,dir:Xa,loop:Ha}),
fk.default.createElement(Lk.div,Pe({},Ta,{ref:d}))):fk.default.createElement(Lk.div,Pe({},Ta,{ref:d})))}),Ev=fk.default.forwardRef((a,d)=>{var k=Kp("ToggleGroupItem",a.__scopeToggleGroup);const H=lD("ToggleGroupItem",a.__scopeToggleGroup),fa=Dv(a.__scopeToggleGroup);k=k.value.includes(a.value);const la=H.disabled||a.disabled;a=Te(Xd({},a),{pressed:k,disabled:la});const sa=fk.default.useRef(null);return H.rovingFocus?fk.default.createElement(ZB,Pe({asChild:!0},fa,{focusable:!la,active:k,ref:sa}),fk.default.createElement(nD,
Pe({},a,{ref:d}))):fk.default.createElement(nD,Pe({},a,{ref:d}))}),nD=fk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:k,value:H}=a,fa=rf(a,["__scopeToggleGroup","value"]),la=Kp("ToggleGroupItem",k);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return fk.default.createElement(SB,Pe({},"single"===la.type?a:void 0,fa,{ref:d,onPressedChange:sa=>{if(sa)la.onItemActivate(H);else la.onItemDeactivate(H)}}))}),oD=kD,pD=Ev,er=da(586),Oh=da(586),Fv="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),
qD=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],Rn=new Map,mz={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),
line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},LH=Object.entries(mz).filter(([,a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),MH=Xe(()=>{const a=Yf(),{handlers:{t:d}}=Xl.default.useContext(Gi),k=Va("AutoResizing"),H=k.every(fa=>
fa.props.isAutoResizing);return(0,Oh.jsx)(Mi,{tooltip:d("whiteboard/auto-resize"),toggle:k.every(fa=>"logseq-portal"===fa.props.type),className:"tl-button",pressed:H,onPressedChange:fa=>{k.forEach(la=>{if("logseq-portal"===la.props.type)la.update({isAutoResizing:fa});else la.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},children:(0,Oh.jsx)(kh,{name:"dimensions"})})}),NH=Xe(()=>{const a=Yf();var {handlers:{t:d}}=Xl.default.useContext(Gi);const k=Va("LogseqPortalViewMode"),H=k.every(fa=>
fa.collapsed);if(!H&&!k.every(fa=>!fa.collapsed))return null;d=(0,Oh.jsxs)("div",{className:"flex",children:[H?d("whiteboard/expand"):d("whiteboard/collapse"),(0,Oh.jsx)(Wm,{action:H?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,Oh.jsx)(Mi,{tooltip:d,toggle:k.every(fa=>"logseq-portal"===fa.props.type),className:"tl-button",pressed:H,onPressedChange:()=>a.api.setCollapsed(!H),children:(0,Oh.jsx)(kh,{name:H?"object-expanded":"object-compact"})})}),OH=Xe(()=>{const {handlers:{isMobile:a}}=
Xl.default.useContext(Gi);var d=Va("ScaleLevel");d=1<(new Set(d.map(k=>k.scaleLevel))).size?"":d[0].scaleLevel;return(0,Oh.jsx)(Un,{scaleLevel:d,compact:a()})}),PH=Xe(()=>{const a=Yf(),{handlers:{t:d}}=Xl.default.useContext(Gi),k=Va("IFrameSource")[0],H=Xl.default.useCallback(la=>{k.onIFrameSourceChange(la.target.value.trim().toLowerCase());a.persist()},[]),fa=Xl.default.useCallback(()=>{k.reload()},[]);return(0,Oh.jsxs)("span",{className:"flex gap-3",children:[(0,Oh.jsx)(hg,{tooltip:d("whiteboard/reload"),
type:"button",onClick:fa,children:(0,Oh.jsx)(kh,{name:"refresh"})}),(0,Oh.jsx)(Ip,{title:d("whiteboard/website-url"),className:"tl-iframe-src",value:`${k.props.url}`,onChange:H}),(0,Oh.jsx)(hg,{tooltip:d("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(k.props.url),children:(0,Oh.jsx)(kh,{name:"external-link"})})]})}),uq=Xe(()=>{const a=Yf(),{handlers:{t:d}}=Xl.default.useContext(Gi),k=Va("YoutubeLink")[0],H=Xl.default.useCallback(fa=>{k.onYoutubeLinkChange(fa.target.value);a.persist()},
[]);return(0,Oh.jsxs)("span",{className:"flex gap-3",children:[(0,Oh.jsx)(Ip,{title:d("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${k.props.url}`,onChange:H}),(0,Oh.jsx)(hg,{tooltip:d("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var fa,la,sa;return null==(sa=null==(la=null==(fa=window.logseq)?void 0:fa.api)?void 0:la.open_external_link)?void 0:sa.call(la,k.props.url)},children:(0,Oh.jsx)(kh,{name:"external-link"})})]})}),QH=Xe(()=>{const a=Yf(),{handlers:{t:d}}=Xl.default.useContext(Gi),
k=Va("TwitterLink")[0],H=Xl.default.useCallback(fa=>{k.onTwitterLinkChange(fa.target.value);a.persist()},[]);return(0,Oh.jsxs)("span",{className:"flex gap-3",children:[(0,Oh.jsx)(Ip,{title:d("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${k.props.url}`,onChange:H}),(0,Oh.jsx)(hg,{tooltip:d("whiteboard/open-twitter-url"),type:"button",onClick:()=>{var fa,la,sa;return null==(sa=null==(la=null==(fa=window.logseq)?void 0:fa.api)?void 0:la.open_external_link)?void 0:sa.call(la,k.props.url)},
children:(0,Oh.jsx)(kh,{name:"external-link"})})]})}),RH=Xe(()=>{const a=Yf(),{handlers:{t:d,setCurrentPdf:k}}=Xl.default.useContext(Gi),H=a.selectedShapesArray[0];return(0,Oh.jsx)(hg,{tooltip:d("whiteboard/edit-pdf"),type:"button",onClick:()=>k(a.assets[H.props.assetId].src),children:(0,Oh.jsx)(kh,{name:"edit"})})}),SH=Xe(()=>{const a=Yf(),{handlers:{t:d}}=Xl.default.useContext(Gi);var k=Va("NoFill");const H=Xl.default.useCallback(fa=>{a.selectedShapesArray.forEach(la=>la.update({noFill:fa}));a.persist()},
[]);k=k.every(fa=>fa.props.noFill);return(0,Oh.jsx)(Mi,{tooltip:d("whiteboard/fill"),className:"tl-button",pressed:k,onPressedChange:H,children:(0,Oh.jsx)(kh,{name:k?"droplet-off":"droplet"})})}),TH=Xe(()=>{const a=Yf(),d=Va("Swatch"),k=Xl.default.useCallback(fa=>{a.selectedShapesArray.forEach(la=>{la.update({fill:fa,stroke:fa})});a.persist()},[]),H=Xl.default.useCallback(fa=>{a.selectedShapesArray.forEach(la=>{la.update({opacity:fa})});a.persist()},[]);return(0,Oh.jsx)(Fn,{popoverSide:"top",color:d[0].props.noFill?
d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:H,setColor:k})}),UH=Xe(()=>{const a=Yf(),d=Xl.default.useCallback(k=>{a.api.convertShapes(k.currentTarget.dataset.tool)},[]);return(0,Oh.jsx)(Ay,{popoverSide:"top",chevron:!1,setGeometry:d})}),VH=Xe(()=>{const a=Yf(),{handlers:{t:d}}=Xl.default.useContext(Gi),k=Va("StrokeType"),H=k.every(fa=>"dashed"===fa.props.strokeType)?"dashed":k.every(fa=>"line"===fa.props.strokeType)?"line":"mixed";return(0,Oh.jsx)(ia,{title:d("whiteboard/stroke-type"),
options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:H,onValueChange:fa=>{k.forEach(la=>{la.update({strokeType:fa})});a.persist()}})}),rD=Xe(()=>{const a=Yf(),{handlers:{t:d}}=Xl.default.useContext(Gi),k=Va("ArrowMode");var H=k.every(la=>{var sa;return"arrow"===(null==(sa=la.props.decorations)?void 0:sa.start)});const fa=k.every(la=>{var sa;return"arrow"===(null==(sa=la.props.decorations)?void 0:sa.end)});H=[H?"start":null,fa?"end":null].filter(dg);
return(0,Oh.jsx)(Ba,{title:d("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:H,onValueChange:la=>{k.forEach(sa=>{var Ha=sa.update;var Ta={start:la.includes("start")?"arrow":null,end:la.includes("end")?"arrow":null};Ha.call(sa,{decorations:Ta})});a.persist()}})}),WH=Xe(()=>{const a=Yf(),{handlers:{t:d}}=Xl.default.useContext(Gi),k=Va("TextStyle"),H=k.every(la=>500<la.props.fontWeight),fa=k.every(la=>la.props.italic);return(0,Oh.jsxs)("span",
{className:"flex gap-1",children:[(0,Oh.jsx)(Mi,{tooltip:d("whiteboard/bold"),className:"tl-button",pressed:H,onPressedChange:la=>{k.forEach(sa=>{sa.update({fontWeight:la?700:400});sa.onResetBounds()});a.persist()},children:(0,Oh.jsx)(kh,{name:"bold"})}),(0,Oh.jsx)(Mi,{tooltip:d("whiteboard/italic"),className:"tl-button",pressed:fa,onPressedChange:la=>{k.forEach(sa=>{sa.update({italic:la});sa.onResetBounds()});a.persist()},children:(0,Oh.jsx)(kh,{name:"italic"})})]})}),XH=Xe(()=>{var a;const d=Yf(),
k=d.selectedShapesArray[0];return(0,Oh.jsx)(ax,{onRefsChange:H=>{k.update({refs:H});d.persist()},refs:null!=(a=k.props.refs)?a:[],shapeType:k.props.type,side:"right",pageId:"logseq-portal"===k.props.type?k.props.pageId:void 0,portalType:"logseq-portal"===k.props.type?k.props.blockType:void 0})});Rn.set("Geometry",UH);Rn.set("AutoResizing",MH);Rn.set("LogseqPortalViewMode",NH);Rn.set("ScaleLevel",OH);Rn.set("YoutubeLink",uq);Rn.set("TwitterLink",QH);Rn.set("IFrameSource",PH);Rn.set("NoFill",SH);Rn.set("Swatch",
TH);Rn.set("StrokeType",VH);Rn.set("ArrowMode",rD);Rn.set("TextStyle",WH);Rn.set("Links",XH);Rn.set("EditPdf",RH);var sD=a=>{var d;return(null!=(d=mz[a])?d:[]).filter(dg)},tD=a=>{const d=a.map(H=>H.props.type),k=new Set(0<a.length?sD(d[0]):[]);for(let H=1;H<d.length&&0<k.size;H++){const fa=sD(d[H]);k.forEach(la=>{fa.includes(la)||k.delete(la)})}1<a.length&&qD.forEach(H=>{k.has(H)&&k.delete(H)});return Array.from(k).sort((H,fa)=>Fv.indexOf(H)-Fv.indexOf(fa)).map(H=>Rn.get(H))},Gv=da(586),YH=Xe(({shapes:a,
offsets:d,hidden:k})=>{const H=Yf(),fa=Jo.useRef(null),la=Jo.useRef(null);Jo.useLayoutEffect(()=>{setTimeout(()=>{const Ha=la.current;if(Ha){var {offsetWidth:Ta,offsetHeight:Xa}=Ha;fa.current=[Ta,Xa]}})});Jo.useLayoutEffect(()=>{var Ha;const Ta=la.current;if(Ta){var Xa=null!=(Ha=fa.current)?Ha:[0,0];Ha=0;if(116>d.top){var eb=d.height/2+40;140>d.bottom&&(eb+=d.bottom-140)}else eb=-(d.height/2+40);16>d.left+d.width/2-Xa[0]/2?Ha+=-(d.left+d.width/2-Xa[0]/2-16):16>d.right+d.width/2-Xa[0]/2&&(Ha+=d.right+
d.width/2-Xa[0]/2-16);var [ib,Bb]=[Ha,eb];Ta.style.transform=`translateX(${ib}px) translateY(${Bb}px)`}},[d]);if(!H)return null;const sa=tD(a);return(0,Gv.jsx)(Bo,{centered:!0,children:0<sa.length&&(0,Gv.jsx)("div",{ref:la,className:"tl-toolbar tl-context-bar",style:{visibility:k?"hidden":"visible",pointerEvents:k?"none":"all"},children:sa.map((Ha,Ta)=>(0,Gv.jsxs)(Jo.Fragment,{children:[(0,Gv.jsx)(Ha,{}),Ta<sa.length-1&&(0,Gv.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"vertical"})]},Ta))})})}),
bx=df(da(22)),rl=da(22),[ZH]=hj("ContextMenu",[Ot]),ru=Ot(),[uD,su]=ZH("ContextMenu"),Hv=(0,rl.forwardRef)((a,d)=>{const {__scopeContextMenu:k,disabled:H=!1}=a,fa=rf(a,["__scopeContextMenu","disabled"]),la=su("ContextMenuTrigger",k),sa=ru(k),Ha=(0,rl.useRef)({x:0,y:0}),Ta=(0,rl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(Xd({width:0,height:0},Ha.current))}),Xa=(0,rl.useRef)(0),eb=(0,rl.useCallback)(()=>window.clearTimeout(Xa.current),[]);(0,rl.useEffect)(()=>eb,[eb]);(0,rl.useEffect)(()=>
void(H&&eb()),[H,eb]);return(0,rl.createElement)(rl.Fragment,null,(0,rl.createElement)(Ns,Pe({},sa,{virtualRef:Ta})),(0,rl.createElement)(Lk.span,Pe({"data-state":la.open?"open":"closed","data-disabled":H?"":void 0},fa,{ref:d,style:Xd({WebkitTouchCallout:"none"},a.style),onContextMenu:H?a.onContextMenu:Jf(a.onContextMenu,ib=>{eb();Ha.current={x:ib.clientX,y:ib.clientY};la.onOpenChange(!0);ib.preventDefault()}),onPointerDown:H?a.onPointerDown:Jf(a.onPointerDown,Nb(ib=>{eb();Xa.current=window.setTimeout(()=>
{Ha.current={x:ib.clientX,y:ib.clientY};la.onOpenChange(!0)},700)})),onPointerMove:H?a.onPointerMove:Jf(a.onPointerMove,Nb(eb)),onPointerCancel:H?a.onPointerCancel:Jf(a.onPointerCancel,Nb(eb)),onPointerUp:H?a.onPointerUp:Jf(a.onPointerUp,Nb(eb))})))}),nz=(0,rl.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;const H=rf(a,["__scopeContextMenu"]),fa=su("ContextMenuContent",k);k=ru(k);const la=(0,rl.useRef)(!1);return(0,rl.createElement)(Tu,Pe({},k,H,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:sa=>
{var Ha;null===(Ha=a.onCloseAutoFocus)||void 0===Ha||Ha.call(a,sa);!sa.defaultPrevented&&la.current&&sa.preventDefault();la.current=!1},onInteractOutside:sa=>{var Ha;null===(Ha=a.onInteractOutside)||void 0===Ha||Ha.call(a,sa);sa.defaultPrevented||fa.modal||(la.current=!0)},style:Te(Xd({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),sl=(0,rl.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;a=rf(a,["__scopeContextMenu"]);k=ru(k);return(0,rl.createElement)(uw,
Pe({},k,a,{ref:d}))}),fr=(0,rl.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;a=rf(a,["__scopeContextMenu"]);k=ru(k);return(0,rl.createElement)(iC,Pe({},k,a,{ref:d}))}),$H=a=>{const {__scopeContextMenu:d,children:k,onOpenChange:H,dir:fa,modal:la=!0}=a,[sa,Ha]=(0,rl.useState)(!1);a=ru(d);const Ta=ii(H),Xa=(0,rl.useCallback)(eb=>{Ha(eb);Ta(eb)},[Ta]);return(0,rl.createElement)(uD,{scope:d,open:sa,onOpenChange:Xa,modal:la},(0,rl.createElement)(ty,Pe({},a,{dir:fa,open:sa,onOpenChange:Xa,modal:la}),
k))},tf=da(586),$r=Xe(function({children:a,collisionRef:d}){var k,H,fa,la,sa,Ha,Ta,Xa,eb,ib,Bb,Mb,Fb,$b,nc,Sb,gc;const bc=Yf(),{handlers:Dc}=bx.useContext(Gi),Ic=Dc.t,od=bx.useRef(null),Cd=Yd=>{Yd();bc.transition("select")},Ge=bx.useMemo(()=>xf(),[]);return(0,tf.jsxs)($H,{onOpenChange:Yd=>{Yd&&!bc.isIn("select.contextMenu")?bc.transition("select").selectedTool.transition("contextMenu"):!Yd&&bc.isIn("select.contextMenu")&&bc.selectedTool.transition("idle")},children:[(0,tf.jsx)(Hv,{disabled:bc.editingShape&&
0!==Object.keys(bc.editingShape).length,children:a}),(0,tf.jsx)(nz,{className:"tl-menu tl-context-menu",ref:od,onEscapeKeyDown:()=>bc.transition("select"),collisionBoundary:d.current,asChild:!0,tabIndex:-1,children:(0,tf.jsxs)("div",{children:[1<(null==(k=bc.selectedShapes)?void 0:k.size)&&!bc.readOnly&&(null==(H=bc.selectedShapesArray)?void 0:H.some(Yd=>!Yd.props.isLocked))&&(0,tf.jsxs)(tf.Fragment,{children:[(0,tf.jsxs)(sl,{children:[(0,tf.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,tf.jsx)(hg,
{tooltip:Ic("whiteboard/align-left"),onClick:()=>Cd(()=>bc.align("left")),children:(0,tf.jsx)(kh,{name:"layout-align-left"})}),(0,tf.jsx)(hg,{tooltip:Ic("whiteboard/align-center-horizontally"),onClick:()=>Cd(()=>bc.align("centerHorizontal")),children:(0,tf.jsx)(kh,{name:"layout-align-center"})}),(0,tf.jsx)(hg,{tooltip:Ic("whiteboard/align-right"),onClick:()=>Cd(()=>bc.align("right")),children:(0,tf.jsx)(kh,{name:"layout-align-right"})}),(0,tf.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"vertical"}),
(0,tf.jsx)(hg,{tooltip:Ic("whiteboard/distribute-horizontally"),onClick:()=>Cd(()=>bc.distribute("horizontal")),children:(0,tf.jsx)(kh,{name:"layout-distribute-vertical"})})]}),(0,tf.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,tf.jsx)(hg,{tooltip:Ic("whiteboard/align-top"),onClick:()=>Cd(()=>bc.align("top")),children:(0,tf.jsx)(kh,{name:"layout-align-top"})}),(0,tf.jsx)(hg,{tooltip:Ic("whiteboard/align-center-vertically"),onClick:()=>Cd(()=>bc.align("centerVertical")),children:(0,tf.jsx)(kh,
{name:"layout-align-middle"})}),(0,tf.jsx)(hg,{tooltip:Ic("whiteboard/align-bottom"),onClick:()=>Cd(()=>bc.align("bottom")),children:(0,tf.jsx)(kh,{name:"layout-align-bottom"})}),(0,tf.jsx)(Jr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,tf.jsx)(hg,{tooltip:Ic("whiteboard/distribute-vertically"),onClick:()=>Cd(()=>bc.distribute("vertical")),children:(0,tf.jsx)(kh,{name:"layout-distribute-horizontal"})})]})]}),(0,tf.jsx)(fr,{className:"menu-separator"}),(0,tf.jsxs)(sl,{className:"tl-menu-item",
onClick:()=>Cd(bc.packIntoRectangle),children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"layout-grid"}),Ic("whiteboard/pack-into-rectangle")]}),(0,tf.jsx)(fr,{className:"menu-separator"})]}),0<(null==(fa=bc.selectedShapes)?void 0:fa.size)&&(0,tf.jsxs)(tf.Fragment,{children:[(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(bc.api.zoomToSelection),children:[Ic("whiteboard/zoom-to-fit"),(0,tf.jsx)(Wm,{action:"whiteboard/zoom-to-fit"})]}),(0,tf.jsx)(fr,{className:"menu-separator"})]}),(bc.selectedShapesArray.some(Yd=>
"group"===Yd.type||bc.getParentGroup(Yd))||1<bc.selectedShapesArray.length)&&(null==(la=bc.selectedShapesArray)?void 0:la.some(Yd=>!Yd.props.isLocked))&&!bc.readOnly&&(0,tf.jsxs)(tf.Fragment,{children:[bc.selectedShapesArray.some(Yd=>"group"===Yd.type||bc.getParentGroup(Yd))&&(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(bc.api.unGroup),children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"ungroup"}),Ic("whiteboard/ungroup"),(0,tf.jsx)(Wm,{action:"whiteboard/ungroup"})]}),1<bc.selectedShapesArray.length&&
(null==(sa=bc.selectedShapesArray)?void 0:sa.some(Yd=>!Yd.props.isLocked))&&(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(bc.api.doGroup),children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"group"}),Ic("whiteboard/group"),(0,tf.jsx)(Wm,{action:"whiteboard/group"})]}),(0,tf.jsx)(fr,{className:"menu-separator"})]}),0<(null==(Ha=bc.selectedShapes)?void 0:Ha.size)&&(null==(Ta=bc.selectedShapesArray)?void 0:Ta.some(Yd=>!Yd.props.isLocked))&&(0,tf.jsxs)(tf.Fragment,{children:[!bc.readOnly&&
(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(bc.cut),children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"cut"}),Ic("whiteboard/cut")]}),(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(bc.copy),children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"copy"}),Ic("whiteboard/copy"),(0,tf.jsx)(Wm,{action:"editor/copy"})]})]}),!bc.readOnly&&(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(bc.paste),children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"clipboard"}),Ic("whiteboard/paste"),
(0,tf.jsx)("div",{className:"tl-menu-right-slot",children:(0,tf.jsx)("span",{className:"keyboard-shortcut",children:(0,tf.jsxs)("code",{children:[CA,"+v"]})})})]}),1===(null==(Xa=bc.selectedShapes)?void 0:Xa.size)&&!bc.readOnly&&(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(()=>bc.paste(void 0,!0)),children:[Ic("whiteboard/paste-as-link"),(0,tf.jsx)("div",{className:"tl-menu-right-slot",children:(0,tf.jsx)("span",{className:"keyboard-shortcut",children:(0,tf.jsxs)("code",{children:[CA,"++v"]})})})]}),
0<(null==(eb=bc.selectedShapes)?void 0:eb.size)&&(0,tf.jsxs)(tf.Fragment,{children:[(0,tf.jsx)(fr,{className:"menu-separator"}),(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(()=>{var Yd,ve;return Dc.exportToImage(bc.currentPageId,{x:bc.selectionBounds.minX+bc.viewport.camera.point[0]-8,y:bc.selectionBounds.minY+bc.viewport.camera.point[1]-8,width:(null==(Yd=bc.selectionBounds)?void 0:Yd.width)+16,height:(null==(ve=bc.selectionBounds)?void 0:ve.height)+16,zoom:bc.viewport.camera.zoom})}),
children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"file-export"}),Ic("whiteboard/export"),(0,tf.jsx)("div",{className:"tl-menu-right-slot",children:(0,tf.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,tf.jsx)(fr,{className:"menu-separator"}),(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(bc.api.selectAll),children:[Ic("whiteboard/select-all"),(0,tf.jsx)(Wm,{action:"editor/select-parent"})]}),1<(null==(ib=bc.selectedShapes)?void 0:ib.size)&&(0,tf.jsx)(sl,{className:"tl-menu-item",
onClick:()=>Cd(bc.api.deselectAll),children:Ic("whiteboard/deselect-all")}),!bc.readOnly&&0<(null==(Bb=bc.selectedShapes)?void 0:Bb.size)&&(null==(Mb=bc.selectedShapesArray)?void 0:Mb.some(Yd=>!Yd.props.isLocked))&&(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(()=>bc.setLocked(!0)),children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"lock"}),Ic("whiteboard/lock"),(0,tf.jsx)(Wm,{action:"whiteboard/lock"})]}),!bc.readOnly&&0<(null==(Fb=bc.selectedShapes)?void 0:Fb.size)&&(null==($b=bc.selectedShapesArray)?
void 0:$b.some(Yd=>Yd.props.isLocked))&&(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(()=>bc.setLocked(!1)),children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"lock-open"}),Ic("whiteboard/unlock"),(0,tf.jsx)(Wm,{action:"whiteboard/unlock"})]}),0<(null==(nc=bc.selectedShapes)?void 0:nc.size)&&!bc.readOnly&&(null==(Sb=bc.selectedShapesArray)?void 0:Sb.some(Yd=>!Yd.props.isLocked))&&(0,tf.jsxs)(tf.Fragment,{children:[(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(bc.api.deleteShapes),
children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"backspace"}),Ic("whiteboard/delete"),(0,tf.jsx)(Wm,{action:"editor/delete"})]}),1<(null==(gc=bc.selectedShapes)?void 0:gc.size)&&!bc.readOnly&&(0,tf.jsxs)(tf.Fragment,{children:[(0,tf.jsx)(fr,{className:"menu-separator"}),(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(bc.flipHorizontal),children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"flip-horizontal"}),Ic("whiteboard/flip-horizontally")]}),(0,tf.jsxs)(sl,{className:"tl-menu-item",
onClick:()=>Cd(bc.flipVertical),children:[(0,tf.jsx)(kh,{className:"tl-menu-icon",name:"flip-vertical"}),Ic("whiteboard/flip-vertically")]})]}),!bc.readOnly&&(0,tf.jsxs)(tf.Fragment,{children:[(0,tf.jsx)(fr,{className:"menu-separator"}),(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(bc.bringToFront),children:[Ic("whiteboard/move-to-front"),(0,tf.jsx)(Wm,{action:"whiteboard/bring-to-front"})]}),(0,tf.jsxs)(sl,{className:"tl-menu-item",onClick:()=>Cd(bc.sendToBack),children:[Ic("whiteboard/move-to-back"),
(0,tf.jsx)(Wm,{action:"whiteboard/send-to-back"})]})]}),Ge&&(0,tf.jsx)(sl,{className:"tl-menu-item",onClick:()=>{1===bc.selectedShapesArray.length?console.log(uc(bc.selectedShapesArray[0].serialized)):console.log(bc.selectedShapesArray.map(Yd=>uc(Yd.serialized)))},children:Ic("whiteboard/dev-print-shape-props")})]})]})})]})}),vq=df(da(22)),cx=da(586),vD=Xe(({shape:a})=>{const d=Yf(),{handlers:k}=vq.default.useContext(Gi),H=k.t,fa=vq.default.useMemo(()=>{var la;const sa=[...(null!=(la=a.props.refs)?
la:[])].map(Ha=>[Ha,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&sa.unshift([a.props.pageId,!1]);return sa.filter(Ha=>Ha[0].toLowerCase()!==d.currentPage.name&&k.getBlockPageName(Ha[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===fa.length?null:(0,cx.jsx)("div",{className:"tl-quick-links",title:H("whiteboard/shape-quick-links"),children:fa.map(([la,sa])=>(0,cx.jsx)("div",{className:"tl-quick-links-row",children:(0,cx.jsx)(Qy,{id:la,showReferenceContent:sa})},
la))})}),aI=df(da(22)),wD=df(da(22)),gr={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},xD=(a,d,k)=>Mh(void 0,[a,d,k],function*(H,{point:fa,shiftKey:la,dataTransfer:sa,fromDrop:Ha},Ta){function Xa(ad,ud){return Mh(this,null,function*(){const ye=Object.values(H.assets).find(Ve=>Ve.src===ad);return ye?ye:{id:Lj(),type:ud,src:ad,size:yield sj(Ta.makeAssetUrl(ad),ud)}})}function eb(ad){return Mh(this,null,function*(){const ud=ad.filter(ye=>"unknown"!==lc(ye.name)).map(ye=>
Mh(this,null,function*(){try{const Ve=yield Ta.saveAsset(ye);return yield Xa(Ve,lc(ye.name))}catch(Ve){console.error(Ve)}return null}));return(yield Promise.all(ud)).filter(dg)})}function ib(ad){return[Te(Xd({},Dp.defaultProps),{html:ad,point:[fa[0],fa[1]]})]}function Bb(ad){return Mh(this,null,function*(){return Ac(Fb,$b,gc,Sb,bc,nc,Ge)(ad)})}function Mb(){return Mh(this,null,function*(){const ad=yield navigator.clipboard.read(),ud=Ac(bc,nc,Ge);return(yield Promise.all(ad.map(ye=>ud(ye)))).flat().filter(dg)})}
function Fb(ad){return Mh(this,null,function*(){var ud=ad.getData("file");if(!ud)return null;const ye=yield Xa(ud,"pdf");H.addAssets([ye]);ud=Te(Xd({},Hp.defaultProps),{id:Lj(),assetId:ye.id,url:ud,opacity:1});ye.size&&Object.assign(ud,{point:[fa[0]-ye.size[0]/4+16,fa[1]-ye.size[1]/4+16],size:Rd.div(ye.size,2)});return[ud]})}function $b(ad){return Mh(this,null,function*(){var ud=Array.from(ad.files);return 0<ud.length?(lf=ud=yield eb(ud),ud.map((ye,Ve)=>{switch(ye.type){case "video":var zf=Yr.defaultProps;
break;case "image":zf=wv.defaultProps;break;case "pdf":zf=Hp.defaultProps;break;default:return null}zf=Te(Xd({},zf),{id:Lj(),assetId:ye.id,opacity:1});ye.size&&Object.assign(zf,{point:[fa[0]-ye.size[0]/4+16*Ve,fa[1]-ye.size[1]/4+16*Ve],size:Rd.div(ye.size,2)});return zf})):null})}function nc(ad){return Mh(this,null,function*(){if(ad.types.includes("text/plain")&&(la||Ha))return null;const ud=yield ld(ad,"text/html");return ud?Ac(Dc,ib)(ud):null})}function Sb(ad){return Mh(this,null,function*(){var ud,
ye,Ve,zf,mf,Nf,Hg=ad.getData("block-uuid");if(Hg){Hg=Hg.trim();const uf=null==(Ve=null==(ye=null==(ud=window.logseq)?void 0:ud.api)?void 0:ye.get_selected_blocks)?void 0:Ve.call(ye);ud=uf&&1<(null==uf?void 0:uf.length)?uf.map(Cg=>Cg.uuid):[Hg];null==(Nf=null==(mf=null==(zf=window.logseq)?void 0:zf.api)?void 0:mf.set_blocks_id)?void 0:Nf.call(mf,ud);zf=ud.map(Cg=>Cd(`((${Cg}))`));return(yield Promise.all(zf)).flat().filter(dg).map((Cg,bh)=>Te(Xd({},Cg),{point:[fa[0]+(Dk.defaultProps.size[0]+16)*bh,
fa[1]]}))}return null})}function gc(ad){return Mh(this,null,function*(){var ud=ad.getData("page-name");return ud?(ud=ud.trim(),Cd(`[[${ud}]]`)):null})}function bc(ad){return Mh(this,null,function*(){var ud=yield ld(ad,"text/plain");return ud?(ud=ud.trim(),Ac(Ic,od)(ud)):null})}function Dc(ad){if(ad=H.api.getClonedShapesFromTldrString(decodeURIComponent(ad),fa)){const {shapes:ud,assets:ye,bindings:Ve}=ad;Ce.push(...ye);He.push(...Ve);return ud}return null}function Ic(ad){return Mh(this,null,function*(){try{const ye=
new URL(ad);var ud=ye.host&&["http:","https:"].includes(ye.protocol)}catch(ye){ud=!1}return ud&&!la?Av.test(ad)?[Te(Xd({},cr.defaultProps),{url:ad,point:[fa[0],fa[1]]})]:Xw.test(ad)?[Te(Xd({},dt.defaultProps),{url:ad,point:[fa[0],fa[1]]})]:[Te(Xd({},Wr.defaultProps),{url:ad,point:[fa[0],fa[1]]})]:null})}function od(ad){return ad.startsWith("\x3ciframe")?[Te(Xd({},Dp.defaultProps),{html:ad,point:[fa[0],fa[1]]})]:null}function Cd(ad){return Mh(this,null,function*(){if(/^\(\(.*\)\)$/.test(ad)&&40===
ad.length){var ud=ad.slice(2,-2);if(dl(ud))return[Te(Xd({},Dk.defaultProps),{point:[fa[0],fa[1]],size:[400,0],pageId:ud,fill:H.settings.color,stroke:H.settings.color,scaleLevel:H.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(ad))return ud=ad.slice(2,-2),[Te(Xd({},Dk.defaultProps),{point:[fa[0],fa[1]],size:[400,0],pageId:ud,fill:H.settings.color,stroke:H.settings.color,scaleLevel:H.settings.scaleLevel,blockType:"P"})];return null})}function Ge(ad){return Mh(this,null,function*(){var ud=
yield ld(ad,"text/plain");return ud&&(ud=ud.trim(),ud=null==Ta?void 0:Ta.addNewBlock(ud))?[Te(Xd({},Dk.defaultProps),{size:[400,0],point:[fa[0],fa[1]],pageId:ud,fill:H.settings.color,stroke:H.settings.color,scaleLevel:H.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var Yd,ve;let lf=[],Ce=[];const He=[];H.cursors.setCursor("progress");let Gd=[];try{sa?Gd.push(...(null!=(Yd=yield Bb(sa))?Yd:[])):Gd.push(...(null!=(ve=yield Mb())?ve:[]))}catch(ad){console.error(ad)}const cd=Gd.map(ad=>Te(Xd({},
ad),{parentId:H.currentPageId,isLocked:!1,id:dl(ad.id)?ad.id:Lj()})),Hd=null==sa?void 0:sa.types.every(ad=>"Files"===ad);H.wrapUpdate(()=>{var ad=[...lf,...Ce];0<ad.length&&H.createAssets(ad);0<cd.length&&H.createShapes(cd);H.currentPage.updateBindings(Object.fromEntries(He.map(ud=>[ud.id,ud])));if(1===H.selectedShapesArray.length&&1===cd.length&&Ha){ad=H.selectedShapesArray[0];const ud=H.getShapeById(cd[0].id);H.createNewLineBinding(ad,ud)}H.setSelectedShapes(cd.map(ud=>ud.id));H.selectedTool.transition("idle");
H.cursors.setCursor("default");(Ha||Hd)&&H.packIntoRectangle()})}),dx=df(da(22)),ex=df(da(22)),Lp=da(586),yD=[Im,et,jz,an,iz,Jm,mp,kz,hD,zh,$w,qn],zD=a=>{const {renderers:d}=Lt.useContext(Gi);return(0,Lp.jsx)(d.BacklinksCount,Te(Xd({},a),{options:{"portal?":!1}}))},AD=()=>{const a=Lt.useRef(null),d=Yf(),k=Lt.useMemo(()=>({ContextBar:YH,BacklinksCount:zD,QuickLinks:vD}),[]);return(0,Lp.jsx)($r,{collisionRef:a,children:(0,Lp.jsx)("div",{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":d.uuid,
children:(0,Lp.jsx)(cG,{components:k,children:(0,Lp.jsx)(FC,{})})})})},BD=a=>{var {onPersist:d,readOnly:k,model:H}=a;a=rf(a,["onPersist","readOnly","model"]);const fa=Wd(),la=Dd(),sa=pe(),Ha=k?null:Ke(),Ta=Lt.useCallback((Xa,eb)=>{null==d?void 0:d(Xa,eb)},[H]);return(0,Lp.jsx)(ZF,Te(Xd({Shapes:Zw,Tools:yD,onDrop:fa,onPaste:la,onCopy:sa,readOnly:k,onCanvasDBClick:Ha,onPersist:Ta,model:H},a),{children:(0,Lp.jsx)(AD,{})}))},CD=function(a){var {renderers:d,handlers:k}=a;a=rf(a,["renderers","handlers"]);
const H={renderers:Lt.useMemo(()=>Object.fromEntries(Object.entries(d).map(([fa,la])=>[fa,Lt.memo(la)])),[]),handlers:k};return(0,Lp.jsx)(Gi.Provider,{value:H,children:(0,Lp.jsx)(BD,Xd({},a))})}};
'use strict';var Gvd=function(a){return a},Hvd=function(a,b){return $APP.li.j(function(c){var d=$APP.Of(c);c=$APP.G.j(d,$APP.aC);d=$APP.G.j(d,$APP.JE);return new $APP.m(null,2,[$APP.Tl,$APP.t.C(c),$APP.cNb,$APP.ly.j(d,new $APP.O(null,2,5,$APP.P,[$APP.oD,$APP.cNb],null))],null)},$APP.yg.j(function(c){return $APP.oD.C($APP.JE.C(c))},$APP.v2a(a,b,new $APP.m(null,1,[$APP.dt,new $APP.O(null,2,5,$APP.P,[$APP.aC,$APP.JE],null)],null))))},Ivd=function(a){return $APP.zq.G(a,$APP.F([$APP.Aq,!0]))},Jvd=function(a,
b,c,d){var e=$APP.CF(a);b=new $APP.m(null,2,[$APP.pD,$APP.nob,$APP.qD,new $APP.m(null,6,[$APP.Tl,$APP.ta(b,"id"),$APP.W,$APP.ta(b,"name"),$APP.qG,Ivd($APP.ta(b,"bindings")),$APP.cNb,$APP.ta(b,"nonce"),$APP.dNb,Ivd(c),$APP.$Mb,d],null)],null);c=$APP.Bw();e=$APP.TF.C(e);e=$APP.n(e)?e:$APP.Bw();return new $APP.m(null,5,[$APP.kr,a,$APP.hF,"whiteboard",$APP.JE,b,$APP.UF,c,$APP.TF,e],null)},Kvd=function(a,b,c,d,e,f){a=Ivd(a.getCleanUpAssets());var g=b.shapes,h=$APP.li.j(function(E){return $APP.ta(E,"id")},
g),l=$APP.Oh(h,$APP.dk.C(g.length));g=$APP.Lh($APP.li.j(function(E){E=$APP.Of(E);E=$APP.G.j(E,$APP.Tl);return $APP.T.F(Ivd(b.getShapeById(E).serialized),$APP.Cx,$APP.G.j(l,E))},$APP.Tz.j(c,d)));d=$APP.Lh($APP.li.j($APP.Tl,d));var p=$APP.Lh($APP.li.j($APP.Tl,c)),q=$APP.Lh($APP.Xm.j($APP.yk,$APP.Tz.j(p,d)));c=$APP.Lh($APP.yg.j(function(E){E=$APP.Tl.C(E);return q.C?q.C(E):q.call(null,E)},g));var r=$APP.Xm.j($APP.yk,$APP.Tz.j(d,p)),u=$APP.bB();d=$APP.x(r)?$APP.li.j(function(E){return $APP.ly.j(E,new $APP.O(null,
2,5,$APP.P,[$APP.JE,$APP.oD],null))},function(){var E=new $APP.O(null,1,5,$APP.P,[$APP.Ty],null),H=$APP.bk.j(function(K){return new $APP.O(null,2,5,$APP.P,[$APP.aC,$APP.Ni(K)],null)},r);return $APP.RD?$APP.RD(u,E,H):$APP.SD.call(null,u,E,H)}()):null;p=$APP.bk.j(function(E){return new $APP.O(null,2,5,$APP.P,[$APP.BMa,new $APP.O(null,2,5,$APP.P,[$APP.aC,$APP.Ni(E)],null)],null)},r);var y=$APP.Tz.j(g,c),z=$APP.x(y)?function(){var E=new $APP.O(null,1,5,$APP.P,[$APP.Ty],null),H=$APP.bk.j(function(K){return new $APP.O(null,
2,5,$APP.P,[$APP.aC,$APP.Ni($APP.Tl.C(K))],null)},y);return $APP.RD?$APP.RD(u,E,H):$APP.SD.call(null,u,E,H)}():null;return new $APP.m(null,4,[$APP.OAc,Jvd(e,b,a,h),$APP.CQc,$APP.li.j(function(E){return $APP.le(q,$APP.t.C($APP.aC.C(E)))?$APP.T.F(E,$APP.UF,$APP.Bw()):$APP.Rzb(E)},$APP.li.j(function(E){E=new $APP.m(null,2,[$APP.pD,$APP.yK,$APP.oD,E],null);E=new $APP.m(null,3,[$APP.QD,new $APP.m(null,1,[$APP.kr,$APP.jr.C?$APP.jr.C(e):$APP.jr.call(null,e)],null),$APP.$D,new $APP.m(null,1,[$APP.kr,e],null),
$APP.JE,E],null);var H=$APP.tob(E,e);return $APP.km.G($APP.F([E,H]))},g)),$APP.nE,p,$APP.a4b,new $APP.m(null,3,[$APP.NJb,$APP.yb(f),$APP.dzb,f,$APP.Nv,new $APP.m(null,5,[$APP.AK,e,$APP.tNb,d,$APP.uNb,c,$APP.vNb,y,$APP.wNb,z],null)],null)],null)},Lvd=function(a,b,c){var d=$APP.Yc($APP.A(b.pages)),e=d.shapes,f=$APP.CF(a);f=$APP.ly.j(f,new $APP.O(null,3,5,$APP.P,[$APP.JE,$APP.qD,$APP.$Mb],null));var g=$APP.Oh(f,$APP.dk.C($APP.Qc(f)));e=$APP.Lh($APP.ao.j(function(q,r){var u=r.id;return new $APP.m(null,
2,[$APP.Tl,u,$APP.cNb,$APP.B.j(q,$APP.G.j(g,u))?r.nonce:Date.now()],null)},e));var h=$APP.bB();f=function(){var q=$APP.ly.j($APP.v($APP.bgd),new $APP.O(null,2,5,$APP.P,[h,a],null));return $APP.n(q)?q:$APP.Lh($APP.li.j(function(r){return $APP.tr.F(r,$APP.Tl,$APP.t)},Hvd(h,a)))}();b=Kvd(b,d,e,f,a,c);f=$APP.Of(b);d=$APP.G.j(f,$APP.OAc);b=$APP.G.j(f,$APP.CQc);c=$APP.G.j(f,$APP.nE);f=$APP.G.j(f,$APP.a4b);d=$APP.rl.G(c,new $APP.O(null,1,5,$APP.P,[d],null),$APP.F([b]));var l=$APP.ly.j(f,new $APP.O(null,
2,5,$APP.P,[$APP.Nv,$APP.uNb],null)),p=$APP.ly.j(f,new $APP.O(null,2,5,$APP.P,[$APP.Nv,$APP.tNb],null));l=$APP.n($APP.Zf(function(q){return $APP.B.j("group",$APP.Zm.C(q))},l))?$APP.T.F(f,$APP.xNb,$APP.Ev):$APP.n(function(){var q=$APP.Qf(p);return $APP.n(q)?$APP.Yf(function(r){return $APP.B.j("group",$APP.Zm.C(r))},p):q}())?$APP.T.F(f,$APP.xNb,$APP.UBc):$APP.n($APP.Zf(function(q){return $APP.B.j("line",$APP.Zm.C(q))&&$APP.B.j("arrow ",$APP.Qo.C($APP.Kzc.C(q)))},l))?$APP.T.F(f,$APP.xNb,$APP.KMc):f;
b=$APP.x($APP.rl.j(b,c))?l:$APP.T.F(f,$APP.s0a,!0);$APP.vi.O($APP.bgd,$APP.fv,new $APP.O(null,2,5,$APP.P,[h,a],null),e);if($APP.le(new $APP.Hh(null,new $APP.m(null,1,[$APP.KMc,null],null),null),$APP.xNb.C(b)))return $APP.cB($APP.r2c,new $APP.m(null,2,[$APP.ry,d,$APP.a4b,b],null));e=$APP.r2c.C($APP.v($APP.ZA));$APP.rl.j($APP.ry.C(e),d);$APP.km.G($APP.F([b,$APP.a4b.C(e)]));$APP.cB($APP.r2c,$APP.Nf);return null},Mvd=function(a){a=$APP.t2a(a);return $APP.Xm.j($APP.lob,a)},Nvd=function(a){var b=$APP.sy.C($APP.CF(a));
a=Mvd(a);a=$APP.yg.j(function(d){return $APP.B.j(b,$APP.sy.C($APP.$D.C(d)))},a);var c=$APP.Lh($APP.Xm.j($APP.vb,$APP.li.j(function(d){return $APP.ly.F(d,new $APP.O(null,2,5,$APP.P,[$APP.aE,$APP.sy],null),null)},a)));a=$APP.Xm.j(function(d){d=$APP.sy.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},Ovd=function(){return $APP.ym(null,function(){return $APP.ym(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.ym(a.text(),function(b){return $APP.ym($APP.qr($APP.Nf,
b),function(c){return $APP.sm(c)})})})})},Pvd=function(a){var b=$APP.p4a();return($APP.xd(b)||$APP.B.j(1,$APP.Qc(b))&&$APP.B.j(a,$APP.kr.C($APP.A(b))))&&$APP.yb($APP.ly.j($APP.v($APP.ZA),new $APP.O(null,1,5,$APP.P,[$APP.eXa],null)))},Qvd=function(a){return null!=a?$APP.Bm($APP.ym(null,function(){return $APP.ym(Ovd(),function(b){var c=$APP.Of(b);b=$APP.G.j(c,$APP.RF);c=$APP.G.j(c,$APP.yw);var d=$APP.A(b);b=$APP.aNb(d,c);d=$APP.kob(d);c=$APP.dNb.C(d);d=$APP.qG.C(d);a.cloneShapesIntoCurrentPage($APP.xj(new $APP.m(null,
3,[$APP.lNb,b,$APP.dNb,c,$APP.qG,d],null)));b=$APP.gXa();return $APP.sm(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},Rvd=function(a){a.cleanup($APP.li.j(function(b){return b.id},a.shapes))},Uvd=function(a,b){b=$APP.zq.G(b,$APP.F([new $APP.m(null,1,[$APP.Aq,!0],null)]));b=$APP.Of(b);var c=$APP.G.j(b,Svd),d=$APP.G.j(b,$APP.LH),e=$APP.G.j(b,Tvd),f=$APP.bB();return $APP.ym(null,function(){return $APP.ym($APP.n(d)?$APP.zib(f,a,new $APP.m(null,1,[$APP.dx,
100],null)):null,function(g){return $APP.ym($APP.n(c)?$APP.Eib(a,10):null,function(h){return $APP.ym($APP.n(e)?$APP.Gib(a,100):null,function(l){return $APP.sm($APP.xj(new $APP.m(null,3,[$APP.RF,h,$APP.yw,g,$APP.qI,l],null)))})})})})},Vvd=function(a){return $APP.xm($APP.UGb($APP.bB(),new $APP.O(null,1,5,$APP.P,[$APP.zq.C(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.C.F(c,0,null),$APP.C.F(c,1,null),c=$APP.C.F(c,2,null),$APP.WGb($APP.n(c)?c:b)):null})},Wvd=function(){return $APP.RJb(null)},
Xvd=function(){return $APP.TJb(null)},nwd=function(a){return $APP.sh([Yvd,Zvd,$vd,awd,bwd,cwd,dwd,ewd,$APP.tC,fwd,gwd,hwd,iwd,$APP.yY,jwd,kwd,lwd,mwd],[function(b){return $APP.kr.C($APP.z2a($APP.bB(),$APP.oj(b)))},function(b){return $APP.xj($APP.k1b(b))},function(b){return $APP.DF(b,!1)},function(b){return $APP.pXa($APP.n(b)?$APP.k1b(b):null)},function(b){return $APP.eNb(b)},$APP.$w,function(b){return $APP.PFb(b,new $APP.m(null,1,[$APP.HO,!1],null))},$APP.PF,Uvd,Vvd,Gvd,function(b,c){return $APP.vw(b,
$APP.F([$APP.xw,c]))},function(b){var c=$APP.t,d=c.C,e=$APP.rA(),f=$APP.CF(a),g=Nvd(a);b=new $APP.m(null,6,[$APP.aE,$APP.Gh($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.P,[$APP.sy],null)),$APP.aC,e,$APP.YB,$APP.n(b)?b:"",$APP.rE,$APP.lr,$APP.QD,new $APP.m(null,2,[$APP.kr,$APP.jr.C?$APP.jr.C(a):$APP.jr.call(null,a),$APP.Fw,a],null),$APP.$D,new $APP.m(null,1,[$APP.kr,a],null)],null);$APP.TD(new $APP.O(null,1,5,$APP.P,[b],null));return d.call(c,e)},function(b){return $APP.KI.G($APP.F([$APP.mi.C(b)]))},function(b,
c){return $APP.pC(function(){return(0,$APP.bZb)(b,$APP.km.G($APP.F([$APP.zq.G(c,$APP.F([$APP.Aq,!0])),new $APP.m(null,1,[$APP.IO,!0],null)])))})},function(b,c){return $APP.WB($APP.bB(),$APP.sy.C($APP.CF(b)),$APP.mi.C(c))},function(b){var c=$APP.dw(b)?$APP.kr.C($APP.z2a($APP.bB(),$APP.oj(b))):null;c=$APP.n(c)?c:b;var d=$APP.xF(c),e=$APP.PF(c);return $APP.n(d)?$APP.n(e)?$APP.bK(c,new $APP.m(null,1,[$APP.aK,b],null)):$APP.$J($APP.DF(b,!1)):null},function(b){return $APP.xj($APP.aF($APP.oj(b)))}])},mwd=
new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),jwd=new $APP.N(null,"exportToImage","exportToImage",-154356643),iwd=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),owd=new $APP.N(null,"KeyboardShortcut","KeyboardShortcut",1250004264),Tvd=new $APP.N(null,"files?","files?",-1267491104),Yvd=new $APP.N(null,"getBlockPageName","getBlockPageName",-1656908032),pwd=new $APP.N(null,"renderers","renderers",-1460292282),qwd=new $APP.N(null,"model","model",331153215),$vd=new $APP.N(null,
"getRedirectPageName","getRedirectPageName",-1858136925),cwd=new $APP.N(null,"isMobile","isMobile",-2043133877),awd=new $APP.N(null,"setCurrentPdf","setCurrentPdf",-63289336),rwd=new $APP.N(null,"onMount","onMount",-876858467),dwd=new $APP.N(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),gwd=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),swd=new $APP.N(null,"onPersist","onPersist",-1848738852),twd=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),hwd=new $APP.N(null,
"copyToClipboard","copyToClipboard",1092115063),lwd=new $APP.N(null,"redirectToPage","redirectToPage",87147838),bwd=new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",554297706),fwd=new $APP.N(null,"saveAsset","saveAsset",-668047853),uwd=new $APP.N(null,"BacklinksCount","BacklinksCount",364670631),vwd=new $APP.N(null,"Block","Block",-1959785792),kwd=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),wwd=new $APP.N(null,"Page","Page",-1267059506),Svd=new $APP.N(null,"pages?","pages?",
-2065014049),xwd=new $APP.N(null,"PageName","PageName",-164991013),ywd=new $APP.N(null,"Tweet","Tweet",-452258680),ewd=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579),zwd=new $APP.N(null,"BlockReference","BlockReference",-120254741),Zvd=new $APP.N(null,"inflateAsset","inflateAsset",-1449040639);$APP.gda("tldraw");var Awd=$APP.Im(590);var Bwd,Cwd;$APP.hmd={};Bwd=$APP.gP($APP.ta(Awd,"App"));$APP.kmd=$APP.ta(Awd,"generateJSXFromModel");
Cwd=new $APP.m(null,8,[wwd,$APP.Kr($APP.Or,function(a){return(0,$APP.kld)(new $APP.m(null,2,[$APP.AK,$APP.DF($APP.ta(a,"pageName"),!1),$APP.IO,!0],null))},null,"frontend.extensions.tldraw/page-cp"),vwd,$APP.Kr($APP.Or,function(a){a=$APP.Ni($APP.ta(a,"blockId"));var b=$APP.sWa($APP.Ofc);a=b.C?b.C(a):b.call(null,a);return $APP.yr(a)},null,"frontend.extensions.tldraw/block-cp"),twd,$APP.Kr($APP.Or,function(a){return $APP.yr($APP.GR(new $APP.m(null,1,[$APP.$V,!0],null),$APP.bB(),$APP.Ni($APP.ta(a,"blockId")),
new $APP.m(null,2,[$APP.X5b,$APP.ta(a,"endSeparator"),$APP.Y5b,$APP.ta(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),ywd,$APP.Kr($APP.Or,function(a){return(0,$APP.N4b)($APP.ta(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),xwd,$APP.Kr($APP.Or,function(a){return(0,$APP.sR)(new $APP.m(null,1,[$APP.$V,!0],null),new $APP.m(null,1,[$APP.kr,$APP.ta(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),uwd,function(a){return $APP.ag.j($APP.nmd,$APP.li.j(function(b){return $APP.zq.G($APP.ta(a,
b),$APP.F([new $APP.m(null,1,[$APP.Aq,!0],null)]))},new $APP.O(null,3,5,$APP.P,["id","className","options"],null)))},zwd,$APP.Kr($APP.Or,function(a){return(0,$APP.X3b)($APP.Nf,$APP.ta(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),owd,$APP.Kr($APP.Or,function(a){a=$APP.nP($APP.mi.C($APP.ta(a,"action")));return"string"===typeof a?$APP.yr($APP.kP(a)):$APP.yr($APP.zp.j(" | ",$APP.li.j($APP.kP,a)))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);
$APP.imd=$APP.Kr($APP.Or,function(a,b){function c(l){if($APP.n(l)){l.appUndo=Wvd;l.appRedo=Xvd;var p=$APP.ta(l,"api");return $APP.n(p)?$APP.xm(d?Qvd(p):null,function(){Rvd(l.currentPage);$APP.qXa(l,b);return h.C?h.C(l):h.call(null,l)}):null}return null}var d=Pvd(a),e=$APP.mNb(a),f=$APP.Ur(null),g=$APP.C.F(f,0,null),h=$APP.C.F(f,1,null);$APP.Vr(function(){$APP.n($APP.n(g)?b:g)&&$APP.qXa(g,b);return function(){return $APP.vc}},new $APP.O(null,2,5,$APP.P,[b,g],null));return $APP.n(e)?$APP.Y("div",{style:{overscrollBehavior:"none"},
onBlur:function(l){l=$APP.ta(l,"target").tagName;var p=new $APP.Hh(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.$B():null},onWheel:$APP.pw,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.yb(g)?$APP.Y("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.yr($APP.rP("Loading onboarding whiteboard ..."))]):null,$APP.yr(function(){var l=new $APP.m(null,6,[pwd,Cwd,$APP.nRa,
nwd(a),rwd,c,$APP.dSc,!0,swd,function(p,q){$APP.cB(new $APP.O(null,2,5,$APP.P,[$APP.eUc,$APP.bB()],null),$APP.Bw());return $APP.n(!1)?(console.time("tldraw persist"),p=Lvd(a,p,q.replace),console.timeEnd("tldraw persist"),p):Lvd(a,p,q.replace)},qwd,e],null);return Bwd.C?Bwd.C(l):Bwd.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Sa.Yi();
}).call(this);