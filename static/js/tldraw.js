(function(){
shadow$provide[586]=function(wa,X,Ta,I){function q(w,B,C){var a,K={},r=null,h=null;void 0!==C&&(r=""+C);void 0!==B.key&&(r=""+B.key);void 0!==B.ref&&(h=B.ref);for(a in B)t.call(B,a)&&!d.hasOwnProperty(a)&&(K[a]=B[a]);if(w&&w.defaultProps)for(a in B=w.defaultProps,B)void 0===K[a]&&(K[a]=B[a]);return{$$typeof:R,type:w,key:r,ref:h,props:K,_owner:A.current}}X(19);wa=X(22);var R=60103;I.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(X=Symbol.for,R=X("react.element"),I.Fragment=X("react.fragment"));
var A=wa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t=Object.prototype.hasOwnProperty,d={key:!0,ref:!0,__self:!0,__source:!0};I.jsx=q;I.jsxs=q};
shadow$provide[588]=function(wa,X,Ta,I){Ta.exports=X(586)};
shadow$provide[589]=function(wa,X,Ta,I){function q(qc){for(var Dd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+qc,vd=1;vd<arguments.length;vd++)Dd+="\x26args[]\x3d"+encodeURIComponent(arguments[vd]);return"Minified React error #"+qc+"; visit "+Dd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function R(qc){if(null==qc)return null;if("function"===typeof qc)return qc.displayName||qc.name||null;if("string"===typeof qc)return qc;
switch(qc){case M:return"Fragment";case aa:return"Portal";case D:return"Profiler";case S:return"StrictMode";case ba:return"Suspense";case H:return"SuspenseList"}if("object"===typeof qc)switch(qc.$$typeof){case P:return(qc.displayName||"Context")+".Consumer";case O:return(qc._context.displayName||"Context")+".Provider";case da:var Dd=qc.render;Dd=Dd.displayName||Dd.name||"";return qc.displayName||(""!==Dd?"ForwardRef("+Dd+")":"ForwardRef");case ja:return R(qc.type);case ca:return R(qc._render);case N:Dd=
qc._payload;qc=qc._init;try{return R(qc(Dd))}catch(vd){}}return null}function A(qc,Dd){for(var vd=qc._threadCount|0;vd<=Dd;vd++)qc[vd]=qc._currentValue2,qc._threadCount=vd+1}function t(qc,Dd,vd,Zd){if(Zd&&(Zd=qc.contextType,"object"===typeof Zd&&null!==Zd))return A(Zd,vd),Zd[vd];if(qc=qc.contextTypes){vd={};for(var ud in qc)vd[ud]=Dd[ud];Dd=vd}else Dd=ya;return Dd}function d(qc){if(Ea.call(Ya,qc))return!0;if(Ea.call(Oa,qc))return!1;if(Ua.test(qc))return Ya[qc]=!0;Oa[qc]=!0;return!1}function w(qc,
Dd,vd,Zd){if(null!==vd&&0===vd.type)return!1;switch(typeof Dd){case "function":case "symbol":return!0;case "boolean":if(Zd)return!1;if(null!==vd)return!vd.acceptsBooleans;qc=qc.toLowerCase().slice(0,5);return"data-"!==qc&&"aria-"!==qc;default:return!1}}function B(qc,Dd,vd,Zd){if(null===Dd||"undefined"===typeof Dd||w(qc,Dd,vd,Zd))return!0;if(Zd)return!1;if(null!==vd)switch(vd.type){case 3:return!Dd;case 4:return!1===Dd;case 5:return isNaN(Dd);case 6:return isNaN(Dd)||1>Dd}return!1}function C(qc,Dd,
vd,Zd,ud,Qd,od){this.acceptsBooleans=2===Dd||3===Dd||4===Dd;this.attributeName=Zd;this.attributeNamespace=ud;this.mustUseProperty=vd;this.propertyName=qc;this.type=Dd;this.sanitizeURL=Qd;this.removeEmptyString=od}function a(qc){return qc[1].toUpperCase()}function K(qc){if("boolean"===typeof qc||"number"===typeof qc)return""+qc;qc=""+qc;var Dd=db.exec(qc);if(Dd){var vd="",Zd,ud=0;for(Zd=Dd.index;Zd<qc.length;Zd++){switch(qc.charCodeAt(Zd)){case 34:Dd="\x26quot;";break;case 38:Dd="\x26amp;";break;case 39:Dd=
"\x26#x27;";break;case 60:Dd="\x26lt;";break;case 62:Dd="\x26gt;";break;default:continue}ud!==Zd&&(vd+=qc.substring(ud,Zd));ud=Zd+1;vd+=Dd}qc=ud!==Zd?vd+qc.substring(ud,Zd):vd}return qc}function r(qc,Dd){var vd=Ma.hasOwnProperty(qc)?Ma[qc]:null,Zd;if(Zd="style"!==qc)Zd=null!==vd?0===vd.type:!(2<qc.length)||"o"!==qc[0]&&"O"!==qc[0]||"n"!==qc[1]&&"N"!==qc[1]?!1:!0;if(Zd||B(qc,Dd,vd,!1))return"";if(null!==vd){qc=vd.attributeName;Zd=vd.type;if(3===Zd||4===Zd&&!0===Dd)return qc+'\x3d""';vd.sanitizeURL&&
(Dd=""+Dd);return qc+'\x3d"'+(K(Dd)+'"')}return d(qc)?qc+'\x3d"'+(K(Dd)+'"'):""}function h(qc,Dd){return qc===Dd&&(0!==qc||1/qc===1/Dd)||qc!==qc&&Dd!==Dd}function k(){if(null===oa)throw Error(q(321));return oa}function f(){if(0<Ab)throw Error(q(312));return{memoizedState:null,queue:null,next:null}}function v(){null===sa?null===Ca?(Aa=!1,Ca=sa=f()):(Aa=!0,sa=Ca):null===sa.next?(Aa=!1,sa=sa.next=f()):(Aa=!0,sa=sa.next);return sa}function x(qc,Dd,vd,Zd){for(;Ja;)Ja=!1,Ab+=1,sa=null,vd=qc(Dd,Zd);L();
return vd}function L(){oa=null;Ja=!1;Ca=null;Ab=0;sa=Sa=null}function z(qc,Dd){return"function"===typeof Dd?Dd(qc):Dd}function u(qc,Dd,vd){oa=k();sa=v();if(Aa){var Zd=sa.queue;Dd=Zd.dispatch;if(null!==Sa&&(vd=Sa.get(Zd),void 0!==vd)){Sa.delete(Zd);Zd=sa.memoizedState;do Zd=qc(Zd,vd.action),vd=vd.next;while(null!==vd);sa.memoizedState=Zd;return[Zd,Dd]}return[sa.memoizedState,Dd]}qc=qc===z?"function"===typeof Dd?Dd():Dd:void 0!==vd?vd(Dd):Dd;sa.memoizedState=qc;qc=sa.queue={last:null,dispatch:null};
qc=qc.dispatch=l.bind(null,oa,qc);return[sa.memoizedState,qc]}function m(qc,Dd){oa=k();sa=v();Dd=void 0===Dd?null:Dd;if(null!==sa){var vd=sa.memoizedState;if(null!==vd&&null!==Dd){var Zd=vd[1];a:if(null===Zd)Zd=!1;else{for(var ud=0;ud<Zd.length&&ud<Dd.length;ud++)if(!Na(Dd[ud],Zd[ud])){Zd=!1;break a}Zd=!0}if(Zd)return vd[0]}}qc=qc();sa.memoizedState=[qc,Dd];return qc}function l(qc,Dd,vd){if(!(25>Ab))throw Error(q(301));if(qc===oa)if(Ja=!0,qc={action:vd,next:null},null===Sa&&(Sa=new Map),vd=Sa.get(Dd),
void 0===vd)Sa.set(Dd,qc);else{for(Dd=vd;null!==Dd.next;)Dd=Dd.next;Dd.next=qc}}function J(){}function Y(qc){switch(qc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F(qc){if(void 0===qc||null===qc)return qc;var Dd="";E.Children.forEach(qc,function(vd){null!=vd&&(Dd+=vd)});return Dd}function ha(qc,Dd){if(void 0===qc)throw Error(q(152,R(Dd)||"Component"));}function T(qc,Dd,vd){function Zd(od,
Sd){var Ob=Sd.prototype&&Sd.prototype.isReactComponent,gc=t(Sd,Dd,vd,Ob),Zb=[],sb=!1,ob={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Zb)return null},enqueueReplaceState:function(se,td){sb=!0;Zb=[td]},enqueueSetState:function(se,td){if(null===Zb)return null;Zb.push(td)}};if(Ob){if(Ob=new Sd(od.props,gc,ob),"function"===typeof Sd.getDerivedStateFromProps){var cc=Sd.getDerivedStateFromProps.call(null,od.props,Ob.state);null!=cc&&(Ob.state=Z({},Ob.state,cc))}}else if(oa={},
Ob=Sd(od.props,gc,ob),Ob=x(Sd,od.props,Ob,gc),null==Ob||null==Ob.render){qc=Ob;ha(qc,Sd);return}Ob.props=od.props;Ob.context=gc;Ob.updater=ob;ob=Ob.state;void 0===ob&&(Ob.state=ob=null);if("function"===typeof Ob.UNSAFE_componentWillMount||"function"===typeof Ob.componentWillMount)if("function"===typeof Ob.componentWillMount&&"function"!==typeof Sd.getDerivedStateFromProps&&Ob.componentWillMount(),"function"===typeof Ob.UNSAFE_componentWillMount&&"function"!==typeof Sd.getDerivedStateFromProps&&Ob.UNSAFE_componentWillMount(),
Zb.length){ob=Zb;var uc=sb;Zb=null;sb=!1;if(uc&&1===ob.length)Ob.state=ob[0];else{cc=uc?ob[0]:Ob.state;var Uc=!0;for(uc=uc?1:0;uc<ob.length;uc++){var dd=ob[uc];dd="function"===typeof dd?dd.call(Ob,cc,od.props,gc):dd;null!=dd&&(Uc?(Uc=!1,cc=Z({},cc,dd)):Z(cc,dd))}Ob.state=cc}}else Zb=null;qc=Ob.render();ha(qc,Sd);if("function"===typeof Ob.getChildContext&&(od=Sd.childContextTypes,"object"===typeof od)){var Md=Ob.getChildContext(),ce;for(ce in Md)if(!(ce in od))throw Error(q(108,R(Sd)||"Unknown",ce));
}Md&&(Dd=Z({},Dd,Md))}for(;E.isValidElement(qc);){var ud=qc,Qd=ud.type;if("function"!==typeof Qd)break;Zd(ud,Qd)}return{child:qc,context:Dd}}var Z=X(19),E=X(22),aa=60106,M=60107,S=60108,D=60114,O=60109,P=60110,da=60112,ba=60113,H=60120,ja=60115,N=60116,ca=60121,ia=60117,ea=60119,qa=60129,za=60131;"function"===typeof Symbol&&Symbol.for&&(wa=Symbol.for,aa=wa("react.portal"),M=wa("react.fragment"),S=wa("react.strict_mode"),D=wa("react.profiler"),O=wa("react.provider"),P=wa("react.context"),da=wa("react.forward_ref"),
ba=wa("react.suspense"),H=wa("react.suspense_list"),ja=wa("react.memo"),N=wa("react.lazy"),ca=wa("react.block"),ia=wa("react.fundamental"),ea=wa("react.scope"),qa=wa("react.debug_trace_mode"),za=wa("react.legacy_hidden"));wa=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var ya={},Ha=new Uint16Array(16);for(X=0;15>X;X++)Ha[X]=X+1;Ha[15]=0;var Ua=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ea=Object.prototype.hasOwnProperty,Oa={},Ya={},Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(qc){Ma[qc]=new C(qc,0,!1,qc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(qc){var Dd=qc[0];Ma[Dd]=new C(Dd,1,!1,qc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(qc){Ma[qc]=
new C(qc,2,!1,qc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(qc){Ma[qc]=new C(qc,2,!1,qc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(qc){Ma[qc]=new C(qc,3,!1,qc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(qc){Ma[qc]=new C(qc,3,!0,qc,null,!1,!1)});["capture","download"].forEach(function(qc){Ma[qc]=new C(qc,4,!1,qc,null,!1,!1)});["cols","rows","size","span"].forEach(function(qc){Ma[qc]=new C(qc,6,!1,qc,null,!1,!1)});["rowSpan","start"].forEach(function(qc){Ma[qc]=new C(qc,5,!1,qc.toLowerCase(),null,!1,!1)});var eb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(qc){var Dd=
qc.replace(eb,a);Ma[Dd]=new C(Dd,1,!1,qc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(qc){var Dd=qc.replace(eb,a);Ma[Dd]=new C(Dd,1,!1,qc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(qc){var Dd=qc.replace(eb,a);Ma[Dd]=new C(Dd,1,!1,qc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(qc){Ma[qc]=new C(qc,1,!1,qc.toLowerCase(),null,!1,!1)});
Ma.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(qc){Ma[qc]=new C(qc,1,!1,qc.toLowerCase(),null,!0,!0)});var db=/["'&<>]/,Na="function"===typeof Object.is?Object.is:h,oa=null,Ca=null,sa=null,Aa=!1,Ja=!1,Sa=null,Ab=0,jb=null,Pb={readContext:function(qc){var Dd=jb.threadID;A(qc,Dd);return qc[Dd]},useContext:function(qc){k();var Dd=jb.threadID;A(qc,Dd);return qc[Dd]},useMemo:m,useReducer:u,useRef:function(qc){oa=
k();sa=v();var Dd=sa.memoizedState;return null===Dd?(qc={current:qc},sa.memoizedState=qc):Dd},useState:function(qc){return u(z,qc)},useLayoutEffect:function(){},useCallback:function(qc,Dd){return m(function(){return qc},Dd)},useImperativeHandle:J,useEffect:J,useDebugValue:J,useDeferredValue:function(qc){k();return qc},useTransition:function(){k();return[function(qc){qc()},!1]},useOpaqueIdentifier:function(){return(jb.identifierPrefix||"")+"R:"+(jb.uniqueID++).toString(36)},useMutableSource:function(qc,
Dd){k();return Dd(qc._source)}},Xb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},jc=Z({menuitem:!0},Xb),Pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pb=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(qc){pb.forEach(function(Dd){Dd=Dd+qc.charAt(0).toUpperCase()+qc.substring(1);Pa[Dd]=Pa[qc]})});var qb=/([A-Z])/g,$b=/^ms-/,Jc=E.Children.toArray,
bd=wa.ReactCurrentDispatcher,Pc={listing:!0,pre:!0,textarea:!0},Fb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,xc={},Vc={},jd=Object.prototype.hasOwnProperty,Ld={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Kd=function(){function qc(vd,Zd,ud){E.isValidElement(vd)?vd.type!==M?vd=[vd]:(vd=vd.props.children,vd=E.isValidElement(vd)?[vd]:Jc(vd)):vd=Jc(vd);vd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:vd,childIndex:0,context:ya,footer:""};
var Qd=Ha[0];if(0===Qd){var od=Ha;Qd=od.length;var Sd=2*Qd;if(!(65536>=Sd))throw Error(q(304));var Ob=new Uint16Array(Sd);Ob.set(od);Ha=Ob;Ha[0]=Qd+1;for(od=Qd;od<Sd-1;od++)Ha[od]=od+1;Ha[Sd-1]=0}else Ha[0]=Ha[Qd];this.threadID=Qd;this.stack=[vd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Zd;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=ud&&ud.identifierPrefix||""}
var Dd=qc.prototype;Dd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var vd=this.threadID;Ha[vd]=Ha[0];Ha[0]=vd}};Dd.pushProvider=function(vd){var Zd=++this.contextIndex,ud=vd.type._context,Qd=this.threadID;A(ud,Qd);var od=ud[Qd];this.contextStack[Zd]=ud;this.contextValueStack[Zd]=od;ud[Qd]=vd.props.value};Dd.popProvider=function(){var vd=this.contextIndex,Zd=this.contextStack[vd],ud=this.contextValueStack[vd];this.contextStack[vd]=null;this.contextValueStack[vd]=
null;this.contextIndex--;Zd[this.threadID]=ud};Dd.clearProviders=function(){for(var vd=this.contextIndex;0<=vd;vd--)this.contextStack[vd][this.threadID]=this.contextValueStack[vd]};Dd.read=function(vd){if(this.exhausted)return null;var Zd=jb;jb=this;var ud=bd.current;bd.current=Pb;try{for(var Qd=[""],od=!1;Qd[0].length<vd;){if(0===this.stack.length){this.exhausted=!0;var Sd=this.threadID;Ha[Sd]=Ha[0];Ha[0]=Sd;break}var Ob=this.stack[this.stack.length-1];if(od||Ob.childIndex>=Ob.children.length){var gc=
Ob.footer;""!==gc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Ob.type)this.currentSelectValue=null;else if(null!=Ob.type&&null!=Ob.type.type&&Ob.type.type.$$typeof===O)this.popProvider(Ob.type);else if(Ob.type===ba){this.suspenseDepth--;var Zb=Qd.pop();if(od){od=!1;var sb=Ob.fallbackFrame;if(!sb)throw Error(q(303));this.stack.push(sb);Qd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Qd[this.suspenseDepth]+=Zb}Qd[this.suspenseDepth]+=gc}else{var ob=Ob.children[Ob.childIndex++],
cc="";try{cc+=this.render(ob,Ob.context,Ob.domNamespace)}catch(uc){if(null!=uc&&"function"===typeof uc.then)throw Error(q(294));throw uc;}finally{}Qd.length<=this.suspenseDepth&&Qd.push("");Qd[this.suspenseDepth]+=cc}}return Qd[0]}finally{bd.current=ud,jb=Zd,L()}};Dd.render=function(vd,Zd,ud){if("string"===typeof vd||"number"===typeof vd){ud=""+vd;if(""===ud)return"";if(this.makeStaticMarkup)return K(ud);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+K(ud);this.previousWasTextNode=!0;return K(ud)}Zd=
T(vd,Zd,this.threadID);vd=Zd.child;Zd=Zd.context;if(null===vd||!1===vd)return"";if(!E.isValidElement(vd)){if(null!=vd&&null!=vd.$$typeof){ud=vd.$$typeof;if(ud===aa)throw Error(q(257));throw Error(q(258,ud.toString()));}vd=Jc(vd);this.stack.push({type:null,domNamespace:ud,children:vd,childIndex:0,context:Zd,footer:""});return""}var Qd=vd.type;if("string"===typeof Qd)return this.renderDOM(vd,Zd,ud);switch(Qd){case za:case qa:case S:case D:case H:case M:return vd=Jc(vd.props.children),this.stack.push({type:null,
domNamespace:ud,children:vd,childIndex:0,context:Zd,footer:""}),"";case ba:throw Error(q(294));case ea:throw Error(q(343));}if("object"===typeof Qd&&null!==Qd)switch(Qd.$$typeof){case da:oa={};var od=Qd.render(vd.props,vd.ref);od=x(Qd.render,vd.props,od,vd.ref);od=Jc(od);this.stack.push({type:null,domNamespace:ud,children:od,childIndex:0,context:Zd,footer:""});return"";case ja:return vd=[E.createElement(Qd.type,Z({ref:vd.ref},vd.props))],this.stack.push({type:null,domNamespace:ud,children:vd,childIndex:0,
context:Zd,footer:""}),"";case O:return Qd=Jc(vd.props.children),ud={type:vd,domNamespace:ud,children:Qd,childIndex:0,context:Zd,footer:""},this.pushProvider(vd),this.stack.push(ud),"";case P:Qd=vd.type;od=vd.props;var Sd=this.threadID;A(Qd,Sd);Qd=Jc(od.children(Qd[Sd]));this.stack.push({type:vd,domNamespace:ud,children:Qd,childIndex:0,context:Zd,footer:""});return"";case ia:throw Error(q(338));case N:return Qd=vd.type,od=Qd._init,Qd=od(Qd._payload),vd=[E.createElement(Qd,Z({ref:vd.ref},vd.props))],
this.stack.push({type:null,domNamespace:ud,children:vd,childIndex:0,context:Zd,footer:""}),""}throw Error(q(130,null==Qd?Qd:typeof Qd,""));};Dd.renderDOM=function(vd,Zd,ud){var Qd=vd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===ud&&Y(Qd);if(!xc.hasOwnProperty(Qd)){if(!Fb.test(Qd))throw Error(q(65,Qd));xc[Qd]=!0}var od=vd.props;if("input"===Qd)od=Z({type:void 0},od,{defaultChecked:void 0,defaultValue:void 0,value:null!=od.value?od.value:od.defaultValue,checked:null!=od.checked?od.checked:od.defaultChecked});
else if("textarea"===Qd){var Sd=od.value;if(null==Sd){Sd=od.defaultValue;var Ob=od.children;if(null!=Ob){if(null!=Sd)throw Error(q(92));if(Array.isArray(Ob)){if(!(1>=Ob.length))throw Error(q(93));Ob=Ob[0]}Sd=""+Ob}null==Sd&&(Sd="")}od=Z({},od,{value:void 0,children:""+Sd})}else if("select"===Qd)this.currentSelectValue=null!=od.value?od.value:od.defaultValue,od=Z({},od,{value:void 0});else if("option"===Qd){Ob=this.currentSelectValue;var gc=F(od.children);if(null!=Ob){var Zb=null!=od.value?od.value+
"":gc;Sd=!1;if(Array.isArray(Ob))for(var sb=0;sb<Ob.length;sb++){if(""+Ob[sb]===Zb){Sd=!0;break}}else Sd=""+Ob===Zb;od=Z({selected:void 0,children:void 0},od,{selected:Sd,children:gc})}}if(Sd=od){if(jc[Qd]&&(null!=Sd.children||null!=Sd.dangerouslySetInnerHTML))throw Error(q(137,Qd));if(null!=Sd.dangerouslySetInnerHTML){if(null!=Sd.children)throw Error(q(60));if(!("object"===typeof Sd.dangerouslySetInnerHTML&&"__html"in Sd.dangerouslySetInnerHTML))throw Error(q(61));}if(null!=Sd.style&&"object"!==
typeof Sd.style)throw Error(q(62));}Sd=od;Ob=this.makeStaticMarkup;gc=1===this.stack.length;Zb="\x3c"+vd.type;a:if(-1===Qd.indexOf("-"))sb="string"===typeof Sd.is;else switch(Qd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":sb=!1;break a;default:sb=!0}for(td in Sd)if(jd.call(Sd,td)){var ob=Sd[td];if(null!=ob){if("style"===td){var cc=void 0,uc="",Uc="";for(cc in ob)if(ob.hasOwnProperty(cc)){var dd=
0===cc.indexOf("--"),Md=ob[cc];if(null!=Md){if(dd)var ce=cc;else if(ce=cc,Vc.hasOwnProperty(ce))ce=Vc[ce];else{var se=ce.replace(qb,"-$1").toLowerCase().replace($b,"-ms-");ce=Vc[ce]=se}uc+=Uc+ce+":";Uc=cc;dd=null==Md||"boolean"===typeof Md||""===Md?"":dd||"number"!==typeof Md||0===Md||Pa.hasOwnProperty(Uc)&&Pa[Uc]?(""+Md).trim():Md+"px";uc+=dd;Uc=";"}}ob=uc||null}cc=null;sb?Ld.hasOwnProperty(td)||(cc=td,cc=d(cc)&&null!=ob?cc+'\x3d"'+(K(ob)+'"'):""):cc=r(td,ob);cc&&(Zb+=" "+cc)}}Ob||gc&&(Zb+=' data-reactroot\x3d""');
var td=Zb;Sd="";Xb.hasOwnProperty(Qd)?td+="/\x3e":(td+="\x3e",Sd="\x3c/"+vd.type+"\x3e");a:{Ob=od.dangerouslySetInnerHTML;if(null!=Ob){if(null!=Ob.__html){Ob=Ob.__html;break a}}else if(Ob=od.children,"string"===typeof Ob||"number"===typeof Ob){Ob=K(Ob);break a}Ob=null}null!=Ob?(od=[],Pc.hasOwnProperty(Qd)&&"\n"===Ob.charAt(0)&&(td+="\n"),td+=Ob):od=Jc(od.children);vd=vd.type;ud=null==ud||"http://www.w3.org/1999/xhtml"===ud?Y(vd):"http://www.w3.org/2000/svg"===ud&&"foreignObject"===vd?"http://www.w3.org/1999/xhtml":
ud;this.stack.push({domNamespace:ud,type:Qd,children:od,childIndex:0,context:Zd,footer:Sd});this.previousWasTextNode=!1;return td};return qc}();I.renderToNodeStream=function(){throw Error(q(207));};I.renderToStaticMarkup=function(qc,Dd){qc=new Kd(qc,!0,Dd);try{return qc.read(Infinity)}finally{qc.destroy()}};I.renderToStaticNodeStream=function(){throw Error(q(208));};I.renderToString=function(qc,Dd){qc=new Kd(qc,!1,Dd);try{return qc.read(Infinity)}finally{qc.destroy()}};I.version="17.0.2"};
shadow$provide[591]=function(wa,X,Ta,I){Ta.exports=X(589)};
shadow$provide[592]=function(wa,X,Ta,I){function q(){if(!Rp&&(Rp="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Rp))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rp(Ps)}function R(b,g=0){return(Dl[b[g+0]]+Dl[b[g+1]]+Dl[b[g+2]]+Dl[b[g+3]]+"-"+Dl[b[g+4]]+Dl[b[g+5]]+"-"+Dl[b[g+6]]+Dl[b[g+7]]+"-"+Dl[b[g+8]]+Dl[b[g+9]]+"-"+Dl[b[g+10]]+Dl[b[g+11]]+Dl[b[g+12]]+Dl[b[g+13]]+Dl[b[g+14]]+
Dl[b[g+15]]).toLowerCase()}function A(b){let g=0;var p=0;for(var G of b)g+=G.w*G.h,p=Math.max(p,G.w);b.sort((pa,Ga)=>Ga.h-pa.h);p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),p),h:Infinity}];let U=G=0;for(const pa of b)for(b=p.length-1;0<=b;b--){var la=p[b];if(!(pa.w>la.w||pa.h>la.h)){pa.x=la.x;pa.y=la.y;U=Math.max(U,pa.y+pa.h);G=Math.max(G,pa.x+pa.w);pa.w===la.w&&pa.h===la.h?(la=p.pop(),b<p.length&&(p[b]=la)):pa.h===la.h?(la.x+=pa.w,la.w-=pa.w):(pa.w!==la.w&&p.push({x:la.x+pa.w,y:la.y,w:la.w-
pa.w,h:pa.h}),la.y+=pa.h,la.h-=pa.h);break}}return{w:G,h:U,fill:g/(G*U)||0}}function t(b,...g){return{didIntersect:0<g.length,message:b,points:g}}function d(b,g,p=0){const G=[b[0]+g[0]/2,b[1]+g[1]/2],U=Id.rotWith(b,G,p),la=Id.rotWith(Id.add(b,[g[0],0]),G,p),pa=Id.rotWith(Id.add(b,g),G,p);b=Id.rotWith(Id.add(b,[0,g[1]]),G,p);return[["top",[U,la]],["right",[la,pa]],["bottom",[pa,b]],["left",[b,U]]]}function w(b,g,p,G){const [U,la]=b,[pa,Ga]=g,[Qa,Xa]=p,[fb,mb]=G;return Ga/pa!==(mb-Xa)/(fb-Qa)&&(g=pa*
(mb-Xa)-Ga*(fb-Qa),0!==g&&(b=((la-Xa)*(fb-Qa)-(U-Qa)*(mb-Xa))/g,g=((la-Xa)*pa-(U-Qa)*Ga)/g,0<=b&&0<=g&&1>=g))?t("intersection",[U+b*pa,la+b*Ga]):t("no intersection")}function B(b,g,p,G,U=0){return k(p,G,U,b,g)}function C(b,g,p,G=0){const {minX:U,minY:la,width:pa,height:Ga}=p;return B(b,g,[U,la],[pa,Ga],G)}function a(b,g,p,G){var U=Id.sub(b,p);p=Id.sub(G,p);g=Id.sub(g,b);G=p[0]*U[1]-p[1]*U[0];U=g[0]*U[1]-g[1]*U[0];p=p[1]*g[0]-p[0]*g[1];return 0===G||0===U?t("coincident"):0===p?t("parallel"):0!==p&&
(G/=p,U/=p,0<=G&&1>=G&&0<=U&&1>=U)?t("intersection",Id.add(b,Id.mul(g,G))):t("no intersection")}function K(b,g,p,G){var U=(g[0]-b[0])*(g[0]-b[0])+(g[1]-b[1])*(g[1]-b[1]),la=2*((g[0]-b[0])*(b[0]-p[0])+(g[1]-b[1])*(b[1]-p[1]));p=la*la-4*U*(p[0]*p[0]+p[1]*p[1]+b[0]*b[0]+b[1]*b[1]-2*(p[0]*b[0]+p[1]*b[1])-G*G);if(0>p)return t("outside");if(0===p)return t("tangent");G=Math.sqrt(p);p=(-la+G)/(2*U);U=(-la-G)/(2*U);if((0>p||1<p)&&(0>U||1<U))return 0>p&&0>U||1<p&&1<U?t("outside"):t("inside");la=[];0<=p&&1>=
p&&la.push(Id.lrp(b,g,p));0<=U&&1>=U&&la.push(Id.lrp(b,g,U));return t("intersection",...la)}function r(b,g,p,G,U,la=0){if(0===G||0===U||Id.isEqual(b,g))return t("no intersection");G=0>G?G:-G;U=0>U?U:-U;b=Id.sub(Id.rotWith(b,p,-la),p);g=Id.sub(Id.rotWith(g,p,-la),p);var pa=Id.sub(g,b),Ga=pa[0]*pa[0]/G/G+pa[1]*pa[1]/U/U;pa=2*b[0]*pa[0]/G/G+2*b[1]*pa[1]/U/U;const Qa=[];G=pa*pa-4*Ga*(b[0]*b[0]/G/G+b[1]*b[1]/U/U-1);0===G?Qa.push(-pa/2/Ga):0<G&&(G=Math.sqrt(G),Qa.push((-pa+G)/2/Ga),Qa.push((-pa-G)/2/Ga));
Ga=Qa.filter(Xa=>0<=Xa&&1>=Xa).map(Xa=>Id.add(p,Id.add(b,Id.mul(Id.sub(g,b),Xa)))).map(Xa=>Id.rotWith(Xa,p,la));return t("intersection",...Ga)}function h(b,g,p){const G=[];for(let U=1;U<p.length;U++){const la=a(b,g,p[U-1],p[U]);la&&G.push(...la.points)}return 0===G.length?t("no intersection"):t("intersection",...p)}function k(b,g,p,G,U){return d(b,g,p).reduce((la,[pa,[Ga,Qa]])=>{(Ga=w(G,U,Ga,Qa))&&la.push(t(pa,...Ga.points));return la},[]).filter(la=>la.didIntersect)}function f(b,g,p,G){return d(b,
g).reduce((U,[la,[pa,Ga]])=>{(pa=a(p,G,pa,Ga))&&U.push(t(la,...pa.points));return U},[]).filter(U=>U.didIntersect)}function v(b,g,p,G){return d(b,g).reduce((U,[la,[pa,Ga]])=>{(pa=K(pa,Ga,p,G))&&U.push(rf(oe({},pa),{message:la}));return U},[]).filter(U=>U.didIntersect)}function x(b,g,p,G,U,la=0){return d(b,g).reduce((pa,[Ga,[Qa,Xa]])=>{(Qa=r(Qa,Xa,p,G,U,la))&&pa.push(rf(oe({},Qa),{message:Ga}));return pa},[]).filter(pa=>pa.didIntersect)}function L(b,g,p){return d(b,g).reduce((G,[U,[la,pa]])=>{la=h(la,
pa,p);la.didIntersect&&G.push(t(U,...la.points));return G},[]).filter(G=>G.didIntersect)}function z(b,g,p){return d(b,g).reduce((G,[U,[la,pa]])=>{{const Ga=[];for(let Qa=1;Qa<p.length+1;Qa++){const Xa=a(la,pa,p[Qa-1],p[Qa%p.length]);Xa&&Ga.push(...Xa.points)}la=0===Ga.length?t("no intersection"):t("intersection",...p)}la.didIntersect&&G.push(t(U,...la.points));return G},[]).filter(G=>G.didIntersect)}function u(b,g,p,G=0,U,la){return g===p?v(U,la,b,g):x(U,la,b,g,p,G)}function m(b,g,p){const {minX:G,
minY:U,width:la,height:pa}=b;return f([G,U],[la,pa],g,p)}function l(b){for(var g=arguments.length,p=Array(1<g?g-1:0),G=1;G<g;G++)p[G-1]=arguments[G];throw Error("number"===typeof b?"[MobX] minified error nr: "+b+(p.length?" "+p.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+b);}function J(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof wa?wa:"undefined"!==
typeof self?self:Fv}function Y(){sc||l("Proxy not available")}function F(b){var g=!1;return function(){if(!g)return g=!0,b.apply(this,arguments)}}function ha(b){return"function"===typeof b}function T(b){switch(typeof b){case "string":case "symbol":case "number":return!0}return!1}function Z(b){return null!==b&&"object"===typeof b}function E(b){if(!Z(b))return!1;b=Object.getPrototypeOf(b);if(null==b)return!0;b=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;return"function"===typeof b&&b.toString()===
Kc}function aa(b){return(b=null==b?void 0:b.constructor)?"GeneratorFunction"===b.name||"GeneratorFunction"===b.displayName?!0:!1:!1}function M(b,g,p){ma(b,g,{enumerable:!1,writable:!0,configurable:!0,value:p})}function S(b,g,p){ma(b,g,{enumerable:!1,writable:!1,configurable:!0,value:p})}function D(b,g){var p="isMobX"+b;g.prototype[p]=!0;return function(G){return Z(G)&&!0===G[p]}}function O(b){return b instanceof Map}function P(b){return b instanceof Set}function da(b){var g=Object.keys(b);if(!Ud)return g;
var p=Object.getOwnPropertySymbols(b);return p.length?[].concat(g,p.filter(function(G){return Da.propertyIsEnumerable.call(b,G)})):g}function ba(b){return null===b?null:"object"===typeof b?""+b:b}function H(b,g){return Da.hasOwnProperty.call(b,g)}function ja(b,g){for(var p=0;p<g.length;p++){var G=g[p];G.enumerable=G.enumerable||!1;G.configurable=!0;"value"in G&&(G.writable=!0);Object.defineProperty(b,G.key,G)}}function N(b,g,p){g&&ja(b.prototype,g);p&&ja(b,p);Object.defineProperty(b,"prototype",{writable:!1});
return b}function ca(){ca=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var p=arguments[g],G;for(G in p)Object.prototype.hasOwnProperty.call(p,G)&&(b[G]=p[G])}return b};return ca.apply(this,arguments)}function ia(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;ea(b,g)}function ea(b,g){ea=Object.setPrototypeOf||function(p,G){p.__proto__=G;return p};return ea(b,g)}function qa(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return b}function za(b,g){if(b){if("string"===typeof b)return ya(b,g);var p=Object.prototype.toString.call(b).slice(8,-1);"Object"===p&&b.constructor&&(p=b.constructor.name);if("Map"===p||"Set"===p)return Array.from(b);if("Arguments"===p||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return ya(b,g)}}function ya(b,g){if(null==g||g>b.length)g=b.length;for(var p=0,G=Array(g);p<g;p++)G[p]=b[p];return G}function Ha(b,g){var p="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(p)return(p=
p.call(b)).next.bind(p);if(Array.isArray(b)||(p=za(b))||g&&b&&"number"===typeof b.length){p&&(b=p);var G=0;return function(){return G>=b.length?{done:!0}:{done:!1,value:b[G++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ua(b){return Object.assign(function(g,p){Ea(g,p,b)},b)}function Ea(b,g,p){H(b,Vg)||M(b,Vg,ca({},b[Vg]));p.annotationType_!==qe&&(b[Vg][g]=p)}function Oa(b){H(b,
Vg)||M(b,Vg,ca({},b[Vg]));return b[Vg]}function Ya(b,g,p){void 0===g&&(g=fd);void 0===p&&(p=fd);b=new Fg(b);g!==fd&&Nc(pD,b,g,void 0);p!==fd&&vc(b,p);return b}function Ma(b,g,p){return Vb(b)?b:Array.isArray(b)?uf.array(b,{name:p}):E(b)?uf.object(b,void 0,{name:p}):O(b)?uf.map(b,{name:p}):P(b)?uf.set(b,{name:p}):"function"!==typeof b||dd(b)||Mc(b)?b:aa(b)?Us(b):Ss(p,b)}function eb(b){return b}function db(b,g){return{annotationType_:b,options_:g,make_:Na,extend_:oa}}function Na(b,g,p,G){var U;if(null!=
(U=this.options_)&&U.bound)return null===this.extend_(b,g,p,!1)?0:1;if(G===b.target_)return null===this.extend_(b,g,p,!1)?0:2;if(dd(p.value))return 1;b=Ca(b,this,g,p,!1);ma(G,g,b);return 2}function oa(b,g,p,G){p=Ca(b,this,g,p);return b.defineProperty_(g,p,G)}function Ca(b,g,p,G,U){var la,pa,Ga,Qa,Xa,fb,mb;void 0===U&&(U=Df.safeDescriptors);G=G.value;if(null!=(la=g.options_)&&la.bound){var Gb;G=G.bind(null!=(Gb=b.proxy_)?Gb:b.target_)}return{value:Pc(null!=(pa=null==(Ga=g.options_)?void 0:Ga.name)?
pa:p.toString(),G,null!=(Qa=null==(Xa=g.options_)?void 0:Xa.autoAction)?Qa:!1,null!=(fb=g.options_)&&fb.bound?null!=(mb=b.proxy_)?mb:b.target_:void 0),configurable:U?b.isPlainObject_:!0,enumerable:!1,writable:U?!1:!0}}function sa(b,g){return{annotationType_:b,options_:g,make_:Aa,extend_:Ja}}function Aa(b,g,p,G){var U;if(G===b.target_)return null===this.extend_(b,g,p,!1)?0:2;if(null!=(U=this.options_)&&U.bound&&(!H(b.target_,g)||!Mc(b.target_[g]))&&null===this.extend_(b,g,p,!1))return 0;if(Mc(p.value))return 1;
b=Sa(b,this,g,p,!1,!1);ma(G,g,b);return 2}function Ja(b,g,p,G){var U;p=Sa(b,this,g,p,null==(U=this.options_)?void 0:U.bound);return b.defineProperty_(g,p,G)}function Sa(b,g,p,G,U,la){void 0===la&&(la=Df.safeDescriptors);g=G.value;Mc(g)||(g=Us(g));if(U){var pa;g=g.bind(null!=(pa=b.proxy_)?pa:b.target_);g.isMobXFlow=!0}return{value:g,configurable:la?b.isPlainObject_:!0,enumerable:!1,writable:la?!1:!0}}function Ab(b,g){return{annotationType_:b,options_:g,make_:jb,extend_:Pb}}function jb(b,g,p){return null===
this.extend_(b,g,p,!1)?0:1}function Pb(b,g,p,G){return b.defineComputedProperty_(g,ca({},this.options_,{get:p.get,set:p.set}),G)}function Xb(b,g){return{annotationType_:b,options_:g,make_:jc,extend_:Pa}}function jc(b,g,p){return null===this.extend_(b,g,p,!1)?0:1}function Pa(b,g,p,G){var U,la;return b.defineObservableProperty_(g,p.value,null!=(U=null==(la=this.options_)?void 0:la.enhancer)?U:Ma,G)}function pb(b){return{annotationType_:"true",options_:b,make_:qb,extend_:$b}}function qb(b,g,p,G){var U,
la;if(p.get)return Pg.make_(b,g,p,G);if(p.set){p=Pc(g.toString(),p.set);if(G===b.target_)return null===b.defineProperty_(g,{configurable:Df.safeDescriptors?b.isPlainObject_:!0,set:p})?0:2;ma(G,g,{configurable:!0,set:p});return 2}if(G!==b.target_&&"function"===typeof p.value){var pa;if(aa(p.value)){var Ga;return(null!=(Ga=this.options_)&&Ga.autoBind?Us.bound:Us).make_(b,g,p,G)}return(null!=(pa=this.options_)&&pa.autoBind?Ss.bound:Ss).make_(b,g,p,G)}pa=!1===(null==(U=this.options_)?void 0:U.deep)?uf.ref:
uf;if("function"===typeof p.value&&null!=(la=this.options_)&&la.autoBind){var Qa;p.value=p.value.bind(null!=(Qa=b.proxy_)?Qa:b.target_)}return pa.make_(b,g,p,G)}function $b(b,g,p,G){var U,la;if(p.get)return Pg.extend_(b,g,p,G);if(p.set)return b.defineProperty_(g,{configurable:Df.safeDescriptors?b.isPlainObject_:!0,set:Pc(g.toString(),p.set)},G);if("function"===typeof p.value&&null!=(U=this.options_)&&U.autoBind){var pa;p.value=p.value.bind(null!=(pa=b.proxy_)?pa:b.target_)}return(!1===(null==(la=
this.options_)?void 0:la.deep)?uf.ref:uf).extend_(b,g,p,G)}function Jc(b){if(!0===b.deep)var g=Ma;else{if(!1===b.deep)b=eb;else{b=b.defaultDecorator;var p;b=b?null!=(g=null==(p=b.options_)?void 0:p.enhancer)?g:Ma:Ma}g=b}return g}function bd(b,g,p){if(T(g))Ea(b,g,bf);else return Vb(b)?b:E(b)?uf.object(b,g,p):Array.isArray(b)?uf.array(b,g):O(b)?uf.map(b,g):P(b)?uf.set(b,g):"object"===typeof b&&null!==b?b:uf.box(b,g)}function Pc(b,g,p,G){function U(){a:{var la=G||this,pa=arguments,Ga=Df.trackingDerivation,
Qa=!p||!Ga;od();var Xa=Df.allowStateChanges;Qa&&(qc(),Xa=xc(!0));var fb=Dd(!0),mb=wD++,Gb=au;au=mb;try{var Wb=g.apply(la,pa);break a}catch(dc){var Mb=dc;throw dc;}finally{au!==mb&&l(30),au=Gb,void 0!==Mb&&(Df.suppressReactionErrors=!0),Df.allowStateChanges=Xa,Df.allowStateReads=fb,Sd(),Qa&&(Df.trackingDerivation=Ga),Df.suppressReactionErrors=!1}Wb=void 0}return Wb}void 0===p&&(p=!1);U.isMobxAction=!0;uD&&(Ay.value=b,Object.defineProperty(U,"name",Ay));return U}function Fb(b,g){b=xc(b);try{return g()}finally{Df.allowStateChanges=
b}}function xc(b){var g=Df.allowStateChanges;Df.allowStateChanges=b;return g}function Vc(b){switch(b.dependenciesState_){case Ej.UP_TO_DATE_:return!1;case Ej.NOT_TRACKING_:case Ej.STALE_:return!0;case Ej.POSSIBLY_STALE_:for(var g=Dd(!0),p=qc(),G=b.observing_,U=G.length,la=0;la<U;la++){var pa=G[la];if(et(pa)){if(Df.disableErrorBoundaries)pa.get();else try{pa.get()}catch(Ga){return Df.trackingDerivation=p,Df.allowStateReads=g,!0}if(b.dependenciesState_===Ej.STALE_)return Df.trackingDerivation=p,Df.allowStateReads=
g,!0}}vd(b);Df.trackingDerivation=p;Df.allowStateReads=g;return!1}}function jd(b,g,p){var G=Dd(!0);vd(b);b.newObserving_=Array(b.observing_.length+100);b.unboundDepsCount_=0;b.runId_=++Df.runId;var U=Df.trackingDerivation;Df.trackingDerivation=b;Df.inBatch++;if(!0===Df.disableErrorBoundaries)var la=g.call(p);else try{la=g.call(p)}catch(fb){la=new cr(fb)}Df.inBatch--;Df.trackingDerivation=U;var pa=b.observing_;g=b.observing_=b.newObserving_;p=Ej.UP_TO_DATE_;U=0;for(var Ga=b.unboundDepsCount_,Qa=0;Qa<
Ga;Qa++){var Xa=g[Qa];0===Xa.diffValue_&&(Xa.diffValue_=1,U!==Qa&&(g[U]=Xa),U++);Xa.dependenciesState_>p&&(p=Xa.dependenciesState_)}g.length=U;b.newObserving_=null;for(Ga=pa.length;Ga--;)Qa=pa[Ga],0===Qa.diffValue_&&ud(Qa,b),Qa.diffValue_=0;for(;U--;)pa=g[U],1===pa.diffValue_&&(pa.diffValue_=0,Ga=b,pa.observers_.add(Ga),pa.lowestObserverState_>Ga.dependenciesState_&&(pa.lowestObserverState_=Ga.dependenciesState_));p!==Ej.UP_TO_DATE_&&(b.dependenciesState_=p,b.onBecomeStale_());Df.allowStateReads=
G;return la}function Ld(b){var g=b.observing_;b.observing_=[];for(var p=g.length;p--;)ud(g[p],b);b.dependenciesState_=Ej.NOT_TRACKING_}function Kd(b){var g=qc();try{return b()}finally{Df.trackingDerivation=g}}function qc(){var b=Df.trackingDerivation;Df.trackingDerivation=null;return b}function Dd(b){var g=Df.allowStateReads;Df.allowStateReads=b;return g}function vd(b){if(b.dependenciesState_!==Ej.UP_TO_DATE_){b.dependenciesState_=Ej.UP_TO_DATE_;b=b.observing_;for(var g=b.length;g--;)b[g].lowestObserverState_=
Ej.UP_TO_DATE_}}function Zd(){(Df.pendingReactions.length||Df.inBatch||Df.isRunningReactions)&&l(36);Ey=!0;if(fu){var b=J();0===--b.__mobxInstanceCount&&(b.__mobxGlobals=void 0);Df=new eu}}function ud(b,g){b.observers_["delete"](g);0===b.observers_.size&&Qd(b)}function Qd(b){!1===b.isPendingUnobservation_&&(b.isPendingUnobservation_=!0,Df.pendingUnobservations.push(b))}function od(){Df.inBatch++}function Sd(){if(0===--Df.inBatch){0<Df.inBatch||Df.isRunningReactions||hu(ob);for(var b=Df.pendingUnobservations,
g=0;g<b.length;g++){var p=b[g];p.isPendingUnobservation_=!1;0===p.observers_.size&&(p.isBeingObserved_&&(p.isBeingObserved_=!1,p.onBUO()),p instanceof dt&&p.suspend_())}Df.pendingUnobservations=[]}}function Ob(b){var g=Df.trackingDerivation;if(null!==g)return g.runId_!==b.lastAccessedBy_&&(b.lastAccessedBy_=g.runId_,g.newObserving_[g.unboundDepsCount_++]=b,!b.isBeingObserved_&&Df.trackingContext&&(b.isBeingObserved_=!0,b.onBO())),b.isBeingObserved_;0===b.observers_.size&&0<Df.inBatch&&Qd(b);return!1}
function gc(b){b.lowestObserverState_!==Ej.STALE_&&(b.lowestObserverState_=Ej.STALE_,b.observers_.forEach(function(g){if(g.dependenciesState_===Ej.UP_TO_DATE_)g.onBecomeStale_();g.dependenciesState_=Ej.STALE_}))}function Zb(b){b.lowestObserverState_!==Ej.STALE_&&(b.lowestObserverState_=Ej.STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Ej.POSSIBLY_STALE_?g.dependenciesState_=Ej.STALE_:g.dependenciesState_===Ej.UP_TO_DATE_&&(b.lowestObserverState_=Ej.UP_TO_DATE_)}))}function sb(b){b.lowestObserverState_===
Ej.UP_TO_DATE_&&(b.lowestObserverState_=Ej.POSSIBLY_STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Ej.UP_TO_DATE_&&(g.dependenciesState_=Ej.POSSIBLY_STALE_,g.onBecomeStale_())}))}function ob(){Df.isRunningReactions=!0;for(var b=Df.pendingReactions,g=0;0<b.length;){++g===BD&&(console.error("[mobx] cycle in reaction: "+b[0]),b.splice(0));for(var p=b.splice(0),G=0,U=p.length;G<U;G++)p[G].runReaction_()}Df.isRunningReactions=!1}function cc(b){var g=hu;hu=function(p){return b(function(){return g(p)})}}
function uc(b){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Uc(b){return function(g,p){if(ha(g))return Pc(g.name||"\x3cunnamed action\x3e",g,b);if(ha(p))return Pc(g,p,b);if(T(p))return Ea(g,p,b?yy:xy);if(T(g))return Ua(db(b?"autoAction":Dy,{name:g,autoAction:b}))}}function dd(b){return ha(b)&&!0===b.isMobxAction}function Md(b,g){function p(){b(Qa)}var G,U;void 0===g&&(g=Ib);var la=null!=(G=null==(U=g)?void 0:U.name)?G:"Autorun";if(g.scheduler||g.delay){var pa=
ce(g),Ga=!1;var Qa=new Vr(la,function(){Ga||(Ga=!0,pa(function(){Ga=!1;Qa.isDisposed_||Qa.track(p)}))},g.onError,g.requiresObservable)}else Qa=new Vr(la,function(){this.track(p)},g.onError,g.requiresObservable);Qa.schedule_();return Qa.getDisposer_()}function ce(b){return b.scheduler?b.scheduler:b.delay?function(g){return setTimeout(g,b.delay)}:xD}function se(b,g,p){function G(){fb=!1;if(!Mb.isDisposed_){var dc=!1;Mb.track(function(){var hc=Fb(!1,function(){return b(Mb)});dc=Xa||!Wb(mb,hc);Gb=mb;
mb=hc});Xa&&p.fireImmediately?pa(mb,Gb,Mb):!Xa&&dc&&pa(mb,Gb,Mb);Xa=!1}}var U;void 0===p&&(p=Ib);var la=null!=(U=p.name)?U:"Reaction",pa=og(la,p.onError?td(p.onError,g):g),Ga=!p.scheduler&&!p.delay,Qa=ce(p),Xa=!0,fb=!1,mb,Gb,Wb=p.compareStructural?Zg.structural:p.equals||Zg["default"],Mb=new Vr(la,function(){Xa||Ga?G():fb||(fb=!0,Qa(G))},p.onError,p.requiresObservable);Mb.schedule_();return Mb.getDisposer_()}function td(b,g){return function(){try{return g.apply(this,arguments)}catch(p){b.call(this,
p)}}}function vc(b,g,p){return Nc(qD,b,g,p)}function Nc(b,g,p,G){var U="function"===typeof G?Dg(g,p):Dg(g),la=ha(G)?G:p,pa=b+"L";U[pa]?U[pa].add(la):U[pa]=new Set([la]);return function(){var Ga=U[pa];Ga&&(Ga["delete"](la),0===Ga.size&&delete U[pa])}}function Ke(b){!0===b.isolateGlobalState&&Zd();var g=b.useProxies,p=b.enforceActions;void 0!==g&&(Df.useProxies="always"===g?!0:"never"===g?!1:"undefined"!==typeof Proxy);"ifavailable"===g&&(Df.verifyProxies=!0);void 0!==p&&(g="always"===p?"always":"observed"===
p,Df.enforceActions=g,Df.allowStateChanges=!0===g||"always"===g?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(G){G in b&&(Df[G]=!!b[G])});Df.allowStateReads=!Df.observableRequiresReaction;b.reactionScheduler&&cc(b.reactionScheduler)}function rc(b,g,p,G){var U=qg(g),la=Cd(b,G)[we];od();try{Ee(U).forEach(function(pa){la.extend_(pa,U[pa],p?pa in p?p[pa]:!0:!0)})}finally{Sd()}return b}function Je(b){var g=
{name:b.name_};b.observing_&&0<b.observing_.length&&(g.dependencies=Array.from(new Set(b.observing_)).map(Je));return g}function Sb(){this.message="FLOW_CANCELLED"}function Mc(b){return!0===(null==b?void 0:b.isMobXFlow)}function Vb(b,g){return b?void 0!==g?Yd(b)?b[we].values_.has(g):!1:Yd(b)||!!b[we]||th(b)||iu(b)||et(b):!1}function gd(b){if(Yd(b))return b[we].ownKeys_();l(38)}function te(b,g,p){b.set(g,p);return p}function ne(b,g){if(null==b||"object"!==typeof b||b instanceof Date||!Vb(b))return b;
if(zD(b)||et(b))return ne(b.get(),g);if(g.has(b))return g.get(b);if(kb(b)){var p=te(g,b,Array(b.length));b.forEach(function(pa,Ga){p[Ga]=ne(pa,g)});return p}if(Nq(b)){var G=te(g,b,new Set);b.forEach(function(pa){G.add(ne(pa,g))});return G}if(Wp(b)){var U=te(g,b,new Map);b.forEach(function(pa,Ga){U.set(Ga,ne(pa,g))});return U}var la=te(g,b,{});gd(b).forEach(function(pa){Da.propertyIsEnumerable.call(b,pa)&&(la[pa]=ne(b[pa],g))});return la}function Fc(b,g){return ne(b,new Map)}function Bb(){l("trace() is not available in production builds");
for(var b=!1,g=arguments.length,p=Array(g),G=0;G<g;G++)p[G]=arguments[G];"boolean"===typeof p[p.length-1]&&(b=p.pop());a:{switch(p.length){case 0:g=Df.trackingDerivation;break a;case 1:g=Dg(p[0]);break a;case 2:g=Dg(p[0],p[1]);break a}g=void 0}if(!g)return l("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");g.isTracing_===Tr.NONE&&console.log("[mobx.trace] '"+g.name_+"' tracing enabled");g.isTracing_=b?
Tr.BREAK:Tr.LOG}function Hd(b,g){void 0===g&&(g=void 0);od();try{return b.apply(g)}finally{Sd()}}function ee(b){return void 0!==b.interceptors_&&0<b.interceptors_.length}function sd(b,g){var p=b.interceptors_||(b.interceptors_=[]);p.push(g);return F(function(){var G=p.indexOf(g);-1!==G&&p.splice(G,1)})}function oc(b,g){var p=qc();try{var G=[].concat(b.interceptors_||[]);b=0;for(var U=G.length;b<U&&((g=G[b](g))&&!g.type&&l(14),g);b++);return g}finally{Df.trackingDerivation=p}}function Le(b){return void 0!==
b.changeListeners_&&0<b.changeListeners_.length}function cg(b,g){var p=b.changeListeners_||(b.changeListeners_=[]);p.push(g);return F(function(){var G=p.indexOf(g);-1!==G&&p.splice(G,1)})}function cf(b,g){var p=qc();if(b=b.changeListeners_){b=b.slice();for(var G=0,U=b.length;G<U;G++)b[G](g);Df.trackingDerivation=p}}function zg(b,g,p){var G=Cd(b,p)[we];od();try{var U;null!=(U=g)?U:g=Oa(b);Ee(g).forEach(function(la){return G.make_(la,g[la])})}finally{Sd()}return b}function ab(b,g,p,G){void 0===p&&(p=
"ObservableArray");void 0===G&&(G=!1);Y();g=new Nv(p,g,G,!1);S(g.values_,we,g);p=new Proxy(g.values_,nD);g.proxy_=p;b&&b.length&&(G=xc(!0),g.spliceWithArray_(0,0,b),Df.allowStateChanges=G);return p}function Cb(b,g){"function"===typeof Array.prototype[b]&&(bu[b]=g(b))}function cb(b){return function(){var g=this[we];g.atom_.reportObserved();g=g.dehanceValues_(g.values_);return g[b].apply(g,arguments)}}function Db(b){return function(g,p){var G=this,U=this[we];U.atom_.reportObserved();return U.dehanceValues_(U.values_)[b](function(la,
pa){return g.call(p,la,pa,G)})}}function ic(b){return function(){var g=this,p=this[we];p.atom_.reportObserved();p=p.dehanceValues_(p.values_);var G=arguments[0];arguments[0]=function(U,la,pa){return G(U,la,pa,g)};return p[b].apply(p,arguments)}}function kb(b){return Z(b)&&mD(b[we])}function id(b){if(O(b)||Wp(b))return b;if(Array.isArray(b))return new Map(b);if(E(b)){var g=new Map,p;for(p in b)g.set(p,b[p]);return g}return l(21,b)}function Cd(b,g){var p;if(H(b,we))return b;var G=null!=(p=null==g?void 0:
g.name)?p:"ObservableObject";p=my;var U=new Map;G=String(G);var la;var pa=g?null!=(la=g.defaultDecorator)?la:pb(g):void 0;g=new p(b,U,G,pa);M(b,we,g);return b}function me(b){return ly[b]||(ly[b]={get:function(){return this[we].getObservablePropValue_(b)},set:function(g){return this[we].setObservablePropValue_(b,g)}})}function Yd(b){return Z(b)?hD(b[we]):!1}function We(b){return{enumerable:!1,configurable:!0,get:function(){return this[we].get_(b)},set:function(g){this[we].set_(b,g)}}}function ue(b){if(b>
Kv){for(var g=Kv;g<b+100;g++)ma(Lv.prototype,""+g,We(g));Kv=b}}function hf(b,g,p){return new Lv(b,g,p)}function Dg(b,g){if("object"===typeof b&&null!==b){if(kb(b))return void 0!==g&&l(23),b[we].atom_;if(Nq(b))return b[we];if(Wp(b)){if(void 0===g)return b.keysAtom_;var p=b.data_.get(g)||b.hasMap_.get(g);p||l(25,g,zb(b));return p}if(Yd(b)){if(!g)return l(26);(p=b[we].values_.get(g))||l(27,g,zb(b));return p}if(th(b)||et(b)||iu(b))return b}else if(ha(b)&&iu(b[we]))return b[we];l(28)}function tf(b,g){b||
l(29);if(void 0!==g)return tf(Dg(b,g));if(th(b)||et(b)||iu(b)||Wp(b)||Nq(b))return b;if(b[we])return b[we];l(24,b)}function zb(b,g){if(void 0!==g)b=Dg(b,g);else{if(dd(b))return b.name;b=Yd(b)||Wp(b)||Nq(b)?tf(b):Dg(b)}return b.name_}function ta(b,g,p){void 0===p&&(p=-1);return ra(b,g,p)}function ra(b,g,p,G,U){if(b===g)return 0!==b||1/b===1/g;if(null==b||null==g)return!1;if(b!==b)return g!==g;var la=typeof b;if("function"!==la&&"object"!==la&&"object"!=typeof g)return!1;la=oy.call(b);if(la!==oy.call(g))return!1;
switch(la){case "[object RegExp]":case "[object String]":return""+b===""+g;case "[object Number]":return+b!==+b?+g!==+g:0===+b?1/+b===1/g:+b===+g;case "[object Date]":case "[object Boolean]":return+b===+g;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(b)===Symbol.valueOf.call(g);case "[object Map]":case "[object Set]":0<=p&&p++}b=Ia(b);g=Ia(g);la="[object Array]"===la;if(!la){if("object"!=typeof b||"object"!=typeof g)return!1;var pa=b.constructor,Ga=g.constructor;if(pa!==
Ga&&!(ha(pa)&&pa instanceof pa&&ha(Ga)&&Ga instanceof Ga)&&"constructor"in b&&"constructor"in g)return!1}if(0===p)return!1;0>p&&(p=-1);G=G||[];U=U||[];for(pa=G.length;pa--;)if(G[pa]===b)return U[pa]===g;G.push(b);U.push(g);if(la){pa=b.length;if(pa!==g.length)return!1;for(;pa--;)if(!ra(b[pa],g[pa],p-1,G,U))return!1}else{la=Object.keys(b);pa=la.length;if(Object.keys(g).length!==pa)return!1;for(;pa--;)if(Ga=la[pa],!H(g,Ga)||!ra(b[Ga],g[Ga],p-1,G,U))return!1}G.pop();U.pop();return!0}function Ia(b){return kb(b)?
b.slice():O(b)||Wp(b)||P(b)||Nq(b)?Array.from(b.entries()):b}function bb(b){b[Symbol.iterator]=Jb;return b}function Jb(){return this}function mc(b,g){const p=new Set(g),G=Object.values(b),U=new Set(G.filter(la=>p.has(la.toId)||p.has(la.fromId)));b=U.size;for(g=-1;0!==g;)U.forEach(la=>{la=la.fromId;for(const pa of G)pa.fromId===la&&U.add(pa),pa.toId===la&&U.add(pa)}),g=U.size-b,b=U.size;return Array.from(U.values())}function Rc(b,g,p,G,U,la,pa,Ga){if(U=g.getBindingPoint(U,la,pa,Ga))return{id:G,type:"line",
fromId:b.id,toId:g.id,handleId:p,point:je.toFixed(U.point),distance:U.distance}}function nd(b,g){const p=b.getCenter(),G=g.getCenter();var U=Hk();U=rf(oe({},Qs.defaultProps),{id:U,type:Qs.id,parentId:b.props.parentId,point:p});b=Rc(U,b,"start",Hk(),p,p,je.uni(je.sub(G,p)),!1);g=Rc(U,g,"end",Hk(),G,G,je.uni(je.sub(p,G)),!1);return b&&g?(U.handles.start.point=[0,0],U.handles.end.point=je.sub(G,p),U.handles.start.bindingId=b.id,U.handles.end.bindingId=g.id,[U,[b,g]]):null}function xe(){return new LD}
function Ve(){return new WeakMap}function Nf(b){if(!b)return Sv(null);var g=b.constructor;if(g===Object)return b===Object.prototype?{}:Sv(b);if(~ID.call(g).indexOf("[native code]"))try{return new g}catch(p){}return Sv(b)}function jg(b){var g="";b.global&&(g+="g");b.ignoreCase&&(g+="i");b.multiline&&(g+="m");b.unicode&&(g+="u");b.sticky&&(g+="y");return g}function Lf(b){return b.flags}function zf(b){b=JD.call(b);return b.substring(8,b.length-1)}function Xf(b){return b[Symbol.toStringTag]||zf(b)}function Tg(b){return Rv(b).concat(Qv(b))}
function li(b,g,p){for(var G=XD(b),U=0,la=G.length,pa,Ga;U<la;++U)if(pa=G[U],"callee"!==pa&&"caller"!==pa)if(Ga=FD(b,pa)){Ga.get||Ga.set||(Ga.value=p.copier(Ga.value,p));try{GD(g,pa,Ga)}catch(Qa){g[pa]=Ga.value}}else g[pa]=p.copier(b[pa],p);return g}function xh(b,g){var p=new g.Constructor;g.cache.set(b,p);b.forEach(function(G,U){p.set(U,g.copier(G,g))});return p}function si(b,g){var p=Nf(g.prototype);g.cache.set(b,p);for(var G in b)Xy.call(b,G)&&(p[G]=g.copier(b[G],g));return p}function di(b,g){var p=
Nf(g.prototype);g.cache.set(b,p);for(var G in b)Xy.call(b,G)&&(p[G]=g.copier(b[G],g));G=Qv(b);for(var U=0,la=G.length,pa;U<la;++U)pa=G[U],WD.call(b,pa)&&(p[pa]=g.copier(b[pa],g));return p}function Ag(b,g){return new g.Constructor(b.valueOf())}function Sh(b,g){return b}function ef(b,g){var p=new g.Constructor;g.cache.set(b,p);b.forEach(function(G){p.add(g.copier(G,g))});return p}function Th(b){function g(la,pa){pa.prototype=pa.Constructor=void 0;if(!la||"object"!==typeof la)return la;if(pa.cache.has(la))return pa.cache.get(la);
pa.prototype=la.__proto__||ZD(la);pa.Constructor=pa.prototype&&pa.prototype.constructor;if(!pa.Constructor||pa.Constructor===Object)return U(la,pa);if(YD(la))return G(la,pa);var Ga=p[DD(la)];return Ga?Ga(la,pa):"function"===typeof la.then?la:U(la,pa)}b=Yv({},Zy,b);var p={Arguments:b.object,Array:b.array,ArrayBuffer:b.arrayBuffer,Blob:b.blob,Boolean:Ag,DataView:b.dataView,Date:b.date,Error:b.error,Float32Array:b.arrayBuffer,Float64Array:b.arrayBuffer,Int8Array:b.arrayBuffer,Int16Array:b.arrayBuffer,
Int32Array:b.arrayBuffer,Map:b.map,Number:Ag,Object:b.object,Promise:Sh,RegExp:b.regExp,Set:b.set,String:Ag,WeakMap:Sh,WeakSet:Sh,Uint8Array:b.arrayBuffer,Uint8ClampedArray:b.arrayBuffer,Uint16Array:b.arrayBuffer,Uint32Array:b.arrayBuffer,Uint64Array:b.arrayBuffer},G=p.Array,U=p.Object;return function(la){return g(la,{Constructor:void 0,cache:HD(),copier:g,prototype:void 0})}}function Gi(b,g){return(0,bE.default)(b,g,{arrayMerge:(p,G,U)=>G})}function Rl(b,g,p,G=!1){const [U,la]=g,[pa,Ga]=p;b=pa+(b-
U)/(la-U)*(Ga-pa);return G?pa<Ga?Math.max(Math.min(b,Ga),pa):Math.max(Math.min(b,pa),Ga):b}function Hj(b,g){return new Promise((p,G)=>{if(g){const U=document.createElement("video");U.addEventListener("loadedmetadata",function(){p([this.videoWidth,this.videoHeight])},!1);U.src=b}else{const U=new Image;U.onload=()=>p([U.width,U.height]);U.src=b;U.onerror=la=>G(la)}})}function hg(b){return Object.values(Mq).includes(b)}function $g(b,g){return hg(b)||null==b?`var(--ls-wb-${g}-color-${b?b:"default"})`:
b}function Jk(){var b;null==(b=document.getElementById("__textLabelMeasure"))?void 0:b.remove();b=document.createElement("pre");b.id="__textLabelMeasure";Object.assign(b.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});b.tabIndex=-1;document.body.appendChild(b);
return b}function Yh(b,g,p=0){var G,U,la;if(!b)return[16,32];let pa;pa="string"===typeof g?g:`${null!=(G=g.fontStyle)?G:"normal"} ${null!=(U=g.fontVariant)?U:"normal"} ${null!=(la=g.fontWeight)?la:"normal"} ${g.fontSize}px/${g.fontSize*g.lineHeight}px ${g.fontFamily}`;if(!Zv.has(`${b}-${pa}-${p}`)){if(!gq)return[10,10];gq.parentNode||document.body.appendChild(gq);gq.innerHTML=`${b}&#8203;`;gq.style.font=pa;gq.style.padding=p+"px";g=gq.getBoundingClientRect();Zv.set(`${b}-${pa}-${p}`,[Math.ceil(g.width||
1),Math.ceil(g.height||1)])}return Zv.get(`${b}-${pa}-${p}`)}function ek(b){try{if("string"!==typeof b||!vg.test(b))throw TypeError("Invalid UUID");let g;const p=new Uint8Array(16);p[0]=(g=parseInt(b.slice(0,8),16))>>>24;p[1]=g>>>16&255;p[2]=g>>>8&255;p[3]=g&255;p[4]=(g=parseInt(b.slice(9,13),16))>>>8;p[5]=g&255;p[6]=(g=parseInt(b.slice(14,18),16))>>>8;p[7]=g&255;p[8]=(g=parseInt(b.slice(19,23),16))>>>8;p[9]=g&255;p[10]=(g=parseInt(b.slice(24,36),16))/1099511627776&255;p[11]=g/4294967296&255;p[12]=
g>>>24&255;p[13]=g>>>16&255;p[14]=g>>>8&255;p[15]=g&255;return!0}catch(g){return!1}}function fk(b,g=0,p){let G;return function(...U){null==p?void 0:p(...U);clearTimeout(G);G=setTimeout(()=>b.apply(U),g)}}function Kk(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function yh(){var b,g,p;return(null==(p=null==(g=null==(b=null==window?void 0:window.logseq)?void 0:b.api)?void 0:g.get_state_from_store)?void 0:p.call(g,"ui/developer-mode?"))||!1}function ti(b){return!!b}function Nj(b=0){return new Promise(g=>
setTimeout(g,b))}function sm(b="noid"){Xv[b]||(Xv[b]=Vy.createContext({}));return Xv[b]}function vi(b="noid"){return Vy.useContext(sm(b))}function Ij(b){const {callbacks:g}=vi(),p=Wy.useRef(-1);return Wy.useMemo(()=>{const G=U=>{var la,pa;const {order:Ga=0}=U;if(!Ga){var Qa=U.target;Qa.removeEventListener("pointerup",G);Qa.releasePointerCapture(U.pointerId);null==(la=g.onPointerUp)?void 0:la.call(g,{type:"selection",handle:b,order:Ga},U);la=Date.now();Qa=la-p.current;300<Qa?p.current=la:300>=Qa&&
(null==(pa=g.onDoubleClick)?void 0:pa.call(g,{type:"selection",handle:b,order:Ga},U),p.current=-1);U.order=Ga+1}};return{onPointerDown:U=>{var la;const {order:pa=0}=U;if(!pa){var Ga=Oj(U.currentTarget);Ga.setPointerCapture(U.pointerId);Ga.addEventListener("pointerup",G);null==(la=g.onPointerDown)?void 0:la.call(g,{type:"selection",handle:b,order:pa},U);U.order=pa+1}},onPointerMove:U=>{var la;const {order:pa=0}=U;pa||(null==(la=g.onPointerMove)?void 0:la.call(g,{type:"selection",handle:b,order:pa},
U),U.order=pa+1)},onPointerEnter:U=>{var la;const {order:pa=0}=U;pa||(null==(la=g.onPointerEnter)?void 0:la.call(g,{type:"selection",handle:b,order:pa},U),U.order=pa+1)},onPointerLeave:U=>{var la;const {order:pa=0}=U;pa||(null==(la=g.onPointerLeave)?void 0:la.call(g,{type:"selection",handle:b,order:pa},U),U.order=pa+1)},onKeyDown:U=>{var la;null==(la=g.onKeyDown)?void 0:la.call(g,{type:"selection",handle:b,order:-1},U)},onKeyUp:U=>{var la;null==(la=g.onKeyUp)?void 0:la.call(g,{type:"selection",handle:b,
order:-1},U)}}},[g])}function Oj(b){var g;if(null==(g=b.namespaceURI)?0:g.endsWith("svg")){if(b.parentElement)return Oj(b.parentElement);throw Error("Could not find a parent element of an HTML type!");}return b}function Al(b,g,p){const G=ft.useRef(!1),U=ft.useCallback(()=>{var la;if(G.current){const pa=null==(la=b.current)?void 0:la.getBoundingClientRect();pa&&(la={minX:pa.left,maxX:pa.left+pa.width,minY:pa.top,maxY:pa.top+pa.height,width:pa.width,height:pa.height},g.updateBounds(la),null==p?void 0:
p(la))}else G.current=!0},[b,p]);ft.useEffect(()=>{const la=b.current?RD(b.current):document,pa=fk(U,100);la.addEventListener("scroll",pa);window.addEventListener("resize",pa);return()=>{la.removeEventListener("scroll",pa);window.removeEventListener("resize",pa)}},[]);ft.useLayoutEffect(()=>{const la=new ResizeObserver(pa=>{pa[0].contentRect&&U()});b.current&&la.observe(b.current);return()=>{la.disconnect()}},[b]);ft.useEffect(()=>{U();setTimeout(()=>{var la,pa;null==(pa=null==(la=b.current)?void 0:
la.querySelector(".tl-canvas"))?void 0:pa.focus()})},[b])}function ol(b,g){return Object.keys(g).reduce((p,G)=>{const U=g[G];return U?p+`${`--${b}-${G}`}: ${U};
`:p},"")}function Sl(b,g,p=".logseq-tldraw"){Uv.useLayoutEffect(()=>{const G=document.createElement("style"),U=ol(b,g);G.setAttribute("id",`${b}-theme`);G.setAttribute("data-selector",p);G.innerHTML=`
        ${p} {
          ${U}
        }
      `;document.head.appendChild(G);return()=>{G&&document.head.contains(G)&&document.head.removeChild(G)}},[b,g,p])}function hk(b,g){Uv.useLayoutEffect(()=>{if(Vv.get(b))return()=>{};const p=document.createElement("style");p.innerHTML=g;p.setAttribute("id",b);document.head.appendChild(p);Vv.set(b,p);return()=>{p&&document.head.contains(p)&&(document.head.removeChild(p),Vv.delete(b))}},[b,g])}function ik(b,g){const p=Uv.useMemo(()=>oe(oe({},PD),b),[b]);Sl("tl",p,g);hk("tl-canvas",QD)}function yk(b=
"noid"){Tv[b]||(Tv[b]=Uy.createContext({}));return Tv[b]}function af(b="noid"){return Uy.useContext(yk(b))}function ug(){const b=af(),{callbacks:g}=vi(),p=Ty.useRef(-1);return Ty.useMemo(()=>({onPointerDown:G=>{var U,la,pa;const {order:Ga=0}=G;Ga||(null==(U=G.currentTarget)?void 0:U.setPointerCapture(G.pointerId));G.isPrimary&&(null==(la=g.onPointerDown)?void 0:la.call(g,{type:"canvas",order:Ga},G),U=Date.now(),la=U-p.current,300<la?p.current=U:300>=la&&(null==(pa=g.onDoubleClick)?void 0:pa.call(g,
{type:"canvas",order:Ga},G),p.current=-1))},onPointerMove:G=>{var U;const {order:la=0}=G;null==(U=g.onPointerMove)?void 0:U.call(g,{type:"canvas",order:la},G)},onPointerUp:G=>{var U,la;const {order:pa=0}=G;pa||(null==(U=G.currentTarget)?void 0:U.releasePointerCapture(G.pointerId));null==(la=g.onPointerUp)?void 0:la.call(g,{type:"canvas",order:pa},G)},onPointerEnter:G=>{var U;const {order:la=0}=G;null==(U=g.onPointerEnter)?void 0:U.call(g,{type:"canvas",order:la},G)},onPointerLeave:G=>{var U;const {order:la=
0}=G;null==(U=g.onPointerLeave)?void 0:U.call(g,{type:"canvas",order:la},G)},onDrop:G=>$h(this,null,function*(){G.preventDefault();"clientX"in G&&b.drop(G.dataTransfer,[G.clientX,G.clientY])}),onDragOver:G=>{G.preventDefault()},onTouchEnd:G=>{let U=b.selectedTool.id;"pencil"!==U&&"highlighter"!==U||G.preventDefault()}}),[g])}function rj(b,g,p){return 0===g||Infinity===Math.abs(g)?Math.pow(b,5*p):b*g*p/(g+p*b)}function Eh(b,g,p,G=.15){return 0===G?Math.max(g,Math.min(b,p)):b<g?-rj(g-b,p-g,G)+g:b>p?
+rj(b-p,p-g,G)+p:b}function Hi(b,[g,p],[G,U]){const [[la,pa],[Ga,Qa]]=b;return[Eh(g,la,pa,G),Eh(p,Ga,Qa,U)]}function Oh(b,g,p){g in b?Object.defineProperty(b,g,{value:p,enumerable:!0,configurable:!0,writable:!0}):b[g]=p;return b}function ei(b,g){var p=Object.keys(b);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(b);g&&(G=G.filter(function(U){return Object.getOwnPropertyDescriptor(b,U).enumerable}));p.push.apply(p,G)}return p}function Hg(b){for(var g=1;g<arguments.length;g++){var p=
null!=arguments[g]?arguments[g]:{};g%2?ei(Object(p),!0).forEach(function(G){Oh(b,G,p[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(p)):ei(Object(p)).forEach(function(G){Object.defineProperty(b,G,Object.getOwnPropertyDescriptor(p,G))})}return b}function jk(b){return b?b[0].toUpperCase()+b.slice(1):""}function Lk(b=!1,g){return b&&!OD.includes(g)}function Ph(b,g="",p=!1){const G=Sy[b];g=G?G[g]||g:g;return"on"+jk(b)+jk(g)+(Lk(p,g)?"Capture":"")}function Mi(b){b=
b.substring(2).toLowerCase();const g=!!~b.indexOf("passive");g&&(b=b.replace("passive",""));var p=ND.includes(b)?"capturecapture":"capture";(p=!!~b.indexOf(p))&&(b=b.replace("capture",""));return{device:b,capture:p,passive:g}}function Uh(b,g=""){const p=Sy[b];return b+(p?p[g]||g:g)}function bl(b){return"touches"in b?"touch":"pointerType"in b?b.pointerType:"mouse"}function zk(b){return Array.from(b.touches).filter(g=>{var p,G;return g.target===b.currentTarget||(null===(p=b.currentTarget)||void 0===
p?void 0:null===(G=p.contains)||void 0===G?void 0:G.call(p,g.target))})}function Pj(b){return"touches"in b?("touchend"===b.type||"touchcancel"===b.type?b.changedTouches:b.targetTouches)[0]:b}function pl(b,g){const p=g.clientX-b.clientX,G=g.clientY-b.clientY;return{angle:-(180*Math.atan2(p,G))/Math.PI,distance:Math.hypot(p,G),origin:[(g.clientX+b.clientX)/2,(g.clientY+b.clientY)/2]}}function fn(b){return zk(b).map(g=>g.identifier)}function kk(b,g){const [p,G]=Array.from(b.touches).filter(U=>g.includes(U.identifier));
return pl(p,G)}function Di(b){const g=Pj(b);return"touches"in b?g.identifier:g.pointerId}function sj(b){b=Pj(b);return[b.clientX,b.clientY]}function Zh(b){let {deltaX:g,deltaY:p,deltaMode:G}=b;1===G?(g*=40,p*=40):2===G&&(g*=800,p*=800);return[g,p]}function Ui(b,...g){return"function"===typeof b?b(...g):b}function Qh(){}function hj(...b){return 0===b.length?Qh:1===b.length?b[0]:function(){let g;for(const p of b)g=p.apply(this,arguments)||g;return g}}function wi([b,g],p){b=Math.abs(b);g=Math.abs(g);
if(b>g&&b>p)return"x";if(g>b&&g>p)return"y"}function cl(b){const [g,p]=b.overflow,[G,U]=b._delta,[la,pa]=b._direction;if(0>g&&0<G&&0>la||0<g&&0>G&&0<la)b._movement[0]=b._movementBound[0];if(0>p&&0<U&&0>pa||0<p&&0>U&&0<pa)b._movement[1]=b._movementBound[1]}function dl(b){bw.set(b.key,b.engine);aw.set(b.key,b.resolver)}function Vi(b={},g){const p={};for(const [G,U]of Object.entries(g))switch(typeof U){case "function":p[G]=U.call(p,b[G],G,b);break;case "object":p[G]=Vi(b[G],U);break;case "boolean":U&&
(p[G]=b[G])}return p}function Qg(b,g,p={}){const {target:G,eventOptions:U,window:la,enabled:pa,transform:Ga}=b;var Qa=fE;if(null==b)b={};else{if(null==b)var Xa={};else{Xa={};var fb=Object.keys(b),mb;for(mb=0;mb<fb.length;mb++){var Gb=fb[mb];0<=Qa.indexOf(Gb)||(Xa[Gb]=b[Gb])}}if(Object.getOwnPropertySymbols)for(mb=Object.getOwnPropertySymbols(b),Gb=0;Gb<mb.length;Gb++)fb=mb[Gb],0<=Qa.indexOf(fb)||Object.prototype.propertyIsEnumerable.call(b,fb)&&(Xa[fb]=b[fb]);b=Xa}p.shared=Vi({target:G,eventOptions:U,
window:la,enabled:pa,transform:Ga},eE);if(g){var Wb=aw.get(g);p[g]=Vi(Hg({shared:p.shared},b),Wb)}else for(Wb in b)(g=aw.get(Wb))&&(p[Wb]=Vi(Hg({shared:p.shared},b[Wb]),g));return p}function Ni(b,g){b.gestures.add(g);b.gestureEventStores[g]=new ez(b,g);b.gestureTimeoutStores[g]=new gE}function Rh(b,g,p,G,U,la){if(b.has(p)&&bw.has(G)){var pa=p+"Start",Ga=p+"End";U[G]=Qa=>{let Xa=void 0;if(Qa.first&&pa in g)g[pa](Qa);p in g&&(Xa=g[p](Qa));if(Qa.last&&Ga in g)g[Ga](Qa);return Xa};la[G]=la[G]||{}}}function Rj(b,
g={},p,G){const U=$v.default.useMemo(()=>new hE(b),[]);U.applyHandlers(b,G);U.applyConfig(g,p);$v.default.useEffect(U.effect.bind(U));$v.default.useEffect(()=>U.clean.bind(U),[]);if(void 0===g.target)return U.bind.bind(U)}function Ih(b){b.forEach(dl);return function(g,p){p=p||{};const G={},U={},la=new Set;for(let Gb in g)iE.test(Gb)?(la.add(RegExp.lastMatch),U[Gb]=g[Gb]):G[Gb]=g[Gb];const [pa,Ga,Qa]=[U,G,la];g={};Rh(Qa,pa,"onDrag","drag",g,p);Rh(Qa,pa,"onWheel","wheel",g,p);Rh(Qa,pa,"onScroll","scroll",
g,p);Rh(Qa,pa,"onPinch","pinch",g,p);Rh(Qa,pa,"onMove","move",g,p);Rh(Qa,pa,"onHover","hover",g,p);const {handlers:Xa,nativeHandlers:fb,config:mb}={handlers:g,config:p,nativeHandlers:Ga};return Rj(Xa,mb,void 0,fb)}}function Ii(b,g){return Ih([oE,kE,lE,mE,jE,nE])(b,g||{})}function Nk(b){const {viewport:g,inputs:p,callbacks:G}=vi(),U=ku.useRef(void 0),la=ku.useRef([0,0]),pa=ku.useRef(0),Ga=ku.useMemo(()=>({onWheel:Qa=>{var Xa;({event:Qa}=Qa);Qa.preventDefault();const {deltaY:fb,deltaX:mb}=Qa;var Gb=
0;if(Qa.ctrlKey||Qa.metaKey){Gb=Math.sign(Qa.deltaY);let hc=fb;10<Math.abs(Qa.deltaY)&&(hc=10*Gb);Gb=hc}const [Wb,Mb,dc]=[mb,fb,Gb];"pinching"===p.state||pa.current>=Qa.timeStamp||(pa.current=Qa.timeStamp,(Qa.altKey||Qa.ctrlKey||Qa.metaKey)&&0===Qa.buttons?(Gb=g.bounds,Qa=null!=(Xa=p.currentScreenPoint)?Xa:[Gb.width/2,Gb.height/2],Xa=g.camera.zoom,g.onZoom(Qa,Xa-dc/100*Xa)):(Xa=je.mul(Qa.shiftKey&&!Kk()?[Mb,0]:[Wb,Mb],.8),je.isEqual(Xa,[0,0])||g.panCamera(Xa)))},onPinchStart:({event:Qa,delta:Xa,offset:fb,
origin:mb})=>{var Gb;const Wb=b.current;Qa instanceof WheelEvent||!(Qa.target===Wb||null!=Wb&&Wb.contains(Qa.target))||(null==(Gb=G.onPinchStart)?void 0:Gb.call(G,{type:"canvas",order:0,delta:[...Xa,fb[0]],offset:fb,point:je.sub(mb,p.containerOffset)},Qa),U.current=mb,la.current=[0,0])},onPinchEnd:({event:Qa,offset:Xa,origin:fb})=>{var mb;const Gb=b.current;Qa instanceof WheelEvent||!(Qa.target===Gb||null!=Gb&&Gb.contains(Qa.target))||"pinching"!==p.state||(null==(mb=G.onPinchEnd)?void 0:mb.call(G,
{type:"canvas",order:0,delta:[0,0,Xa[0]],offset:Xa,point:je.sub(fb,p.containerOffset)},Qa),la.current=[0,0])},onPinch:({event:Qa,offset:Xa,origin:fb})=>{var mb,Gb=b.current;if(!(Qa instanceof WheelEvent)&&(Qa.target===Gb||null!=Gb&&Gb.contains(Qa.target))){U.current||(U.current=fb);Gb=je.sub(U.current,fb);var Wb=je.sub(Gb,la.current);null==(mb=G.onPinch)?void 0:mb.call(G,{type:"canvas",order:0,delta:[...Wb,Xa[0]],offset:Xa,point:je.sub(fb,p.containerOffset)},Qa);la.current=Gb}}}),[G]);Ii(Ga,{target:b,
eventOptions:{passive:!1},pinch:{from:[g.camera.zoom,g.camera.zoom],scaleBounds:()=>({from:g.camera.zoom,max:So.maxZoom,min:So.minZoom})}})}function ij(b,g,p,G){cw.useLayoutEffect(()=>{b.current.style.transform=`translate(
        calc(${g.minX}px - var(--tl-padding)),
        calc(${g.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[g.minX,g.minY,p,g.rotation]);cw.useLayoutEffect(()=>{const U=b.current;U.style.width=`calc(${Math.floor(g.width)}px + (var(--tl-padding) * 2))`;U.style.height=`calc(${Math.floor(g.height)}px + (var(--tl-padding) * 2))`},[g.width,g.height]);cw.useLayoutEffect(()=>{const U=b.current;void 0!==G&&(U.style.zIndex=G.toString())},[G])}function yj(b,g){const {onPersist:p,onSave:G,onSaveAs:U,onError:la,onMount:pa,onCreateAssets:Ga,onCreateShapes:Qa,onDeleteAssets:Xa,onDeleteShapes:fb,
onDrop:mb,onPaste:Gb,onCopy:Wb,onCanvasDBClick:Mb}=g;dz.useLayoutEffect(()=>{const dc=[];if(b)return window.tlapps=window.tlapps||{},window.tlapps[b.uuid]=b,pa&&pa(b,null),()=>{dc.forEach(hc=>hc());window.tlapps&&delete window.tlapps[b.uuid]}},[b]);dz.useLayoutEffect(()=>{const dc=[];p&&dc.push(b.subscribe("persist",p));G&&dc.push(b.subscribe("save",G));U&&dc.push(b.subscribe("saveAs",U));la&&dc.push(b.subscribe("error",la));Qa&&dc.push(b.subscribe("create-shapes",Qa));Ga&&dc.push(b.subscribe("create-assets",
Ga));fb&&dc.push(b.subscribe("delete-shapes",fb));Xa&&dc.push(b.subscribe("delete-assets",Xa));mb&&dc.push(b.subscribe("drop",mb));Gb&&dc.push(b.subscribe("paste",Gb));Wb&&dc.push(b.subscribe("copy",Wb));Mb&&dc.push(b.subscribe("canvas-dbclick",Mb));return()=>dc.forEach(hc=>hc())},[b,p,G,U,la])}function un(b){if("app"in b)return b.app;const [g]=cz.useState(()=>new VD(b.model,b.Shapes,b.Tools,b.readOnly));cz.useLayoutEffect(()=>{g.initKeyboardShortcuts();return()=>{g.dispose()}},[g]);return g}function Ok(b,
g){HE.useEffect(()=>{"model"in g&&g.model&&b.loadDocumentModel(g.model)},[g.model])}function Bl(b){const g=vi(),{viewport:{bounds:p}}=g;IE.useEffect(()=>{const G=pa=>{pa.preventDefault()},U=pa=>{if(0!==pa.touches.length){var Ga=pa.touches[0].pageX,Qa=pa.touches[0].radiusX||0;(10>Ga-Qa||Ga+Qa>p.width-10)&&pa.preventDefault()}},la=b.current;if(!la)return()=>{};la.addEventListener("touchstart",G,{passive:!0});la.addEventListener("gestureend",G,{passive:!0});la.addEventListener("gesturechange",G,{passive:!0});
la.addEventListener("gesturestart",G,{passive:!0});la.addEventListener("touchstart",U,{passive:!0});return()=>{la&&(la.removeEventListener("touchstart",G),la.removeEventListener("gestureend",G),la.removeEventListener("gesturechange",G),la.removeEventListener("gesturestart",G),la.removeEventListener("touchstart",U))}},[b,p.width])}function Im(b,g){const {inputs:p,callbacks:G}=vi();return JE.useMemo(()=>({onPointerDown:U=>{var la,pa;const {order:Ga=0}=U;Ga||(null==(la=U.currentTarget)?void 0:la.setPointerCapture(U.pointerId));
la=b.props.handles[g];null==(pa=G.onPointerDown)?void 0:pa.call(G,{type:"handle",shape:b,handle:la,id:g,order:Ga},U);U.order=Ga+1},onPointerMove:U=>{var la;const {order:pa=0}=U,Ga=b.props.handles[g];null==(la=G.onPointerMove)?void 0:la.call(G,{type:"handle",shape:b,handle:Ga,id:g,order:pa},U);U.order=pa+1},onPointerUp:U=>{var la,pa;const {order:Ga=0}=U;Ga||(null==(la=U.currentTarget)?void 0:la.releasePointerCapture(U.pointerId));la=b.props.handles[g];null==(pa=G.onPointerUp)?void 0:pa.call(G,{type:"handle",
shape:b,handle:la,id:g,order:Ga},U);U.order=Ga+1},onPointerEnter:U=>{var la;const {order:pa=0}=U,Ga=b.props.handles[g];null==(la=G.onPointerEnter)?void 0:la.call(G,{type:"handle",shape:b,handle:Ga,id:g,order:pa},U);U.order=pa+1},onPointerLeave:U=>{var la;const {order:pa=0}=U,Ga=b.props.handles[g];null==(la=G.onPointerLeave)?void 0:la.call(G,{type:"handle",shape:b,handle:Ga,id:g,order:pa},U);U.order=pa+1},onKeyUp:U=>{var la;const pa=b.props.handles[g];null==(la=G.onKeyUp)?void 0:la.call(G,{type:"handle",
shape:b,handle:pa,id:g,order:-1},U)},onKeyDown:U=>{var la;const pa=b.props.handles[g];null==(la=G.onKeyDown)?void 0:la.call(G,{type:"handle",shape:b,handle:pa,id:g,order:-1},U)}}),[b.id,p,G])}function jj(b,g,p=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${g})${p?" scale(-1,-1) translate(0, -32)":""}'>`+b.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}
function Jm(b,g,p=0){KE.useEffect(()=>{const G=b.current;G&&(G.style.cursor=LE[g](pm.radiansToDegrees(p)))},[g,p])}function fm(b){const {viewport:g}=vi(),p=af();dE.useLayoutEffect(()=>Md(()=>{const G=fk(()=>{var U;null==(U=b.current)?void 0:U.style.setProperty("--tl-zoom",g.camera.zoom.toString())},200);"pinching"!==p.inputs.state&&null!=g.camera.zoom&&G()}),[])}function Bk(b,g=0){const [p,G]=(0,qz.useState)(b);(0,qz.useEffect)(()=>{let U=!1;const la=setTimeout(()=>{U||G(b)},g);return()=>{U=!0;clearTimeout(la)}},
[b,g]);return p}function Zj(){const b=af();rz.useEffect(()=>{se(()=>oe({},b.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+b.currentPageId,JSON.stringify(b.viewport.camera))})},[b.viewport.camera]);rz.useEffect(()=>{var g;const p=JSON.parse(null!=(g=window.sessionStorage.getItem("logseq.tldraw.camera:"+b.currentPageId))?g:"null");p?b.viewport.update(p):b.selectedIds.size?b.api.zoomToSelection():b.api.zoomToFit()},[b])}function gm(b){b()}function Ak(b){return Je(Dg(b,void 0))}
function yg(b){return{reaction:b,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+NE}}function tm(b){var g=new Map,p=1,G=new b(function(U){var la=g.get(U);la&&(la.reaction.dispose(),g.delete(U))});return{addReactionToTrack:function(U,la,pa){var Ga=p++;G.register(pa,Ga,U);U.current=yg(la);U.current.finalizationRegistryCleanupToken=Ga;g.set(Ga,U.current);return U.current},recordReactionAsCommitted:function(U){G.unregister(U);U.current&&U.current.finalizationRegistryCleanupToken&&g.delete(U.current.finalizationRegistryCleanupToken)},
forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function uh(){function b(){void 0===G&&(G=setTimeout(g,1E4))}function g(){G=void 0;var U=Date.now();p.forEach(function(la){var pa=la.current;pa&&U>=pa.cleanAt&&(pa.reaction.dispose(),la.current=null,p.delete(la))});0<p.size&&b()}var p=new Set,G;return{addReactionToTrack:function(U,la,pa){U.current=yg(la);p.add(U);b();return U.current},recordReactionAsCommitted:function(U){p.delete(U)},forceCleanupTimerToRunNowForTests:function(){G&&
(clearTimeout(G),g())},resetCleanupScheduleForTests:function(){var U;if(0<p.size){try{for(var la=OE(p),pa=la.next();!pa.done;pa=la.next()){var Ga=pa.value,Qa=Ga.current;Qa&&(Qa.reaction.dispose(),Ga.current=null)}}catch(fb){var Xa={error:fb}}finally{try{pa&&!pa.done&&(U=la.return)&&U.call(la)}finally{if(Xa)throw Xa.error;}}p.clear()}G&&(clearTimeout(G),G=void 0)}}}function cj(){return new pE}function Pk(b,g){void 0===g&&(g="observed");var p=hz(jt.default.useState(cj),1)[0],G=hz(jt.default.useState(),
2)[1],U=jt.default.useRef(null);if(!U.current)var la=new Vr("observer".concat(g),function(){pa.mounted?G([]):pa.changedBeforeMount=!0}),pa=PE(U,la,p);p=U.current.reaction;jt.default.useDebugValue(p,Ak);jt.default.useEffect(function(){QE(U);U.current?(U.current.mounted=!0,U.current.changedBeforeMount&&(U.current.changedBeforeMount=!1,G([]))):(U.current={reaction:new Vr("observer".concat(g),function(){G([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},G([]));return function(){U.current.reaction.dispose();
U.current=null}},[]);var Ga,Qa;p.track(function(){try{Ga=b()}catch(Xa){Qa=Xa}});if(Qa)throw Qa;return Ga}function df(b,g){var p;if(iz&&b.$$typeof===iz)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");g=null!==(p=null===g||void 0===g?void 0:g.forwardRef)&&void 0!==p?p:!1;var G=b,U=b.displayName||b.name;if(lz&&b.$$typeof===lz&&(g=!0,G=b.render,"function"!==
typeof G))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");p=function(la,pa){return Pk(function(){return G(la,pa)},U)};""!==U&&(p.displayName=U);b.contextTypes&&(p.contextTypes=b.contextTypes);g&&(p=(0,bs.forwardRef)(p));p=(0,bs.memo)(p);kj(b,p);return p}function kj(b,g){Object.keys(b).forEach(function(p){rE[p]||Object.defineProperty(g,p,Object.getOwnPropertyDescriptor(b,p))})}function lk(b){var g=b.render;b=b.children||g;return"function"!==typeof b?null:Pk(b)}function Ek(b){const g=
af(),{callbacks:p}=vi(),G=jz.useRef(!1);jz.useEffect(()=>{const U=Qa=>{var Xa,fb;if(null==(Xa=b.current)?0:Xa.contains(document.activeElement))null==(fb=p.onKeyDown)?void 0:fb.call(p,{type:"canvas",order:-1},Qa),G.current=Qa.shiftKey},la=Qa=>{var Xa,fb;if(null==(Xa=b.current)?0:Xa.contains(document.activeElement))null==(fb=p.onKeyUp)?void 0:fb.call(p,{type:"canvas",order:-1},Qa),G.current=Qa.shiftKey},pa=Qa=>{var Xa,fb,mb;!g.editingShape&&(null==(Xa=b.current)?0:Xa.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(mb=null==(fb=document.activeElement)?void 0:fb.tagName)?mb:"")&&(Qa.preventDefault(),g.paste(Qa,G.current))},Ga=Qa=>{var Xa,fb,mb;!g.editingShape&&0<g.selectedShapes.size&&(null==(Xa=b.current)?0:Xa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(mb=null==(fb=document.activeElement)?void 0:fb.tagName)?mb:"")&&(Qa.preventDefault(),g.copy())};window.addEventListener("keydown",U);window.addEventListener("keyup",la);document.addEventListener("paste",
pa);document.addEventListener("copy",Ga);return()=>{window.removeEventListener("keydown",U);window.removeEventListener("keyup",la);document.removeEventListener("paste",pa);document.removeEventListener("copy",Ga)}},[])}function hm(b){const {inputs:g,callbacks:p}=vi(),G=xz.useRef(-1);return xz.useMemo(()=>({onPointerDown:U=>{var la,pa;const {order:Ga=0}=U;Ga||(null==(la=U.currentTarget)?void 0:la.setPointerCapture(U.pointerId));null==(pa=p.onPointerDown)?void 0:pa.call(p,{type:"shape",shape:b,order:Ga},
U);U.order=Ga+1},onPointerMove:U=>{var la;const {order:pa=0}=U;null==(la=p.onPointerMove)?void 0:la.call(p,{type:"shape",shape:b,order:pa},U);U.order=pa+1},onPointerUp:U=>{var la,pa,Ga;const {order:Qa=0}=U;Qa||(null==(la=U.currentTarget)?void 0:la.releasePointerCapture(U.pointerId));null==(pa=p.onPointerUp)?void 0:pa.call(p,{type:"shape",shape:b,order:Qa},U);la=Date.now();pa=la-G.current;300<pa?G.current=la:300>=pa&&(null==(Ga=p.onDoubleClick)?void 0:Ga.call(p,{type:"shape",shape:b,order:Qa},U),G.current=
-1);U.order=Qa+1},onPointerEnter:U=>{var la;const {order:pa=0}=U;null==(la=p.onPointerEnter)?void 0:la.call(p,{type:"shape",shape:b,order:pa},U);U.order=pa+1},onPointerLeave:U=>{var la;const {order:pa=0}=U;null==(la=p.onPointerLeave)?void 0:la.call(p,{type:"shape",shape:b,order:pa},U);U.order=pa+1},onKeyUp:U=>{var la;null==(la=p.onKeyUp)?void 0:la.call(p,{type:"shape",shape:b,order:-1},U)},onKeyDown:U=>{var la;null==(la=p.onKeyDown)?void 0:la.call(p,{type:"shape",shape:b,order:-1},U)}}),[b.id,g,p])}
function pg(b){var {viewport:g,inputs:p,callbacks:G,components:U}=b;b=Bf(b,["viewport","inputs","callbacks","components"]);return(0,nb.jsx)(cF,{id:b.id,viewport:g,inputs:p,callbacks:G,components:U,meta:b.meta,children:(0,nb.jsx)(aF,oe({},b))})}function ff(){ff=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var p=arguments[g],G;for(G in p)Object.prototype.hasOwnProperty.call(p,G)&&(b[G]=p[G])}return b};return ff.apply(this,arguments)}function If(b,g,{checkForDefaultPrevented:p=
!0}={}){return function(G){null===b||void 0===b||b(G);if(!1===p||!G.defaultPrevented)return null===g||void 0===g?void 0:g(G)}}function Fk(...b){return g=>b.forEach(p=>{"function"===typeof p?p(g):null!==p&&void 0!==p&&(p.current=g)})}function Cf(...b){return(0,fF.useCallback)(Fk(...b),b)}function zj(b,g=[]){let p=[];const G=()=>{const U=p.map(la=>(0,gr.createContext)(la));return function(la){const pa=(null===la||void 0===la?void 0:la[b])||U;return(0,gr.useMemo)(()=>({[`__scope${b}`]:rf(oe({},la),{[b]:pa})}),
[la,pa])}};G.scopeName=b;return[function(U,la){function pa(Xa){const {scope:fb,children:mb}=Xa,Gb=Bf(Xa,["scope","children"]);Xa=(null===fb||void 0===fb?void 0:fb[b][Qa])||Ga;const Wb=(0,gr.useMemo)(()=>Gb,Object.values(Gb));return(0,gr.createElement)(Xa.Provider,{value:Wb},mb)}const Ga=(0,gr.createContext)(la),Qa=p.length;p=[...p,la];pa.displayName=U+"Provider";return[pa,function(Xa,fb){if(fb=(0,gr.useContext)((null===fb||void 0===fb?void 0:fb[b][Qa])||Ga))return fb;if(void 0!==la)return la;throw Error(`\`${Xa}\` must be used within \`${U}\``);
}]},el(G,...g)]}function el(...b){const g=b[0];if(1===b.length)return g;const p=()=>{const G=b.map(U=>({useScope:U(),scopeName:U.scopeName}));return function(U){const la=G.reduce((pa,{useScope:Ga,scopeName:Qa})=>{Ga=Ga(U)[`__scope${Qa}`];return oe(oe({},pa),Ga)},{});return(0,gr.useMemo)(()=>({[`__scope${g.scopeName}`]:la}),[la])}};p.scopeName=g.scopeName;return p}function rg(b){return(0,$m.isValidElement)(b)&&b.type===Iz}function lj(b,g){const p=oe({},g);for(const G in g){const U=b[G],la=g[G];/^on[A-Z]/.test(G)?
U&&la?p[G]=(...pa)=>{la(...pa);U(...pa)}:U&&(p[G]=U):"style"===G?p[G]=oe(oe({},U),la):"className"===G&&(p[G]=[U,la].filter(Boolean).join(" "))}return oe(oe({},b),p)}function rl(b,g){b&&(0,gF.flushSync)(()=>b.dispatchEvent(g))}function qf(b){const g=(0,gw.useRef)(b);(0,gw.useEffect)(()=>{g.current=b});return(0,gw.useMemo)(()=>(...p)=>{var G;return null===(G=g.current)||void 0===G?void 0:G.call(g,...p)},[])}function mk(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const p=qf(b);
(0,hF.useEffect)(()=>{const G=U=>{"Escape"===U.key&&p(U)};g.addEventListener("keydown",G);return()=>g.removeEventListener("keydown",G)},[p,g])}function Qj(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const p=qf(b),G=(0,Mn.useRef)(!1),U=(0,Mn.useRef)(()=>{});(0,Mn.useEffect)(()=>{const la=Ga=>{if(Ga.target&&!G.current){let Qa=function(){Vm("dismissableLayer.pointerDownOutside",p,Xa,{discrete:!0})};const Xa={originalEvent:Ga};"touch"===Ga.pointerType?(g.removeEventListener("click",
U.current),U.current=Qa,g.addEventListener("click",U.current,{once:!0})):Qa()}G.current=!1},pa=window.setTimeout(()=>{g.addEventListener("pointerdown",la)},0);return()=>{window.clearTimeout(pa);g.removeEventListener("pointerdown",la);g.removeEventListener("click",U.current)}},[g,p]);return{onPointerDownCapture:()=>G.current=!0}}function Tl(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const p=qf(b),G=(0,Mn.useRef)(!1);(0,Mn.useEffect)(()=>{const U=la=>{la.target&&!G.current&&
Vm("dismissableLayer.focusOutside",p,{originalEvent:la},{discrete:!1})};g.addEventListener("focusin",U);return()=>g.removeEventListener("focusin",U)},[g,p]);return{onFocusCapture:()=>G.current=!0,onBlurCapture:()=>G.current=!1}}function Mk(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}function Vm(b,g,p,{discrete:G}){const U=p.originalEvent.target;p=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:p});g&&U.addEventListener(b,g,{once:!0});G?rl(U,p):U.dispatchEvent(p)}
function yi(b){const [g,p]=Kz.useState(kF());Nm(()=>{b||p(G=>null!==G&&void 0!==G?G:String(lF++))},[b]);return b||(g?`radix-${g}`:"")}function Wi(b){return b.split("-")[0]}function Dk(b){return["top","bottom"].includes(Wi(b))?"x":"y"}function nk(b){return"y"===b?"height":"width"}function tl(b,g,p){let {reference:G,floating:U}=b;var la=G.x+G.width/2-U.width/2;const pa=G.y+G.height/2-U.height/2;b=Dk(g);var Ga=nk(b);Ga=G[Ga]/2-U[Ga]/2;const Qa="x"===b;switch(Wi(g)){case "top":la={x:la,y:G.y-U.height};
break;case "bottom":la={x:la,y:G.y+G.height};break;case "right":la={x:G.x+G.width,y:pa};break;case "left":la={x:G.x-U.width,y:pa};break;default:la={x:G.x,y:G.y}}switch(g.split("-")[1]){case "start":la[b]-=Ga*(p&&Qa?-1:1);break;case "end":la[b]+=Ga*(p&&Qa?-1:1)}return la}function gn(b){return"number"!=typeof b?oe({top:0,right:0,bottom:0,left:0},b):{top:b,right:b,bottom:b,left:b}}function Wm(b){return rf(oe({},b),{top:b.y,left:b.x,right:b.x+b.width,bottom:b.y+b.height})}function ql(b,g){return $h(this,
null,function*(){var p;void 0===g&&(g={});const {x:G,y:U,platform:la,rects:pa,elements:Ga,strategy:Qa}=b,{boundary:Xa="clippingAncestors",rootBoundary:fb="viewport",elementContext:mb="floating",altBoundary:Gb=!1,padding:Wb=0}=g,Mb=gn(Wb),dc=Ga[Gb?"floating"===mb?"reference":"floating":mb],hc=Wm(yield la.getClippingRect({element:null==(p=yield null==la.isElement?void 0:la.isElement(dc))||p?dc:dc.contextElement||(yield null==la.getDocumentElement?void 0:la.getDocumentElement(Ga.floating)),boundary:Xa,
rootBoundary:fb,strategy:Qa}));p=Wm(la.convertOffsetParentRelativeRectToViewportRelativeRect?yield la.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===mb?rf(oe({},pa.floating),{x:G,y:U}):pa.reference,offsetParent:yield null==la.getOffsetParent?void 0:la.getOffsetParent(Ga.floating),strategy:Qa}):pa[mb]);return{top:hc.top-p.top+Mb.top,bottom:p.bottom-hc.bottom+Mb.bottom,left:hc.left-p.left+Mb.left,right:p.right-hc.right+Mb.right}})}function vm(b){return b.replace(/left|right|bottom|top/g,
g=>mF[g])}function sl(b,g,p){void 0===p&&(p=!1);const G=b.split("-")[1],U=Dk(b);b=nk(U);p="x"===U?G===(p?"end":"start")?"right":"left":"start"===G?"bottom":"top";return g.reference[b]>g.floating[b]&&(p=vm(p)),{main:p,cross:vm(p)}}function Tj(b){return b.replace(/start|end/g,g=>nF[g])}function Qk(b,g){return{top:b.top-g.height,right:b.right-g.width,bottom:b.bottom-g.height,left:b.left-g.width}}function ok(b){return Nz.some(g=>0<=b[g])}function ck(b){return null==b?window:b&&b.document&&b.location&&
b.alert&&b.setInterval?b:(b=b.ownerDocument)&&b.defaultView||window}function Sk(b){return ck(b).getComputedStyle(b)}function Bj(b){return b&&b.document&&b.location&&b.alert&&b.setInterval?"":b?(b.nodeName||"").toLowerCase():""}function Ul(){const b=navigator.userAgentData;return null!=b&&b.brands?b.brands.map(g=>g.brand+"/"+g.version).join(" "):navigator.userAgent}function Kj(b){return b instanceof ck(b).HTMLElement}function Aj(b){return b instanceof ck(b).Element}function Sj(b){return"undefined"==
typeof ShadowRoot?!1:b instanceof ck(b).ShadowRoot||b instanceof ShadowRoot}function im(b){const {overflow:g,overflowX:p,overflowY:G}=Sk(b);return/auto|scroll|overlay|hidden/.test(g+G+p)}function km(b){const g=/firefox/i.test(Ul());b=Sk(b);return"none"!==b.transform||"none"!==b.perspective||"paint"===b.contain||["transform","perspective"].includes(b.willChange)||g&&"filter"===b.willChange||g&&!!b.filter&&"none"!==b.filter}function fl(){return!/^((?!chrome|android).)*safari/i.test(Ul())}function tj(b,
g,p){var G,U,la,pa;void 0===g&&(g=!1);void 0===p&&(p=!1);var Ga=b.getBoundingClientRect();let Qa=1,Xa=1;g&&Kj(b)&&(Qa=0<b.offsetWidth&&qu(Ga.width)/b.offsetWidth||1,Xa=0<b.offsetHeight&&qu(Ga.height)/b.offsetHeight||1);b=Aj(b)?ck(b):window;g=!fl()&&p;p=(Ga.left+(g&&null!=(G=null==(U=b.visualViewport)?void 0:U.offsetLeft)?G:0))/Qa;G=(Ga.top+(g&&null!=(la=null==(pa=b.visualViewport)?void 0:pa.offsetTop)?la:0))/Xa;la=Ga.width/Qa;Ga=Ga.height/Xa;return{width:la,height:Ga,top:G,right:p+la,bottom:G+Ga,
left:p,x:p,y:G}}function vl(b){return(g=b,(g instanceof ck(g).Node?b.ownerDocument:b.document)||window.document).documentElement;var g}function bk(b){return Aj(b)?{scrollLeft:b.scrollLeft,scrollTop:b.scrollTop}:{scrollLeft:b.pageXOffset,scrollTop:b.pageYOffset}}function pk(b){return tj(vl(b)).left+bk(b).scrollLeft}function Nh(b){return"html"===Bj(b)?b:b.assignedSlot||b.parentNode||(Sj(b)?b.host:null)||vl(b)}function xj(b){return Kj(b)&&"fixed"!==getComputedStyle(b).position?b.offsetParent:null}function qk(b){for(var g=
ck(b),p=xj(b);p&&["table","td","th"].includes(Bj(p))&&"static"===getComputedStyle(p).position;)p=xj(p);if(!p||"html"!==Bj(p)&&("body"!==Bj(p)||"static"!==getComputedStyle(p).position||km(p))){if(!p)a:{b=Nh(b);for(Sj(b)&&(b=b.host);Kj(b)&&!["html","body"].includes(Bj(b));){if(km(b)){p=b;break a}b=b.parentNode}p=null}g=p||g}return g}function xk(b){if(Kj(b))return{width:b.offsetWidth,height:b.offsetHeight};b=tj(b);return{width:b.width,height:b.height}}function Ah(b){const g=Nh(b);return["html","body",
"#document"].includes(Bj(g))?b.ownerDocument.body:Kj(g)&&im(g)?g:Ah(g)}function ah(b,g){var p;void 0===g&&(g=[]);var G=Ah(b);b=G===(null==(p=b.ownerDocument)?void 0:p.body);p=ck(G);G=b?[p].concat(p.visualViewport||[],im(G)?G:[]):G;g=g.concat(G);return b?g:g.concat(ah(G))}function Jg(b,g,p){return"viewport"===g?Wm(function(G,U){var la=ck(G),pa=vl(G);la=la.visualViewport;G=pa.clientWidth;pa=pa.clientHeight;let Ga=0,Qa=0;if(la){G=la.width;pa=la.height;const Xa=fl();(Xa||!Xa&&"fixed"===U)&&(Ga=la.offsetLeft,
Qa=la.offsetTop)}return{width:G,height:pa,x:Ga,y:Qa}}(b,p)):Aj(g)?function(G,U){var la=tj(G,!1,"fixed"===U);U=la.top+G.clientTop;la=la.left+G.clientLeft;return{top:U,left:la,x:la,y:U,right:la+G.clientWidth,bottom:U+G.clientHeight,width:G.clientWidth,height:G.clientHeight}}(g,p):Wm(function(G){var U;const la=vl(G);var pa=bk(G);const Ga=null==(U=G.ownerDocument)?void 0:U.body;U=kt(la.scrollWidth,la.clientWidth,Ga?Ga.scrollWidth:0,Ga?Ga.clientWidth:0);const Qa=kt(la.scrollHeight,la.clientHeight,Ga?Ga.scrollHeight:
0,Ga?Ga.clientHeight:0);G=-pa.scrollLeft+pk(G);pa=-pa.scrollTop;return"rtl"===Sk(Ga||la).direction&&(G+=kt(la.clientWidth,Ga?Ga.clientWidth:0)-U),{width:U,height:Qa,x:G,y:pa}}(vl(b)))}function gk(b){const g=ah(b),p=["absolute","fixed"].includes(Sk(b).position)&&Kj(b)?qk(b):b;return Aj(p)?g.filter(G=>{var U;if(U=Aj(G))a:if(U=null==p.getRootNode?void 0:p.getRootNode(),G.contains(p))U=!0;else{if(U&&Sj(U)){U=p;do{if(U&&G===U){U=!0;break a}U=U.parentNode||U.host}while(U)}U=!1}return U&&"body"!==Bj(G)}):
[]}function Mh(b,g,p,G){void 0===G&&(G={});const {ancestorScroll:U=!0,ancestorResize:la=!0,elementResize:pa=!0,animationFrame:Ga=!1}=G,Qa=U&&!Ga,Xa=la&&!Ga,fb=Qa||Xa?[...(Aj(b)?ah(b):[]),...ah(g)]:[];fb.forEach(Mb=>{Qa&&Mb.addEventListener("scroll",p,{passive:!0});Xa&&Mb.addEventListener("resize",p)});let mb,Gb=null;if(pa){let Mb=!0;Gb=new ResizeObserver(()=>{Mb||p();Mb=!1});Aj(b)&&!Ga&&Gb.observe(b);Gb.observe(g)}let Wb=Ga?tj(b):null;return Ga&&function dc(){const hc=tj(b);!Wb||hc.x===Wb.x&&hc.y===
Wb.y&&hc.width===Wb.width&&hc.height===Wb.height||p();Wb=hc;mb=requestAnimationFrame(dc)}(),p(),()=>{var dc;fb.forEach(hc=>{Qa&&hc.removeEventListener("scroll",p);Xa&&hc.removeEventListener("resize",p)});null==(dc=Gb)||dc.disconnect();Gb=null;Ga&&cancelAnimationFrame(mb)}}function Xi(b,g){if(b===g)return!0;if(typeof b!==typeof g)return!1;if("function"===typeof b&&b.toString()===g.toString())return!0;let p,G;if(b&&g&&"object"==typeof b){if(Array.isArray(b)){var U=b.length;if(U!=g.length)return!1;for(p=
U;0!==p--;)if(!Xi(b[p],g[p]))return!1;return!0}G=Object.keys(b);U=G.length;if(U!==Object.keys(g).length)return!1;for(p=U;0!==p--;)if(!Object.prototype.hasOwnProperty.call(g,G[p]))return!1;for(p=U;0!==p--;)if(U=G[p],!("_owner"===U&&b.$$typeof||Xi(b[U],g[U])))return!1;return!0}return b!==b&&g!==g}function Bg(b){const g=fo.useRef(b);iw(()=>{g.current=b});return g}function Yi(b){let {middleware:g,placement:p="bottom",strategy:G="absolute",whileElementsMounted:U}=void 0===b?{}:b;const la=fo.useRef(null),
pa=fo.useRef(null),Ga=Bg(U),Qa=fo.useRef(null),[Xa,fb]=fo.useState({x:null,y:null,strategy:G,placement:p,middlewareData:{}}),[mb,Gb]=fo.useState(g);Xi(null==mb?void 0:mb.map(Bc=>{({options:Bc}=Bc);return Bc}),null==g?void 0:g.map(Bc=>{({options:Bc}=Bc);return Bc}))||Gb(g);const Wb=fo.useCallback(()=>{la.current&&pa.current&&qF(la.current,pa.current,{middleware:mb,placement:p,strategy:G}).then(Bc=>{Mb.current&&rF.flushSync(()=>{fb(Bc)})})},[mb,p,G]);iw(()=>{Mb.current&&Wb()},[Wb]);const Mb=fo.useRef(!1);
iw(()=>{Mb.current=!0;return()=>{Mb.current=!1}},[]);const dc=fo.useCallback(()=>{"function"===typeof Qa.current&&(Qa.current(),Qa.current=null);if(la.current&&pa.current)if(Ga.current){const Bc=Ga.current(la.current,pa.current,Wb);Qa.current=Bc}else Wb()},[Wb,Ga]),hc=fo.useCallback(Bc=>{la.current=Bc;dc()},[dc]),Ub=fo.useCallback(Bc=>{pa.current=Bc;dc()},[dc]),nc=fo.useMemo(()=>({reference:la,floating:pa}),[]);return fo.useMemo(()=>rf(oe({},Xa),{update:Wb,refs:nc,reference:hc,floating:Ub}),[Xa,Wb,
nc,hc,Ub])}function Wf(b){const [g,p]=(0,tF.useState)(void 0);Nm(()=>{if(b){p({width:b.offsetWidth,height:b.offsetHeight});const G=new ResizeObserver(U=>{if(Array.isArray(U)&&U.length){U=U[0];if("borderBoxSize"in U){U=U.borderBoxSize;var la=Array.isArray(U)?U[0]:U;U=la.inlineSize;la=la.blockSize}else U=b.offsetWidth,la=b.offsetHeight;p({width:U,height:la})}});G.observe(b,{box:"border-box"});return()=>G.unobserve(b)}p(void 0)},[b]);return g}function Mg(b){return void 0!==b}function Cj(b){return null!==
b}function ni(b){const [g,p="center"]=b.split("-");return[g,p]}function rh(b,g){return(0,Cp.useReducer)((p,G)=>{G=g[p][G];return null!==G&&void 0!==G?G:p},b)}function wg(b){const [g,p]=(0,Cp.useState)(),G=(0,Cp.useRef)({}),U=(0,Cp.useRef)(b),la=(0,Cp.useRef)("none"),[pa,Ga]=rh(b?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Cp.useEffect)(()=>{const Qa=oh(G.current);
la.current="mounted"===pa?Qa:"none"},[pa]);Nm(()=>{const Qa=G.current,Xa=U.current;if(Xa!==b){const fb=la.current,mb=oh(Qa);b?Ga("MOUNT"):"none"===mb||"none"===(null===Qa||void 0===Qa?void 0:Qa.display)?Ga("UNMOUNT"):Xa&&fb!==mb?Ga("ANIMATION_OUT"):Ga("UNMOUNT");U.current=b}},[b,Ga]);Nm(()=>{if(g){const Qa=fb=>{const mb=oh(G.current).includes(fb.animationName);fb.target===g&&mb&&(0,DF.flushSync)(()=>Ga("ANIMATION_END"))},Xa=fb=>{fb.target===g&&(la.current=oh(G.current))};g.addEventListener("animationstart",
Xa);g.addEventListener("animationcancel",Qa);g.addEventListener("animationend",Qa);return()=>{g.removeEventListener("animationstart",Xa);g.removeEventListener("animationcancel",Qa);g.removeEventListener("animationend",Qa)}}Ga("ANIMATION_END")},[g,Ga]);return{isPresent:["mounted","unmountSuspended"].includes(pa),ref:(0,Cp.useCallback)(Qa=>{Qa&&(G.current=getComputedStyle(Qa));p(Qa)},[])}}function oh(b){return(null===b||void 0===b?void 0:b.animationName)||"none"}function Lj({prop:b,defaultProp:g,onChange:p=
()=>{}}){const [G,U]=Ji({defaultProp:g,onChange:p}),la=void 0!==b;g=la?b:G;const pa=qf(p);p=(0,ru.useCallback)(Ga=>{la?(Ga="function"===typeof Ga?Ga(b):Ga,Ga!==b&&pa(Ga)):U(Ga)},[la,b,U,pa]);return[g,p]}function Ji({defaultProp:b,onChange:g}){b=(0,ru.useState)(b);const [p]=b,G=(0,ru.useRef)(p),U=qf(g);(0,ru.useEffect)(()=>{G.current!==p&&(U(p),G.current=p)},[p,G,U]);return b}function aj(b,g){const p=Math.abs(g.top-b.y),G=Math.abs(g.bottom-b.y),U=Math.abs(g.right-b.x);b=Math.abs(g.left-b.x);switch(Math.min(p,
G,U,b)){case b:return"left";case U:return"right";case p:return"top";case G:return"bottom";default:return null}}function Rb(b){b=b.slice();b.sort((g,p)=>g.x<p.x?-1:g.x>p.x?1:g.y<p.y?-1:g.y>p.y?1:0);return fc(b)}function fc(b){if(1>=b.length)return b.slice();const g=[];for(var p=0;p<b.length;p++){for(var G=b[p];2<=g.length;){var U=g[g.length-1],la=g[g.length-2];if((U.x-la.x)*(G.y-la.y)>=(U.y-la.y)*(G.x-la.x))g.pop();else break}g.push(G)}g.pop();p=[];for(G=b.length-1;0<=G;G--){for(U=b[G];2<=p.length;){la=
p[p.length-1];const pa=p[p.length-2];if((la.x-pa.x)*(U.y-pa.y)>=(la.y-pa.y)*(U.x-pa.x))p.pop();else break}p.push(U)}p.pop();return 1===g.length&&1===p.length&&g[0].x===p[0].x&&g[0].y===p[0].y?g:g.concat(p)}function ec(b){var {side:g,content:p,sideOffset:G=10}=b;b=Bf(b,["side","content","sideOffset"]);return p?(0,nb.jsx)(PF,{delayDuration:300,children:(0,nb.jsxs)(QF,{children:[(0,nb.jsx)(RF,{asChild:!0,children:b.children}),(0,nb.jsx)(SF,{children:(0,nb.jsxs)(TF,rf(oe({className:"tl-tooltip-content",
sideOffset:G,side:g},b),{children:[p,(0,nb.jsx)(UF,{className:"tl-tooltip-arrow"})]}))})]})}):(0,nb.jsx)(nb.Fragment,{children:b.children})}function ka(b){var {className:g,tooltip:p,tooltipSide:G}=b;b=Bf(b,["className","tooltip","tooltipSide"]);return(0,nb.jsx)(ec,{content:p,side:G,children:(0,nb.jsx)("button",oe({className:"tl-button "+(null!=g?g:"")},b))})}function Eb(b){var g=b+"CollectionProvider";const [p,G]=zj(g),[U,la]=p(g,{collectionRef:{current:null},itemMap:new Map}),pa=fb=>{const {scope:mb,
children:Gb}=fb;fb=ip.default.useRef(null);const Wb=ip.default.useRef(new Map).current;return ip.default.createElement(U,{scope:mb,itemMap:Wb,collectionRef:fb},Gb)};Object.assign(pa,{displayName:g});const Ga=b+"CollectionSlot";g=ip.default.forwardRef((fb,mb)=>{const {scope:Gb,children:Wb}=fb;fb=la(Ga,Gb);mb=Cf(mb,fb.collectionRef);return ip.default.createElement(hp,{ref:mb},Wb)});Object.assign(g,{displayName:Ga});const Qa=b+"CollectionItemSlot",Xa=ip.default.forwardRef((fb,mb)=>{const {scope:Gb,children:Wb}=
fb,Mb=Bf(fb,["scope","children"]),dc=ip.default.useRef(null);fb=Cf(mb,dc);const hc=la(Qa,Gb);ip.default.useEffect(()=>{hc.itemMap.set(dc,oe({ref:dc},Mb));return()=>void hc.itemMap.delete(dc)});return ip.default.createElement(hp,{["data-radix-collection-item"]:"",ref:fb},Wb)});Object.assign(Xa,{displayName:Qa});return[{Provider:pa,Slot:g,ItemSlot:Xa},function(fb){const mb=la(b+"CollectionConsumer",fb);return ip.default.useCallback(()=>{const Gb=mb.collectionRef.current;if(!Gb)return[];const Wb=Array.from(Gb.querySelectorAll("[data-radix-collection-item]"));
return Array.from(mb.itemMap.values()).sort((Mb,dc)=>Wb.indexOf(Mb.ref.current)-Wb.indexOf(dc.ref.current))},[mb.collectionRef,mb.itemMap])},G]}function Tb(b){const g=(0,cA.useContext)(VF);return b||g||"ltr"}function vb(){(0,WF.useEffect)(()=>{var b,g;const p=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(b=p[0])&&void 0!==b?b:yb());document.body.insertAdjacentElement("beforeend",null!==(g=p[1])&&void 0!==g?g:yb());pw++;return()=>{1===
pw&&document.querySelectorAll("[data-radix-focus-guard]").forEach(G=>G.remove());pw--}},[])}function yb(){const b=document.createElement("span");b.setAttribute("data-radix-focus-guard","");b.tabIndex=0;b.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return b}function Qb(b,{select:g=!1}={}){const p=document.activeElement;for(const G of b)if(Ac(G,{select:g}),document.activeElement!==p)break}function tb(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,
{acceptNode:p=>{const G="INPUT"===p.tagName&&"hidden"===p.type;return p.disabled||p.hidden||G?NodeFilter.FILTER_SKIP:0<=p.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function Nb(b,g){for(const p of b)if(!ac(p,{upTo:g}))return p}function ac(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function Ac(b,{select:g=!1}=
{}){if(b&&b.focus){const p=document.activeElement;b.focus({preventScroll:!0});b!==p&&b instanceof HTMLInputElement&&"select"in b&&g&&b.select()}}function Oc(b,g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function Tc(b){return b.filter(g=>"A"!==g.tagName)}function wd(b,g,p){b=b.key;p="rtl"!==p?b:"ArrowLeft"===b?"ArrowRight":"ArrowRight"===b?"ArrowLeft":b;if("vertical"!==g||!["ArrowLeft","ArrowRight"].includes(p))if("horizontal"!==g||!["ArrowUp","ArrowDown"].includes(p))return cG[p]}function Rd(b){const g=
document.activeElement;for(const p of b){if(p===g)break;p.focus();if(document.activeElement!==g)break}}function Ed(b,g){return b.map((p,G)=>b[(g+G)%b.length])}function Bd(b,g){var p=(0,gG.useState)(function(){return{value:b,callback:g,facade:{get current(){return p.value},set current(G){var U=p.value;U!==G&&(p.value=G,p.callback(G,U))}}}})[0];p.callback=g;return p.facade}function Gd(b,g){return Bd(g||null,function(p){return b.forEach(function(G){"function"===typeof G?G(p):G&&(G.current=p);return G})})}
function ze(b){return b}function Zf(b,g){void 0===g&&(g=ze);var p=[],G=!1;return{read:function(){if(G)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return p.length?p[p.length-1]:b},useMedium:function(U){var la=g(U,G);p.push(la);return function(){p=p.filter(function(pa){return pa!==la})}},assignSyncMedium:function(U){for(G=!0;p.length;){var la=p;p=[];la.forEach(U)}p={push:function(pa){return U(pa)},filter:function(){return p}}},assignMedium:function(U){G=
!0;var la=[];if(p.length){var pa=p;p=[];pa.forEach(U);la=p}var Ga=function(){var Qa=la;la=[];Qa.forEach(U)};Promise.resolve().then(Ga);p={push:function(Qa){la.push(Qa);Promise.resolve().then(Ga)},filter:function(Qa){la=la.filter(Qa);return p}}}}}function ve(b){const g=document.activeElement;for(const p of b){if(p===g)break;p.focus();if(document.activeElement!==g)break}}function Ze(b,g){return b.map((p,G)=>b[(g+G)%b.length])}function Qe(b,g,p){const G=1<g.length&&Array.from(g).every(la=>la===g[0])?
g[0]:g,U=p?b.indexOf(p):-1;b=Ze(b,Math.max(U,0));1===G.length&&(b=b.filter(la=>la!==p));b=b.find(la=>la.toLowerCase().startsWith(G.toLowerCase()));return b!==p?b:void 0}function Se(b){return g=>"mouse"===g.pointerType?b(g):void 0}function sg(b,[g,p]){return Math.min(p,Math.max(g,b))}function Vf(b){const g=(0,MA.useRef)({value:b,previous:b});return(0,MA.useMemo)(()=>{g.current.value!==b&&(g.current.previous=g.current.value,g.current.value=b);return g.current.previous},[b])}function dj(b=[],g,p){b=
[...b];b[p]=g;return b.sort((G,U)=>G-U)}function Tf(b,g,p){return 100/(p-g)*(b-g)}function mg(b,g){if(2<g)return`Value ${b+1} of ${g}`;if(2===g)return["Minimum","Maximum"][b]}function ph(b,g){if(1===b.length)return 0;b=b.map(G=>Math.abs(G-g));const p=Math.min(...b);return b.indexOf(p)}function Sg(b,g,p){b/=2;const G=dh([0,50],[0,b]);return(b-G(g)*p)*p}function Ug(b){return b.slice(0,-1).map((g,p)=>b[p+1]-g)}function dh(b,g){return p=>b[0]===b[1]||g[0]===g[1]?g[0]:g[0]+(g[1]-g[0])/(b[1]-b[0])*(p-b[0])}
function Cg(b,g){g=Math.pow(10,g);return Math.round(b*g)/g}function ng(b){function g(Qa){return Qa?(0,nb.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Qa},children:(0,nb.jsx)("div",{className:`w-full h-full bg-${Qa}-500`})}):(0,nb.jsx)("div",{className:"tl-color-bg",children:(0,nb.jsx)(Fh,{name:"color-swatch"})})}var {color:p,opacity:G,popoverSide:U,setColor:la,setOpacity:pa}=b;b=Bf(b,["color","opacity","popoverSide","setColor","setOpacity"]);const Ga=eH.default.useMemo(()=>{let Qa="";
return fk(Xa=>{la(Qa)},100,Xa=>{Qa=Xa.target.value})},[]);return(0,nb.jsx)(UA,rf(oe({},b),{border:!0,arrow:!0,side:U,label:(0,nb.jsx)(ec,{content:"Color",side:U,sideOffset:14,children:g(p)}),children:(0,nb.jsxs)("div",{className:"p-1",children:[(0,nb.jsx)("div",{className:"tl-color-palette",children:Object.values(Mq).map(Qa=>(0,nb.jsx)("button",{className:`tl-color-drip m-1${Qa===p?" active":""}`,onClick:()=>la(Qa),children:g(Qa)},Qa))}),(0,nb.jsxs)("div",{className:"flex items-center tl-custom-color",
children:[(0,nb.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${hg(p)?"":"active"}`,children:(0,nb.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,nb.jsx)("input",oe({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:p,onChange:Ga,style:{opacity:hg(p)?0:1}},b))})}),(0,nb.jsx)("label",{for:"tl-custom-color-input",className:"cursor-pointer",children:"Select custom color"})]}),pa&&(0,nb.jsx)("div",{className:"mx-1 my-2",children:(0,nb.jsxs)(aH,{defaultValue:[null!=
G?G:0],onValueCommit:Qa=>pa(Qa[0]),max:1,step:.1,"aria-label":"Opacity",className:"tl-slider-root",children:[(0,nb.jsx)(bH,{className:"tl-slider-track",children:(0,nb.jsx)(cH,{className:"tl-slider-range"})}),(0,nb.jsx)(dH,{className:"tl-slider-thumb"})]})})]})}))}function eh(b,g){b&&(0,gH.flushSync)(()=>b.dispatchEvent(g))}function Qf(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const p=qf(b),G=(0,Nn.useRef)(!1),U=(0,Nn.useRef)(()=>{});(0,Nn.useEffect)(()=>{const la=Ga=>
{if(Ga.target&&!G.current){let Qa=function(){ki("dismissableLayer.pointerDownOutside",p,Xa,{discrete:!0})};const Xa={originalEvent:Ga};"touch"===Ga.pointerType?(g.removeEventListener("click",U.current),U.current=Qa,g.addEventListener("click",U.current,{once:!0})):Qa()}G.current=!1},pa=window.setTimeout(()=>{g.addEventListener("pointerdown",la)},0);return()=>{window.clearTimeout(pa);g.removeEventListener("pointerdown",la);g.removeEventListener("click",U.current)}},[g,p]);return{onPointerDownCapture:()=>
G.current=!0}}function bj(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const p=qf(b),G=(0,Nn.useRef)(!1);(0,Nn.useEffect)(()=>{const U=la=>{la.target&&!G.current&&ki("dismissableLayer.focusOutside",p,{originalEvent:la},{discrete:!1})};g.addEventListener("focusin",U);return()=>g.removeEventListener("focusin",U)},[g,p]);return{onFocusCapture:()=>G.current=!0,onBlurCapture:()=>G.current=!1}}function wh(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}
function ki(b,g,p,{discrete:G}){const U=p.originalEvent.target;p=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:p});g&&U.addEventListener(b,g,{once:!0});G?eh(U,p):U.dispatchEvent(p)}function dk(b,{select:g=!1}={}){const p=document.activeElement;for(const G of b)if(Zi(G,{select:g}),document.activeElement!==p)break}function Ai(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,{acceptNode:p=>{const G="INPUT"===p.tagName&&"hidden"===p.type;return p.disabled||p.hidden||G?NodeFilter.FILTER_SKIP:
0<=p.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function uk(b,g){for(const p of b)if(!Ql(p,{upTo:g}))return p}function Ql(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function Zi(b,{select:g=!1}={}){if(b&&b.focus){const p=document.activeElement;b.focus({preventScroll:!0});b!==p&&b instanceof HTMLInputElement&&"select"in
b&&g&&b.select()}}function nm(b,g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function Rm(b){return b.filter(g=>"A"!==g.tagName)}function tg(b){return void 0!==b}function cn(b){return null!==b}function bn(b){const [g,p="center"]=b.split("-");return[g,p]}function bm(b){const g=qf(b),p=(0,yf.useRef)(""),G=(0,yf.useRef)(0);b=(0,yf.useCallback)(la=>{la=p.current+la;g(la);(function Qa(Ga){p.current=Ga;window.clearTimeout(G.current);""!==Ga&&(G.current=window.setTimeout(()=>Qa(""),1E3))})(la)},
[g]);const U=(0,yf.useCallback)(()=>{p.current="";window.clearTimeout(G.current)},[]);(0,yf.useEffect)(()=>()=>window.clearTimeout(G.current),[]);return[p,b,U]}function Zk(b,g,p){const G=1<g.length&&Array.from(g).every(la=>la===g[0])?g[0]:g,U=p?b.indexOf(p):-1;b=Xj(b,Math.max(U,0));1===G.length&&(b=b.filter(la=>la!==p));b=b.find(la=>la.textValue.toLowerCase().startsWith(G.toLowerCase()));return b!==p?b:void 0}function Xj(b,g){return b.map((p,G)=>b[(g+G)%b.length])}function Fj(b){var {options:g,tooltip:p,
popoverSide:G,chevron:U=!0,value:la,onValueChange:pa}=b;b=Bf(b,"options tooltip popoverSide chevron value onValueChange".split(" "));const [Ga,Qa]=fH.useState(!1);return(0,nb.jsx)("div",rf(oe({},b),{className:"tl-select-input",children:(0,nb.jsxs)(PH,{open:Ga,onOpenChange:Qa,value:la,onValueChange:pa,children:[(0,nb.jsx)(ec,{content:p,side:G,children:(0,nb.jsxs)(QH,{className:"tl-select-input-trigger",children:[(0,nb.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,nb.jsx)(RH,{})}),
U&&(0,nb.jsx)(SH,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,nb.jsx)(Fh,{name:Ga?"chevron-up":"chevron-down"})})]})}),(0,nb.jsx)(TH,{className:"tl-select-input-portal",children:(0,nb.jsxs)(UH,{className:"tl-select-input-content",side:G,position:"popper",sideOffset:14,align:"center",children:[(0,nb.jsx)(YH,{}),(0,nb.jsx)(VH,{className:"tl-select-input-viewport",children:g.map(Xa=>(0,nb.jsx)(WH,{className:"tl-select-input-select-item",value:Xa.value,children:(0,nb.jsx)(XH,{children:Xa.label})},
Xa.value))}),(0,nb.jsx)(ZH,{})]})})]})}))}function Kh(b){var {scaleLevel:g,compact:p,popoverSide:G}=b;Bf(b,["scaleLevel","compact","popoverSide"]);const U=af();return(0,nb.jsx)(Fj,{tooltip:"Scale level",options:[{label:p?"XS":"Extra Small",value:"xs"},{label:p?"SM":"Small",value:"sm"},{label:p?"MD":"Medium",value:"md"},{label:p?"LG":"Large",value:"lg"},{label:p?"XL":"Extra Large",value:"xl"},{label:p?"XXL":"Huge",value:"xxl"}],value:g,popoverSide:G,chevron:!p,onValueChange:la=>{U.api.setScaleLevel(la)}})}
function pi(b,g){return function(p){return b(g(p))}}function om(b,g){return g(b)}function qm(b,g){return function(p){return b(g,p)}}function Si(b,g){return function(){return b(g)}}function $k(b,g){g(b);return b}function pe(){for(var b=arguments.length,g=Array(b),p=0;p<b;p++)g[p]=arguments[p];return g}function Mf(b){b()}function Ne(b){return function(){return b}}function gf(){for(var b=arguments.length,g=Array(b),p=0;p<b;p++)g[p]=arguments[p];return function(){g.map(Mf)}}function Fi(){}function dg(b,
g){return b(1,g)}function gj(b,g){b(0,g)}function Gh(b){b(2)}function El(b){return b(4)}function be(b,g){return dg(b,qm(g,0))}function Me(b,g){var p=b(1,function(G){p();g(G)});return p}function Uf(){var b=[];return function(g,p){switch(g){case 2:b.splice(0,b.length);break;case 1:return b.push(p),function(){var G=b.indexOf(p);-1<G&&b.splice(G,1)};case 0:b.slice().forEach(function(G){G(p)});break;default:throw Error("unrecognized action "+g);}}}function Pd(b){var g=b,p=Uf();return function(G,U){switch(G){case 1:U(g);
break;case 0:g=U;break;case 4:return g}return p(G,U)}}function Ol(b){var g,p;return function(G,U){switch(G){case 1:if(U){if(p===U)break;g&&g();p=U;return g=b(1,U)}g&&g();return Fi;case 2:g&&g();p=null;break;default:throw Error("unrecognized action "+G);}}}function qj(b){return $k(Uf(),function(g){return be(b,g)})}function Ri(b,g){return $k(Pd(g),function(p){return be(b,p)})}function Bi(){for(var b=arguments.length,g=Array(b),p=0;p<b;p++)g[p]=arguments[p];return function(G){return g.reduceRight(om,
G)}}function Ie(b){for(var g=arguments.length,p=Array(1<g?g-1:0),G=1;G<g;G++)p[G-1]=arguments[G];var U=Bi.apply(void 0,p);return function(la,pa){switch(la){case 1:return dg(b,U(pa));case 2:b(2);break;default:throw Error("unrecognized action "+la);}}}function Kf(b,g){return b===g}function ig(b){void 0===b&&(b=Kf);var g;return function(p){return function(G){b(g,G)||(g=G,p(G))}}}function Wg(b){return function(g){return function(p){b(p)&&g(p)}}}function $f(b){return function(g){return pi(g,b)}}function Pf(b){return function(g){return function(){return g(b)}}}
function nl(b,g){return function(p){return function(G){return p(g=b(g,G))}}}function Uk(b){return function(g){return function(p){0<b?b--:g(p)}}}function Jf(b){var g,p;return function(G){return function(U){g=U;p||=setTimeout(function(){p=void 0;G(g)},b)}}}function Fl(b){var g,p;return function(G){return function(U){g=U;p&&clearTimeout(p);p=setTimeout(function(){G(g)},b)}}}function eg(){for(var b=arguments.length,g=Array(b),p=0;p<b;p++)g[p]=arguments[p];var G=Array(g.length),U=0,la=null,pa=Math.pow(2,
g.length)-1;g.forEach(function(Ga,Qa){var Xa=Math.pow(2,Qa);dg(Ga,function(fb){var mb=U;U|=Xa;G[Qa]=fb;mb!==pa&&U===pa&&la&&(la(),la=null)})});return function(Ga){return function(Qa){var Xa=function(){return Ga([Qa].concat(G))};U===pa?Xa():la=Xa}}}function qi(){for(var b=arguments.length,g=Array(b),p=0;p<b;p++)g[p]=arguments[p];return function(G,U){switch(G){case 1:return gf.apply(void 0,g.map(function(la){return la(1,U)}));case 2:break;default:throw Error("unrecognized action "+G);}}}function Bh(b,
g){void 0===g&&(g=Kf);return Ie(b,ig(g))}function Li(){for(var b=Uf(),g=arguments.length,p=Array(g),G=0;G<g;G++)p[G]=arguments[G];var U=Array(p.length),la=0,pa=Math.pow(2,p.length)-1;p.forEach(function(Ga,Qa){var Xa=Math.pow(2,Qa);dg(Ga,function(fb){U[Qa]=fb;la|=Xa;la===pa&&b(0,U)})});return function(Ga,Qa){switch(Ga){case 1:return la===pa&&Qa(U),b(1,Qa);case 2:b(2);break;default:throw Error("unrecognized action "+Ga);}}}function sh(b,g,p){void 0===g&&(g=[]);p=(void 0===p?{singleton:!0}:p).singleton;
return{id:Symbol(),constructor:b,dependencies:g,singleton:p}}function cm(b){var g=new Map;return function U(G){var la=G.id,pa=G.constructor,Ga=G.dependencies;if((G=G.singleton)&&g.has(la))return g.get(la);pa=pa(Ga.map(function(Qa){return U(Qa)}));G&&g.set(la,pa);return pa}(b)}function wm(b,g){if(null==b)return{};var p={},G=Object.keys(b),U;for(U=0;U<G.length;U++){var la=G[U];0<=g.indexOf(la)||(p[la]=b[la])}return p}function Mj(b,g){if(b){if("string"===typeof b)return $n(b,g);var p=Object.prototype.toString.call(b).slice(8,
-1);"Object"===p&&b.constructor&&(p=b.constructor.name);if("Map"===p||"Set"===p)return Array.from(b);if("Arguments"===p||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return $n(b,g)}}function $n(b,g){if(null==g||g>b.length)g=b.length;for(var p=0,G=Array(g);p<g;p++)G[p]=b[p];return G}function xl(b,g){var p="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(p)return(p=p.call(b)).next.bind(p);if(Array.isArray(b)||(p=Mj(b))||g&&b&&"number"===typeof b.length){p&&(b=p);var G=0;return function(){return G>=
b.length?{done:!0}:{done:!1,value:b[G++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function fi(b,g){for(var p={},G={},U=0,la=b.length;U<la;)G[b[U]]=1,U+=1;for(var pa in g)G.hasOwnProperty(pa)||(p[pa]=g[pa]);return p}function Sm(b,g,p){function G(mb,Gb){mb.propsReady&&(0,mb.propsReady)(0,!1);for(var Wb=xl(pa),Mb;!(Mb=Wb()).done;)Mb=Mb.value,(0,mb[g.required[Mb]])(0,Gb[Mb]);for(Wb=xl(Ga);!(Mb=
Wb()).done;)if(Mb=Mb.value,Mb in Gb)(0,mb[g.optional[Mb]])(0,Gb[Mb]);mb.propsReady&&(0,mb.propsReady)(0,!0)}function U(mb){return Qa.reduce(function(Gb,Wb){Gb[Wb]=function(Mb){(0,mb[g.methods[Wb]])(0,Mb)};return Gb},{})}function la(mb){return Xa.reduce(function(Gb,Wb){Gb[Wb]=Ol(mb[g.events[Wb]]);return Gb},{})}var pa=Object.keys(g.required||{}),Ga=Object.keys(g.optional||{}),Qa=Object.keys(g.methods||{}),Xa=Object.keys(g.events||{}),fb=(0,On.createContext)({});return{Component:(0,On.forwardRef)(function(mb,
Gb){var Wb=mb.children,Mb=wm(mb,eI),dc=(0,On.useState)(function(){return $k(cm(b),function(Ub){return G(Ub,Mb)})})[0],hc=(0,On.useState)(Si(la,dc))[0];Ku(function(){for(var Ub=xl(Xa),nc;!(nc=Ub()).done;)if(nc=nc.value,nc in Mb)(0,hc[nc])(1,Mb[nc]);return function(){Object.values(hc).map(Gh)}},[Mb,hc,dc]);Ku(function(){G(dc,Mb)});(0,On.useImperativeHandle)(Gb,Ne(U(dc)));return(0,On.createElement)(fb.Provider,{value:dc},p?(0,On.createElement)(p,fi([].concat(pa,Ga,Xa),Mb),Wb):Wb)}),usePublisher:function(mb){return(0,On.useCallback)(qm(gj,
(0,On.useContext)(fb)[mb]),[mb])},useEmitterValue:function(mb){var Gb=(0,On.useContext)(fb)[mb];mb=(0,On.useState)(Si(El,Gb));var Wb=mb[0],Mb=mb[1];Ku(function(){return dg(Gb,function(dc){dc!==Wb&&Mb(Ne(dc))})},[Gb,Wb]);return Wb},useEmitter:function(mb,Gb){var Wb=(0,On.useContext)(fb)[mb];Ku(function(){return Wb(1,Gb)},[Gb,Wb])}}}function kg(){return kg=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var p=arguments[g],G;for(G in p)Object.prototype.hasOwnProperty.call(p,G)&&(b[G]=
p[G])}return b},kg.apply(this,arguments)}function zi(b,g){if(null==b)return{};var p,G,U={},la=Object.keys(b);for(G=0;G<la.length;G++)0<=g.indexOf(p=la[G])||(U[p]=b[p]);return U}function sn(b,g){(null==g||g>b.length)&&(g=b.length);for(var p=0,G=Array(g);p<g;p++)G[p]=b[p];return G}function Wl(b,g){var p="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(p)return(p=p.call(b)).next.bind(p);if(Array.isArray(b)||(p=function(U,la){if(U){if("string"==typeof U)return sn(U,la);var pa=Object.prototype.toString.call(U).slice(8,
-1);return"Object"===pa&&U.constructor&&(pa=U.constructor.name),"Map"===pa||"Set"===pa?Array.from(U):"Arguments"===pa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pa)?sn(U,la):void 0}}(b))||g&&b&&"number"==typeof b.length){p&&(b=p);var G=0;return function(){return G>=b.length?{done:!0}:{done:!1,value:b[G++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Gj(b,g){void 0===g&&
(g=!0);var p=(0,ii.useRef)(null),G=function(la){};if("undefined"!=typeof ResizeObserver){var U=new ResizeObserver(function(la){la=la[0].target;null!==la.offsetParent&&b(la)});G=function(la){la&&g?(U.observe(la),p.current=la):(p.current&&U.unobserve(p.current),p.current=null)}}return{ref:p,callbackRef:G}}function Yf(b,g){return void 0===g&&(g=!0),Gj(b,g).callbackRef}function Ti(b,g,p,G,U,la,pa){return Gj(function(Ga){for(var Qa=function(mb,Gb,Wb,Mb){Wb=mb.length;if(0===Wb)return null;for(var dc=[],
hc=0;hc<Wb;hc++){var Ub=mb.item(hc);if(Ub&&void 0!==Ub.dataset.index){var nc=parseInt(Ub.dataset.index),Bc=parseFloat(Ub.dataset.knownSize),Ec=Gb(Ub,"offsetHeight");if(0===Ec&&Mb("Zero-sized element, this should not happen",{child:Ub},Dm.ERROR),Ec!==Bc)Ub=dc[dc.length-1],0===dc.length||Ub.size!==Ec||Ub.endIndex!==nc-1?dc.push({startIndex:nc,endIndex:nc,size:Ec}):dc[dc.length-1].endIndex++}}return dc}(Ga.children,g,0,U),Xa=Ga.parentElement;!Xa.dataset.virtuosoScroller;)Xa=Xa.parentElement;var fb="window"===
Xa.firstElementChild.dataset.viewportType;G({scrollTop:Math.max(pa?pa.scrollTop:fb?window.pageYOffset||document.documentElement.scrollTop:Xa.scrollTop,0),scrollHeight:pa?pa.scrollHeight:fb?document.documentElement.scrollHeight:Xa.scrollHeight,viewportHeight:pa?pa.offsetHeight:fb?window.innerHeight:Xa.offsetHeight});null==la||la(function(mb,Gb,Wb){return"normal"===Gb||null!=Gb&&Gb.endsWith("px")||Wb("row-gap was not resolved to pixel value correctly",Gb,Dm.WARN),"normal"===Gb?0:parseInt(null!=Gb?Gb:
"0",10)}(0,getComputedStyle(Ga).rowGap,U));null!==Qa&&b(Qa)},p)}function gl(b,g){return Math.round(b.getBoundingClientRect()[g])}function Gm(b,g,p,G,U){void 0===G&&(G=Fi);var la=(0,ii.useRef)(null),pa=(0,ii.useRef)(null),Ga=(0,ii.useRef)(null),Qa=(0,ii.useRef)(!1),Xa=(0,ii.useCallback)(function(fb){fb=fb.target;var mb=fb===window||fb===document,Gb=mb?window.pageYOffset||document.documentElement.scrollTop:fb.scrollTop,Wb=mb?document.documentElement.scrollHeight:fb.scrollHeight,Mb=mb?window.innerHeight:
fb.offsetHeight;fb=function(){b({scrollTop:Math.max(Gb,0),scrollHeight:Wb,viewportHeight:Mb})};Qa.current?(0,fI.flushSync)(fb):fb();Qa.current=!1;null!==pa.current&&(Gb===pa.current||0>=Gb||Gb===Wb-Mb)&&(pa.current=null,g(!0),Ga.current&&(clearTimeout(Ga.current),Ga.current=null))},[b,g]);return(0,ii.useEffect)(function(){var fb=U||la.current;return G(U||la.current),Xa({target:fb}),fb.addEventListener("scroll",Xa,{passive:!0}),function(){G(null);fb.removeEventListener("scroll",Xa)}},[la,Xa,p,G,U]),
{scrollerRef:la,scrollByCallback:function(fb){Qa.current=!0;la.current.scrollBy(fb)},scrollToCallback:function(fb){var mb=la.current;if(mb&&!("offsetHeight"in mb&&0===mb.offsetHeight)){var Gb,Wb,Mb,dc="smooth"===fb.behavior;if(mb===window?(Wb=Math.max(gl(document.documentElement,"height"),document.documentElement.scrollHeight),Gb=window.innerHeight,Mb=document.documentElement.scrollTop):(Wb=mb.scrollHeight,Gb=gl(mb,"height"),Mb=mb.scrollTop),fb.top=Math.ceil(Math.max(Math.min(Wb-Gb,fb.top),0)),1.01>
Math.abs(Gb-Wb)||fb.top===Mb)return b({scrollTop:Mb,scrollHeight:Wb,viewportHeight:Gb}),void(dc&&g(!0));dc?(pa.current=fb.top,Ga.current&&clearTimeout(Ga.current),Ga.current=setTimeout(function(){Ga.current=null;pa.current=null;g(!0)},1E3)):pa.current=null;mb.scrollTo(fb)}}}}function y(b,g,p,G,U){return void 0===G&&(G=Pi),void 0===U&&(U=Pi),{k:b,v:g,lvl:p,l:G,r:U}}function W(b,g){if(b===Pi)return Pi;var p=b.k,G=b.l,U=b.r;if(g===p){if(G===Pi)return U;if(U===Pi)return G;g=rb(G);return Dc(Yb(b,{k:g[0],
v:g[1],l:ub(G)}))}return Dc(Yb(b,g<p?{l:W(G,g)}:{r:W(U,g)}))}function xa(b,g,p){return(void 0===p&&(p="k"),b===Pi)?[-Infinity,void 0]:b[p]===g?[b.k,b.v]:b[p]<g?(g=xa(b.r,g,p),-Infinity===g[0]?[b.k,b.v]:g):xa(b.l,g,p)}function ua(b,g,p){return b===Pi?y(g,p,1):g===b.k?Yb(b,{k:g,v:p}):rd(De(Yb(b,g<b.k?{l:ua(b.l,g,p)}:{r:ua(b.r,g,p)})))}function Fa(b,g,p){if(b===Pi)return[];var G=b.k,U=b.v,la=b.r,pa=[];return G>g&&(pa=pa.concat(Fa(b.l,g,p))),G>=g&&G<=p&&pa.push({k:G,v:U}),G<=p&&(pa=pa.concat(Fa(la,g,
p))),pa}function $a(b){return b===Pi?[]:[].concat($a(b.l),[{k:b.k,v:b.v}],$a(b.r))}function rb(b){return b.r===Pi?[b.k,b.v]:rb(b.r)}function ub(b){return b.r===Pi?b.l:Dc(Yb(b,{r:ub(b.r)}))}function Yb(b,g){return y(void 0!==g.k?g.k:b.k,void 0!==g.v?g.v:b.v,void 0!==g.lvl?g.lvl:b.lvl,void 0!==g.l?g.l:b.l,void 0!==g.r?g.r:b.r)}function Cc(b){return b===Pi||b.lvl>b.r.lvl}function Dc(b){var g=b.l,p=b.r,G=b.lvl;if(p.lvl>=G-1&&g.lvl>=G-1)return b;if(G>p.lvl+1){if(Cc(g))return De(Yb(b,{lvl:G-1}));if(g===
Pi||g.r===Pi)throw Error("Unexpected empty nodes");return Yb(g.r,{l:Yb(g,{r:g.r.l}),r:Yb(b,{l:g.r.r,lvl:G-1}),lvl:G})}if(Cc(b))return rd(Yb(b,{lvl:G-1}));if(p===Pi||p.l===Pi)throw Error("Unexpected empty nodes");g=p.l;var U=Cc(g)?p.lvl-1:p.lvl;return Yb(g,{l:Yb(b,{r:g.l,lvl:G-1}),r:rd(Yb(p,{l:g.r,lvl:U})),lvl:g.lvl+1})}function Fd(b,g,p){return b===Pi?[]:Nd(Fa(b,xa(b,g)[0],p),function(G){return{index:G.k,value:G.v}})}function Nd(b,g){var p=b.length;if(0===p)return[];var G=g(b[0]),U=G.index;G=G.value;
for(var la=[],pa=1;pa<p;pa++){var Ga=g(b[pa]),Qa=Ga.index;Ga=Ga.value;la.push({start:U,end:Qa-1,value:G});U=Qa;G=Ga}return la.push({start:U,end:Infinity,value:G}),la}function rd(b){var g=b.r,p=b.lvl;return g===Pi||g.r===Pi||g.lvl!==p||g.r.lvl!==p?b:Yb(g,{l:Yb(b,{r:g.l}),lvl:p+1})}function De(b){var g=b.l;return g===Pi||g.lvl!==b.lvl?b:Yb(g,{r:Yb(b,{l:g.r})})}function Af(b,g,p,G){void 0===G&&(G=0);for(var U=b.length-1;G<=U;){var la=Math.floor((G+U)/2),pa=p(b[la],g);if(0===pa)return la;if(-1===pa){if(2>
U-G)return la-1;U=la-1}else{if(U===G)return la;G=la+1}}throw Error("Failed binary finding record in array - "+b.join(",")+", searched for "+g);}function Ng(b){var g=b.size,p=b.startIndex,G=b.endIndex;return function(U){return U.start===p&&(U.end===G||Infinity===U.end)&&U.value===g}}function uj(b,g){b=b.index;return g===b?0:g<b?-1:1}function xg(b,g){b=b.offset;return g===b?0:g<b?-1:1}function qh(b){return{index:b.index,value:b}}function bi(b,g,p,G){var U=0,la=0,pa=0,Ga;0!==g?(pa=b[Ga=Af(b,g-1,uj)].offset,
la=xa(p,g-1),U=la[0],la=la[1],b.length&&b[Ga].size===xa(p,g)[1]&&--Ga,b=b.slice(0,Ga+1)):b=[];for(g=Wl(Fd(p,g,Infinity));!(p=g()).done;)Ga=p.value,p=Ga.start,Ga=Ga.value,U=p-U,pa=U*la+pa+U*G,b.push({offset:pa,size:Ga,index:p}),U=p,la=Ga;return{offsetTree:b,lastIndex:U,lastOffset:pa,lastSize:la}}function Ci(b,g){var p=g[0],G=g[1],U=g[3];0<p.length&&(0,g[2])("received item sizes",p,Dm.DEBUG);var la=b.sizeTree;g=la;var pa=0;if(0<G.length&&la===Pi&&2===p.length){var Ga=p[0].size,Qa=p[1].size;g=G.reduce(function(fb,
mb){return ua(ua(fb,mb,Ga),mb+1,Qa)},g)}else p=function(fb,mb){var Gb,Wb=fb===Pi?0:Infinity;for(mb=Wl(mb);!(Gb=mb()).done;){var Mb=Gb.value;Gb=Mb.size;var dc=Mb.startIndex,hc=Mb.endIndex;if(Wb=Math.min(Wb,dc),fb===Pi)fb=ua(fb,0,Gb);else{var Ub=Fd(fb,dc-1,hc+1);if(!Ub.some(Ng(Mb))){var nc,Bc=Mb=!1;for(Ub=Wl(Ub);!(nc=Ub()).done;){var Ec=nc.value;nc=Ec.start;var Sc=Ec.end;Ec=Ec.value;Mb?(hc>=nc||Gb===Ec)&&(fb=W(fb,nc)):(Bc=Ec!==Gb,Mb=!0);Sc>hc&&hc>=nc&&Ec!==Gb&&(fb=ua(fb,hc+1,Ec))}Bc&&(fb=ua(fb,dc,Gb))}}}return[fb,
Wb]}(g,p),g=p[0],pa=p[1];if(g===la)return b;b=bi(b.offsetTree,pa,g,U);var Xa=b.offsetTree;return{sizeTree:g,offsetTree:Xa,lastIndex:b.lastIndex,lastOffset:b.lastOffset,lastSize:b.lastSize,groupOffsetTree:G.reduce(function(fb,mb){return ua(fb,mb,Hh(mb,Xa,U))},Pi),groupIndices:G}}function Hh(b,g,p){if(0===g.length)return 0;g=g[Af(g,b,uj)];b-=g.index;b=g.size*b+(b-1)*p+g.offset;return 0<b?b+p:b}function gg(b,g,p){if(void 0!==b.groupIndex)return g.groupIndices[b.groupIndex]+1;b=Rf("LAST"===b.index?p:
b.index,g);return Math.max(0,b,Math.min(p,b))}function Rf(b,g){if(g.groupOffsetTree===Pi)return b;for(var p=0;g.groupIndices[p]<=b+p;)p++;return b+p}function Ch(b){b="number"==typeof b?{index:b}:b;return b.align||(b.align="start"),b.behavior&&jI||(b.behavior="auto"),b.offset||(b.offset=0),b}function kh(b){return!!b&&("smooth"===b?"smooth":"auto")}function Dj(b){return b.reduce(function(g,p){return g.groupIndices.push(g.totalCount),g.totalCount+=p+1,g},{totalCount:0,groupIndices:[]})}function mi(b,
g){return!(!b||b[0]!==g[0]||b[1]!==g[1])}function Yj(b,g){return!(!b||b.startIndex!==g.startIndex||b.endIndex!==g.endIndex)}function Pl(b,g,p){return"number"==typeof b?"up"===p&&"top"===g||"down"===p&&"bottom"===g?b:0:"up"===p?"top"===g?b.main:b.reverse:"bottom"===g?b.main:b.reverse}function Tk(b,g,p){if(0===b.length)return[];if(g.groupOffsetTree===Pi)return b.map(function(Qa){return kg({},Qa,{index:Qa.index+p,originalIndex:Qa.index})});var G,U=[],la=Fd(g.groupOffsetTree,b[0].index,b[b.length-1].index),
pa=void 0,Ga=0;for(b=Wl(b);!(G=b()).done;)G=G.value,(!pa||pa.end<G.index)&&(pa=la.shift(),Ga=g.groupIndices.indexOf(pa.start)),U.push(kg({},G.index===pa.start?{type:"group",index:Ga}:{index:G.index-(Ga+1)+p,groupIndex:Ga},{size:G.size,offset:G.offset,originalIndex:G.index,data:G.data}));return U}function jm(b,g,p,G,U,la){var pa=0,Ga=0;0<b.length&&(pa=b[0].offset,Ga=b[b.length-1],Ga=Ga.offset+Ga.size);var Qa=p-U.lastIndex,Xa=pa;G=U.lastOffset+Qa*U.lastSize+(Qa-1)*G-Ga;return{items:Tk(b,U,la),topItems:Tk(g,
U,la),topListHeight:g.reduce(function(fb,mb){return mb.size+fb},0),offsetTop:pa,offsetBottom:G,top:Xa,bottom:Ga,totalCount:p,firstItemIndex:la}}function bp(b){var g,p=!1;return function(){return p||(p=!0,g=b()),g}}function hn(b,g){var p=(0,ii.useRef)(null),G=(0,ii.useCallback)(function(Qa){if(null!==Qa&&Qa.offsetParent){var Xa=Qa.getBoundingClientRect();Qa=Xa.width;if(g){var fb=g.getBoundingClientRect();Xa=Xa.top-fb.top;fb=fb.height-Math.max(0,Xa);Xa+=g.scrollTop}else fb=window.innerHeight-Math.max(0,
Xa.top),Xa=Xa.top+window.pageYOffset;p.current={offsetTop:Xa,visibleHeight:fb,visibleWidth:Qa};b(p.current)}},[b,g]),U=Gj(G),la=U.callbackRef,pa=U.ref,Ga=(0,ii.useCallback)(function(){G(pa.current)},[G,pa]);return(0,ii.useEffect)(function(){if(g){g.addEventListener("scroll",Ga);var Qa=new ResizeObserver(Ga);return Qa.observe(g),function(){g.removeEventListener("scroll",Ga);Qa.unobserve(g)}}return window.addEventListener("scroll",Ga),window.addEventListener("resize",Ga),function(){window.removeEventListener("scroll",
Ga);window.removeEventListener("resize",Ga)}},[Ga,g]),la}function bh(b){return b}function xm(b,g){var p=Uf();return dg(p,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+g,"color: red;","color: inherit;","color: blue;")}),be(p,b),p}function ci(b,g){if("string"!=typeof b)return{context:g}}function Vn(b){var g=b.usePublisher,p=b.useEmitter,G=b.useEmitterValue;return ih.memo(function(U){var la=U.style,pa=U.children;U=zi(U,xI);var Ga=g("scrollContainerState"),Qa=
G("ScrollerComponent"),Xa=g("smoothScrollTargetReached"),fb=G("scrollerRef"),mb=G("context");Ga=Gm(Ga,Xa,Qa,fb);Xa=Ga.scrollerRef;fb=Ga.scrollByCallback;return p("scrollTo",Ga.scrollToCallback),p("scrollBy",fb),(0,ii.createElement)(Qa,kg({ref:Xa,style:kg({},EI,la),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},U,ci(Qa,mb)),pa)})}function dn(b){var g=b.usePublisher,p=b.useEmitter,G=b.useEmitterValue;return ih.memo(function(U){var la=U.style,pa=U.children;U=zi(U,yI);var Ga=
g("windowScrollContainerState"),Qa=G("ScrollerComponent"),Xa=g("smoothScrollTargetReached"),fb=G("totalListHeight"),mb=G("deviation"),Gb=G("customScrollParent"),Wb=G("context");Xa=Gm(Ga,Xa,Qa,Fi,Gb);var Mb=Xa.scrollerRef;Ga=Xa.scrollByCallback;Xa=Xa.scrollToCallback;return gI(function(){return Mb.current=Gb||window,function(){Mb.current=null}},[Mb,Gb]),p("windowScrollTo",Xa),p("scrollBy",Ga),(0,ii.createElement)(Qa,kg({style:kg({position:"relative"},la,0!==fb?{height:fb+mb}:{}),"data-virtuoso-scroller":!0},
U,ci(Qa,Wb)),pa)})}function Wn(b,g,p){return Array.from({length:g-b+1}).map(function(G,U){return{index:U+b,data:null==p?void 0:p[U+b]}})}function Bo(b,g){return b&&b.column===g.column&&b.row===g.row}function rm(b,g,p,G){var U=p.height;return void 0===U||0===G.length?{top:0,bottom:0}:{top:Tm(b,g,p,G[0].index),bottom:Tm(b,g,p,G[G.length-1].index)+U}}function Tm(b,g,p,G){var U=g.column;b=ks(1,Nu((b.width+U)/(p.width+U)));G=Nu(G/b);p=G*p.height+ks(0,G-1)*g.row;return 0<p?p+g.row:p}function al(b,g,p){return"normal"===
g||null!=g&&g.endsWith("px")||p(b+" was not resolved to pixel value correctly",g,Dm.WARN),"normal"===g?0:parseInt(null!=g?g:"0",10)}function vk(b,g){vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,G){p.__proto__=G;return p};return vk(b,g)}function tn(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;vk(b,g)}function wn(b){wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)};return wn(b)}function vn(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}function Eo(b,g,p){Eo=vn()?Reflect.construct.bind():function(G,U,la){var pa=[null];pa.push.apply(pa,U);G=new (Function.bind.apply(G,pa));la&&vk(G,la.prototype);return G};return Eo.apply(null,arguments)}function Yn(b){var g="function"===typeof Map?new Map:void 0;Yn=function(p){function G(){return Eo(p,
arguments,wn(this).constructor)}if(null===p||-1===Function.toString.call(p).indexOf("[native code]"))return p;if("function"!==typeof p)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof g){if(g.has(p))return g.get(p);g.set(p,G)}G.prototype=Object.create(p.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}});return vk(G,p)};return Yn(b)}function ap(b,g,p){return Math.round(255*b)+","+Math.round(255*g)+","+Math.round(255*p)}function Rk(b,
g,p,G){void 0===G&&(G=ap);if(0===g)return G(p,p,p);b=(b%360+360)%360/60;var U=(1-Math.abs(2*p-1))*g,la=U*(1-Math.abs(b%2-1)),pa=g=0,Ga=0;0<=b&&1>b?(g=U,pa=la):1<=b&&2>b?(g=la,pa=U):2<=b&&3>b?(pa=U,Ga=la):3<=b&&4>b?(pa=la,Ga=U):4<=b&&5>b?(g=la,Ga=U):5<=b&&6>b&&(g=U,Ga=la);p-=U/2;return G(g+p,pa+p,Ga+p)}function sp(b){if("string"!==typeof b)throw new lp(3);if("string"===typeof b){var g=b.toLowerCase();b=vB[g]?"#"+vB[g]:b}if(b.match(iJ))return{red:parseInt(""+b[1]+b[2],16),green:parseInt(""+b[3]+b[4],
16),blue:parseInt(""+b[5]+b[6],16)};if(b.match(jJ))return g=parseFloat((parseInt(""+b[7]+b[8],16)/255).toFixed(2)),{red:parseInt(""+b[1]+b[2],16),green:parseInt(""+b[3]+b[4],16),blue:parseInt(""+b[5]+b[6],16),alpha:g};if(b.match(kJ))return{red:parseInt(""+b[1]+b[1],16),green:parseInt(""+b[2]+b[2],16),blue:parseInt(""+b[3]+b[3],16)};if(b.match(lJ))return g=parseFloat((parseInt(""+b[4]+b[4],16)/255).toFixed(2)),{red:parseInt(""+b[1]+b[1],16),green:parseInt(""+b[2]+b[2],16),blue:parseInt(""+b[3]+b[3],
16),alpha:g};if(g=Ow.exec(b))return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10)};if(g=mJ.exec(b.substring(0,50)))return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10),alpha:1<parseFloat(""+g[4])?parseFloat(""+g[4])/100:parseFloat(""+g[4])};var p=nJ.exec(b);if(p){g=parseInt(""+p[1],10);var G=parseInt(""+p[2],10)/100;p=parseInt(""+p[3],10)/100;g="rgb("+Rk(g,G,p)+")";G=Ow.exec(g);if(!G)throw new lp(4,b,g);return{red:parseInt(""+G[1],10),
green:parseInt(""+G[2],10),blue:parseInt(""+G[3],10)}}if(g=oJ.exec(b.substring(0,50))){G=parseInt(""+g[1],10);p=parseInt(""+g[2],10)/100;var U=parseInt(""+g[3],10)/100;G="rgb("+Rk(G,p,U)+")";p=Ow.exec(G);if(!p)throw new lp(4,b,G);return{red:parseInt(""+p[1],10),green:parseInt(""+p[2],10),blue:parseInt(""+p[3],10),alpha:1<parseFloat(""+g[4])?parseFloat(""+g[4])/100:parseFloat(""+g[4])}}throw new lp(5);}function Km(b){b=b.toString(16);return 1===b.length?"0"+b:b}function en(b,g,p){return Pw("#"+Km(Math.round(255*
b))+Km(Math.round(255*g))+Km(Math.round(255*p)))}function Xn(b,g,p){if("number"===typeof b&&"number"===typeof g&&"number"===typeof p)return Pw("#"+Km(b)+Km(g)+Km(p));if("object"===typeof b&&void 0===g&&void 0===p)return Pw("#"+Km(b.red)+Km(b.green)+Km(b.blue));throw new lp(6);}function Hn(b){if("object"!==typeof b)throw new lp(8);if("number"===typeof b.red&&"number"===typeof b.green&&"number"===typeof b.blue&&"number"===typeof b.alpha){if("object"===typeof b)b=1<=b.alpha?Xn(b.red,b.green,b.blue):
"rgba("+b.red+","+b.green+","+b.blue+","+b.alpha+")";else throw new lp(7);return b}if("number"===typeof b.red&&"number"===typeof b.green&&"number"===typeof b.blue&&("number"!==typeof b.alpha||"undefined"===typeof b.alpha))return Xn(b);if("number"===typeof b.hue&&"number"===typeof b.saturation&&"number"===typeof b.lightness&&"number"===typeof b.alpha){if("object"===typeof b)b=1<=b.alpha?Rk(b.hue,b.saturation,b.lightness,en):"rgba("+Rk(b.hue,b.saturation,b.lightness)+","+b.alpha+")";else throw new lp(2);
return b}if("number"===typeof b.hue&&"number"===typeof b.saturation&&"number"===typeof b.lightness&&("number"!==typeof b.alpha||"undefined"===typeof b.alpha)){if("object"===typeof b)b=Rk(b.hue,b.saturation,b.lightness,en);else throw new lp(1);return b}throw new lp(8);}function Co(b,g,p){return function(){var G=p.concat(Array.prototype.slice.call(arguments));return G.length>=g?b.apply(this,G):Co(b,g,G)}}function Do(b,g){if("transparent"===g)return g;g=sp(g);var p=g.red/255,G=g.green/255,U=g.blue/255,
la=Math.max(p,G,U),pa=Math.min(p,G,U),Ga=(la+pa)/2;if(la===pa)g=void 0!==g.alpha?{hue:0,saturation:0,lightness:Ga,alpha:g.alpha}:{hue:0,saturation:0,lightness:Ga};else{var Qa=la-pa;pa=.5<Ga?Qa/(2-la-pa):Qa/(la+pa);switch(la){case p:p=(G-U)/Qa+(G<U?6:0);break;case G:p=(U-p)/Qa+2;break;default:p=(p-G)/Qa+4}p*=60;g=void 0!==g.alpha?{hue:p,saturation:pa,lightness:Ga,alpha:g.alpha}:{hue:p,saturation:pa,lightness:Ga}}Ga=ff;b=g.lightness-parseFloat(b);return Hn(Ga({},g,{lightness:Math.max(0,Math.min(1,b))}))}
function dm(b,g){var p;void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));void 0!==g.opacity&&(g.opacity=Math.min(1,Math.max(g.opacity,0)));let G=null!=(p=g.fill)?p:b.props.fill;void 0===G||hg(G)||"var(--ls-secondary-background-color)"===G||g.noFill||!OJ.includes(b.props.type)||(b=pJ(.3,G),g.stroke=b);return g}function no({strokeWidth:b,size:g,mode:p}){return"svg"===p?(0,nb.jsx)("rect",{className:"tl-binding-indicator",x:b,y:b,rx:2,ry:2,width:Math.max(0,g[0]-2*b),height:Math.max(0,
g[1]-2*b),strokeWidth:4*b}):(0,nb.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function Vl(){const b=af();return"panning"===b.inputs.state||"pinching"===b.inputs.state}function Um({left:b,middle:g,right:p,stroke:G,strokeWidth:U}){return(0,nb.jsxs)("g",{children:[(0,nb.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${b} L ${g} ${p}`}),(0,nb.jsx)("path",{d:`M ${b} L ${g} ${p}`,fill:"none",
stroke:G,strokeWidth:U,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Zn(b,g,p){g=K(b,g,b,p).points;if(!g)return console.warn("Could not find an intersection for the arrow head."),{left:b,right:b};g=(p=g[0])?je.rotWith(p,b,Math.PI/6):b;b=p?je.rotWith(p,b,-Math.PI/6):b;return{left:g,right:b}}function Fo(b,g,p){const {left:G,right:U}=Zn(b,g,p);return`M ${G} L ${b} ${U}`}function Mo(b,g,p,G,U){b=b.strokeWidth;var la=je.dist(g,p);b=Math.min(la/3,16*b);la=[];la.push(`M ${g} L ${p}`);
G&&la.push(Fo(g,p,b));U&&la.push(Fo(p,g,b));return la.join(" ")}function Cl({id:b,bounds:g,labelSize:p,offset:G,scale:U=1}){return(0,nb.jsx)("defs",{children:(0,nb.jsxs)("mask",{id:b+"_clip",children:[(0,nb.jsx)("rect",{x:-100,y:-100,width:g.width+200,height:g.height+200,fill:"white"}),(0,nb.jsx)("rect",{x:g.width/2-p[0]/2*U+((null==G?void 0:G[0])||0),y:g.height/2-p[1]/2*U+((null==G?void 0:G[1])||0),width:p[0]*U,height:p[1]*U,rx:4*U,ry:4*U,fill:"black"})]})})}function Ko(b,g,p,G=U=>U){return b*G(.5-
g*(.5-p))}function Go(b){return[-b[0],-b[1]]}function yl(b,g){return[b[0]+g[0],b[1]+g[1]]}function wk(b,g){return[b[0]-g[0],b[1]-g[1]]}function zl(b,g){return[b[0]*g,b[1]*g]}function em(b){return[b[1],-b[0]]}function Pp(b,g){return b[0]===g[0]&&b[1]===g[1]}function Ho(b){return b[0]*b[0]+b[1]*b[1]}function Io(b){var g=Math.hypot(b[0],b[1]);return[b[0]/g,b[1]/g]}function La(b,g){return Math.hypot(b[1]-g[1],b[0]-g[0])}function Za(b,g,p){let G=Math.sin(p);p=Math.cos(p);let U=b[0]-g[0];b=b[1]-g[1];return[U*
p-b*G+g[0],U*G+b*p+g[1]]}function Ka(b,g,p){return yl(b,zl(wk(g,b),p))}function hb(b,g,p){return yl(b,zl(g,p))}function Kb(b,g={}){let {size:p=16,smoothing:G=.5,thinning:U=.5,simulatePressure:la=!0,easing:pa=ed=>ed,start:Ga={},end:Qa={},last:Xa=!1}=g,{cap:fb=!0,easing:mb=ed=>ed*(2-ed)}=Ga,{cap:Gb=!0,easing:Wb=ed=>--ed*ed*ed+1}=Qa;if(0===b.length||0>=p)return[];var Mb=b[b.length-1].runningLength;let dc=!1===Ga.taper?0:!0===Ga.taper?Math.max(p,Mb):Ga.taper,hc=!1===Qa.taper?0:!0===Qa.taper?Math.max(p,
Mb):Qa.taper;var Ub=Math.pow(p*G,2);g=[];let nc=[];var Bc=b.slice(0,10).reduce((ed,ld)=>{var $d=ld.pressure;la&&(ld=os(1,ld.distance/p),$d=os(1,1-ld),$d=os(1,ed+.275*($d-ed)*ld));return(ed+$d)/2},b[0].pressure),Ec=Ko(p,U,b[b.length-1].pressure,pa),Sc;let Jd=b[0].vector;var Wd=b[0].point;let ye=Wd;var Fe=Wd;let Ye=ye;var jf=!1;for(var Oe=0;Oe<b.length;Oe++){var {pressure:Be}=b[Oe];let {point:ed,vector:ld,distance:$d,runningLength:Pe}=b[Oe];if(Oe<b.length-1&&3>Mb-Pe)continue;U?(la&&(Ec=os(1,$d/p),Be=
os(1,1-Ec),Be=os(1,Bc+.275*(Be-Bc)*Ec)),Ec=Ko(p,U,Be,pa)):Ec=p/2;void 0===Sc&&(Sc=Ec);var zd=Pe<dc?mb(Pe/dc):1,ad=Mb-Pe<hc?Wb((Mb-Pe)/hc):1;Ec=Math.max(.01,Ec*Math.min(zd,ad));ad=(Oe<b.length-1?b[Oe+1]:b[Oe]).vector;let kf=Oe<b.length-1?ld[0]*ad[0]+ld[1]*ad[1]:1;zd=null!==kf&&0>kf;if(0>ld[0]*Jd[0]+ld[1]*Jd[1]&&!jf||zd){Wd=zl(em(Jd),Ec);for(let Sf=1/13,wf=0;1>=wf;wf+=Sf)Fe=Za(wk(ed,Wd),ed,ut*wf),g.push(Fe),Ye=Za(yl(ed,Wd),ed,ut*-wf),nc.push(Ye);Wd=Fe;ye=Ye;zd&&(jf=!0)}else(jf=!1,Oe===b.length-1)?(Be=
zl(em(ld),Ec),g.push(wk(ed,Be)),nc.push(yl(ed,Be))):(Bc=zl(em(Ka(ad,ld,kf)),Ec),Fe=wk(ed,Bc),(1>=Oe||Ho(wk(Wd,Fe))>Ub)&&(g.push(Fe),Wd=Fe),Ye=yl(ed,Bc),(1>=Oe||Ho(wk(ye,Ye))>Ub)&&(nc.push(Ye),ye=Ye),Bc=Be,Jd=ld)}Mb=b[0].point.slice(0,2);Ub=1<b.length?b[b.length-1].point.slice(0,2):yl(b[0].point,[1,1]);Fe=[];jf=[];if(1===b.length){if(!dc&&!hc||Xa){b=hb(Mb,Io(em(wk(Mb,Ub))),-(Sc||Ec));g=[];for(let ed=1/13,ld=ed;1>=ld;ld+=ed)g.push(Za(b,Mb,2*ut*ld));return g}}else{if(!(dc||hc&&1===b.length))if(fb)for(let ed=
1/13,ld=ed;1>=ld;ld+=ed)Sc=Za(nc[0],Mb,ut*ld),Fe.push(Sc);else Oe=wk(g[0],nc[0]),Sc=zl(Oe,.5),Oe=zl(Oe,.51),Fe.push(wk(Mb,Sc),wk(Mb,Oe),yl(Mb,Oe),yl(Mb,Sc));Sc=em(Go(b[b.length-1].vector));if(hc||dc&&1===b.length)jf.push(Ub);else if(Gb){b=hb(Ub,Sc,Ec);for(let ed=1/29,ld=ed;1>ld;ld+=ed)jf.push(Za(b,Ub,3*ut*ld))}else jf.push(yl(Ub,zl(Sc,Ec)),yl(Ub,zl(Sc,.99*Ec)),wk(Ub,zl(Sc,.99*Ec)),wk(Ub,zl(Sc,Ec)))}return g.concat(jf,nc.reverse(),Fe)}function tc(b,g={}){var p;let {streamline:G=.5,size:U=16,last:la=
!1}=g;if(0===b.length)return[];g=.15+.85*(1-G);b=Array.isArray(b[0])?b:b.map(({x:mb,y:Gb,pressure:Wb=.5})=>[mb,Gb,Wb]);if(2===b.length){var pa=b[1];b=b.slice(0,-1);for(var Ga=1;5>Ga;Ga++)b.push(Ka(b[0],pa,Ga/4))}1===b.length&&(b=[...b,[...yl(b[0],[1,1]),...b[0].slice(2)]]);pa=[{point:[b[0][0],b[0][1]],pressure:0<=b[0][2]?b[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ga=!1;let Qa=0,Xa=pa[0],fb=b.length-1;for(let mb=1;mb<b.length;mb++){let Gb=la&&mb===fb?b[mb].slice(0,2):Ka(Xa.point,b[mb],g);
if(Pp(Xa.point,Gb))continue;let Wb=La(Gb,Xa.point);if(Qa+=Wb,mb<fb&&!Ga){if(Qa<U)continue;Ga=!0}Xa={point:Gb,pressure:0<=b[mb][2]?b[mb][2]:.5,vector:Io(wk(Xa.point,Gb)),distance:Wb,runningLength:Qa};pa.push(Xa)}return pa[0].vector=(null==(p=pa[1])?void 0:p.vector)||[0,0],pa}function Zc(b,g=4/3){return(new ax(b)).exportAsSVG(g)}function Od(b,g=4/3){return(new ax(b)).generatePreviewJsx(void 0,g)}function ie({id:b,type:g,onRemove:p,showContent:G}){const U=af(),{handlers:la}=cI.default.useContext(an);
return(0,nb.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,nb.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,nb.jsx)(hB,{id:b,showReferenceContent:G})}),(0,nb.jsx)("div",{className:"flex-1"}),la.getBlockPageName(b)!==U.currentPage.name&&(0,nb.jsx)(ka,{tooltip:"Open Page",type:"button",onClick:()=>null==la?void 0:la.redirectToPage(b),children:(0,nb.jsx)(Fh,{name:"open-as-page"})}),(0,nb.jsx)(ka,{tooltip:"Open Page in Right Sidebar",
type:"button",onClick:()=>null==la?void 0:la.sidebarAddBlock(b,"B"===g?"block":"page"),children:(0,nb.jsx)(Fh,{name:"move-to-sidebar-right"})}),p&&(0,nb.jsx)(ka,{className:"tl-shape-links-panel-item-remove-button",tooltip:"Remove link",type:"button",onClick:p,children:(0,nb.jsx)(Fh,{name:"x",className:"!translate-y-0"})})]})}function Ge({options:b,value:g,onValueChange:p}){return(0,nb.jsx)(ZB,{className:"tl-toggle-group-input",type:"single",value:g,onValueChange:p,children:b.map(G=>(0,nb.jsx)(ec,
{content:G.tooltip,children:(0,nb.jsx)("div",{className:"inline-block",children:(0,nb.jsx)($B,{className:"tl-toggle-group-input-button",value:G.value,disabled:G.value===g,children:(0,nb.jsx)(Fh,{name:G.icon})})})},G.value))})}function fa({options:b,value:g,onValueChange:p}){return(0,nb.jsx)(ZB,{className:"tl-toggle-group-input",type:"multiple",value:g,onValueChange:p,children:b.map(G=>(0,nb.jsx)($B,{className:"tl-toggle-group-input-button",value:G.value,children:(0,nb.jsx)(Fh,{name:G.icon})},G.value))})}
function va(b){var {toggle:g=!0,pressed:p,onPressedChange:G,className:U,tooltip:la}=b;b=Bf(b,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,nb.jsx)(ec,{content:la,children:(0,nb.jsx)("div",{className:"inline-block",children:(0,nb.jsx)(GJ,rf(oe({},b),{"data-toggle":g,className:"tl-toggle-input"+(U?" "+U:""),pressed:p,onPressedChange:G}))})})}function Wa(b,g){return b.filter(p=>{var G;return null==(G=bx[p.props.type])?void 0:G.includes(g)})}function xb(b){return g=>"mouse"!==
g.pointerType?b(g):void 0}function bc(b){b=b.match(/\.[0-9a-z]+$/i);if(!b)return"unknown";b=b[0].toLowerCase();return lK.includes(b)?"image":mK.includes(b)?"video":"unknown"}function wc(...b){return(...g)=>$h(this,null,function*(){for(const p of b){const G=yield p(...g);if(G&&0<G.length)return G}return null})}function Wc(b,g){return $h(this,null,function*(){return b.types.includes(g)?b instanceof DataTransfer?b.getData(g):yield(yield b.getType(g)).text():null})}function pd(){const {handlers:b}=eC.useContext(an);
return eC.useCallback((g,p)=>$h(this,null,function*(){if(p.shiftKey&&1===g.selectedShapesArray.length){var G=yield navigator.clipboard.read();let U;0<G.length&&(G=(yield(yield G[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(G)&&40===G.length?(G=G.slice(2,-2),ek(G)&&(U=G)):/^\[\[.*\]\]$/.test(G)&&(U=G.slice(2,-2)));if(U){g.selectedShapesArray[0].update({refs:[U]});g.persist();return}}nK(g,p,b)}),[])}function Ad(){const b=pd();return kK.useCallback((g,p)=>$h(this,[g,p],function*(G,
{dataTransfer:U,point:la}){b(G,{point:la,shiftKey:!1,dataTransfer:U,fromDrop:!0})}),[])}function Vd(){const {handlers:b}=fC.useContext(an);return fC.useCallback((g,{text:p,html:G})=>{b.copyToClipboard(p,G)},[])}function Ae(){return oK.default.useCallback(b=>$h(this,null,function*(){setTimeout(()=>{b.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var $e=Object.create,sf=Object.defineProperty,Eg=Object.defineProperties,Ig=Object.getOwnPropertyDescriptor,xi=Object.getOwnPropertyDescriptors,
Ck=Object.getOwnPropertyNames,ak=Object.getOwnPropertySymbols,Vh=Object.getPrototypeOf,Jj=Object.prototype.hasOwnProperty,ul=Object.prototype.propertyIsEnumerable,xn=(b,g,p)=>g in b?sf(b,g,{enumerable:!0,configurable:!0,writable:!0,value:p}):b[g]=p,oe=(b,g)=>{for(var p in g||={})Jj.call(g,p)&&xn(b,p,g[p]);if(ak)for(p of ak(g))ul.call(g,p)&&xn(b,p,g[p]);return b},rf=(b,g)=>Eg(b,xi(g)),Bf=(b,g)=>{var p={},G;for(G in b)Jj.call(b,G)&&0>g.indexOf(G)&&(p[G]=b[G]);if(null!=b&&ak)for(G of ak(b))0>g.indexOf(G)&&
ul.call(b,G)&&(p[G]=b[G]);return p},mh=(b,g)=>function(){return g||(0,b[Ck(b)[0]])((g={exports:{}}).exports,g),g.exports},Hm=(b,g,p,G)=>{if(g&&"object"===typeof g||"function"===typeof g)for(let U of Ck(g))Jj.call(b,U)||U===p||sf(b,U,{get:()=>g[U],enumerable:!(G=Ig(g,U))||G.enumerable});return b},nf=(b,g,p)=>(p=null!=b?$e(Vh(b)):{},Hm(!g&&b&&b.__esModule?p:sf(p,"default",{value:b,enumerable:!0}),b)),de=(b,g,p,G)=>{for(var U=1<G?void 0:G?Ig(g,p):g,la=b.length-1,pa;0<=la;la--)if(pa=b[la])U=(G?pa(g,p,
U):pa(U))||U;G&&U&&sf(g,p,U);return U},ib=(b,g,p)=>{xn(b,"symbol"!==typeof g?g+"":g,p);return p},$h=(b,g,p)=>new Promise((G,U)=>{var la=Qa=>{try{Ga(p.next(Qa))}catch(Xa){U(Xa)}},pa=Qa=>{try{Ga(p.throw(Qa))}catch(Xa){U(Xa)}},Ga=Qa=>Qa.done?G(Qa.value):Promise.resolve(Qa.value).then(la,pa);Ga((p=p.apply(b,g)).next())}),um=mh({["../../node_modules/mousetrap/mousetrap.js"](b,g){(function(p,G,U){function la(hc,Ub,nc){hc.addEventListener?hc.addEventListener(Ub,nc,!1):hc.attachEvent("on"+Ub,nc)}function pa(hc){if("keypress"==
hc.type){var Ub=String.fromCharCode(hc.which);hc.shiftKey||(Ub=Ub.toLowerCase());return Ub}return mb[hc.which]?mb[hc.which]:Gb[hc.which]?Gb[hc.which]:String.fromCharCode(hc.which).toLowerCase()}function Ga(hc){return"shift"==hc||"ctrl"==hc||"alt"==hc||"meta"==hc}function Qa(hc,Ub){var nc,Bc=[];"+"===hc?hc=["+"]:(hc=hc.replace(/\+{2}/g,"+plus"),hc=hc.split("+"));for(nc=0;nc<hc.length;++nc){var Ec=hc[nc];Mb[Ec]&&(Ec=Mb[Ec]);Ub&&"keypress"!=Ub&&Wb[Ec]&&(Ec=Wb[Ec],Bc.push("shift"));Ga(Ec)&&Bc.push(Ec)}hc=
Ec;if(!Ub){if(!dc){dc={};for(var Sc in mb)95<Sc&&112>Sc||mb.hasOwnProperty(Sc)&&(dc[mb[Sc]]=Sc)}Ub=dc[hc]?"keydown":"keypress"}"keypress"==Ub&&Bc.length&&(Ub="keydown");return{key:Ec,modifiers:Bc,action:Ub}}function Xa(hc,Ub){return null===hc||hc===G?!1:hc===Ub?!0:Xa(hc.parentNode,Ub)}function fb(hc){function Ub(Be){Be=Be||{};var zd=!1,ad;for(ad in ye)Be[ad]?zd=!0:ye[ad]=0;zd||(Oe=!1)}function nc(Be,zd,ad,ed,ld,$d){var Pe,kf=[],Sf=ad.type;if(!Wd._callbacks[Be])return[];"keyup"==Sf&&Ga(Be)&&(zd=[Be]);
for(Pe=0;Pe<Wd._callbacks[Be].length;++Pe){var wf=Wd._callbacks[Be][Pe];if((ed||!wf.seq||ye[wf.seq]==wf.level)&&Sf==wf.action){var Gf;(Gf="keypress"==Sf&&!ad.metaKey&&!ad.ctrlKey)||(Gf=wf.modifiers,Gf=zd.sort().join(",")===Gf.sort().join(","));Gf&&(Gf=ed&&wf.seq==ed&&wf.level==$d,(!ed&&wf.combo==ld||Gf)&&Wd._callbacks[Be].splice(Pe,1),kf.push(wf))}}return kf}function Bc(Be,zd,ad,ed){Wd.stopCallback(zd,zd.target||zd.srcElement,ad,ed)||!1!==Be(zd,ad)||(zd.preventDefault?zd.preventDefault():zd.returnValue=
!1,zd.stopPropagation?zd.stopPropagation():zd.cancelBubble=!0)}function Ec(Be){"number"!==typeof Be.which&&(Be.which=Be.keyCode);var zd=pa(Be);if(zd)if("keyup"==Be.type&&Ye===zd)Ye=!1;else{var ad=Wd,ed=ad.handleKey,ld=[];Be.shiftKey&&ld.push("shift");Be.altKey&&ld.push("alt");Be.ctrlKey&&ld.push("ctrl");Be.metaKey&&ld.push("meta");ed.call(ad,zd,ld,Be)}}function Sc(Be,zd,ad,ed){function ld(Sf){return function(){Oe=Sf;++ye[Be];clearTimeout(Fe);Fe=setTimeout(Ub,1E3)}}function $d(Sf){Bc(ad,Sf,Be);"keyup"!==
ed&&(Ye=pa(Sf));setTimeout(Ub,10)}for(var Pe=ye[Be]=0;Pe<zd.length;++Pe){var kf=Pe+1===zd.length?$d:ld(ed||Qa(zd[Pe+1]).action);Jd(zd[Pe],kf,ed,Be,Pe)}}function Jd(Be,zd,ad,ed,ld){Wd._directMap[Be+":"+ad]=zd;Be=Be.replace(/\s+/g," ");var $d=Be.split(" ");1<$d.length?Sc(Be,$d,zd,ad):(ad=Qa(Be,ad),Wd._callbacks[ad.key]=Wd._callbacks[ad.key]||[],nc(ad.key,ad.modifiers,{type:ad.action},ed,Be,ld),Wd._callbacks[ad.key][ed?"unshift":"push"]({callback:zd,modifiers:ad.modifiers,action:ad.action,seq:ed,level:ld,
combo:Be}))}var Wd=this;hc=hc||G;if(!(Wd instanceof fb))return new fb(hc);Wd.target=hc;Wd._callbacks={};Wd._directMap={};var ye={},Fe,Ye=!1,jf=!1,Oe=!1;Wd._handleKey=function(Be,zd,ad){var ed=nc(Be,zd,ad),ld;zd={};var $d=0,Pe=!1;for(ld=0;ld<ed.length;++ld)ed[ld].seq&&($d=Math.max($d,ed[ld].level));for(ld=0;ld<ed.length;++ld)ed[ld].seq?ed[ld].level==$d&&(Pe=!0,zd[ed[ld].seq]=1,Bc(ed[ld].callback,ad,ed[ld].combo,ed[ld].seq)):Pe||Bc(ed[ld].callback,ad,ed[ld].combo);ed="keypress"==ad.type&&jf;ad.type!=
Oe||Ga(Be)||ed||Ub(zd);jf=Pe&&"keydown"==ad.type};Wd._bindMultiple=function(Be,zd,ad){for(var ed=0;ed<Be.length;++ed)Jd(Be[ed],zd,ad)};la(hc,"keypress",Ec);la(hc,"keydown",Ec);la(hc,"keyup",Ec)}if(p){var mb={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},Gb={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"\x3d",
188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Wb={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","\x26":"7","*":"8","(":"9",")":"0",_:"-","+":"\x3d",":":";",'"':"'","\x3c":",","\x3e":".","?":"/","|":"\\"},Mb={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},dc;for(U=1;20>U;++U)mb[111+U]="f"+U;for(U=0;9>=U;++U)mb[U+96]=U.toString();fb.prototype.bind=function(hc,Ub,nc){hc=hc instanceof
Array?hc:[hc];this._bindMultiple.call(this,hc,Ub,nc);return this};fb.prototype.unbind=function(hc,Ub){return this.bind.call(this,hc,function(){},Ub)};fb.prototype.trigger=function(hc,Ub){if(this._directMap[hc+":"+Ub])this._directMap[hc+":"+Ub]({},hc);return this};fb.prototype.reset=function(){this._callbacks={};this._directMap={};return this};fb.prototype.stopCallback=function(hc,Ub){if(-1<(" "+Ub.className+" ").indexOf(" mousetrap ")||Xa(Ub,this.target))return!1;if("composedPath"in hc&&"function"===
typeof hc.composedPath){var nc=hc.composedPath()[0];nc!==hc.target&&(Ub=nc)}return"INPUT"==Ub.tagName||"SELECT"==Ub.tagName||"TEXTAREA"==Ub.tagName||Ub.isContentEditable};fb.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};fb.addKeycodes=function(hc){for(var Ub in hc)hc.hasOwnProperty(Ub)&&(mb[Ub]=hc[Ub]);dc=null};fb.init=function(){var hc=fb(G),Ub;for(Ub in hc)"_"!==Ub.charAt(0)&&(fb[Ub]=function(nc){return function(){return hc[nc].apply(hc,arguments)}}(Ub))};fb.init();
p.Mousetrap=fb;"undefined"!==typeof g&&g.exports&&(g.exports=fb);"function"===typeof define&&define.amd&&define(function(){return fb})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}),Dr=mh({["../../node_modules/rbush/rbush.min.js"](b,g){!function(p,G){"object"==typeof b&&"undefined"!=typeof g?g.exports=G():"function"==typeof define&&define.amd?define(G):(p=p||self).RBush=G()}(b,function(){function p(Ub,nc,Bc,Ec,Sc){!function Oe(Wd,ye,Fe,Ye,jf){for(;Ye>Fe;){if(600<
Ye-Fe){var Be=Ye-Fe+1,zd=ye-Fe+1,ad=Math.log(Be),ed=.5*Math.exp(2*ad/3);ad=.5*Math.sqrt(ad*ed*(Be-ed)/Be)*(0>zd-Be/2?-1:1);Oe(Wd,ye,Math.max(Fe,Math.floor(ye-zd*ed/Be+ad)),Math.min(Ye,Math.floor(ye+(Be-zd)*ed/Be+ad)),jf)}Be=Wd[ye];zd=Fe;ed=Ye;G(Wd,Fe,ye);for(0<jf(Wd[Ye],Be)&&G(Wd,Fe,Ye);zd<ed;){G(Wd,zd,ed);zd++;for(ed--;0>jf(Wd[zd],Be);)zd++;for(;0<jf(Wd[ed],Be);)ed--}0===jf(Wd[Fe],Be)?G(Wd,Fe,ed):G(Wd,++ed,Ye);ed<=ye&&(Fe=ed+1);ye<=ed&&(Ye=ed-1)}}(Ub,nc,Bc||0,Ec||Ub.length-1,Sc||U)}function G(Ub,
nc,Bc){var Ec=Ub[nc];Ub[nc]=Ub[Bc];Ub[Bc]=Ec}function U(Ub,nc){return Ub<nc?-1:Ub>nc?1:0}function la(Ub,nc){pa(Ub,0,Ub.children.length,nc,Ub)}function pa(Ub,nc,Bc,Ec,Sc){Sc||=Mb(null);Sc.minX=1/0;Sc.minY=1/0;Sc.maxX=-1/0;for(Sc.maxY=-1/0;nc<Bc;nc++){var Jd=Ub.children[nc];Ga(Sc,Ub.leaf?Ec(Jd):Jd)}return Sc}function Ga(Ub,nc){return Ub.minX=Math.min(Ub.minX,nc.minX),Ub.minY=Math.min(Ub.minY,nc.minY),Ub.maxX=Math.max(Ub.maxX,nc.maxX),Ub.maxY=Math.max(Ub.maxY,nc.maxY),Ub}function Qa(Ub,nc){return Ub.minX-
nc.minX}function Xa(Ub,nc){return Ub.minY-nc.minY}function fb(Ub){return(Ub.maxX-Ub.minX)*(Ub.maxY-Ub.minY)}function mb(Ub){return Ub.maxX-Ub.minX+(Ub.maxY-Ub.minY)}function Gb(Ub,nc){return Ub.minX<=nc.minX&&Ub.minY<=nc.minY&&nc.maxX<=Ub.maxX&&nc.maxY<=Ub.maxY}function Wb(Ub,nc){return nc.minX<=Ub.maxX&&nc.minY<=Ub.maxY&&nc.maxX>=Ub.minX&&nc.maxY>=Ub.minY}function Mb(Ub){return{children:Ub,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function dc(Ub,nc,Bc,Ec,Sc){for(var Jd=[nc,Bc];Jd.length;)if(!((Bc=
Jd.pop())-(nc=Jd.pop())<=Ec)){var Wd=nc+Math.ceil((Bc-nc)/Ec/2)*Ec;p(Ub,Wd,nc,Bc,Sc);Jd.push(nc,Wd,Wd,Bc)}}var hc=function(Ub){void 0===Ub&&(Ub=9);this._maxEntries=Math.max(4,Ub);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return hc.prototype.all=function(){return this._all(this.data,[])},hc.prototype.search=function(Ub){var nc=this.data,Bc=[];if(!Wb(Ub,nc))return Bc;for(var Ec=this.toBBox,Sc=[];nc;){for(var Jd=0;Jd<nc.children.length;Jd++){var Wd=nc.children[Jd],ye=
nc.leaf?Ec(Wd):Wd;Wb(Ub,ye)&&(nc.leaf?Bc.push(Wd):Gb(Ub,ye)?this._all(Wd,Bc):Sc.push(Wd))}nc=Sc.pop()}return Bc},hc.prototype.collides=function(Ub){var nc=this.data;if(!Wb(Ub,nc))return!1;for(var Bc=[];nc;){for(var Ec=0;Ec<nc.children.length;Ec++){var Sc=nc.children[Ec],Jd=nc.leaf?this.toBBox(Sc):Sc;if(Wb(Ub,Jd)){if(nc.leaf||Gb(Ub,Jd))return!0;Bc.push(Sc)}}nc=Bc.pop()}return!1},hc.prototype.load=function(Ub){if(!Ub||!Ub.length)return this;if(Ub.length<this._minEntries){for(var nc=0;nc<Ub.length;nc++)this.insert(Ub[nc]);
return this}Ub=this._build(Ub.slice(),0,Ub.length-1,0);this.data.children.length?this.data.height===Ub.height?this._splitRoot(this.data,Ub):(this.data.height<Ub.height&&(nc=this.data,this.data=Ub,Ub=nc),this._insert(Ub,this.data.height-Ub.height-1,!0)):this.data=Ub;return this},hc.prototype.insert=function(Ub){return Ub&&this._insert(Ub,this.data.height-1),this},hc.prototype.clear=function(){return this.data=Mb([]),this},hc.prototype.remove=function(Ub,nc){if(!Ub)return this;for(var Bc,Ec,Sc,Jd=this.data,
Wd=this.toBBox(Ub),ye=[],Fe=[];Jd||ye.length;){if(Jd||(Jd=ye.pop(),Ec=ye[ye.length-1],Bc=Fe.pop(),Sc=!0),Jd.leaf){a:{var Ye=Ub;var jf=Jd.children,Oe=nc;if(Oe){for(var Be=0;Be<jf.length;Be++)if(Oe(Ye,jf[Be])){Ye=Be;break a}Ye=-1}else Ye=jf.indexOf(Ye)}if(-1!==Ye)return Jd.children.splice(Ye,1),ye.push(Jd),this._condense(ye),this}Sc||Jd.leaf||!Gb(Jd,Wd)?Ec?(Bc++,Jd=Ec.children[Bc],Sc=!1):Jd=null:(ye.push(Jd),Fe.push(Bc),Bc=0,Ec=Jd,Jd=Jd.children[0])}return this},hc.prototype.toBBox=function(Ub){return Ub},
hc.prototype.compareMinX=function(Ub,nc){return Ub.minX-nc.minX},hc.prototype.compareMinY=function(Ub,nc){return Ub.minY-nc.minY},hc.prototype.toJSON=function(){return this.data},hc.prototype.fromJSON=function(Ub){return this.data=Ub,this},hc.prototype._all=function(Ub,nc){for(var Bc=[];Ub;)Ub.leaf?nc.push.apply(nc,Ub.children):Bc.push.apply(Bc,Ub.children),Ub=Bc.pop();return nc},hc.prototype._build=function(Ub,nc,Bc,Ec){var Sc,Jd=Bc-nc+1,Wd=this._maxEntries;if(Jd<=Wd)return la(Sc=Mb(Ub.slice(nc,
Bc+1)),this.toBBox),Sc;Ec||(Ec=Math.ceil(Math.log(Jd)/Math.log(Wd)),Wd=Math.ceil(Jd/Math.pow(Wd,Ec-1)));(Sc=Mb([])).leaf=!1;Sc.height=Ec;Jd=Math.ceil(Jd/Wd);Wd=Jd*Math.ceil(Math.sqrt(Wd));for(dc(Ub,nc,Bc,Wd,this.compareMinX);nc<=Bc;nc+=Wd){var ye=Math.min(nc+Wd-1,Bc);dc(Ub,nc,ye,Jd,this.compareMinY);for(var Fe=nc;Fe<=ye;Fe+=Jd)Sc.children.push(this._build(Ub,Fe,Math.min(Fe+Jd-1,ye),Ec-1))}return la(Sc,this.toBBox),Sc},hc.prototype._chooseSubtree=function(Ub,nc,Bc,Ec){for(;Ec.push(nc),!nc.leaf&&Ec.length-
1!==Bc;){for(var Sc=1/0,Jd=1/0,Wd=void 0,ye=0;ye<nc.children.length;ye++){var Fe=nc.children[ye],Ye=fb(Fe),jf=(Oe=Ub,Be=Fe,(Math.max(Be.maxX,Oe.maxX)-Math.min(Be.minX,Oe.minX))*(Math.max(Be.maxY,Oe.maxY)-Math.min(Be.minY,Oe.minY))-Ye);jf<Jd?(Jd=jf,Sc=Ye<Sc?Ye:Sc,Wd=Fe):jf===Jd&&Ye<Sc&&(Sc=Ye,Wd=Fe)}nc=Wd||nc.children[0]}var Oe,Be;return nc},hc.prototype._insert=function(Ub,nc,Bc){Bc=Bc?Ub:this.toBBox(Ub);var Ec=[],Sc=this._chooseSubtree(Bc,this.data,nc,Ec);Sc.children.push(Ub);for(Ga(Sc,Bc);0<=nc&&
Ec[nc].children.length>this._maxEntries;)this._split(Ec,nc),nc--;this._adjustParentBBoxes(Bc,Ec,nc)},hc.prototype._split=function(Ub,nc){var Bc=Ub[nc],Ec=Bc.children.length,Sc=this._minEntries;this._chooseSplitAxis(Bc,Sc,Ec);Ec=this._chooseSplitIndex(Bc,Sc,Ec);Ec=Mb(Bc.children.splice(Ec,Bc.children.length-Ec));Ec.height=Bc.height;Ec.leaf=Bc.leaf;la(Bc,this.toBBox);la(Ec,this.toBBox);nc?Ub[nc-1].children.push(Ec):this._splitRoot(Bc,Ec)},hc.prototype._splitRoot=function(Ub,nc){this.data=Mb([Ub,nc]);
this.data.height=Ub.height+1;this.data.leaf=!1;la(this.data,this.toBBox)},hc.prototype._chooseSplitIndex=function(Ub,nc,Bc){for(var Ec,Sc,Jd,Wd,ye,Fe,Ye,jf=1/0,Oe=1/0,Be=nc;Be<=Bc-nc;Be++){var zd=pa(Ub,0,Be,this.toBBox),ad=pa(Ub,Be,Bc,this.toBBox),ed=(Sc=zd,Jd=ad,Wd=void 0,ye=void 0,Fe=void 0,Ye=void 0,Wd=Math.max(Sc.minX,Jd.minX),ye=Math.max(Sc.minY,Jd.minY),Fe=Math.min(Sc.maxX,Jd.maxX),Ye=Math.min(Sc.maxY,Jd.maxY),Math.max(0,Fe-Wd)*Math.max(0,Ye-ye));zd=fb(zd)+fb(ad);ed<jf?(jf=ed,Ec=Be,Oe=zd<Oe?
zd:Oe):ed===jf&&zd<Oe&&(Oe=zd,Ec=Be)}return Ec||Bc-nc},hc.prototype._chooseSplitAxis=function(Ub,nc,Bc){var Ec=Ub.leaf?this.compareMinX:Qa,Sc=Ub.leaf?this.compareMinY:Xa;this._allDistMargin(Ub,nc,Bc,Ec)<this._allDistMargin(Ub,nc,Bc,Sc)&&Ub.children.sort(Ec)},hc.prototype._allDistMargin=function(Ub,nc,Bc,Ec){Ub.children.sort(Ec);Ec=this.toBBox;for(var Sc=pa(Ub,0,nc,Ec),Jd=pa(Ub,Bc-nc,Bc,Ec),Wd=mb(Sc)+mb(Jd),ye=nc;ye<Bc-nc;ye++){var Fe=Ub.children[ye];Ga(Sc,Ub.leaf?Ec(Fe):Fe);Wd+=mb(Sc)}for(Bc=Bc-nc-
1;Bc>=nc;Bc--)Sc=Ub.children[Bc],Ga(Jd,Ub.leaf?Ec(Sc):Sc),Wd+=mb(Jd);return Wd},hc.prototype._adjustParentBBoxes=function(Ub,nc,Bc){for(;0<=Bc;Bc--)Ga(nc[Bc],Ub)},hc.prototype._condense=function(Ub){for(var nc=Ub.length-1,Bc=void 0;0<=nc;nc--)0===Ub[nc].children.length?0<nc?(Bc=Ub[nc-1].children).splice(Bc.indexOf(Ub[nc]),1):this.clear():la(Ub[nc],this.toBBox)},hc})}}),Sp=mh({["../../node_modules/fast-deep-equal/index.js"](b,g){g.exports=function la(G,U){if(G===U)return!0;if(G&&U&&"object"==typeof G&&
"object"==typeof U){if(G.constructor!==U.constructor)return!1;var pa;if(Array.isArray(G)){var Ga=G.length;if(Ga!=U.length)return!1;for(pa=Ga;0!==pa--;)if(!la(G[pa],U[pa]))return!1;return!0}if(G.constructor===RegExp)return G.source===U.source&&G.flags===U.flags;if(G.valueOf!==Object.prototype.valueOf)return G.valueOf()===U.valueOf();if(G.toString!==Object.prototype.toString)return G.toString()===U.toString();var Qa=Object.keys(G);Ga=Qa.length;if(Ga!==Object.keys(U).length)return!1;for(pa=Ga;0!==pa--;)if(!Object.prototype.hasOwnProperty.call(U,
Qa[pa]))return!1;for(pa=Ga;0!==pa--;)if(Ga=Qa[pa],!la(G[Ga],U[Ga]))return!1;return!0}return G!==G&&U!==U}}}),Lq=mh({["../../../node_modules/deepmerge/dist/cjs.js"](b,g){function p(mb,Gb){return!1!==Gb.clone&&Gb.isMergeableObject(mb)?Qa(Array.isArray(mb)?[]:{},mb,Gb):mb}function G(mb,Gb,Wb){return mb.concat(Gb).map(function(Mb){return p(Mb,Wb)})}function U(mb){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(mb).filter(function(Gb){return mb.propertyIsEnumerable(Gb)}):[]}function la(mb){return Object.keys(mb).concat(U(mb))}
function pa(mb,Gb){try{return Gb in mb}catch(Wb){return!1}}function Ga(mb,Gb,Wb){var Mb={};Wb.isMergeableObject(mb)&&la(mb).forEach(function(dc){Mb[dc]=p(mb[dc],Wb)});la(Gb).forEach(function(dc){if(!pa(mb,dc)||Object.hasOwnProperty.call(mb,dc)&&Object.propertyIsEnumerable.call(mb,dc))if(pa(mb,dc)&&Wb.isMergeableObject(Gb[dc])){if(Wb.customMerge){var hc=Wb.customMerge(dc);hc="function"===typeof hc?hc:Qa}else hc=Qa;Mb[dc]=hc(mb[dc],Gb[dc],Wb)}else Mb[dc]=p(Gb[dc],Wb)});return Mb}function Qa(mb,Gb,Wb){Wb=
Wb||{};Wb.arrayMerge=Wb.arrayMerge||G;Wb.isMergeableObject=Wb.isMergeableObject||Xa;Wb.cloneUnlessOtherwiseSpecified=p;var Mb=Array.isArray(Gb),dc=Array.isArray(mb);return Mb!==dc?p(Gb,Wb):Mb?Wb.arrayMerge(mb,Gb,Wb):Ga(mb,Gb,Wb)}var Xa=function(mb){var Gb;if(Gb=!!mb&&"object"===typeof mb)Gb=Object.prototype.toString.call(mb),Gb=!("[object RegExp]"===Gb||"[object Date]"===Gb||mb.$$typeof===fb);return Gb},fb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Qa.all=function(mb,
Gb){if(!Array.isArray(mb))throw Error("first argument should be an array");return mb.reduce(function(Wb,Mb){return Qa(Wb,Mb,Gb)},{})};g.exports=Qa}}),Qp=mh({["../../node_modules/tslib/tslib.js"](b,g){var p,G,U,la,pa,Ga,Qa,Xa,fb,mb,Gb,Wb,Mb,dc,hc,Ub,nc,Bc,Ec,Sc,Jd,Wd,ye,Fe,Ye;(function(jf){function Oe(zd,ad){zd!==Be&&("function"===typeof Object.create?Object.defineProperty(zd,"__esModule",{value:!0}):zd.__esModule=!0);return function(ed,ld){return zd[ed]=ad?ad(ed,ld):ld}}var Be="object"===typeof wa?
wa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(zd){jf(Oe(Be,Oe(zd)))}):"object"===typeof g&&"object"===typeof g.exports?jf(Oe(Be,Oe(g.exports))):jf(Oe(Be))})(function(jf){var Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(zd,ad){zd.__proto__=ad}||function(zd,ad){for(var ed in ad)Object.prototype.hasOwnProperty.call(ad,ed)&&(zd[ed]=ad[ed])};p=function(zd,ad){function ed(){this.constructor=
zd}if("function"!==typeof ad&&null!==ad)throw new TypeError("Class extends value "+String(ad)+" is not a constructor or null");Oe(zd,ad);zd.prototype=null===ad?Object.create(ad):(ed.prototype=ad.prototype,new ed)};G=Object.assign||function(zd){for(var ad,ed=1,ld=arguments.length;ed<ld;ed++){ad=arguments[ed];for(var $d in ad)Object.prototype.hasOwnProperty.call(ad,$d)&&(zd[$d]=ad[$d])}return zd};U=function(zd,ad){var ed={},ld;for(ld in zd)Object.prototype.hasOwnProperty.call(zd,ld)&&0>ad.indexOf(ld)&&
(ed[ld]=zd[ld]);if(null!=zd&&"function"===typeof Object.getOwnPropertySymbols){var $d=0;for(ld=Object.getOwnPropertySymbols(zd);$d<ld.length;$d++)0>ad.indexOf(ld[$d])&&Object.prototype.propertyIsEnumerable.call(zd,ld[$d])&&(ed[ld[$d]]=zd[ld[$d]])}return ed};la=function(zd,ad,ed,ld){var $d=arguments.length,Pe=3>$d?ad:null===ld?ld=Object.getOwnPropertyDescriptor(ad,ed):ld,kf;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)Pe=Reflect.decorate(zd,ad,ed,ld);else for(var Sf=zd.length-
1;0<=Sf;Sf--)if(kf=zd[Sf])Pe=(3>$d?kf(Pe):3<$d?kf(ad,ed,Pe):kf(ad,ed))||Pe;return 3<$d&&Pe&&Object.defineProperty(ad,ed,Pe),Pe};pa=function(zd,ad){return function(ed,ld){ad(ed,ld,zd)}};Ga=function(zd,ad){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(zd,ad)};Qa=function(zd,ad,ed,ld){function $d(Pe){return Pe instanceof ed?Pe:new ed(function(kf){kf(Pe)})}return new (ed||=Promise)(function(Pe,kf){function Sf(jh){try{Gf(ld.next(jh))}catch(Ef){kf(Ef)}}function wf(jh){try{Gf(ld["throw"](jh))}catch(Ef){kf(Ef)}}
function Gf(jh){jh.done?Pe(jh.value):$d(jh.value).then(Sf,wf)}Gf((ld=ld.apply(zd,ad||[])).next())})};Xa=function(zd,ad){function ed(Gf){return function(jh){return ld([Gf,jh])}}function ld(Gf){if(Pe)throw new TypeError("Generator is already executing.");for(;$d;)try{if(Pe=1,kf&&(Sf=Gf[0]&2?kf["return"]:Gf[0]?kf["throw"]||((Sf=kf["return"])&&Sf.call(kf),0):kf.next)&&!(Sf=Sf.call(kf,Gf[1])).done)return Sf;if(kf=0,Sf)Gf=[Gf[0]&2,Sf.value];switch(Gf[0]){case 0:case 1:Sf=Gf;break;case 4:return $d.label++,
{value:Gf[1],done:!1};case 5:$d.label++;kf=Gf[1];Gf=[0];continue;case 7:Gf=$d.ops.pop();$d.trys.pop();continue;default:if(!(Sf=$d.trys,Sf=0<Sf.length&&Sf[Sf.length-1])&&(6===Gf[0]||2===Gf[0])){$d=0;continue}if(3===Gf[0]&&(!Sf||Gf[1]>Sf[0]&&Gf[1]<Sf[3]))$d.label=Gf[1];else if(6===Gf[0]&&$d.label<Sf[1])$d.label=Sf[1],Sf=Gf;else if(Sf&&$d.label<Sf[2])$d.label=Sf[2],$d.ops.push(Gf);else{Sf[2]&&$d.ops.pop();$d.trys.pop();continue}}Gf=ad.call(zd,$d)}catch(jh){Gf=[6,jh],kf=0}finally{Pe=Sf=0}if(Gf[0]&5)throw Gf[1];
return{value:Gf[0]?Gf[1]:void 0,done:!0}}var $d={label:0,sent:function(){if(Sf[0]&1)throw Sf[1];return Sf[1]},trys:[],ops:[]},Pe,kf,Sf,wf;return wf={next:ed(0),"throw":ed(1),"return":ed(2)},"function"===typeof Symbol&&(wf[Symbol.iterator]=function(){return this}),wf};fb=function(zd,ad){for(var ed in zd)"default"===ed||Object.prototype.hasOwnProperty.call(ad,ed)||Ye(ad,zd,ed)};Ye=Object.create?function(zd,ad,ed,ld){void 0===ld&&(ld=ed);var $d=Object.getOwnPropertyDescriptor(ad,ed);if(!$d||("get"in
$d?!ad.__esModule:$d.writable||$d.configurable))$d={enumerable:!0,get:function(){return ad[ed]}};Object.defineProperty(zd,ld,$d)}:function(zd,ad,ed,ld){void 0===ld&&(ld=ed);zd[ld]=ad[ed]};mb=function(zd){var ad="function"===typeof Symbol&&Symbol.iterator,ed=ad&&zd[ad],ld=0;if(ed)return ed.call(zd);if(zd&&"number"===typeof zd.length)return{next:function(){zd&&ld>=zd.length&&(zd=void 0);return{value:zd&&zd[ld++],done:!zd}}};throw new TypeError(ad?"Object is not iterable.":"Symbol.iterator is not defined.");
};Gb=function(zd,ad){var ed="function"===typeof Symbol&&zd[Symbol.iterator];if(!ed)return zd;zd=ed.call(zd);var ld,$d=[];try{for(;(void 0===ad||0<ad--)&&!(ld=zd.next()).done;)$d.push(ld.value)}catch(kf){var Pe={error:kf}}finally{try{ld&&!ld.done&&(ed=zd["return"])&&ed.call(zd)}finally{if(Pe)throw Pe.error;}}return $d};Wb=function(){for(var zd=[],ad=0;ad<arguments.length;ad++)zd=zd.concat(Gb(arguments[ad]));return zd};Mb=function(){for(var zd=0,ad=0,ed=arguments.length;ad<ed;ad++)zd+=arguments[ad].length;
zd=Array(zd);var ld=0;for(ad=0;ad<ed;ad++)for(var $d=arguments[ad],Pe=0,kf=$d.length;Pe<kf;Pe++,ld++)zd[ld]=$d[Pe];return zd};dc=function(zd,ad,ed){if(ed||2===arguments.length)for(var ld=0,$d=ad.length,Pe;ld<$d;ld++)!Pe&&ld in ad||(Pe||=Array.prototype.slice.call(ad,0,ld),Pe[ld]=ad[ld]);return zd.concat(Pe||Array.prototype.slice.call(ad))};hc=function(zd){return this instanceof hc?(this.v=zd,this):new hc(zd)};Ub=function(zd,ad,ed){function ld(Ef){wf[Ef]&&(Gf[Ef]=function(lh){return new Promise(function(vh,
pj){1<jh.push([Ef,lh,vh,pj])||$d(Ef,lh)})})}function $d(Ef,lh){try{var vh=wf[Ef](lh);vh.value instanceof hc?Promise.resolve(vh.value.v).then(Pe,kf):Sf(jh[0][2],vh)}catch(pj){Sf(jh[0][3],pj)}}function Pe(Ef){$d("next",Ef)}function kf(Ef){$d("throw",Ef)}function Sf(Ef,lh){(Ef(lh),jh.shift(),jh.length)&&$d(jh[0][0],jh[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var wf=ed.apply(zd,ad||[]),Gf,jh=[];return Gf={},ld("next"),ld("throw"),ld("return"),Gf[Symbol.asyncIterator]=
function(){return this},Gf};nc=function(zd){function ad($d,Pe){ed[$d]=zd[$d]?function(kf){return(ld=!ld)?{value:hc(zd[$d](kf)),done:"return"===$d}:Pe?Pe(kf):kf}:Pe}var ed,ld;return ed={},ad("next"),ad("throw",function($d){throw $d;}),ad("return"),ed[Symbol.iterator]=function(){return this},ed};Bc=function(zd){function ad(Pe){$d[Pe]=zd[Pe]&&function(kf){return new Promise(function(Sf,wf){kf=zd[Pe](kf);ed(Sf,wf,kf.done,kf.value)})}}function ed(Pe,kf,Sf,wf){Promise.resolve(wf).then(function(Gf){Pe({value:Gf,
done:Sf})},kf)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ld=zd[Symbol.asyncIterator],$d;return ld?ld.call(zd):(zd="function"===typeof mb?mb(zd):zd[Symbol.iterator](),$d={},ad("next"),ad("throw"),ad("return"),$d[Symbol.asyncIterator]=function(){return this},$d)};Ec=function(zd,ad){Object.defineProperty?Object.defineProperty(zd,"raw",{value:ad}):zd.raw=ad;return zd};var Be=Object.create?function(zd,ad){Object.defineProperty(zd,"default",{enumerable:!0,
value:ad})}:function(zd,ad){zd["default"]=ad};Sc=function(zd){if(zd&&zd.__esModule)return zd;var ad={};if(null!=zd)for(var ed in zd)"default"!==ed&&Object.prototype.hasOwnProperty.call(zd,ed)&&Ye(ad,zd,ed);Be(ad,zd);return ad};Jd=function(zd){return zd&&zd.__esModule?zd:{"default":zd}};Wd=function(zd,ad,ed,ld){if("a"===ed&&!ld)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof ad?zd!==ad||!ld:!ad.has(zd))throw new TypeError("Cannot read private member from an object whose class did not declare it");
return"m"===ed?ld:"a"===ed?ld.call(zd):ld?ld.value:ad.get(zd)};ye=function(zd,ad,ed,ld,$d){if("m"===ld)throw new TypeError("Private method is not writable");if("a"===ld&&!$d)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof ad?zd!==ad||!$d:!ad.has(zd))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===ld?$d.call(zd,ed):$d?$d.value=ed:ad.set(zd,ed),ed};Fe=function(zd,ad){if(null===ad||"object"!==typeof ad&&
"function"!==typeof ad)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof zd?ad===zd:zd.has(ad)};jf("__extends",p);jf("__assign",G);jf("__rest",U);jf("__decorate",la);jf("__param",pa);jf("__metadata",Ga);jf("__awaiter",Qa);jf("__generator",Xa);jf("__exportStar",fb);jf("__createBinding",Ye);jf("__values",mb);jf("__read",Gb);jf("__spread",Wb);jf("__spreadArrays",Mb);jf("__spreadArray",dc);jf("__await",hc);jf("__asyncGenerator",Ub);jf("__asyncDelegator",nc);jf("__asyncValues",
Bc);jf("__makeTemplateObject",Ec);jf("__importStar",Sc);jf("__importDefault",Jd);jf("__classPrivateFieldGet",Wd);jf("__classPrivateFieldSet",ye);jf("__classPrivateFieldIn",Fe)})}}),Er={};((b,g)=>{for(var p in g)sf(b,p,{get:g[p],enumerable:!0})})(Er,{App:()=>tK,PreviewManager:()=>ax,generateJSXFromModel:()=>Od,generateSVGFromModel:()=>Zc});Ta.exports=(b=>Hm(sf({},"__esModule",{value:!0}),b))(Er);var Mq=(b=>{b.Yellow="yellow";b.Red="red";b.Pink="pink";b.Green="green";b.Blue="blue";b.Purple="purple";
b.Gray="gray";b.Default="";return b})(Mq||{}),Rp,Ps=new Uint8Array(16),vg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Dl=[];for(let b=0;256>b;++b)Dl.push((b+256).toString(16).slice(1));var Br,In,po=0,rp=0,Hk=function(b,g,p){p=g&&p||0;const G=g||Array(16);b=b||{};let U=b.node||Br;var la=void 0!==b.clockseq?b.clockseq:In;if(null==U||null==la){var pa=b.random||(b.rng||q)();null==U&&(U=Br=[pa[0]|1,pa[1],pa[2],pa[3],pa[4],pa[5]]);
null==la&&(la=In=(pa[6]<<8|pa[7])&16383)}pa=void 0!==b.msecs?b.msecs:Date.now();let Ga=void 0!==b.nsecs?b.nsecs:rp+1;const Qa=pa-po+(Ga-rp)/1E4;0>Qa&&void 0===b.clockseq&&(la=la+1&16383);(0>Qa||pa>po)&&void 0===b.nsecs&&(Ga=0);if(1E4<=Ga)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");po=pa;rp=Ga;In=la;pa+=122192928E5;b=(1E4*(pa&268435455)+Ga)%4294967296;G[p++]=b>>>24&255;G[p++]=b>>>16&255;G[p++]=b>>>8&255;G[p++]=b&255;b=pa/4294967296*1E4&268435455;G[p++]=b>>>8&255;G[p++]=b&255;G[p++]=
b>>>24&15|16;G[p++]=b>>>16&255;G[p++]=la>>>8|128;G[p++]=la&255;for(la=0;6>la;++la)G[p+la]=U[la];return g||R(G)},nh=class{static clamp(b,g,p){return Math.max(g,"undefined"!==typeof p?Math.min(b,p):b)}static clampV(b,g,p){return b.map(G=>p?nh.clamp(G,g,p):nh.clamp(G,g))}static cross(b,g,p){return(g[0]-b[0])*(p[1]-b[1])-(p[0]-b[0])*(g[1]-b[1])}static snap(b,g=1){return[Math.round(b[0]/g)*g,Math.round(b[1]/g)*g]}},Id=nh;Id.neg=b=>[-b[0],-b[1]];Id.add=(b,g)=>[b[0]+g[0],b[1]+g[1]];Id.addScalar=(b,g)=>[b[0]+
g,b[1]+g];Id.sub=(b,g)=>[b[0]-g[0],b[1]-g[1]];Id.subScalar=(b,g)=>[b[0]-g,b[1]-g];Id.vec=(b,g)=>[g[0]-b[0],g[1]-b[1]];Id.mul=(b,g)=>[b[0]*g,b[1]*g];Id.mulV=(b,g)=>[b[0]*g[0],b[1]*g[1]];Id.div=(b,g)=>[b[0]/g,b[1]/g];Id.divV=(b,g)=>[b[0]/g[0],b[1]/g[1]];Id.per=b=>[b[1],-b[0]];Id.dpr=(b,g)=>b[0]*g[0]+b[1]*g[1];Id.cpr=(b,g)=>b[0]*g[1]-g[0]*b[1];Id.len2=b=>b[0]*b[0]+b[1]*b[1];Id.len=b=>Math.hypot(b[0],b[1]);Id.pry=(b,g)=>nh.dpr(b,g)/nh.len(g);Id.uni=b=>nh.div(b,nh.len(b));Id.normalize=b=>nh.uni(b);Id.tangent=
(b,g)=>nh.uni(nh.sub(b,g));Id.dist2=(b,g)=>nh.len2(nh.sub(b,g));Id.dist=(b,g)=>Math.hypot(b[1]-g[1],b[0]-g[0]);Id.fastDist=(b,g)=>{b=[g[0]-b[0],g[1]-b[1]];g=[Math.abs(b[0]),Math.abs(b[1])];let p=1/Math.max(g[0],g[1]);p*=1.29289-(g[0]+g[1])*p*.29289;return[b[0]*p,b[1]*p]};Id.ang=(b,g)=>Math.atan2(nh.cpr(b,g),nh.dpr(b,g));Id.angle=(b,g)=>Math.atan2(g[1]-b[1],g[0]-b[0]);Id.med=(b,g)=>nh.mul(nh.add(b,g),.5);Id.rot=(b,g=0)=>[b[0]*Math.cos(g)-b[1]*Math.sin(g),b[0]*Math.sin(g)+b[1]*Math.cos(g)];Id.rotWith=
(b,g,p=0)=>{if(0===p)return b;const G=Math.sin(p);p=Math.cos(p);const U=b[0]-g[0];b=b[1]-g[1];return[U*p-b*G+g[0],U*G+b*p+g[1]]};Id.isEqual=(b,g)=>b[0]===g[0]&&b[1]===g[1];Id.lrp=(b,g,p)=>nh.add(b,nh.mul(nh.sub(g,b),p));Id.int=(b,g,p,G,U=1)=>{p=(nh.clamp(p,G)-p)/(G-p);return nh.add(nh.mul(b,1-p),nh.mul(g,U))};Id.ang3=(b,g,p)=>{b=nh.vec(g,b);g=nh.vec(g,p);return nh.ang(b,g)};Id.abs=b=>[Math.abs(b[0]),Math.abs(b[1])];Id.rescale=(b,g)=>{const p=nh.len(b);return[g*b[0]/p,g*b[1]/p]};Id.isLeft=(b,g,p)=>
(g[0]-b[0])*(p[1]-b[1])-(p[0]-b[0])*(g[1]-b[1]);Id.clockwise=(b,g,p)=>0<nh.isLeft(b,g,p);Id.toFixed=b=>b.map(g=>Math.round(100*g)/100);Id.nearestPointOnLineThroughPoint=(b,g,p)=>nh.add(b,nh.mul(g,nh.pry(nh.sub(p,b),g)));Id.distanceToLineThroughPoint=(b,g,p)=>nh.dist(p,nh.nearestPointOnLineThroughPoint(b,g,p));Id.nearestPointOnLineSegment=(b,g,p,G=!0)=>{const U=nh.uni(nh.sub(g,b));p=nh.add(b,nh.mul(U,nh.pry(nh.sub(p,b),U)));if(G){if(p[0]<Math.min(b[0],g[0]))return b[0]<g[0]?b:g;if(p[0]>Math.max(b[0],
g[0]))return b[0]>g[0]?b:g;if(p[1]<Math.min(b[1],g[1]))return b[1]<g[1]?b:g;if(p[1]>Math.max(b[1],g[1]))return b[1]>g[1]?b:g}return p};Id.distanceToLineSegment=(b,g,p,G=!0)=>nh.dist(p,nh.nearestPointOnLineSegment(b,g,p,G));Id.nudge=(b,g,p)=>nh.isEqual(b,g)?b:nh.add(b,nh.mul(nh.uni(nh.sub(g,b)),p));Id.nudgeAtAngle=(b,g,p)=>[Math.cos(g)*p+b[0],Math.sin(g)*p+b[1]];Id.toPrecision=(b,g=4)=>[+b[0].toPrecision(g),+b[1].toPrecision(g)];Id.pointsBetween=(b,g,p=6)=>Array.from(Array(p)).map((G,U)=>{G=U/(p-1);
U=Math.min(1,.5+Math.abs(.5-G));return[...nh.lrp(b,g,G),U]});Id.slope=(b,g)=>b[0]===g[0]?NaN:(b[1]-g[1])/(b[0]-g[0]);Id.toAngle=b=>{b=Math.atan2(b[1],b[0]);return 0>b?b+2*Math.PI:b};Id.max=(...b)=>[Math.max(...b.map(g=>g[0])),Math.max(...b.map(g=>g[1]))];Id.min=(...b)=>[Math.min(...b.map(g=>g[0])),Math.min(...b.map(g=>g[1]))];var je=Id,vf=class{static getRectangleSides(b,g,p=0){const G=[b[0]+g[0]/2,b[1]+g[1]/2],U=Id.rotWith(b,G,p),la=Id.rotWith(Id.add(b,[g[0],0]),G,p),pa=Id.rotWith(Id.add(b,g),G,
p);b=Id.rotWith(Id.add(b,[0,g[1]]),G,p);return[["top",[U,la]],["right",[la,pa]],["bottom",[pa,b]],["left",[b,U]]]}static getBoundsSides(b){return vf.getRectangleSides([b.minX,b.minY],[b.width,b.height])}static expandBounds(b,g){return{minX:b.minX-g,minY:b.minY-g,maxX:b.maxX+g,maxY:b.maxY+g,width:b.width+2*g,height:b.height+2*g}}static boundsCollide(b,g){return!(b.maxX<g.minX||b.minX>g.maxX||b.maxY<g.minY||b.minY>g.maxY)}static boundsContain(b,g){return Array.isArray(g)?b.minX<g[0]&&b.minY<g[1]&&b.maxY>
g[1]&&b.maxX>g[0]:b.minX<g.minX&&b.minY<g.minY&&b.maxY>g.maxY&&b.maxX>g.maxX}static boundsContained(b,g){return vf.boundsContain(g,b)}static boundsAreEqual(b,g){return!(g.maxX!==b.maxX||g.minX!==b.minX||g.maxY!==b.maxY||g.minY!==b.minY)}static getBoundsFromPoints(b,g=0){let p=Infinity,G=Infinity,U=-Infinity,la=-Infinity;if(2>b.length)G=p=0,la=U=1;else for(const pa of b)p=Math.min(pa[0],p),G=Math.min(pa[1],G),U=Math.max(pa[0],U),la=Math.max(pa[1],la);return 0!==g?vf.getBoundsFromPoints(b.map(pa=>Id.rotWith(pa,
[(p+U)/2,(G+la)/2],g))):{minX:p,minY:G,maxX:U,maxY:la,width:Math.max(1,U-p),height:Math.max(1,la-G)}}static centerBounds(b,g){const p=vf.getBoundsCenter(b);return vf.translateBounds(b,[g[0]-p[0],g[1]-p[1]])}static snapBoundsToGrid(b,g){const p=Math.round(b.minX/g)*g,G=Math.round(b.minY/g)*g,U=Math.round(b.maxX/g)*g;b=Math.round(b.maxY/g)*g;return{minX:p,minY:G,maxX:U,maxY:b,width:Math.max(1,U-p),height:Math.max(1,b-G)}}static translateBounds(b,g){return{minX:b.minX+g[0],minY:b.minY+g[1],maxX:b.maxX+
g[0],maxY:b.maxY+g[1],width:b.width,height:b.height}}static multiplyBounds(b,g){const p=vf.getBoundsCenter(b);return vf.centerBounds({minX:b.minX*g,minY:b.minY*g,maxX:b.maxX*g,maxY:b.maxY*g,width:b.width*g,height:b.height*g},[p[0]*g,p[1]*g])}static divideBounds(b,g){const p=vf.getBoundsCenter(b);return vf.centerBounds({minX:b.minX/g,minY:b.minY/g,maxX:b.maxX/g,maxY:b.maxY/g,width:b.width/g,height:b.height/g},[p[0]/g,p[1]/g])}static getRotatedBounds(b,g=0){b=vf.getRotatedCorners(b,g);let p=g=Infinity,
G=-Infinity,U=-Infinity;for(const la of b)g=Math.min(la[0],g),p=Math.min(la[1],p),G=Math.max(la[0],G),U=Math.max(la[1],U);return{minX:g,minY:p,maxX:G,maxY:U,width:Math.max(1,G-g),height:Math.max(1,U-p),rotation:0}}static getRotatedEllipseBounds(b,g,p,G,U=0){var la=Math.cos(U);const pa=Math.sin(U);U=Math.hypot(p*la,G*pa);la=Math.hypot(p*pa,G*la);return{minX:b+p-U,minY:g+G-la,maxX:b+p+U,maxY:g+G+la,width:2*U,height:2*la}}static getExpandedBounds(b,g){const p=Math.min(b.minX,g.minX),G=Math.min(b.minY,
g.minY),U=Math.max(b.maxX,g.maxX);b=Math.max(b.maxY,g.maxY);return{minX:p,minY:G,maxX:U,maxY:b,width:Math.abs(U-p),height:Math.abs(b-G)}}static getCommonBounds(b){if(2>b.length)return b[0];let g=b[0];for(let p=1;p<b.length;p++)g=vf.getExpandedBounds(g,b[p]);return g}static getRotatedCorners(b,g=0){const p=[b.minX+b.width/2,b.minY+b.height/2];b=[[b.minX,b.minY],[b.maxX,b.minY],[b.maxX,b.maxY],[b.minX,b.maxY]];return g?b.map(G=>Id.rotWith(G,p,g)):b}static getTransformedBoundingBox(b,g,p,G=0,U=!1){const [la,
pa]=[b.minX,b.minY],[Ga,Qa]=[b.maxX,b.maxY];let [Xa,fb]=[b.minX,b.minY],[mb,Gb]=[b.maxX,b.maxY];if("center"===g)return{minX:Xa+p[0],minY:fb+p[1],maxX:mb+p[0],maxY:Gb+p[1],width:mb-Xa,height:Gb-fb,scaleX:1,scaleY:1};const [Wb,Mb]=Id.rot(p,-G);switch(g){case "top_edge":case "top_left_corner":case "top_right_corner":fb+=Mb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Gb+=Mb}switch(g){case "left_edge":case "top_left_corner":case "bottom_left_corner":Xa+=Wb;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":mb+=
Wb}var dc=Ga-la;const hc=Qa-pa;var Ub=(mb-Xa)/dc,nc=(Gb-fb)/hc;b=0>Ub;p=0>nc;var Bc=Math.abs(mb-Xa),Ec=Math.abs(Gb-fb);if(U)switch(U=dc/hc,dc=U<Bc/Ec,nc=1/U*(0>nc?1:-1)*Bc,Ub=Ec*(0>Ub?1:-1)*U,g){case "top_left_corner":dc?fb=Gb+nc:Xa=mb+Ub;break;case "top_right_corner":dc?fb=Gb+nc:mb=Xa-Ub;break;case "bottom_right_corner":dc?Gb=fb-nc:mb=Xa-Ub;break;case "bottom_left_corner":dc?Gb=fb-nc:Xa=mb+Ub;break;case "bottom_edge":case "top_edge":Bc=(Xa+mb)/2;Ec*=U;Xa=Bc-Ec/2;mb=Bc+Ec/2;break;case "left_edge":case "right_edge":Ec=
(fb+Gb)/2,Bc/=U,fb=Ec-Bc/2,Gb=Ec+Bc/2}if(0!==G%(2*Math.PI)){Bc=[0,0];Ec=Id.med([la,pa],[Ga,Qa]);Ub=Id.med([Xa,fb],[mb,Gb]);switch(g){case "top_left_corner":Bc=Id.sub(Id.rotWith([mb,Gb],Ub,G),Id.rotWith([Ga,Qa],Ec,G));break;case "top_right_corner":Bc=Id.sub(Id.rotWith([Xa,Gb],Ub,G),Id.rotWith([la,Qa],Ec,G));break;case "bottom_right_corner":Bc=Id.sub(Id.rotWith([Xa,fb],Ub,G),Id.rotWith([la,pa],Ec,G));break;case "bottom_left_corner":Bc=Id.sub(Id.rotWith([mb,fb],Ub,G),Id.rotWith([Ga,pa],Ec,G));break;
case "top_edge":Bc=Id.sub(Id.rotWith(Id.med([Xa,Gb],[mb,Gb]),Ub,G),Id.rotWith(Id.med([la,Qa],[Ga,Qa]),Ec,G));break;case "left_edge":Bc=Id.sub(Id.rotWith(Id.med([mb,fb],[mb,Gb]),Ub,G),Id.rotWith(Id.med([Ga,pa],[Ga,Qa]),Ec,G));break;case "bottom_edge":Bc=Id.sub(Id.rotWith(Id.med([Xa,fb],[mb,fb]),Ub,G),Id.rotWith(Id.med([la,pa],[Ga,pa]),Ec,G));break;case "right_edge":Bc=Id.sub(Id.rotWith(Id.med([Xa,fb],[Xa,Gb]),Ub,G),Id.rotWith(Id.med([la,pa],[la,Qa]),Ec,G))}[Xa,fb]=Id.sub([Xa,fb],Bc);[mb,Gb]=Id.sub([mb,
Gb],Bc)}mb<Xa&&([mb,Xa]=[Xa,mb]);Gb<fb&&([Gb,fb]=[fb,Gb]);return{minX:Xa,minY:fb,maxX:mb,maxY:Gb,width:mb-Xa,height:Gb-fb,scaleX:(mb-Xa)/(Ga-la||1)*(b?-1:1),scaleY:(Gb-fb)/(Qa-pa||1)*(p?-1:1)}}static getTransformAnchor(b,g,p){let G=b;switch(b){case "top_left_corner":G=g&&p?"bottom_right_corner":g?"top_right_corner":p?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":G=g&&p?"bottom_left_corner":g?"top_left_corner":p?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":G=
g&&p?"top_left_corner":g?"bottom_left_corner":p?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":G=g&&p?"top_right_corner":g?"bottom_right_corner":p?"top_left_corner":"top_right_corner"}return G}static getRelativeTransformedBoundingBox(b,g,p,G,U){G=b.minX+(G?g.maxX-p.maxX:p.minX-g.minX)/g.width*b.width;U=b.minY+(U?g.maxY-p.maxY:p.minY-g.minY)/g.height*b.height;const la=p.width/g.width*b.width;b=p.height/g.height*b.height;return{minX:G,minY:U,maxX:G+la,maxY:U+b,width:la,height:b}}static getRotatedSize(b,
g){const p=Id.div(b,2);b=[[0,0],[b[0],0],b,[0,b[1]]].map(G=>Id.rotWith(G,p,g));b=vf.getBoundsFromPoints(b);return[b.width,b.height]}static getBoundsCenter(b){return[b.minX+b.width/2,b.minY+b.height/2]}static getBoundsWithCenter(b){const g=vf.getBoundsCenter(b);return rf(oe({},b),{midX:g[0],midY:g[1]})}static getCommonTopLeft(b){const g=[Infinity,Infinity];b.forEach(p=>{g[0]=Math.min(g[0],p[0]);g[1]=Math.min(g[1],p[1])});return g}static getTLSnapPoints(b,g,p){const G=oe({},b);b=[0,0];const U=[],la=
{minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},pa=["midX","minX","maxX"],Ga=["midY","minY","maxY"];g=g.map(Gb=>{const Wb=pa.flatMap((dc,hc)=>pa.map((Ub,nc)=>{const Bc=G[dc]-Gb[Ub];return{f:dc,t:Ub,gap:Bc,distance:Math.abs(Bc),isCareful:0===hc||3===hc+nc}})),Mb=Ga.flatMap((dc,hc)=>Ga.map((Ub,nc)=>{const Bc=G[dc]-Gb[Ub];return{f:dc,t:Ub,gap:Bc,distance:Math.abs(Bc),
isCareful:0===hc||3===hc+nc}}));return[Gb,Wb,Mb]});let Qa=Infinity,Xa=Infinity,fb=Infinity,mb=Infinity;g.forEach(([,Gb,Wb])=>{Gb.forEach(Mb=>{Mb.distance<p&&Mb.distance<fb&&(fb=Mb.distance,Qa=Mb.gap)});Wb.forEach(Mb=>{Mb.distance<p&&Mb.distance<mb&&(mb=Mb.distance,Xa=Mb.gap)})});g.forEach(([Gb,Wb,Mb])=>{Infinity!==Qa&&Wb.forEach(dc=>{2>Math.abs(dc.gap-Qa)&&(la[dc.f]=rf(oe({},la[dc.f]),{isSnapped:!0,to:Gb[dc.t],B:Gb,distance:dc.distance}))});Infinity!==Xa&&Mb.forEach(dc=>{2>Math.abs(dc.gap-Xa)&&(la[dc.f]=
rf(oe({},la[dc.f]),{isSnapped:!0,to:Gb[dc.t],B:Gb,distance:dc.distance}))})});b[0]=Infinity===Qa?0:Qa;b[1]=Infinity===Xa?0:Xa;G.minX-=b[0];G.midX-=b[0];G.maxX-=b[0];G.minY-=b[1];G.midY-=b[1];G.maxY-=b[1];pa.forEach(Gb=>{Gb=la[Gb];if(Gb.isSnapped){var {id:Wb,B:Mb}=Gb;Gb=G[Wb];U.push("minX"===Wb?[[Gb,G.midY],[Gb,Mb.minY],[Gb,Mb.maxY]]:[[Gb,G.minY],[Gb,G.maxY],[Gb,Mb.minY],[Gb,Mb.maxY]])}});Ga.forEach(Gb=>{Gb=la[Gb];if(Gb.isSnapped){var {id:Wb,B:Mb}=Gb;Gb=G[Wb];U.push("midY"===Wb?[[G.midX,Gb],[Mb.minX,
Gb],[Mb.maxX,Gb]]:[[G.minX,Gb],[G.maxX,Gb],[Mb.minX,Gb],[Mb.maxX,Gb]])}});return{offset:b,snapLines:U}}static ensureRatio(b,g){const {width:p,height:G}=b,U=oe({},b);p/G<g?(U.width=G*g,U.maxX+=p-b.width):(U.height=p/g,U.maxY+=G-b.height);return U}static getDistributions(b,g){var p=b.map(la=>{const pa=la.getBounds();return{id:la.id,point:[pa.minX,pa.minY],bounds:pa,center:la.getCenter()}});b=p.length;var G=vf.getCommonBounds(p.map(({bounds:la})=>la));const U=[];switch(g){case "horizontal":g=p.reduce((la,
pa)=>la+pa.bounds.width,0);if(g>G.width){const la=p.sort((Xa,fb)=>Xa.bounds.minX-fb.bounds.minX)[0],pa=p.sort((Xa,fb)=>fb.bounds.maxX-Xa.bounds.maxX)[0];G=p.filter(Xa=>Xa!==la&&Xa!==pa).sort((Xa,fb)=>Xa.center[0]-fb.center[0]);const Ga=(pa.center[0]-la.center[0])/(b-1),Qa=la.center[0]+Ga;G.forEach(({id:Xa,point:fb,bounds:mb},Gb)=>{U.push({id:Xa,prev:fb,next:[Qa+Ga*Gb-mb.width/2,mb.minY]})})}else{p=p.sort((Ga,Qa)=>Ga.center[0]-Qa.center[0]);let la=G.minX;const pa=(G.width-g)/(b-1);p.forEach(({id:Ga,
point:Qa,bounds:Xa})=>{U.push({id:Ga,prev:Qa,next:[la,Xa.minY]});la+=Xa.width+pa})}break;case "vertical":if(g=p.reduce((la,pa)=>la+pa.bounds.height,0),g>G.height){const la=p.sort((Xa,fb)=>Xa.bounds.minY-fb.bounds.minY)[0],pa=p.sort((Xa,fb)=>fb.bounds.maxY-Xa.bounds.maxY)[0];G=p.filter(Xa=>Xa!==la&&Xa!==pa).sort((Xa,fb)=>Xa.center[1]-fb.center[1]);const Ga=(pa.center[1]-la.center[1])/(b-1),Qa=la.center[1]+Ga;G.forEach(({id:Xa,point:fb,bounds:mb},Gb)=>{U.push({id:Xa,prev:fb,next:[mb.minX,Qa+Ga*Gb-mb.height/
2]})})}else{p=p.sort((Ga,Qa)=>Ga.center[1]-Qa.center[1]);let la=G.minY;const pa=(G.height-g)/(b-1);p.forEach(({id:Ga,point:Qa,bounds:Xa})=>{U.push({id:Ga,prev:Qa,next:[Xa.minX,la]});la+=Xa.height+pa})}}return U}static getPackedDistributions(b){const g=vf.getCommonBounds(b.map(({bounds:U})=>U)),p=[g.minX,g.minY],G=Object.fromEntries(b.map(U=>[U.id,[U.bounds.minX,U.bounds.minY]]));b=b.filter(U=>{var la,pa,Ga,Qa;return!((null==(pa=null==(la=U.props.handles)?void 0:la.start)?0:pa.bindingId)||(null==(Qa=
null==(Ga=U.props.handles)?void 0:Ga.end)?0:Qa.bindingId))}).map(U=>{const la=U.getBounds();return{id:U.id,w:la.width+16,h:la.height+16,x:la.minX,y:la.minY}});A(b);return b.map(({id:U,x:la,y:pa})=>({id:U,prev:G[U],next:[la+p[0],pa+p[1]]}))}},Lo=class{static pointInCircle(b,g,p){return Id.dist(b,g)<=p}static pointInEllipse(b,g,p,G,U=0){U=U||0;var la=Math.cos(U);U=Math.sin(U);g=Id.sub(b,g);b=la*g[0]+U*g[1];la=U*g[0]-la*g[1];return 1>=b*b/(p*p)+la*la/(G*G)}static pointInRect(b,g){return!(b[0]<g[0]||
b[0]>b[0]+g[0]||b[1]<g[1]||b[1]>b[1]+g[1])}static pointInPolygon(b,g){let p=0;g.forEach((G,U)=>{U=g[(U+1)%g.length];G[1]<=b[1]?U[1]>b[1]&&0<Id.cross(G,U,b)&&(p+=1):U[1]<=b[1]&&0>Id.cross(G,U,b)&&--p});return 0!==p}static pointInBounds(b,g){return!(b[0]<g.minX||b[0]>g.maxX||b[1]<g.minY||b[1]>g.maxY)}static pointInPolyline(b,g,p=3){for(let G=1;G<g.length;G++)if(Id.distanceToLineSegment(g[G-1],g[G],b)<p)return!0;return!1}static _getSqSegDist(b,g,p){let G=g[0];g=g[1];let U=p[0]-G,la=p[1]-g;if(0!==U||
0!==la){const pa=((b[0]-G)*U+(b[1]-g)*la)/(U*U+la*la);1<pa?(G=p[0],g=p[1]):0<pa&&(G+=U*pa,g+=la*pa)}U=b[0]-G;la=b[1]-g;return U*U+la*la}static _simplifyStep(b,g,p,G,U){let la=G,pa=-1;for(let Ga=g+1;Ga<p;Ga++){const Qa=Lo._getSqSegDist(b[Ga],b[g],b[p]);Qa>la&&(pa=Ga,la=Qa)}-1<pa&&la>G&&(1<pa-g&&Lo._simplifyStep(b,g,pa,G,U),U.push(b[pa]),1<p-pa&&Lo._simplifyStep(b,pa,p,G,U))}static simplify2(b,g=1){if(2>=b.length)return b;g*=g;var p=b[0],G=b[1];const U=[p];for(let la=1,pa=b.length;la<pa;la++)G=b[la],
(G[0]-p[0])*(G[0]-p[0])+(G[1]-p[1])*(G[1]-p[1])>g&&(U.push(G),p=G);p!==G&&U.push(G);p=U.length-1;G=[U[0]];Lo._simplifyStep(U,0,p,g,G);G.push(U[p],b[b.length-1]);return G}static pointNearToPolyline(b,g,p=8){const G=g.length;for(let U=1;U<G;U++)if(Id.distanceToLineSegment(g[U-1],g[U],b)<p)return!0;return!1}},Gk=Lo;ib(Gk,"simplify",(b,g=1)=>{var p=b.length;const G=b[0],U=b[p-1],[la,pa]=G,[Ga,Qa]=U;if(2<p){let Xa=0,fb=0;const mb=Id.len2([Qa-pa,Ga-la]);for(let Gb=1;Gb<p-1;Gb++){const [Wb,Mb]=b[Gb],dc=
Math.pow(Wb*(Qa-pa)+la*(Mb-Qa)+Ga*(pa-Mb),2)/mb;Xa>dc||(Xa=dc,fb=Gb)}if(Xa>g)return p=Lo.simplify(b.slice(0,fb+1),g),b=Lo.simplify(b.slice(fb+1),g),p.concat(b.slice(1))}return[G,U]});var mo=nf(um()),Cr=({target:b},g)=>{b=b&&b.tagName;return!!(b&&g&&g.includes(b))},Tp=class{static registerShortcut(b,g){mo.default.bind(b,(p,G)=>{var U;p.preventDefault();Cr(p,["INPUT","TEXTAREA","SELECT"])||(null==(U=p.target)?0:U.isContentEditable)||g(p,G)},"keydown");return()=>{mo.default.unbind(b,"keydown")}}},Xm=
Math.PI,oo=Xm/2,Nl=2*Xm,Kq={},Ar={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},pm=class{static circleFromThreePoints(b,g,p){const [G,
U]=b,[la,pa]=g,[Ga,Qa]=p;g=G*(pa-Qa)-U*(la-Ga)+la*Qa-Ga*pa;b=-((G*G+U*U)*(Qa-pa)+(la*la+pa*pa)*(U-Qa)+(Ga*Ga+Qa*Qa)*(pa-U))/(2*g);g=-((G*G+U*U)*(la-Ga)+(la*la+pa*pa)*(Ga-G)+(Ga*Ga+Qa*Qa)*(G-la))/(2*g);return[b,g,Math.hypot(b-G,g-U)]}static perimeterOfEllipse(b,g){const p=Math.pow(b-g,2)/Math.pow(b+g,2);return Xm*(b+g)*(1+3*p/(10+Math.sqrt(4-3*p)))}static shortAngleDist(b,g){b=(g-b)%Nl;return 2*b%Nl-b}static longAngleDist(b,g){return Nl-pm.shortAngleDist(b,g)}static lerpAngles(b,g,p){return b+pm.shortAngleDist(b,
g)*p}static angleDelta(b,g){return pm.shortAngleDist(b,g)}static getSweep(b,g,p){return pm.angleDelta(je.angle(b,g),je.angle(b,p))}static clampRadians(b){return(Nl+b)%Nl}static snapAngleToSegments(b,g){g=Nl/g;b=Math.floor((pm.clampRadians(b)+g/2)/g)*g%Nl;b<Xm&&(b+=Nl);b>Xm&&(b-=Nl);return b}static isAngleBetween(b,g,p){if(p===b||p===g)return!0;g=(g-b+oo)%oo;return g<=Xm!==(p-b+oo)%oo>g}static degreesToRadians(b){return b*Xm/180}static radiansToDegrees(b){return 180*b/Xm}static getArcLength(b,g,p,
G){b=pm.getSweep(b,p,G);return b/Nl*Nl*g}static getSweepFlag(b,g,p){p=je.angle(b,p);return 0<(je.angle(b,g)-p+3*Xm)%Nl-Xm?0:1}static getLargeArcFlag(b,g,p){b=je.angle(p,b);g=(je.angle(p,g)-b+3*Xm)%Nl-Xm;return Math.abs(g)>oo?0:1}static getArcDashOffset(b,g,p,G,U){const la=pm.getSweepFlag(b,p,G);g=pm.getArcLength(b,g,p,G);return-(0>la?g:Nl*b[2]-g)/2+U}static getEllipseDashOffset(b,g){return-(Nl*b[2])/2+-g}static radiansToCardinalDirection(b){return b<.25*Math.PI?"north":b<.75*Math.PI?"east":b<1.25*
Math.PI?"south":b<1.75*Math.PI?"west":"north"}},Gl=class{static getPolygonCentroid(b){var g=b.map(p=>p[0]);b=b.map(p=>p[1]);g=Math.min(...g)+Math.max(...g);b=Math.min(...b)+Math.max(...b);return[g?g/2:0,b?b/2:0]}};ib(Gl,"getEdges",b=>{const g=b.length;return b.map((p,G)=>[p,b[(G+1)%g]])});ib(Gl,"getEdgeOutwardNormal",(b,g)=>je.per(je.uni(je.sub(g,b))));ib(Gl,"getEdgeInwardNormal",(b,g)=>je.neg(Gl.getEdgeOutwardNormal(b,g)));ib(Gl,"getOffsetEdge",(b,g,p)=>{p=je.mul(je.per(je.uni(je.sub(g,b))),p);return[je.add(b,
p),je.add(g,p)]});ib(Gl,"getOffsetEdges",(b,g)=>b.map(([p,G])=>Gl.getOffsetEdge(p,G,g)));ib(Gl,"getOffsetPolygon",(b,g)=>{if(1>b.length)throw Error("Expected at least one point.");if(1===b.length)return b=b[0],[je.add(b,[-g,-g]),je.add(b,[g,-g]),je.add(b,[g,g]),je.add(b,[-g,g])];if(2===b.length){const [p,G]=b;return[...Gl.getOffsetEdge(p,G,g),...Gl.getOffsetEdge(G,p,g)]}return Gl.getOffsetEdges(Gl.getEdges(b),g).flatMap((p,G,U)=>{{G=U[(G+1)%U.length];const la=Id.slope(p[0],p[1]);U=Id.slope(G[0],G[1]);
la!==U?Number.isNaN(la)&&!Number.isNaN(U)?p=[p[0][0],(p[0][0]-G[0][0])*U+G[0][1]]:Number.isNaN(U)&&!Number.isNaN(la)?p=[G[0][0],(G[0][0]-p[0][0])*la+p[0][1]]:(p=(la*p[0][0]-U*G[0][0]+G[0][1]-p[0][1])/(la-U),p=[p,U*(p-G[0][0])+G[0][1]]):p=void 0}if(void 0===p)throw Error("Expected an intersection");return p})});ib(Gl,"getPolygonVertices",(b,g,p=0,G=1)=>{b=je.div(b,2);const [U,la]=[Math.max(1,b[0]-p),Math.max(1,b[1]-p)];p=[];for(let Xa=0,fb=Nl/g;Xa<g;Xa++){var pa=(-oo+Xa*fb)%Nl,Ga=(-oo+(Xa+1)*fb)%Nl;
pa=je.add(b,[U*Math.cos(pa),la*Math.sin(pa)]);Ga=je.add(b,[U*Math.cos(Ga),la*Math.sin(Ga)]);var Qa=je.med(pa,Ga);Qa=je.nudge(Qa,b,je.dist(b,Qa)*(1-G));p.push(pa,Qa,Ga)}return p});ib(Gl,"getTriangleVertices",(b,g=0,p=1)=>{const [G,U]=b;var la=1-p;b=[G/2,g/2];p=[G-g,U-g];g=[g/2,U-g];const pa=Gl.getPolygonCentroid([b,p,g]),Ga=je.med(b,p),Qa=je.med(p,g),Xa=je.med(g,b),fb=je.dist(Ga,pa)*la,mb=je.dist(Qa,pa)*la;la*=je.dist(Xa,pa);return[b,fb?je.nudge(Ga,pa,fb):Ga,p,mb?je.nudge(Qa,pa,mb):Qa,g,la?je.nudge(Xa,
pa,la):Xa]});ib(Gl,"getStarVertices",(b,g,p,G=1)=>{const U=je.div(g,2),la=je.mul(U,G/2),pa=Nl/p/2;return Array.from(Array(2*p)).map((Ga,Qa)=>{Ga=-oo+Qa*pa;const [Xa,fb]=Qa%2?la:U;return je.add(b,[Xa*Math.cos(Ga),fb*Math.sin(Ga)])})});var tp=class{static getCurvedPathForPolygon(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],p=b.length;for(let G=1;G<p;G++){const [U,la]=b[G],[pa,Ga]=b[(G+1)%p];g.push(U,la,(U+pa)/2,(la+Ga)/2)}g.push("Z");
return g.join(" ")}static getCurvedPathForPoints(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],p=b.length;for(let G=1;G<p-1;G++){const [U,la]=b[G],[pa,Ga]=b[G+1];g.push(U,la,(U+pa)/2,(la+Ga)/2)}return g.join(" ")}static getSvgPathFromStroke(b,g=!0){const p=b.length;if(4>p)return"";let G=b[0],U=b[1];var la=b[2];la=`M${G[0].toFixed(2)},${G[1].toFixed(2)} Q${U[0].toFixed(2)},${U[1].toFixed(2)} ${((U[0]+la[0])/2).toFixed(2)},${((U[1]+
la[1])/2).toFixed(2)} T`;for(let pa=2,Ga=p-1;pa<Ga;pa++)G=b[pa],U=b[pa+1],la+=`${((G[0]+U[0])/2).toFixed(2)},${((G[1]+U[1])/2).toFixed(2)} `;g&&(la+="Z");return la}static getSvgPathFromStrokePoints(b,g=!1){const p=b.length;if(4>p)return"";let G=b[0].point,U=b[1].point;var la=b[2].point;la=`M${G[0].toFixed(2)},${G[1].toFixed(2)} Q${U[0].toFixed(2)},${U[1].toFixed(2)} ${((U[0]+la[0])/2).toFixed(2)},${((U[1]+la[1])/2).toFixed(2)} T`;for(let pa=2,Ga=p-1;pa<Ga;pa++)G=b[pa].point,U=b[pa+1].point,la+=`${((G[0]+
U[0])/2).toFixed(2)},${((G[1]+U[1])/2).toFixed(2)} `;g&&(la+="Z");return la}};ib(tp,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var Fv={},Fr=Object.assign,V=Object.getOwnPropertyDescriptor,ma=Object.defineProperty,Da=Object.prototype,gb=[];Object.freeze(gb);var Ib={};Object.freeze(Ib);var sc="undefined"!==typeof Proxy,Kc=Object.toString(),fd=function(){},Ud="undefined"!==typeof Object.getOwnPropertySymbols,Ee="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Ud?
function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:Object.getOwnPropertyNames,qg=Object.getOwnPropertyDescriptors||function(b){var g={};Ee(b).forEach(function(p){g[p]=V(b,p)});return g},Vg=Symbol("mobx-stored-annotations"),we=Symbol("mobx administration"),Fg=function(){function b(p){void 0===p&&(p="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=
Ej.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=p}var g=b.prototype;g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(p){return p()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(p){return p()})};g.reportObserved=function(){return Ob(this)};g.reportChanged=function(){od();gc(this);Sd()};g.toString=function(){return this.name_};return b}(),th=D("Atom",Fg),Zg={identity:function(b,g){return b===g},structural:function(b,g){return ta(b,g)},"default":function(b,g){return Object.is?
Object.is(b,g):b===g?0!==b||1/b===1/g:b!==b&&g!==g},shallow:function(b,g){return ta(b,g,1)}},qe="override",Xd=pb(),le={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(le);var bf=Xb("observable"),lf=Xb("observable.ref",{enhancer:eb}),Lh=Xb("observable.shallow",{enhancer:function(b,g,p){if(void 0===b||null===b||Yd(b)||kb(b)||Wp(b)||Nq(b))return b;if(Array.isArray(b))return uf.array(b,{name:p,deep:!1});if(E(b))return uf.object(b,void 0,{name:p,deep:!1});if(O(b))return uf.map(b,{name:p,
deep:!1});if(P(b))return uf.set(b,{name:p,deep:!1})}}),Gg=Xb("observable.struct",{enhancer:function(b,g){return ta(b,g)?g:b}}),Dh=Ua(bf);Object.assign(bd,Dh);var ri={box:function(b,g){g=g||le;return new Rq(b,Jc(g),g.name,!0,g.equals)},array:function(b,g){g=g||le;return(!1===Df.useProxies||!1===g.proxy?hf:ab)(b,Jc(g),g.name)},map:function(b,g){g=g||le;return new wy(b,Jc(g),g.name)},set:function(b,g){g=g||le;return new ky(b,Jc(g),g.name)},object:function(b,g,p){if(!1===Df.useProxies||!1===(null==p?
void 0:p.proxy))p=Cd({},p);else{var G={},U,la;Y();G=Cd(G,p);p=null!=(la=(U=G[we]).proxy_)?la:U.proxy_=new Proxy(G,yD)}return rc(p,b,g)},ref:Ua(lf),shallow:Ua(Lh),deep:Dh,struct:Ua(Gg)},uf=Fr(bd,ri),Jo=Ab("computed"),Ev=Ab("computed.struct",{equals:Zg.structural}),Pg=function(b,g){if(T(g))return Ea(b,g,Jo);if(E(b))return Ua(Ab("computed",b));g=E(g)?g:{};g.get=b;g.name||(g.name=b.name||"");return new dt(g)};Object.assign(Pg,Jo);Pg.struct=Ua(Ev);var Cy,By,au=0,wD=1,uD=null!=(Cy=null==(By=V(function(){},
"name"))?void 0:By.configurable)?Cy:!1,Ay={value:"action",configurable:!0,writable:!1,enumerable:!1};var vD=Symbol.toPrimitive;var Rq=function(b){function g(G,U,la,pa,Ga){void 0===la&&(la="ObservableValue");void 0===Ga&&(Ga=Zg["default"]);pa=b.call(this,la)||this;pa.enhancer=void 0;pa.hasUnreportedChange_=!1;pa.interceptors_=void 0;pa.changeListeners_=void 0;pa.value_=void 0;pa.dehancer=void 0;pa.enhancer=U;pa.name_=la;pa.equals=Ga;pa.value_=U(G,void 0,la);return pa}ia(g,b);var p=g.prototype;p.dehanceValue=
function(G){return void 0!==this.dehancer?this.dehancer(G):G};p.set=function(G){G=this.prepareNewValue_(G);G!==Df.UNCHANGED&&this.setNewValue_(G)};p.prepareNewValue_=function(G){if(ee(this)){G=oc(this,{object:this,type:cp,newValue:G});if(!G)return Df.UNCHANGED;G=G.newValue}G=this.enhancer(G,this.value_,this.name_);return this.equals(this.value_,G)?Df.UNCHANGED:G};p.setNewValue_=function(G){var U=this.value_;this.value_=G;this.reportChanged();Le(this)&&cf(this,{type:cp,object:this,newValue:G,oldValue:U})};
p.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};p.intercept_=function(G){return sd(this,G)};p.observe_=function(G,U){U&&G({observableKind:"value",debugObjectName:this.name_,object:this,type:cp,newValue:this.value_,oldValue:void 0});return cg(this,G)};p.raw=function(){return this.value_};p.toJSON=function(){return this.get()};p.toString=function(){return this.name_+"["+this.value_+"]"};p.valueOf=function(){return ba(this.get())};p[vD]=function(){return this.valueOf()};
return g}(Fg),zD=D("ObservableValue",Rq);var AD=Symbol.toPrimitive;var dt=function(){function b(p){this.dependenciesState_=Ej.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Ej.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new cr(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=
void 0;this.isTracing_=Tr.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;p.get||l(31);this.derivation=p.get;this.name_=p.name||"ComputedValue";p.set&&(this.setter_=Pc("ComputedValue-setter",p.set));this.equals_=p.equals||(p.compareStructural||p.struct?Zg.structural:Zg["default"]);this.scope_=p.context;this.requiresReaction_=p.requiresReaction;this.keepAlive_=!!p.keepAlive}var g=b.prototype;g.onBecomeStale_=function(){sb(this)};g.onBO=function(){this.onBOL&&
this.onBOL.forEach(function(p){return p()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(p){return p()})};g.get=function(){this.isComputing_&&l(32,this.name_,this.derivation);if(0!==Df.inBatch||0!==this.observers_.size||this.keepAlive_){if(Ob(this),Vc(this)){var p=Df.trackingContext;this.keepAlive_&&!p&&(Df.trackingContext=this);this.trackAndCompute()&&Zb(this);Df.trackingContext=p}}else Vc(this)&&(this.warnAboutUntrackedRead_(),od(),this.value_=this.computeValue_(!1),Sd());p=this.value_;
if(p instanceof cr)throw p.cause;return p};g.set=function(p){if(this.setter_){this.isRunningSetter_&&l(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,p)}finally{this.isRunningSetter_=!1}}else l(34,this.name_)};g.trackAndCompute=function(){var p=this.value_,G=this.dependenciesState_===Ej.NOT_TRACKING_,U=this.computeValue_(!0);if(p=G||p instanceof cr||U instanceof cr||!this.equals_(p,U))this.value_=U;return p};g.computeValue_=function(p){this.isComputing_=!0;var G=xc(!1);
if(p)var U=jd(this,this.derivation,this.scope_);else if(!0===Df.disableErrorBoundaries)U=this.derivation.call(this.scope_);else try{U=this.derivation.call(this.scope_)}catch(la){U=new cr(la)}Df.allowStateChanges=G;this.isComputing_=!1;return U};g.suspend_=function(){this.keepAlive_||(Ld(this),this.value_=void 0)};g.observe_=function(p,G){var U=this,la=!0,pa=void 0;return Md(function(){var Ga=U.get();if(!la||G){var Qa=qc();p({observableKind:"computed",debugObjectName:U.name_,type:cp,object:U,newValue:Ga,
oldValue:pa});Df.trackingDerivation=Qa}la=!1;pa=Ga})};g.warnAboutUntrackedRead_=function(){};g.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};g.valueOf=function(){return ba(this.get())};g[AD]=function(){return this.valueOf()};return b}(),et=D("ComputedValue",dt),Ej;(function(b){b[b.NOT_TRACKING_=-1]="NOT_TRACKING_";b[b.UP_TO_DATE_=0]="UP_TO_DATE_";b[b.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";b[b.STALE_=2]="STALE_"})(Ej||={});var Tr;(function(b){b[b.NONE=0]="NONE";b[b.LOG=1]=
"LOG";b[b.BREAK=2]="BREAK"})(Tr||={});var cr=function(b){this.cause=void 0;this.cause=b},eu=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=
this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},fu=!0,Ey=!1,Df=function(){var b=J();0<b.__mobxInstanceCount&&!b.__mobxGlobals&&(fu=!1);b.__mobxGlobals&&b.__mobxGlobals.version!==(new eu).version&&(fu=!1);if(fu){if(b.__mobxGlobals)return b.__mobxInstanceCount+=1,b.__mobxGlobals.UNCHANGED||(b.__mobxGlobals.UNCHANGED={}),b.__mobxGlobals;b.__mobxInstanceCount=1;return b.__mobxGlobals=new eu}setTimeout(function(){Ey||l(35)},
1);return new eu}(),Vr=function(){function b(p,G,U,la){void 0===p&&(p="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Ej.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=Tr.NONE;this.name_=p;this.onInvalidate_=G;this.errorHandler_=U;this.requiresObservable_=la}var g=b.prototype;g.onBecomeStale_=
function(){this.schedule_()};g.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Df.pendingReactions.push(this),0<Df.inBatch||Df.isRunningReactions||hu(ob))};g.isScheduled=function(){return this.isScheduled_};g.runReaction_=function(){if(!this.isDisposed_){od();this.isScheduled_=!1;var p=Df.trackingContext;Df.trackingContext=this;if(Vc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(G){this.reportExceptionInDerivation_(G)}}Df.trackingContext=p;Sd()}};g.track=function(p){if(!this.isDisposed_){od();
this.isRunning_=!0;var G=Df.trackingContext;Df.trackingContext=this;p=jd(this,p,void 0);Df.trackingContext=G;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Ld(this);p instanceof cr&&this.reportExceptionInDerivation_(p.cause);Sd()}};g.reportExceptionInDerivation_=function(p){var G=this;if(this.errorHandler_)this.errorHandler_(p,this);else{if(Df.disableErrorBoundaries)throw p;Df.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",p);Df.globalReactionErrorHandlers.forEach(function(U){return U(p,
G)})}};g.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(od(),Ld(this),Sd()))};g.getDisposer_=function(){var p=this.dispose.bind(this);p[we]=this;return p};g.toString=function(){return"Reaction["+this.name_+"]"};g.trace=function(p){void 0===p&&(p=!1);Bb(this,p)};return b}(),BD=100,hu=function(b){return b()},iu=D("Reaction",Vr),Dy="action",xy=db(Dy),oD=db("action.bound",{bound:!0}),yy=db("autoAction",{autoAction:!0}),tD=db("autoAction.bound",{autoAction:!0,bound:!0}),og=
Uc(!1);Object.assign(og,xy);var Ss=Uc(!0);Object.assign(Ss,yy);og.bound=Ua(oD);Ss.bound=Ua(tD);var xD=function(b){return b()},pD="onBO",qD="onBUO",rD=0;Sb.prototype=Object.create(Error.prototype);var zy=sa("flow"),sD=sa("flow.bound",{bound:!0}),Us=Object.assign(function(b,g){if(T(g))return Ea(b,g,zy);var p=b.name||"\x3cunnamed flow\x3e";g=function(){var G=arguments,U=++rD,la=og(p+" - runid: "+U+" - init",b).apply(this,G),pa,Ga=void 0;G=new Promise(function(Qa,Xa){function fb(Mb){Ga=void 0;try{var dc=
og(p+" - runid: "+U+" - yield "+Wb++,la.next).call(la,Mb)}catch(hc){return Xa(hc)}Gb(dc)}function mb(Mb){Ga=void 0;try{var dc=og(p+" - runid: "+U+" - yield "+Wb++,la["throw"]).call(la,Mb)}catch(hc){return Xa(hc)}Gb(dc)}function Gb(Mb){if(ha(null==Mb?void 0:Mb.then))Mb.then(Gb,Xa);else{if(Mb.done)return Qa(Mb.value);Ga=Promise.resolve(Mb.value);return Ga.then(fb,mb)}}var Wb=0;pa=Xa;fb(void 0)});G.cancel=og(p+" - runid: "+U+" - cancel",function(){try{if(Ga){var Qa=Ga;ha(Qa.cancel)&&Qa.cancel()}var Xa=
la["return"](void 0),fb=Promise.resolve(Xa.value);fb.then(fd,fd);ha(fb.cancel)&&fb.cancel();pa(new Sb)}catch(mb){pa(mb)}});return G};g.isMobXFlow=!0;return g},zy);Us.bound=Ua(sD);var yD={has:function(b,g){return b[we].has_(g)},get:function(b,g){return b[we].get_(g)},set:function(b,g,p){var G;return T(g)?null!=(G=b[we].set_(g,p,!0))?G:!0:!1},deleteProperty:function(b,g){var p;return T(g)?null!=(p=b[we].delete_(g,!0))?p:!0:!1},defineProperty:function(b,g,p){var G;return null!=(G=b[we].defineProperty_(g,
p))?G:!0},ownKeys:function(b){return b[we].ownKeys_()},preventExtensions:function(b){l(13)}},cp="update",nD={get:function(b,g){var p=b[we];return g===we?p:"length"===g?p.getArrayLength_():"string"!==typeof g||isNaN(g)?H(bu,g)?bu[g]:b[g]:p.get_(parseInt(g))},set:function(b,g,p){var G=b[we];"length"===g&&G.setArrayLength_(p);"symbol"===typeof g||isNaN(g)?b[g]=p:G.set_(parseInt(g),p);return!0},preventExtensions:function(){l(15)}},Nv=function(){function b(p,G,U,la){void 0===p&&(p="ObservableArray");this.atom_=
this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=U;this.legacyMode_=la;this.atom_=new Fg(p);this.enhancer_=function(pa,Ga){return G(pa,Ga,"ObservableArray[..]")}}var g=b.prototype;g.dehanceValue_=function(p){return void 0!==this.dehancer?this.dehancer(p):p};g.dehanceValues_=function(p){return void 0!==this.dehancer&&0<p.length?p.map(this.dehancer):p};g.intercept_=function(p){return sd(this,
p)};g.observe_=function(p,G){void 0===G&&(G=!1);G&&p({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return cg(this,p)};g.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};g.setArrayLength_=function(p){("number"!==typeof p||isNaN(p)||0>p)&&l("Out of range: "+p);var G=this.values_.length;if(p!==G)if(p>G){for(var U=Array(p-G),la=0;la<
p-G;la++)U[la]=void 0;this.spliceWithArray_(G,0,U)}else this.spliceWithArray_(p,G-p)};g.updateArrayLength_=function(p,G){p!==this.lastKnownLength_&&l(16);this.lastKnownLength_+=G;this.legacyMode_&&0<G&&ue(p+G+1)};g.spliceWithArray_=function(p,G,U){var la=this,pa=this.values_.length;void 0===p?p=0:p>pa?p=pa:0>p&&(p=Math.max(0,pa+p));G=1===arguments.length?pa-p:void 0===G||null===G?0:Math.max(0,Math.min(G,pa-p));void 0===U&&(U=gb);if(ee(this)){var Ga=oc(this,{object:this.proxy_,type:"splice",index:p,
removedCount:G,added:U});if(!Ga)return gb;G=Ga.removedCount;U=Ga.added}U=0===U.length?U:U.map(function(Qa){return la.enhancer_(Qa,void 0)});this.legacyMode_&&this.updateArrayLength_(pa,U.length-G);pa=this.spliceItemsIntoValues_(p,G,U);0===G&&0===U.length||this.notifyArraySplice_(p,U,pa);return this.dehanceValues_(pa)};g.spliceItemsIntoValues_=function(p,G,U){if(1E4>U.length){var la;return(la=this.values_).splice.apply(la,[p,G].concat(U))}la=this.values_.slice(p,p+G);var pa=this.values_.slice(p+G);
this.values_.length+=U.length-G;for(G=0;G<U.length;G++)this.values_[p+G]=U[G];for(G=0;G<pa.length;G++)this.values_[p+U.length+G]=pa[G];return la};g.notifyArrayChildUpdate_=function(p,G,U){var la=!this.owned_&&!1,pa=Le(this);p=pa||la?{observableKind:"array",object:this.proxy_,type:cp,debugObjectName:this.atom_.name_,index:p,newValue:G,oldValue:U}:null;this.atom_.reportChanged();pa&&cf(this,p)};g.notifyArraySplice_=function(p,G,U){var la=!this.owned_&&!1,pa=Le(this);p=pa||la?{observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:p,removed:U,added:G,removedCount:U.length,addedCount:G.length}:null;this.atom_.reportChanged();pa&&cf(this,p)};g.get_=function(p){if(this.legacyMode_&&p>=this.values_.length)console.warn("[mobx] Out of bounds read: "+p);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[p])};g.set_=function(p,G){var U=this.values_;this.legacyMode_&&p>U.length&&l(17,p,U.length);if(p<U.length){var la=U[p];if(ee(this)){G=oc(this,
{type:cp,object:this.proxy_,index:p,newValue:G});if(!G)return;G=G.newValue}G=this.enhancer_(G,la);G!==la&&(U[p]=G,this.notifyArrayChildUpdate_(p,G,la))}else{p=Array(p+1-U.length);for(la=0;la<p.length-1;la++)p[la]=void 0;p[p.length-1]=G;this.spliceWithArray_(U.length,0,p)}};return b}(),bu={clear:function(){return this.splice(0)},replace:function(b){var g=this[we];return g.spliceWithArray_(0,g.values_.length,b)},toJSON:function(){return this.slice()},splice:function(b,g){for(var p=arguments.length,
G=Array(2<p?p-2:0),U=2;U<p;U++)G[U-2]=arguments[U];p=this[we];switch(arguments.length){case 0:return[];case 1:return p.spliceWithArray_(b);case 2:return p.spliceWithArray_(b,g)}return p.spliceWithArray_(b,g,G)},spliceWithArray:function(b,g,p){return this[we].spliceWithArray_(b,g,p)},push:function(){for(var b=this[we],g=arguments.length,p=Array(g),G=0;G<g;G++)p[G]=arguments[G];b.spliceWithArray_(b.values_.length,0,p);return b.values_.length},pop:function(){return this.splice(Math.max(this[we].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var b=this[we],g=arguments.length,p=Array(g),G=0;G<g;G++)p[G]=arguments[G];b.spliceWithArray_(0,0,p);return b.values_.length},reverse:function(){Df.trackingDerivation&&l(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){Df.trackingDerivation&&l(37,"sort");var b=this.slice();b.sort.apply(b,arguments);this.replace(b);return this},remove:function(b){var g=this[we];b=g.dehanceValues_(g.values_).indexOf(b);
return-1<b?(this.splice(b,1),!0):!1}};Cb("concat",cb);Cb("flat",cb);Cb("includes",cb);Cb("indexOf",cb);Cb("join",cb);Cb("lastIndexOf",cb);Cb("slice",cb);Cb("toString",cb);Cb("toLocaleString",cb);Cb("every",Db);Cb("filter",Db);Cb("find",Db);Cb("findIndex",Db);Cb("flatMap",Db);Cb("forEach",Db);Cb("map",Db);Cb("some",Db);Cb("reduce",ic);Cb("reduceRight",ic);var mD=D("ObservableArrayAdministration",Nv),lD={};var kD=Symbol.iterator;var jD=Symbol.toStringTag;var wy=function(){function b(p,G,U){var la=this;
void 0===G&&(G=Ma);void 0===U&&(U="ObservableMap");this.name_=this.enhancer_=void 0;this[we]=lD;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=G;this.name_=U;ha(Map)||l(18);this.keysAtom_=Ya("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Fb(!0,function(){la.merge(p)})}var g=b.prototype;g.has_=function(p){return this.data_.has(p)};g.has=function(p){var G=this;if(!Df.trackingDerivation)return this.has_(p);var U=this.hasMap_.get(p);
if(!U){var la=U=new Rq(this.has_(p),eb,"ObservableMap.key?",!1);this.hasMap_.set(p,la);vc(la,function(){return G.hasMap_["delete"](p)})}return U.get()};g.set=function(p,G){var U=this.has_(p);if(ee(this)){G=oc(this,{type:U?cp:"add",object:this,newValue:G,name:p});if(!G)return this;G=G.newValue}U?this.updateValue_(p,G):this.addValue_(p,G);return this};g["delete"]=function(p){var G=this;if(ee(this)&&!oc(this,{type:"delete",object:this,name:p}))return!1;if(this.has_(p)){var U=Le(this),la=U?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(p).value_,name:p}:null;Hd(function(){var pa;G.keysAtom_.reportChanged();null==(pa=G.hasMap_.get(p))?void 0:pa.setNewValue_(!1);G.data_.get(p).setNewValue_(void 0);G.data_["delete"](p)});U&&cf(this,la);return!0}return!1};g.updateValue_=function(p,G){var U=this.data_.get(p);G=U.prepareNewValue_(G);if(G!==Df.UNCHANGED){var la=Le(this);p=la?{observableKind:"map",debugObjectName:this.name_,type:cp,object:this,oldValue:U.value_,
name:p,newValue:G}:null;U.setNewValue_(G);la&&cf(this,p)}};g.addValue_=function(p,G){var U=this;Hd(function(){var Ga,Qa=new Rq(G,U.enhancer_,"ObservableMap.key",!1);U.data_.set(p,Qa);G=Qa.value_;null==(Ga=U.hasMap_.get(p))?void 0:Ga.setNewValue_(!0);U.keysAtom_.reportChanged()});var la=Le(this),pa=la?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:p,newValue:G}:null;la&&cf(this,pa)};g.get=function(p){return this.has(p)?this.dehanceValue_(this.data_.get(p).get()):this.dehanceValue_(void 0)};
g.dehanceValue_=function(p){return void 0!==this.dehancer?this.dehancer(p):p};g.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};g.values=function(){var p=this,G=this.keys();return bb({next:function(){var U=G.next(),la=U.done;U=U.value;return{done:la,value:la?void 0:p.get(U)}}})};g.entries=function(){var p=this,G=this.keys();return bb({next:function(){var U=G.next(),la=U.done;U=U.value;return{done:la,value:la?void 0:[U,p.get(U)]}}})};g[kD]=function(){return this.entries()};
g.forEach=function(p,G){for(var U=Ha(this),la;!(la=U()).done;)la=la.value,p.call(G,la[1],la[0],this)};g.merge=function(p){var G=this;Wp(p)&&(p=new Map(p));Hd(function(){E(p)?da(p).forEach(function(U){return G.set(U,p[U])}):Array.isArray(p)?p.forEach(function(U){return G.set(U[0],U[1])}):O(p)?(p.constructor!==Map&&l(19,p),p.forEach(function(U,la){return G.set(la,U)})):null!==p&&void 0!==p&&l(20,p)});return this};g.clear=function(){var p=this;Hd(function(){Kd(function(){for(var G=Ha(p.keys()),U;!(U=
G()).done;)p["delete"](U.value)})})};g.replace=function(p){var G=this;Hd(function(){for(var U=id(p),la=new Map,pa=!1,Ga=Ha(G.data_.keys()),Qa;!(Qa=Ga()).done;)if(Qa=Qa.value,!U.has(Qa))if(G["delete"](Qa))pa=!0;else{var Xa=G.data_.get(Qa);la.set(Qa,Xa)}for(U=Ha(U.entries());!(Ga=U()).done;)Qa=Ga.value,Ga=Qa[0],Xa=Qa[1],Qa=G.data_.has(Ga),G.set(Ga,Xa),G.data_.has(Ga)&&(Xa=G.data_.get(Ga),la.set(Ga,Xa),Qa||(pa=!0));if(!pa)if(G.data_.size!==la.size)G.keysAtom_.reportChanged();else for(pa=G.data_.keys(),
U=la.keys(),Ga=pa.next(),Qa=U.next();!Ga.done;){if(Ga.value!==Qa.value){G.keysAtom_.reportChanged();break}Ga=pa.next();Qa=U.next()}G.data_=la});return this};g.toString=function(){return"[object ObservableMap]"};g.toJSON=function(){return Array.from(this)};g.observe_=function(p,G){return cg(this,p)};g.intercept_=function(p){return sd(this,p)};N(b,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:jD,get:function(){return"Map"}}]);return b}(),Wp=D("ObservableMap",
wy),eD={};var fD=Symbol.iterator;var gD=Symbol.toStringTag;var ky=function(){function b(p,G,U){void 0===G&&(G=Ma);void 0===U&&(U="ObservableSet");this.name_=void 0;this[we]=eD;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=U;ha(Set)||l(22);this.atom_=Ya(this.name_);this.enhancer_=function(la,pa){return G(la,pa,U)};p&&this.replace(p)}var g=b.prototype;g.dehanceValue_=function(p){return void 0!==this.dehancer?this.dehancer(p):p};
g.clear=function(){var p=this;Hd(function(){Kd(function(){for(var G=Ha(p.data_.values()),U;!(U=G()).done;)p["delete"](U.value)})})};g.forEach=function(p,G){for(var U=Ha(this),la;!(la=U()).done;)la=la.value,p.call(G,la,la,this)};g.add=function(p){var G=this;if(ee(this)&&!oc(this,{type:"add",object:this,newValue:p}))return this;if(!this.has(p)){Hd(function(){G.data_.add(G.enhancer_(p,void 0));G.atom_.reportChanged()});var U=Le(this),la=U?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:p}:null;U&&cf(this,la)}return this};g["delete"]=function(p){var G=this;if(ee(this)&&!oc(this,{type:"delete",object:this,oldValue:p}))return!1;if(this.has(p)){var U=Le(this),la=U?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:p}:null;Hd(function(){G.atom_.reportChanged();G.data_["delete"](p)});U&&cf(this,la);return!0}return!1};g.has=function(p){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(p))};g.entries=function(){var p=0,G=Array.from(this.keys()),
U=Array.from(this.values());return bb({next:function(){var la=p;p+=1;return la<U.length?{value:[G[la],U[la]],done:!1}:{done:!0}}})};g.keys=function(){return this.values()};g.values=function(){this.atom_.reportObserved();var p=this,G=0,U=Array.from(this.data_.values());return bb({next:function(){return G<U.length?{value:p.dehanceValue_(U[G++]),done:!1}:{done:!0}}})};g.replace=function(p){var G=this;Nq(p)&&(p=new Set(p));Hd(function(){Array.isArray(p)?(G.clear(),p.forEach(function(U){return G.add(U)})):
P(p)?(G.clear(),p.forEach(function(U){return G.add(U)})):null!==p&&void 0!==p&&l("Cannot initialize set from "+p)});return this};g.observe_=function(p,G){return cg(this,p)};g.intercept_=function(p){return sd(this,p)};g.toJSON=function(){return Array.from(this)};g.toString=function(){return"[object ObservableSet]"};g[fD]=function(){return this.values()};N(b,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:gD,get:function(){return"Set"}}]);return b}(),Nq=D("ObservableSet",
ky),ly=Object.create(null),my=function(){function b(p,G,U,la){void 0===G&&(G=new Map);void 0===la&&(la=Xd);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=p;this.values_=G;this.name_=U;this.defaultAnnotation_=la;this.keysAtom_=new Fg("ObservableObject.keys");this.isPlainObject_=E(this.target_)}var g=b.prototype;g.getObservablePropValue_=function(p){return this.values_.get(p).get()};
g.setObservablePropValue_=function(p,G){var U=this.values_.get(p);if(U instanceof dt)return U.set(G),!0;if(ee(this)){G=oc(this,{type:cp,object:this.proxy_||this.target_,name:p,newValue:G});if(!G)return null;G=G.newValue}G=U.prepareNewValue_(G);if(G!==Df.UNCHANGED){var la=Le(this);p=la?{type:cp,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:U.value_,name:p,newValue:G}:null;U.setNewValue_(G);la&&cf(this,p)}return!0};g.get_=function(p){Df.trackingDerivation&&
!H(this.target_,p)&&this.has_(p);return this.target_[p]};g.set_=function(p,G,U){void 0===U&&(U=!1);if(H(this.target_,p)){if(this.values_.has(p))return this.setObservablePropValue_(p,G);if(U)return Reflect.set(this.target_,p,G);this.target_[p]=G;return!0}return this.extend_(p,{value:G,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,U)};g.has_=function(p){if(!Df.trackingDerivation)return p in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var G=this.pendingKeys_.get(p);
G||(G=new Rq(p in this.target_,eb,"ObservableObject.key?",!1),this.pendingKeys_.set(p,G));return G.get()};g.make_=function(p,G){!0===G&&(G=this.defaultAnnotation_);if(!1!==G){if(!(p in this.target_)){var U;if(null!=(U=this.target_[Vg])&&U[p])return;l(1,G.annotationType_,this.name_+"."+p.toString())}for(U=this.target_;U&&U!==Da;){var la=V(U,p);if(la){la=G.make_(this,p,la,U);if(0===la)return;if(1===la)break}U=Object.getPrototypeOf(U)}var pa;null==(pa=this.target_[Vg])?!0:delete pa[p]}};g.extend_=function(p,
G,U,la){void 0===la&&(la=!1);!0===U&&(U=this.defaultAnnotation_);if(!1===U)return this.defineProperty_(p,G,la);if(G=U.extend_(this,p,G,la)){var pa;null==(pa=this.target_[Vg])?!0:delete pa[p]}return G};g.defineProperty_=function(p,G,U){void 0===U&&(U=!1);try{od();var la=this.delete_(p);if(!la)return la;if(ee(this)){var pa=oc(this,{object:this.proxy_||this.target_,name:p,type:"add",newValue:G.value});if(!pa)return null;var Ga=pa.newValue;G.value!==Ga&&(G=ca({},G,{value:Ga}))}if(U){if(!Reflect.defineProperty(this.target_,
p,G))return!1}else ma(this.target_,p,G);this.notifyPropertyAddition_(p,G.value)}finally{Sd()}return!0};g.defineObservableProperty_=function(p,G,U,la){void 0===la&&(la=!1);try{od();var pa=this.delete_(p);if(!pa)return pa;if(ee(this)){var Ga=oc(this,{object:this.proxy_||this.target_,name:p,type:"add",newValue:G});if(!Ga)return null;G=Ga.newValue}var Qa=me(p),Xa={configurable:Df.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Qa.get,set:Qa.set};if(la){if(!Reflect.defineProperty(this.target_,
p,Xa))return!1}else ma(this.target_,p,Xa);var fb=new Rq(G,U,"ObservableObject.key",!1);this.values_.set(p,fb);this.notifyPropertyAddition_(p,fb.value_)}finally{Sd()}return!0};g.defineComputedProperty_=function(p,G,U){void 0===U&&(U=!1);try{od();var la=this.delete_(p);if(!la)return la;if(ee(this)&&!oc(this,{object:this.proxy_||this.target_,name:p,type:"add",newValue:void 0}))return null;G.name||(G.name="ObservableObject.key");G.context=this.proxy_||this.target_;var pa=me(p),Ga={configurable:Df.safeDescriptors?
this.isPlainObject_:!0,enumerable:!1,get:pa.get,set:pa.set};if(U){if(!Reflect.defineProperty(this.target_,p,Ga))return!1}else ma(this.target_,p,Ga);this.values_.set(p,new dt(G));this.notifyPropertyAddition_(p,void 0)}finally{Sd()}return!0};g.delete_=function(p,G){void 0===G&&(G=!1);if(!H(this.target_,p))return!0;if(ee(this)&&!oc(this,{object:this.proxy_||this.target_,name:p,type:"remove"}))return null;try{var U,la;od();var pa=Le(this),Ga=this.values_.get(p),Qa=void 0;if(!Ga&&pa){var Xa;Qa=null==(Xa=
V(this.target_,p))?void 0:Xa.value}if(G){if(!Reflect.deleteProperty(this.target_,p))return!1}else delete this.target_[p];Ga&&(this.values_["delete"](p),Ga instanceof Rq&&(Qa=Ga.value_),gc(Ga));this.keysAtom_.reportChanged();null==(U=this.pendingKeys_)?void 0:null==(la=U.get(p))?void 0:la.set(p in this.target_);if(pa){var fb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Qa,name:p};pa&&cf(this,fb)}}finally{Sd()}return!0};g.observe_=function(p,
G){return cg(this,p)};g.intercept_=function(p){return sd(this,p)};g.notifyPropertyAddition_=function(p,G){var U,la,pa=Le(this);pa&&(G=pa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:p,newValue:G}:null,pa&&cf(this,G));null==(U=this.pendingKeys_)?void 0:null==(la=U.get(p))?void 0:la.set(!0);this.keysAtom_.reportChanged()};g.ownKeys_=function(){this.keysAtom_.reportObserved();return Ee(this.target_)};g.keys_=function(){this.keysAtom_.reportObserved();
return Object.keys(this.target_)};return b}(),hD=D("ObservableObjectAdministration",my),iD=We(0),Kv=0,ny=function(){};(function(b,g){Object.setPrototypeOf?Object.setPrototypeOf(b.prototype,g):void 0!==b.prototype.__proto__?b.prototype.__proto__=g:b.prototype=g})(ny,Array.prototype);var Lv=function(b,g,p){function G(la,pa,Ga,Qa){void 0===Ga&&(Ga="ObservableArray");void 0===Qa&&(Qa=!1);var Xa=b.call(this)||this;pa=new Nv(Ga,pa,Qa,!0);pa.proxy_=qa(Xa);S(qa(Xa),we,pa);la&&la.length&&(pa=xc(!0),Xa.spliceWithArray(0,
0,la),Df.allowStateChanges=pa);Object.defineProperty(qa(Xa),"0",iD);return Xa}ia(G,b);var U=G.prototype;U.concat=function(){this[we].atom_.reportObserved();for(var la=arguments.length,pa=Array(la),Ga=0;Ga<la;Ga++)pa[Ga]=arguments[Ga];return Array.prototype.concat.apply(this.slice(),pa.map(function(Qa){return kb(Qa)?Qa.slice():Qa}))};U[p]=function(){var la=this,pa=0;return bb({next:function(){return pa<la.length?{value:la[pa++],done:!1}:{done:!0,value:void 0}}})};N(G,[{key:"length",get:function(){return this[we].getArrayLength_()},
set:function(la){this[we].setArrayLength_(la)}},{key:g,get:function(){return"Array"}}]);return G}(ny,Symbol.toStringTag,Symbol.iterator);Object.entries(bu).forEach(function(b){var g=b[0];b=b[1];"concat"!==g&&M(Lv.prototype,g,b)});ue(1E3);var oy=Da.toString;["Symbol","Map","Set"].forEach(function(b){"undefined"===typeof J()[b]&&l("MobX requires global '"+b+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:uc,extras:{getDebugName:zb},
$mobx:we});var nb=X(588),ym=class{constructor(b){ib(this,"props");ib(this,"aspectRatio");ib(this,"type");ib(this,"hideCloneHandles",!1);ib(this,"hideResizeHandles",!1);ib(this,"hideRotateHandle",!1);ib(this,"hideContextBar",!1);ib(this,"hideSelectionDetail",!1);ib(this,"hideSelection",!1);ib(this,"canChangeAspectRatio",!0);ib(this,"canUnmount",!0);ib(this,"canResize",[!0,!0]);ib(this,"canScale",!0);ib(this,"canFlip",!0);ib(this,"canEdit",!1);ib(this,"canBind",!1);ib(this,"nonce");ib(this,"bindingDistance",
4);ib(this,"isDirty",!1);ib(this,"lastSerialized");ib(this,"getCenter",()=>vf.getBoundsCenter(this.bounds));ib(this,"getRotatedBounds",()=>{const {bounds:la,props:{rotation:pa}}=this;return pa?vf.getBoundsFromPoints(vf.getRotatedCorners(la,pa)):la});ib(this,"hitTestPoint",la=>{var pa=this.rotatedBounds;if(!this.props.rotation)return Gk.pointInBounds(la,pa);pa=vf.getRotatedCorners(pa,this.props.rotation);return Gk.pointInPolygon(la,pa)});ib(this,"hitTestLineSegment",(la,pa)=>{const Ga=vf.getBoundsFromPoints([la,
pa]),{rotatedBounds:Qa,props:{rotation:Xa=0}}=this;return vf.boundsContain(Qa,Ga)||Xa?h(la,pa,vf.getRotatedCorners(this.bounds)).didIntersect:0<m(Qa,la,pa).length});ib(this,"hitTestBounds",la=>{const {rotatedBounds:pa,props:{rotation:Ga=0}}=this,Qa=vf.getRotatedCorners(this.bounds,Ga);return vf.boundsContain(la,pa)||0<z([la.minX,la.minY],[la.width,la.height],Qa).length});ib(this,"getExpandedBounds",()=>vf.expandBounds(this.getBounds(),this.bindingDistance));ib(this,"getBindingPoint",(la,pa,Ga,Qa)=>
{var Xa=this.getBounds(),fb=this.getExpandedBounds();if(Gk.pointInBounds(la,fb)){var mb=C(pa,Ga,fb).filter(Gb=>Gb.didIntersect).map(Gb=>Gb.points[0]);if(mb.length)return Ga=this.getCenter(),mb=mb.sort((Gb,Wb)=>je.dist(Wb,pa)-je.dist(Gb,pa))[0],mb=je.med(la,mb),Qa?(Qa=2>je.dist(la,Ga)?Ga:la,Xa=0):(Qa=2>je.distanceToLineSegment(la,mb,Ga)?Ga:mb,Xa=Gk.pointInBounds(la,Xa)?this.bindingDistance:Math.max(this.bindingDistance,vf.getBoundsSides(Xa).map(Gb=>je.distanceToLineSegment(Gb[1][0],Gb[1][1],la)).sort((Gb,
Wb)=>Gb-Wb)[0])),fb=je.divV(je.sub(Qa,[fb.minX,fb.minY]),[fb.width,fb.height]),{point:je.clampV(fb,0,1),distance:Xa}}});ib(this,"getSerialized",()=>Fc(rf(oe({},this.props),{type:this.type,nonce:this.nonce})));ib(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Hd(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});ib(this,"validateProps",la=>la);ib(this,
"update",(la,pa=!1,Ga=!1)=>{pa||this.isDirty||this.setIsDirty(!0);pa||Ga||this.incNonce();Object.assign(this.props,this.validateProps(la));return this});ib(this,"clone",()=>new this.constructor(this.serialized));ib(this,"onResetBounds",la=>this);ib(this,"scale",[1,1]);ib(this,"onResizeStart",la=>{var pa;this.scale=[...(null!=(pa=this.props.scale)?pa:[1,1])];return this});ib(this,"onResize",(la,pa)=>{const {bounds:Ga,rotation:Qa,scale:[Xa,fb]}=pa;la=[...this.scale];0>Xa&&(la[0]*=-1);0>fb&&(la[1]*=
-1);this.update({point:[Ga.minX,Ga.minY],scale:la,rotation:Qa});return this});ib(this,"onHandleChange",(la,{id:pa,delta:Ga})=>{if(void 0!==la.handles){var Qa=fr(la.handles);Qa[pa]=rf(oe({},Qa[pa]),{point:je.add(Ga,la.handles[pa].point)});var Xa=vf.getCommonTopLeft(Object.values(Qa).map(fb=>fb.point));Object.values(Qa).forEach(fb=>{fb.point=je.sub(fb.point,Xa)});this.update({point:je.add(la.point,Xa),handles:Qa})}});var g,p;const G=this.constructor.id,U=null!=(g=this.constructor.defaultProps)?g:{};
this.type=G;this.props=oe(oe({scale:[1,1]},U),b);this.nonce=null!=(p=b.nonce)?p:Date.now();zg(this)}get id(){return this.props.id}setNonce(b){this.nonce=b}incNonce(){this.nonce++}setIsDirty(b){this.isDirty=b}setLastSerialized(b){this.lastSerialized=b}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(b){b=this.getBounds();const {stroke:g,strokeWidth:p,strokeType:G,
opacity:U,fill:la,noFill:pa,borderRadius:Ga}=this.props;return(0,nb.jsx)("rect",{fill:pa?"none":$g(la,"background"),stroke:$g(g,"stroke"),strokeWidth:null!=p?p:2,strokeDasharray:"dashed"===G?"8 2":void 0,fillOpacity:null!=U?U:.2,width:b.width,height:b.height,rx:Ga,ry:Ga})}};ib(ym,"type");de([uf],ym.prototype,"props",2);de([uf],ym.prototype,"canResize",2);de([uf],ym.prototype,"nonce",2);de([uf],ym.prototype,"isDirty",2);de([uf],ym.prototype,"lastSerialized",2);de([Pg],ym.prototype,"id",1);de([og],
ym.prototype,"setNonce",1);de([og],ym.prototype,"incNonce",1);de([og],ym.prototype,"setIsDirty",1);de([og],ym.prototype,"setLastSerialized",1);de([Pg],ym.prototype,"center",1);de([Pg],ym.prototype,"bounds",1);de([Pg],ym.prototype,"rotatedBounds",1);de([Pg],ym.prototype,"serialized",1);de([og],ym.prototype,"update",2);var yn=class extends ym{constructor(b={}){super(b);ib(this,"canBind",!0);ib(this,"getBounds",()=>{const [g,p]=this.props.point,[G,U]=this.props.size;return{minX:g,minY:p,maxX:g+G,maxY:p+
U,width:G,height:U}});ib(this,"getRotatedBounds",()=>vf.getBoundsFromPoints(vf.getRotatedCorners(this.bounds,this.props.rotation)));ib(this,"onResize",(g,p)=>{const {bounds:G,rotation:U,scale:[la,pa]}=p;g=[...this.scale];0>la&&(g[0]*=-1);0>pa&&(g[1]*=-1);this.update({point:[G.minX,G.minY],scale:g,rotation:U});return this.update({rotation:U,point:[G.minX,G.minY],size:[Math.max(1,G.width),Math.max(1,G.height)],scale:g})});ib(this,"validateProps",g=>{void 0!==g.size&&(g.size[0]=Math.max(g.size[0],1),
g.size[1]=Math.max(g.size[1],1));return g});zg(this)}};ib(yn,"id","box");ib(yn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var Gr=class extends ym{constructor(b={}){super(b);ib(this,"getBounds",()=>{const {pointBounds:g,props:{point:p}}=this;return vf.translateBounds(g,p)});ib(this,"getRotatedBounds",()=>{const {props:{rotation:g,point:p},bounds:G,rotatedPoints:U}=this;return g?vf.translateBounds(vf.getBoundsFromPoints(U),p):G});ib(this,"normalizedPoints",[]);
ib(this,"isResizeFlippedX",!1);ib(this,"isResizeFlippedY",!1);ib(this,"onResizeStart",()=>{var g;const {bounds:p,props:{points:G}}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const U=[p.width,p.height];this.normalizedPoints=G.map(la=>Id.divV(la,U));return this});ib(this,"onResize",(g,p)=>{const {bounds:G,scale:[U,la]}=p,pa=[G.width,G.height];g=[...this.scale];0>U&&(g[0]*=-1);0>la&&(g[1]*=-1);return this.update(U||la?{point:[G.minX,G.minY],points:this.normalizedPoints.map(Ga=>Id.mulV(Ga,
pa).concat(Ga[2])),scale:g}:{point:[G.minX,G.minY],points:this.normalizedPoints.map(Ga=>Id.mulV(Ga,pa).concat(Ga[2]))})});ib(this,"hitTestPoint",g=>{const {props:{points:p,point:G}}=this;return Gk.pointNearToPolyline(Id.sub(g,G),p)});ib(this,"hitTestLineSegment",(g,p)=>{const {bounds:G,props:{points:U,point:la}}=this;if(Gk.pointInBounds(g,G)||Gk.pointInBounds(p,G)||0<m(G,g,p).length){const pa=Id.sub(g,la),Ga=Id.sub(p,la);return h(pa,Ga,U).didIntersect||!!U.find(Qa=>5>Id.dist(pa,Qa)||5>Id.dist(Ga,
Qa))}return!1});ib(this,"hitTestBounds",g=>{const {rotatedBounds:p,props:{points:G,point:U}}=this,la=vf.translateBounds(g,Id.neg(U));return vf.boundsContain(g,p)||G.every(pa=>Gk.pointInBounds(pa,la))||vf.boundsCollide(g,p)&&0<L([la.minX,la.minY],[la.width,la.height],G).length});zg(this)}get pointBounds(){const {props:{points:b}}=this;return vf.getBoundsFromPoints(b)}get rotatedPoints(){const {props:{point:b,points:g,rotation:p},center:G}=this;if(!p)return g;const U=Id.sub(G,b);return g.map(la=>Id.rotWith(la,
U,p))}};ib(Gr,"id","draw");ib(Gr,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});de([Pg],Gr.prototype,"pointBounds",1);de([Pg],Gr.prototype,"rotatedPoints",1);var Hv=class extends yn{constructor(b={}){super(b);ib(this,"getBounds",()=>{const {props:{point:[g,p],size:[G,U]}}=this;return vf.getRotatedEllipseBounds(g,p,G/2,U/2,0)});ib(this,"getRotatedBounds",()=>{const {props:{point:[g,p],size:[G,U],rotation:la}}=this;return vf.getRotatedEllipseBounds(g,p,G/
2,U/2,la)});ib(this,"hitTestPoint",g=>{const {props:{size:p,rotation:G},center:U}=this;return Gk.pointInEllipse(g,U,p[0],p[1],G||0)});ib(this,"hitTestLineSegment",(g,p)=>{const {props:{size:[G,U],rotation:la=0},center:pa}=this;return r(g,p,pa,G,U,la).didIntersect});ib(this,"hitTestBounds",g=>{const {props:{size:[p,G],rotation:U=0},rotatedBounds:la}=this;var pa;if(!(pa=vf.boundsContain(g,la))){const {minX:Ga,minY:Qa,width:Xa,height:fb}=g;pa=0<u(this.center,p/2,G/2,U,[Ga,Qa],[Xa,fb]).length}return pa});
zg(this)}};ib(Hv,"id","ellipse");ib(Hv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var Iv=class extends yn{constructor(b={}){super(b);ib(this,"onResetBounds",g=>{const {clipping:p,size:G,point:U}=this.props;if(p){const [la,pa,Ga,Qa]=Array.isArray(p)?p:[p,p,p,p];return this.update({clipping:0,point:[U[0]-Qa,U[1]-la],size:[G[0]+(Qa-pa),G[1]+(la-Ga)]})}if(g.asset){const {size:[la,pa]}=g.asset;this.update({clipping:0,point:[U[0]+G[0]/2-la/2,U[1]+G[1]/2-pa/
2],size:[la,pa]})}return this});ib(this,"onResize",(g,p)=>{const {bounds:G,clip:U,scale:la}=p;({clipping:p}=this.props);const {clipping:pa}=g;if(U){const {point:[Ga,Qa],size:[Xa,fb]}=g,[mb,Gb,Wb,Mb]=pa?Array.isArray(pa)?pa:[pa,pa,pa,pa]:[0,0,0,0];p=[mb+(G.minY-Qa),Gb+(G.maxX-(Ga+Xa)),Wb+(G.maxY-(Qa+fb)),Mb+(G.minX-Ga)]}else void 0!==pa&&(p=Array.isArray(pa)?pa:[pa,pa,pa,pa],p=[p[0]*la[1],p[1]*la[0],p[2]*la[1],p[3]*la[0]]);if(p&&Array.isArray(p)){const Ga=p;Ga.every((Qa,Xa)=>0===Xa||Qa===Ga[Xa-1])&&
(p=Ga[0])}return this.update({point:[G.minX,G.minY],size:[Math.max(1,G.width),Math.max(1,G.height)],clipping:p})});zg(this)}};ib(Iv,"id","ellipse");ib(Iv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var iy=class extends ym{constructor(b={}){super(b);ib(this,"getBounds",()=>{const {points:g,props:{point:p}}=this;return vf.translateBounds(vf.getBoundsFromPoints(g),p)});ib(this,"getRotatedBounds",()=>{const {rotatedPoints:g,
props:{point:p}}=this;return vf.translateBounds(vf.getBoundsFromPoints(g),p)});ib(this,"normalizedHandles",[]);ib(this,"onResizeStart",()=>{var g;const {props:{handles:p},bounds:G}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const U=[G.width,G.height];this.normalizedHandles=Object.values(p).map(la=>Id.divV(la.point,U));return this});ib(this,"onResize",(g,p)=>{const {bounds:G,scale:[U,la]}=p,{props:{handles:pa},normalizedHandles:Ga}=this,Qa=[G.width,G.height];g=[...this.scale];0>U&&(g[0]*=
-1);0>la&&(g[1]*=-1);return this.update({point:[G.minX,G.minY],handles:Object.values(pa).map((Xa,fb)=>rf(oe({},Xa),{point:Id.mulV(Ga[fb],Qa)})),scale:g})});ib(this,"hitTestPoint",g=>{const {points:p}=this;return Gk.pointNearToPolyline(Id.sub(g,this.props.point),p)});ib(this,"hitTestLineSegment",(g,p)=>{const {bounds:G,points:U,props:{point:la}}=this;if(Gk.pointInBounds(g,G)||Gk.pointInBounds(p,G)||0<m(G,g,p).length){const pa=Id.sub(g,la),Ga=Id.sub(p,la);return h(pa,Ga,U).didIntersect||!!U.find(Qa=>
5>Id.dist(pa,Qa)||5>Id.dist(Ga,Qa))}return!1});ib(this,"hitTestBounds",g=>{const {rotatedBounds:p,points:G,props:{point:U}}=this,la=vf.translateBounds(g,Id.neg(U));return vf.boundsContain(g,p)||G.every(pa=>Gk.pointInBounds(pa,la))||vf.boundsCollide(g,p)&&0<L([la.minX,la.minY],[la.width,la.height],G).length});ib(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=iy.defaultProps.handles);return g});zg(this)}get points(){return Object.values(this.props.handles).map(b=>
b.point)}get centroid(){const {points:b}=this;return Gl.getPolygonCentroid(b)}get rotatedPoints(){const {centroid:b,props:{handles:g,rotation:p}}=this;return p?Object.values(g).map(G=>Id.rotWith(G.point,b,p)):this.points}},Hr=iy;ib(Hr,"id","polyline");ib(Hr,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});de([Pg],Hr.prototype,"points",1);de([Pg],Hr.prototype,"centroid",1);de([Pg],Hr.prototype,"rotatedPoints",1);var jy=class extends Hr{constructor(b={}){super(b);
ib(this,"hideResizeHandles",!0);ib(this,"hideRotateHandle",!0);ib(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=jy.defaultProps.handles);return g});ib(this,"getHandlesChange",(g,p)=>{var G=Gi(g.handles,p);G=Gi(G,{start:{point:je.toFixed(G.start.point)},end:{point:je.toFixed(G.end.point)}});if(!je.isEqual(G.start.point,G.end.point)){p={point:g.point,handles:fr(G)};g=g.point;G=vf.translateBounds(vf.getBoundsFromPoints(Object.values(G).map(la=>
la.point)),p.point);var U=je.sub([G.minX,G.minY],g);je.isEqual(U,[0,0])||(Object.values(p.handles).forEach(la=>{la.point=je.toFixed(je.sub(la.point,U))}),p.point=je.toFixed(je.add(p.point,U)));return p}});zg(this)}},Qs=jy;ib(Qs,"id","line");ib(Qs,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Up=class extends yn{constructor(b={}){super(b);ib(this,"getRotatedBounds",()=>{const {rotatedVertices:g,
props:{point:p},offset:G}=this;return vf.translateBounds(vf.getBoundsFromPoints(g),Id.add(p,G))});ib(this,"hitTestPoint",g=>{const {vertices:p}=this;return Gk.pointInPolygon(Id.add(g,this.props.point),p)});ib(this,"hitTestLineSegment",(g,p)=>{const {vertices:G,props:{point:U}}=this;return h(Id.sub(g,U),Id.sub(p,U),G).didIntersect});ib(this,"hitTestBounds",g=>{const {rotatedBounds:p,offset:G,rotatedVertices:U,props:{point:la}}=this,pa=vf.translateBounds(g,Id.neg(Id.add(la,G)));return vf.boundsContain(g,
p)||U.every(Ga=>Gk.pointInBounds(Ga,pa))||0<z([pa.minX,pa.minY],[pa.width,pa.height],U).length});ib(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.sides&&3>g.sides&&(g.sides=3);return g});zg(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:b},vertices:g}=this;return g.map(p=>Id.add(p,b))}get centroid(){const {vertices:b}=this;return Gl.getPolygonCentroid(b)}get rotatedVertices(){const {vertices:b,centroid:g,props:{rotation:p}}=this;return p?b.map(G=>
Id.rotWith(G,g,p)):b}get offset(){const {props:{size:[b,g]}}=this,p=vf.getBoundsCenter(vf.getBoundsFromPoints(this.vertices));return Id.sub(Id.div([b,g],2),p)}getVertices(b=0){const {ratio:g,sides:p,size:G}=this.props;return 3===p?Gl.getTriangleVertices(G,b,g):Gl.getPolygonVertices(G,p,b,g)}};ib(Up,"id","polygon");ib(Up,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});de([Pg],Up.prototype,"vertices",1);de([Pg],Up.prototype,"pageVertices",
1);de([Pg],Up.prototype,"centroid",1);de([Pg],Up.prototype,"rotatedVertices",1);de([Pg],Up.prototype,"offset",1);var Jv=class extends yn{constructor(b={}){super(b);ib(this,"canEdit",!0);ib(this,"canFlip",!1);zg(this)}};ib(Jv,"id","text");ib(Jv,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var $t=class extends yn{constructor(b={}){super(b);ib(this,"canEdit",!1);ib(this,"canFlip",!1);ib(this,"getBounds",()=>vf.getCommonBounds(this.shapes.map(g=>
g.getBounds())));zg(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};ib($t,"id","group");ib($t,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});de([Pg],$t.prototype,"shapes",1);var Ir=class{constructor(){ib(this,"_id");ib(this,"_initial");ib(this,"_states");ib(this,"_isActive",!1);ib(this,"cursor");ib(this,"_disposables",[]);ib(this,"children",new Map([]));ib(this,"registerStates",
p=>{p.forEach(G=>this.children.set(G.id,new G(this,this)));return this});ib(this,"deregisterStates",p=>{p.forEach(G=>{var U;null==(U=this.children.get(G.id))?void 0:U.dispose();this.children.delete(G.id)});return this});ib(this,"currentState",{});ib(this,"transition",(p,G={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${p}.`);const U=this.children.get(p),la=this.currentState;if(!U)throw Error(`Could not find a state named ${p}.`);Hd(()=>{this.currentState?
(la._events.onExit(rf(oe({},G),{toId:p})),la.dispose(),U.registerKeyboardShortcuts(),this.setCurrentState(U),this._events.onTransition(rf(oe({},G),{fromId:la.id,toId:p})),U._events.onEnter(rf(oe({},G),{fromId:la.id}))):(this.currentState=U,U._events.onEnter(rf(oe({},G),{fromId:""})))});return this});ib(this,"isIn",p=>{p=p.split(".").reverse();let G=this;for(;0<p.length;){const U=p.pop();if(!U)return!0;if(G.currentState.id===U){if(0===p.length)return!0;G=G.currentState}else break}return!1});ib(this,
"isInAny",(...p)=>p.some(this.isIn));ib(this,"forwardEvent",(p,...G)=>{var U,la;(null==(la=null==(U=this.currentState)?void 0:U._events)?0:la[p])&&Hd(()=>{var pa;return null==(pa=this.currentState._events)?void 0:pa[p](...G)})});ib(this,"_events",{onTransition:p=>{var G;null==(G=this.onTransition)?void 0:G.call(this,p)},onEnter:p=>{var G;this._isActive=!0;this.initial&&this.transition(this.initial,p);null==(G=this.onEnter)?void 0:G.call(this,p)},onExit:p=>{var G,U,la;this._isActive=!1;null==(U=null==
(G=this.currentState)?void 0:G.onExit)?void 0:U.call(G,{toId:"parent"});null==(la=this.onExit)?void 0:la.call(this,p)},onPointerDown:(p,G)=>{var U;null==(U=this.onPointerDown)?void 0:U.call(this,p,G);this.forwardEvent("onPointerDown",p,G)},onPointerUp:(p,G)=>{var U;null==(U=this.onPointerUp)?void 0:U.call(this,p,G);this.forwardEvent("onPointerUp",p,G)},onPointerMove:(p,G)=>{var U;null==(U=this.onPointerMove)?void 0:U.call(this,p,G);this.forwardEvent("onPointerMove",p,G)},onPointerEnter:(p,G)=>{var U;
null==(U=this.onPointerEnter)?void 0:U.call(this,p,G);this.forwardEvent("onPointerEnter",p,G)},onPointerLeave:(p,G)=>{var U;null==(U=this.onPointerLeave)?void 0:U.call(this,p,G);this.forwardEvent("onPointerLeave",p,G)},onDoubleClick:(p,G)=>{var U;null==(U=this.onDoubleClick)?void 0:U.call(this,p,G);this.forwardEvent("onDoubleClick",p,G)},onKeyDown:(p,G)=>{var U;this._events.onModifierKey(p,G);null==(U=this.onKeyDown)?void 0:U.call(this,p,G);this.forwardEvent("onKeyDown",p,G)},onKeyUp:(p,G)=>{var U;
this._events.onModifierKey(p,G);null==(U=this.onKeyUp)?void 0:U.call(this,p,G);this.forwardEvent("onKeyUp",p,G)},onPinchStart:(p,G)=>{var U;null==(U=this.onPinchStart)?void 0:U.call(this,p,G);this.forwardEvent("onPinchStart",p,G)},onPinch:(p,G)=>{var U;null==(U=this.onPinch)?void 0:U.call(this,p,G);this.forwardEvent("onPinch",p,G)},onPinchEnd:(p,G)=>{var U;null==(U=this.onPinchEnd)?void 0:U.call(this,p,G);this.forwardEvent("onPinchEnd",p,G)},onModifierKey:(p,G)=>{switch(G.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(p,
G)}}});ib(this,"onEnter");ib(this,"onExit");ib(this,"onTransition");ib(this,"onPointerDown");ib(this,"onPointerUp");ib(this,"onPointerMove");ib(this,"onPointerEnter");ib(this,"onPointerLeave");ib(this,"onDoubleClick");ib(this,"onKeyDown");ib(this,"onKeyUp");ib(this,"onPinchStart");ib(this,"onPinch");ib(this,"onPinchEnd");const b=this.constructor.initial,g=this.constructor.states;this._id=this.constructor.id;this._initial=b;this._states=g}dispose(){this._disposables.forEach(b=>b());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(b=>[b,...b.descendants])}setCurrentState(b){this.currentState=b}};ib(Ir,"id");ib(Ir,"shortcuts");de([uf],Ir.prototype,"currentState",2);de([og],Ir.prototype,"setCurrentState",1);var Mv=class extends Ir{constructor(b,g){var p,G;super();ib(this,"registerKeyboardShortcuts",
()=>{var U;null!=(U=this._shortcuts)&&U.length&&this._disposables.push(...this._shortcuts.map(({keys:la,fn:pa})=>Tp.registerShortcut(la,Ga=>{this.isActive&&pa(this.root,this,Ga)})))});ib(this,"_root");ib(this,"_parent");ib(this,"_shortcuts",[]);ib(this,"children",new Map([]));ib(this,"registerStates",U=>{U.forEach(la=>this.children.set(la.id,new la(this,this._root)));return this});ib(this,"deregisterStates",U=>{U.forEach(la=>{var pa;null==(pa=this.children.get(la.id))?void 0:pa.dispose();this.children.delete(la.id)});
return this});this._parent=b;this._root=g;this.states&&0<this.states.length&&(this.registerStates(this.states),b=null!=(p=this.initial)?p:this.states[0].id,p=this.children.get(b))&&(this.setCurrentState(p),null==(G=this.currentState)?void 0:G._events.onEnter({fromId:"initial"}));this._shortcuts=this.constructor.shortcuts;zg(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,
this]:[this]}};ib(Mv,"cursor");var Vp=class extends Mv{constructor(){super(...arguments);ib(this,"isLocked",!1);ib(this,"previous");ib(this,"onEnter",({fromId:b})=>{this.previous=b;this.cursor&&this.app.cursors.setCursor(this.cursor)});ib(this,"onTransition",b=>{({toId:b}=b);b=this.children.get(b);this.app.cursors.reset();b.cursor?this.app.cursors.setCursor(b.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Ei=class extends Mv{get app(){return this.root}get tool(){return this.parent}},
py=class extends Ei{constructor(){super(...arguments);ib(this,"cursor","crosshair");ib(this,"creatingShape");ib(this,"aspectRatio");ib(this,"initialBounds",{});ib(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g,currentPoint:p}}=this.app;var {Shape:G}=this.tool;G=new G({id:Hk(),type:G.id,parentId:b.id,point:[...g],fill:this.app.settings.color,stroke:this.app.settings.color,size:je.abs(je.sub(p,g))});this.initialBounds={minX:g[0],minY:g[1],maxX:g[0]+1,maxY:g[1]+1,width:1,height:1};G.canChangeAspectRatio||
(G.aspectRatio?(this.aspectRatio=G.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=G;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(G);this.app.setSelectedShapes([G])});ib(this,"onPointerMove",b=>{if(!b.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:b}=
this);var {currentPoint:g,originPoint:p,shiftKey:G}=this.app.inputs;b=vf.getTransformedBoundingBox(b,"bottom_right_corner",je.sub(g,p),0,G||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[b.minX,b.minY],size:[b.width,b.height]})}});ib(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");
this.app.persist()});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};ib(py,"id","creating");var qy=class extends Ei{constructor(){super(...arguments);ib(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});ib(this,"onPinchStart",(...b)=>{var g,p;this.app.transition("select",{returnTo:this.app.currentState.id});null==(p=(g=this.app._events).onPinchStart)?
void 0:p.call(g,...b)});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};ib(qy,"id","idle");var ry=class extends Ei{constructor(){super(...arguments);ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Id.dist(b,g)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});ib(this,"onPointerUp",()=>{this.tool.transition("idle")})}};ib(ry,"id","pointing");var up=class extends Vp{constructor(){super(...arguments);
ib(this,"cursor","crosshair")}};ib(up,"id","box");ib(up,"states",[qy,ry,py]);ib(up,"initial","idle");var sy=class extends Ei{constructor(){super(...arguments);ib(this,"shape",{});ib(this,"points",[[0,0,.5]]);ib(this,"persistDebounced",fk(this.app.persist,200));ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ib(this,"onEnter",()=>{var b;const {Shape:g,previousShape:p}=this.tool;var {originPoint:G}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
p){this.shape=p;var {shape:U}=this;var la=U.props.points[U.props.points.length-1];const Ga=Id.sub(G,U.props.point).concat(null!=(b=G[2])?b:.5);this.points=[...U.props.points,la,la];const Qa=Math.ceil(Id.dist(la,G)/16);for(let Xa=0,fb=Xa/(Qa-1);Xa<Qa;Xa++){b=this.points;G=b.push;U=Id.lrp(la,Ga,fb);var pa=la[2];G.call(b,U.concat.call(U,pa+(Ga[2]-pa)*fb))}this.addNextPoint(Ga)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(la=G[2])?la:.5]],this.shape=new g({id:Hk(),type:g.id,parentId:this.app.currentPage.id,
point:G.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});ib(this,"onPointerMove",()=>{const {shape:b}=this,{currentPoint:g,previousPoint:p}=this.app.inputs;Id.isEqual(p,g)||this.addNextPoint(Id.sub(g,b.props.point).concat(g[2]))});ib(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,
points:this.tool.simplify?Gk.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let b=this.app.selectedTool.id;"pencil"===b||"highlighter"===b?this.persistDebounced():this.app.persist()});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(b){const {shape:g}=this,p=Id.min(b,
[0,0]);this.points.push(b);0>p[0]||0>p[1]?(this.points=this.points.map(G=>Id.sub(G,p).concat(G[2])),g.update({point:Id.add(g.props.point,p),points:this.points})):g.update({points:this.points})}};ib(sy,"id","creating");var ty=class extends Ei{constructor(){super(...arguments);ib(this,"onPointerDown",(b,g)=>{b.order||this.app.readOnly||this.tool.transition("creating")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};
ib(ty,"id","idle");var uy=class extends Ei{constructor(){super(...arguments);ib(this,"origin",[0,0]);ib(this,"prevDelta",[0,0]);ib(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});ib(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});ib(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};ib(uy,"id","pinching");var Rs=class extends Vp{constructor(){super(...arguments);ib(this,"cursor","crosshair");ib(this,"simplify",!0);ib(this,"simplifyTolerance",
1);ib(this,"previousShape");ib(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};ib(Rs,"id","draw");ib(Rs,"states",[ty,sy,uy]);ib(Rs,"initial","idle");var vy=class extends Ei{constructor(){super(...arguments);ib(this,"points",[[0,0,.5]]);ib(this,"hitShapes",new Set);ib(this,"onEnter",()=>{const {originPoint:b}=this.app.inputs;this.points=[b];this.hitShapes.clear()});ib(this,"onPointerMove",()=>{const {currentPoint:b,previousPoint:g}=this.app.inputs;Id.isEqual(g,b)||(this.points.push(b),
this.app.shapesInViewport.filter(p=>p.hitTestLineSegment(g,b)).forEach(p=>this.hitShapes.add(p)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});ib(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};ib(vy,"id","erasing");var by=class extends Ei{constructor(){super(...arguments);ib(this,"onPointerDown",
(b,g)=>{b.order||this.tool.transition("pointing")});ib(this,"onPinchStart",(...b)=>{var g,p;this.app.transition("select",{returnTo:this.app.currentState.id});null==(p=(g=this.app._events).onPinchStart)?void 0:p.call(g,...b)});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};ib(by,"id","idle");var cy=class extends Ei{constructor(){super(...arguments);ib(this,"onEnter",()=>{const {currentPoint:b}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(g=>
g.hitTestPoint(b)))});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Id.dist(b,g)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});ib(this,"onPointerUp",()=>{const b=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(b);this.tool.transition("idle")})}};ib(cy,"id","pointing");var Xt=class extends Vp{constructor(){super(...arguments);ib(this,"cursor","crosshair")}};ib(Xt,"id","erase");ib(Xt,"states",[by,cy,vy]);ib(Xt,
"initial","idle");var Gv=class extends Ei{constructor(){super(...arguments);ib(this,"handle",{});ib(this,"handleId","end");ib(this,"currentShape",{});ib(this,"initialShape",{});ib(this,"bindableShapeIds",[]);ib(this,"startBindingShapeId");ib(this,"newStartBindingId","");ib(this,"draggedBindingId","");ib(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,previousPoint:g,originPoint:p,currentPoint:G,modKey:U,altKey:la}}=this.app;var pa=this.app.getShapeById(this.initialShape.id),{handles:Ga}=this.initialShape,
Qa=this.handleId,Xa="start"===this.handleId?"end":"start";if(!je.isEqual(g,G)){var fb=je.sub(G,p);if(b){var mb=Ga[Xa].point,Gb=je.add(Ga[Qa].point,fb),Wb=je.angle(mb,Gb);mb=je.rotWith(Gb,mb,pm.snapAngleToSegments(Wb,24)-Wb);fb=je.add(fb,je.sub(mb,Gb))}fb=je.add(Ga[Qa].point,fb);Ga={[Qa]:rf(oe({},Ga[Qa]),{point:je.toFixed(fb),bindingId:void 0})};var Mb=this.currentShape.getHandlesChange(this.initialShape,Ga);if(Mb){Ga=Gi(pa.props,Mb);var dc={},hc;Qa=Ga.handles[Qa];Xa=Ga.handles[Xa];if(this.startBindingShapeId){var Ub;
if(fb=this.app.getShapeById(this.startBindingShapeId)){Gb=fb.getCenter();mb=Ga.handles.end;var nc=je.add(Ga.handles.start.point,Ga.point);je.isEqual(nc,Gb)&&nc[1]++;Wb=fb.hitTestPoint(G);nc=je.uni(je.sub(nc,Gb));const Bc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];U||fb.hitTestPoint(je.add(Ga.point,mb.point))||(Ub=Rc(pa.props,fb,"start",this.newStartBindingId,Gb,Gb,nc,Wb));Ub&&!Bc?(dc[this.newStartBindingId]=Ub,Ga.handles.start.bindingId=Ub.id):!Ub&&Bc&&(console.log("removing start binding"),
delete dc[this.newStartBindingId],Ga.handles.start.bindingId=void 0)}}if(!U){Ub=je.add(Xa.point,Ga.point);Xa=je.add(Qa.point,Ga.point);Qa=je.uni(je.sub(Xa,Ub));const Bc=je.add(Ga.point,Ga.handles.start.point),Ec=je.add(Ga.point,Ga.handles.end.point);fb=this.bindableShapeIds.map(Sc=>this.app.getShapeById(Sc)).sort((Sc,Jd)=>Jd.nonce-Sc.nonce).filter(Sc=>![Bc,Ec].every(Jd=>Sc.hitTestPoint(Jd)));for(const Sc of fb)if(hc=Rc(pa.props,Sc,this.handleId,this.draggedBindingId,Xa,Ub,Qa,la))break}hc?(dc[this.draggedBindingId]=
hc,Ga=Gi(Ga,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(pa=pa.props.handles[this.handleId].bindingId,void 0!==pa&&(delete dc[pa],Ga=Gi(Ga,{handles:{[this.handleId]:{bindingId:void 0}}})));Mb=this.currentShape.getHandlesChange(Ga,Ga.handles);Hd(()=>{var Bc;if(Mb){this.currentShape.update(Mb);this.app.currentPage.updateBindings(dc);const Ec=Object.values(null!=(Bc=Mb.handles)?Bc:{}).map(Sc=>Sc.bindingId).map(Sc=>this.app.currentPage.bindings[Sc]).filter(Boolean).flatMap(Sc=>[Sc.toId,
Sc.fromId].filter(Boolean));this.app.setBindingShapes(Ec)}})}}});ib(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});ib(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};ib(Gv,"id","creating");var dy=class extends Gv{constructor(){super(...arguments);
ib(this,"onEnter",()=>{var b;this.app.history.pause();this.newStartBindingId=Hk();this.draggedBindingId=Hk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:g}=this.tool;const {originPoint:p}=this.app.inputs;g=new g(rf(oe({},g.defaultProps),{id:Hk(),type:g.id,parentId:this.app.currentPage.id,point:p,fill:this.app.settings.color,stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=Fc(g.props);this.currentShape=g;this.app.currentPage.addShapes(g);
this.app.setSelectedShapes([g]);if(this.startBindingShapeId=null==(b=this.bindableShapeIds.map(G=>this.app.getShapeById(G)).filter(G=>Gk.pointInBounds(p,G.bounds))[0])?void 0:b.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};ib(dy,"id","creating");var ey=class extends Ei{constructor(){super(...arguments);ib(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});ib(this,"onPinchStart",
(...b)=>{var g,p;this.app.transition("select",{returnTo:this.app.currentState.id});null==(p=(g=this.app._events).onPinchStart)?void 0:p.call(g,...b)});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});ib(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b)}});ib(this,"onPointerLeave",b=>{b.order||
"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};ib(ey,"id","idle");var fy=class extends Ei{constructor(){super(...arguments);ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Id.dist(b,g)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};ib(fy,"id","pointing");var Yt=class extends Vp{constructor(){super(...arguments);ib(this,"cursor","crosshair")}};ib(Yt,"id","line");ib(Yt,
"states",[ey,fy,dy]);ib(Yt,"initial","idle");var gy=class extends Ei{constructor(){super(...arguments);ib(this,"cursor","crosshair");ib(this,"creatingShape");ib(this,"aspectRatio");ib(this,"initialBounds",{});ib(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g}}=this.app,{Shape:p}=this.tool,G=new p({id:Hk(),type:p.id,parentId:b.id,point:[...g],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=G;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);
Hd(()=>{this.app.currentPage.addShapes(G);const {bounds:U}=G;G.update({point:je.sub(g,[U.width/2,U.height/2])});this.app.transition("select");this.app.setSelectedShapes([G]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};ib(gy,"id","creating");var hy=class extends Ei{constructor(){super(...arguments);ib(this,"onPointerDown",(b,g)=>{b.order||this.app.readOnly||this.tool.transition("creating")});ib(this,"onPinchStart",(...b)=>{var g,p;this.app.transition("select",
{returnTo:this.app.currentState.id});null==(p=(g=this.app._events).onPinchStart)?void 0:p.call(g,...b)});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};ib(hy,"id","idle");var Zt=class extends Vp{constructor(){super(...arguments);ib(this,"cursor","crosshair")}};ib(Zt,"id","box");ib(Zt,"states",[hy,gy]);ib(Zt,"initial","idle");var cD=nf(Dr()),dD=class extends cD.default{constructor(){super(...arguments);ib(this,"toBBox",b=>b.rotatedBounds)}},Ux=class extends Ei{constructor(){super(...arguments);
ib(this,"initialSelectedIds",[]);ib(this,"initialSelectedShapes",[]);ib(this,"tree",new dD);ib(this,"onEnter",()=>{const {selectedShapes:b,currentPage:g,selectedIds:p}=this.app;this.initialSelectedIds=Array.from(p.values());this.initialSelectedShapes=Array.from(b.values());this.tree.load(g.shapes)});ib(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});ib(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,ctrlKey:g,originPoint:p,currentPoint:G}}=this.app,
U=vf.getBoundsFromPoints([G,p],0);this.app.setBrush(U);const la=[...(new Set(this.tree.search(U).filter(pa=>g?vf.boundsContain(U,pa.rotatedBounds):pa.hitTestBounds(U)).filter(pa=>"group"!==pa.type).map(pa=>{var Ga;return null!=(Ga=this.app.getParentGroup(pa))?Ga:pa})))];b?la.every(pa=>this.initialSelectedShapes.includes(pa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(pa=>!la.includes(pa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...la]))]):this.app.setSelectedShapes(la);
this.app.viewport.panToPointWhenOutOfBounds(G)});ib(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});ib(this,"handleModifierKey",(b,g)=>{switch(g.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};ib(Ux,"id","brushing");var Vx=class extends Ei{constructor(){super(...arguments);ib(this,"onEnter",b=>{var g;const {selectedIds:p,selectedShapes:G,inputs:{shiftKey:U}}=this.app;if("shape"===b.type&&
!G.has(b.shape)){const la=null!=(g=this.app.getParentGroup(b.shape))?g:b.shape;U?this.app.setSelectedShapes([...Array.from(p.values()),la.id]):this.app.setSelectedShapes([la])}});ib(this,"onPointerDown",()=>{this.tool.transition("idle")})}};ib(Vx,"id","contextMenu");var Wx=class extends Ei{constructor(){super(...arguments);ib(this,"onEnter",b=>{"pinching"===b.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});ib(this,"onExit",()=>{});ib(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);
break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b);break;case "canvas":this.app.setHoveredShape(void 0)}});ib(this,"onPointerDown",(b,g)=>{const {selectedShapes:p,inputs:{ctrlKey:G}}=this.app;if(2===g.button)this.tool.transition("contextMenu",b);else if(G)this.tool.transition("pointingCanvas");else switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");
break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",b)}break;case "shape":if(p.has(b.shape))this.tool.transition("pointingSelectedShape",b);else{const {selectionBounds:U,inputs:la}=this.app;U&&Gk.pointInBounds(la.currentPoint,U)?this.tool.transition("pointingShapeBehindBounds",b):this.tool.transition("pointingShape",b)}break;case "handle":this.tool.transition("pointingHandle",b);break;case "canvas":this.tool.transition("pointingCanvas");
break;case "minimap":this.tool.transition("pointingMinimap",oe(oe({},g),b))}});ib(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ib(this,"onDoubleClick",b=>{if(!b.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var g=this.app.selectedShapesArray[0];if(g.canEdit)switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":1===
this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:g})}}});ib(this,"onKeyDown",(b,g)=>{({selectedShapesArray:b}=this.app);switch(g.key){case "Enter":1===b.length&&b[0].canEdit&&!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:b[0],order:0});break;case "Escape":b.length&&this.app.setSelectedShapes([])}})}};ib(Wx,"id","idle");var Xx=class extends Ei{constructor(){super(...arguments);ib(this,"onEnter",b=>{var g;const {selectedIds:p,
inputs:{shiftKey:G}}=this.app,U=null!=(g=this.app.getParentGroup(b.shape))?g:b.shape;G?this.app.setSelectedShapes([...Array.from(p.values()),U.id]):this.app.setSelectedShapes([U])});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Id.dist(b,g)&&!this.app.readOnly&&this.tool.transition("translating")});ib(this,"onPointerUp",()=>{this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ib(Xx,"id","pointingShape");
var Yx=class extends Ei{constructor(){super(...arguments);ib(this,"cursor","move");ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Id.dist(b,g)&&!this.app.readOnly&&this.tool.transition("translating")});ib(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ib(Yx,"id","pointingBoundsBackground");var Zx=class extends Ei{constructor(){super(...arguments);
ib(this,"onEnter",()=>{var b;const {shiftKey:g}=this.app.inputs;g||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(b=window.getSelection())?void 0:b.removeAllRanges())});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Id.dist(b,g)&&this.tool.transition("brushing")});ib(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,
event:g})});ib(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};ib(Zx,"id","pointingCanvas");var $x=class extends Ei{constructor(){super(...arguments);ib(this,"cursor","move");ib(this,"isCloning",!1);ib(this,"didClone",!1);ib(this,"initialPoints",{});ib(this,"initialShapePoints",{});ib(this,"initialClonePoints",{});ib(this,"clones",[]);ib(this,"onEnter",()=>{var b;this.app.history.pause();const {allSelectedShapesArray:g,inputs:p}=this.app;this.initialPoints=
this.initialShapePoints=Object.fromEntries(g.map(({id:G,props:{point:U}})=>[G,U.slice()]));document.querySelectorAll("input,textarea").forEach(G=>G.blur());null==(b=document.getSelection())?void 0:b.empty();p.altKey?this.startCloning():this.moveSelectedShapesToPointer()});ib(this,"onExit",()=>{this.app.history.resume();this.app.persist();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});ib(this,"onPointerMove",()=>{const {inputs:{currentPoint:b}}=
this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenOutOfBounds(b)});ib(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ib(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(p=>{p.update({point:this.initialPoints[p.id]})}),this.tool.transition("idle")}});
ib(this,"onKeyUp",(b,g)=>{switch(g.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:p,allSelectedShapes:G}=this.app;p.removeShapes(...G);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:b,originPoint:g,currentPoint:p}}=this.app,{initialPoints:G}=this,U=Id.sub(p,g);b&&(Math.abs(U[0])<Math.abs(U[1])?
U[0]=0:U[1]=0);Hd(()=>{this.app.allSelectedShapes.forEach(la=>{la.update({point:Id.add(G[la.id],U)})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(b=>{const g=this.app.getShapeClass(b.type);if(!g)throw Error("Could not find that shape class.");return new g(rf(oe({},b.serialized),{id:Hk(),type:b.type,point:this.initialPoints[b.id],rotation:b.props.rotation}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:b,props:{point:g}})=>[b,g.slice()])),
this.didClone=!0);this.app.allSelectedShapes.forEach(b=>{b.update({point:this.initialPoints[b.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};ib($x,"id","translating");var ay=class extends Ei{constructor(){super(...arguments);ib(this,"pointedSelectedShape");ib(this,"onEnter",b=>{this.pointedSelectedShape=b.shape});ib(this,"onExit",
()=>{this.pointedSelectedShape=void 0});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Id.dist(b,g)&&!this.app.readOnly&&this.tool.transition("translating")});ib(this,"onPointerUp",()=>{const {shiftKey:b,currentPoint:g}=this.app.inputs;var {selectedShapesArray:p}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(b)({selectedIds:p}=this.app),p=Array.from(p.values()),p.splice(p.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(p);
else{if(1===p.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&this.pointedSelectedShape instanceof yn&&Gk.pointInBounds(g,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ib(ay,"id","pointingSelectedShape");var Tx=class extends Ei{constructor(){super(...arguments);
ib(this,"info",{});ib(this,"onEnter",b=>{this.info=b;this.updateCursor()});ib(this,"onExit",()=>{this.app.cursors.reset()});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Id.dist(b,g)&&this.tool.transition("resizing",this.info)});ib(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Ar[this.info.handle],this.app.selectionBounds.rotation)}};
ib(Tx,"id","pointingResizeHandle");var mz=class extends Ei{constructor(){super(...arguments);ib(this,"isSingle",!1);ib(this,"handle","bottom_right_corner");ib(this,"snapshots",{});ib(this,"initialCommonBounds",{});ib(this,"selectionRotation",0);ib(this,"resizeType","corner");ib(this,"onEnter",b=>{var g,p;const {history:G,selectedShapesArray:U,selectionBounds:la}=this.app;if(!la)throw Error("Expected a selected bounds.");this.handle=b.handle;this.resizeType="left_edge"===b.handle||"right_edge"===b.handle?
"horizontal-edge":"top_edge"===b.handle||"bottom_edge"===b.handle?"vertical-edge":"corner";this.app.cursors.setCursor(mz.CURSORS[b.handle],null==(g=this.app.selectionBounds)?void 0:g.rotation);G.pause();const pa=vf.getBoundsFromPoints(U.map(Ga=>vf.getBoundsCenter(Ga.bounds)));this.selectionRotation=(this.isSingle=1===U.length)?null!=(p=U[0].props.rotation)?p:0:0;this.initialCommonBounds=oe({},la);this.snapshots=Object.fromEntries(U.map(Ga=>{const Qa=oe({},Ga.bounds),[Xa,fb]=vf.getBoundsCenter(Qa);
return[Ga.id,{props:Ga.serialized,bounds:Qa,transformOrigin:[(Xa-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(fb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(Xa-pa.minX)/pa.width,(fb-pa.minY)/pa.height],isAspectRatioLocked:Ga.props.isAspectRatioLocked||!(Ga.canChangeAspectRatio&&!Ga.props.rotation)}]}));U.forEach(Ga=>{var Qa;null==(Qa=Ga.onResizeStart)?void 0:Qa.call(Ga,{isSingle:this.isSingle})})});ib(this,"onExit",()=>{this.app.cursors.reset();
this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});ib(this,"onPointerMove",()=>{const {inputs:{altKey:b,shiftKey:g,ctrlKey:p,originPoint:G,currentPoint:U}}=this.app,{handle:la,snapshots:pa,initialCommonBounds:Ga}=this;let Qa=Id.sub(U,G);b&&(Qa=Id.mul(Qa,2));const Xa=this.app.selectedShapes.values().next().value;let fb=vf.getTransformedBoundingBox(Ga,la,Qa,this.selectionRotation,g||this.isSingle&&(p?!("clipping"in Xa.props):!Xa.canChangeAspectRatio||
Xa.props.isAspectRatioLocked));b&&(fb=oe(oe({},fb),vf.centerBounds(fb,vf.getBoundsCenter(Ga))));const {scaleX:mb,scaleY:Gb}=fb;this.app.selectedShapes.forEach(Wb=>{var Mb,dc;const {props:hc,bounds:Ub,transformOrigin:nc}=pa[Wb.id];let Bc=vf.getRelativeTransformedBoundingBox(fb,Ga,Ub,0>mb,0>Gb);if(Wb.canResize.some(Jd=>Jd)||Wb.props.isSizeLocked||!this.isSingle){var Ec=[mb,Gb],Sc=null!=(Mb=hc.rotation)?Mb:0;Mb=vf.getBoundsCenter(Bc);Wb.canFlip||(Ec=Id.abs(Ec));Wb.canScale||(Ec=null!=(dc=hc.scale)?dc:
[1,1]);if(Sc&&0>mb&&0<=Gb||0>Gb&&0<=mb)Sc*=-1;Wb.onResize(hc,{center:Mb,rotation:Sc,scale:Ec,bounds:Bc,type:la,clip:p,transformOrigin:nc})}});this.updateCursor(mb,Gb);this.app.viewport.panToPointWhenOutOfBounds(U)});ib(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(p=>{p.update(oe({},this.snapshots[p.id].props))}),this.tool.transition("idle")}})}updateCursor(b,
g){var p,G,U,la;const pa=0>b&&0<=g;b=0>g&&0<=b;switch(this.handle){case "top_left_corner":case "bottom_right_corner":pa||b?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(p=this.app.selectionBounds)?void 0:p.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(G=this.app.selectionBounds)?void 0:G.rotation);break;case "top_right_corner":case "bottom_left_corner":pa||b?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",
null==(U=this.app.selectionBounds)?void 0:U.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(la=this.app.selectionBounds)?void 0:la.rotation)}}},Ov=mz;ib(Ov,"id","resizing");ib(Ov,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var Iy=class extends Ei{constructor(){super(...arguments);
ib(this,"cursor","rotate");ib(this,"handle","");ib(this,"onEnter",b=>{this.app.history.pause();this.handle=b.handle;this.updateCursor()});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Id.dist(b,g)&&this.tool.transition("rotating",{handle:this.handle})});ib(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Ar[this.handle],
this.app.selectionRotation)}};ib(Iy,"id","pointingRotateHandle");var Jy=class extends Ei{constructor(){super(...arguments);ib(this,"info",{});ib(this,"onEnter",b=>{this.info=b});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Id.dist(b,g)&&!this.app.readOnly&&this.tool.transition("translating")});ib(this,"onPointerUp",()=>{const {selectedIds:b,inputs:{shiftKey:g}}=this.app;g?this.app.setSelectedShapes([...Array.from(b.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ib(Jy,"id","pointingShapeBehindBounds");var Pv=class extends Ei{constructor(){super(...arguments);ib(this,"cursor","rotate");ib(this,"snapshot",{});ib(this,"initialCommonCenter",[0,0]);ib(this,"initialCommonBounds",{});ib(this,"initialAngle",0);ib(this,"initialSelectionRotation",0);ib(this,"handle","");ib(this,"onEnter",b=>{const {history:g,selectedShapesArray:p,selectionBounds:G}=this.app;
if(!G)throw Error("Expected selected bounds.");g.pause();this.handle=b.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=oe({},G);this.initialCommonCenter=vf.getBoundsCenter(G);this.initialAngle=Id.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(p.map(U=>[U.id,{point:[...U.props.point],center:[...U.center],rotation:U.props.rotation,handles:"handles"in U?fr(U.handles):void 0}]));this.updateCursor()});ib(this,"onExit",
()=>{this.app.history.resume();this.snapshot={}});ib(this,"onPointerMove",()=>{const {selectedShapes:b,inputs:{shiftKey:g,currentPoint:p}}=this.app,{snapshot:G,initialCommonCenter:U,initialAngle:la,initialSelectionRotation:pa}=this;let Ga=Id.angle(U,p)-la;g&&(Ga=pm.snapAngleToSegments(Ga,24));b.forEach(Xa=>{var fb=G[Xa.id];let mb=0;if(g){var {rotation:Gb=0}=fb;mb=pm.snapAngleToSegments(Gb,24)-Gb}const Wb=Id.sub(fb.center,fb.point);Gb=Id.rotWith(fb.center,U,Ga);if("handles"in Xa){fb=fb.handles;const Mb=
fb.map(hc=>Id.rotWith(hc.point,Wb,Ga)),dc=vf.getCommonTopLeft(Mb);Xa.update({point:Id.add(dc,Id.sub(Gb,Wb)),handles:fb.map((hc,Ub)=>rf(oe({},hc),{point:Id.sub(Mb[Ub],dc)}))})}else Xa.update({point:Id.sub(Gb,Wb),rotation:pm.clampRadians((fb.rotation||0)+Ga+mb)})});const Qa=pm.clampRadians(pa+Ga);this.app.setSelectionRotation(g?pm.snapAngleToSegments(Qa,24):Qa);this.updateCursor()});ib(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});ib(this,"onKeyDown",
(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(p=>{p.update(this.snapshot[p.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(Ar[this.handle],this.app.selectionRotation)}};ib(Pv,"id","rotating");var Ky=class extends Ei{constructor(){super(...arguments);ib(this,"onPinch",(b,g)=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});ib(this,"onPinchEnd",()=>{this.tool.transition("idle")});ib(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
ib(Ky,"id","pinching");var Ly=class extends Gv{constructor(){super(...arguments);ib(this,"cursor","grabbing");ib(this,"onEnter",b=>{this.app.history.pause();this.newStartBindingId=Hk();this.draggedBindingId=Hk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=b.id;this.currentShape=b.shape;this.initialShape=Fc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};ib(Ly,"id","translatingHandle");var My=class extends Ei{constructor(){super(...arguments);
ib(this,"cursor","grabbing");ib(this,"info",{});ib(this,"onEnter",b=>{this.info=b});ib(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<Id.dist(b,g)&&this.tool.transition("translatingHandle",this.info)});ib(this,"onPointerUp",()=>{this.tool.transition("idle")});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ib(My,"id","pointingHandle");var Ny=class extends Ei{constructor(){super(...arguments);ib(this,"handle");ib(this,"onEnter",
b=>{var g;this.app.cursors.setCursor(Ar[b.handle],null!=(g=this.app.selectionBounds.rotation)?g:0);this.handle=b.handle});ib(this,"onExit",()=>{this.app.cursors.reset()});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ib(this,"onPointerDown",b=>{switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
b);break;default:this.tool.transition("pointingResizeHandle",b)}}});ib(this,"onPointerLeave",()=>{this.tool.transition("idle")});ib(this,"onDoubleClick",b=>{var g;if(!b.order&&1===this.app.selectedShapes.size){var p=this.app.selectedShapes.values().next().value;if(p.canEdit&&!this.app.readOnly)switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":null==(g=p.onResetBounds)?void 0:g.call(p,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&
this.tool.transition("editingShape",{type:"shape",target:p})}else p.onResetBounds({asset:p.props.assetId?this.app.assets[p.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle")}})}};ib(Ny,"id","hoveringSelectionHandle");var Oy=class extends Ei{constructor(){super(...arguments);ib(this,"editingShape",{});ib(this,"onEnter",b=>{this.editingShape=b.shape;this.app.setEditingShape(b.shape)});ib(this,"onExit",()=>{var b;if(this.editingShape&&"text"in this.editingShape.props){const g=
this.editingShape.props.text.trim();""===g&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:g}))}this.app.persist();this.app.setEditingShape();null==(b=document.querySelector(".tl-canvas"))?void 0:b.focus()});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});ib(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.editingShape)break;this.tool.transition("idle",
b);break;case "canvas":b.order||this.tool.transition("idle",b)}});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":Hd(()=>{g.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};ib(Oy,"id","editingShape");var Py=class extends Ei{constructor(){super(...arguments);ib(this,"minimapZoom",1);ib(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});ib(this,"getCameraPoint",b=>{const g=document.querySelector(".tl-preview-minimap svg");
var p=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(g&&p){const G=g.getBoundingClientRect();this.minimapRect.height=G.height;this.minimapRect.width=G.width;this.minimapRect.minX=G.left;this.minimapRect.minY=G.top;this.minimapRect.maxX=G.right;this.minimapRect.maxY=G.bottom;this.minimapZoom=+g.dataset.commonBoundWidth/this.minimapRect.width;b=Id.sub(b,[this.minimapRect.minX,this.minimapRect.minY]);p=p.getBoundingClientRect();p=Id.mul(Id.sub(b,[p.left+p.width/2,p.top+p.height/
2]),this.minimapZoom);return Id.sub(this.app.viewport.camera.point,p)}});ib(this,"onEnter",b=>{(b=this.getCameraPoint([b.clientX,b.clientY]))?this.app.viewport.update({point:b}):this.tool.transition("idle")});ib(this,"onPointerMove",(b,g)=>{"clientX"in g&&(b=this.getCameraPoint([g.clientX,g.clientY]))&&this.app.viewport.update({point:b})});ib(this,"onPointerUp",()=>{this.tool.transition("idle")})}};ib(Py,"id","pointingMinimap");var Wr=class extends Vp{constructor(){super(...arguments);ib(this,"returnTo",
"");ib(this,"onEnter",b=>{this.returnTo=null==b?void 0:b.returnTo})}};ib(Wr,"id","select");ib(Wr,"initial","idle");ib(Wr,"shortcut",["1","s"]);ib(Wr,"states",[Wx,Ux,Vx,Zx,Xx,Jy,ay,Yx,Ny,Tx,Iy,Py,My,Ly,$x,Ov,Pv,Pv,Ky,Oy]);var Hy=class extends Ei{constructor(){super(...arguments);ib(this,"cursor","grabbing");ib(this,"originalScreenPoint",[]);ib(this,"originalCameraPoint",[]);ib(this,"prevState","idle");ib(this,"onEnter",b=>{this.prevState=null==b?void 0:b.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;
this.originalCameraPoint=this.app.viewport.camera.point});ib(this,"onPointerMove",(b,g)=>{b=je.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:je.sub(this.originalCameraPoint,je.div(b,this.app.viewport.camera.zoom))})});ib(this,"onPointerUp",()=>{var b;this.tool.transition(null!=(b=this.prevState)?b:"idle")})}};ib(Hy,"id","panning");var Fy=class extends Ei{constructor(){super(...arguments);ib(this,"onEnter",b=>{this.parent.prevTool&&b.exit&&(this.app.setCurrentState(this.parent.prevTool),
setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});ib(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning")})}};ib(Fy,"id","idle");var Gy=class extends Ei{constructor(){super(...arguments);ib(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning",{prevState:"idleHold"})});ib(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};ib(Gy,"id","idleHold");var nz=class extends Ei{constructor(){super(...arguments);
ib(this,"origin",[0,0]);ib(this,"prevDelta",[0,0]);ib(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});ib(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});ib(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};ib(nz,"id","pinching");var Xr=class extends Vp{constructor(){super(...arguments);ib(this,"cursor","grab");ib(this,"prevTool",null);ib(this,"onEnter",b=>{this.prevTool=null==b?void 0:b.prevTool});ib(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});
ib(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};ib(Xr,"id","move");ib(Xr,"shortcut",["2","m"]);ib(Xr,"states",[Fy,Gy,Hy,nz]);ib(Xr,"initial","idle");var Bm=class{constructor(b,g={}){ib(this,"lastShapesNounces",null);ib(this,"app");ib(this,"id");ib(this,"name");ib(this,"shapes",[]);ib(this,"bindings",{});ib(this,"nonce",0);ib(this,"bringForward",Ga=>{const Qa=this.parseShapesArg(Ga);Qa.sort((Xa,fb)=>this.shapes.indexOf(fb)-this.shapes.indexOf(Xa)).map(Xa=>this.shapes.indexOf(Xa)).forEach(Xa=>
{if(Xa!==this.shapes.length-1&&!Qa.includes(this.shapes[Xa+1])){var fb=this.shapes[Xa];this.shapes[Xa]=this.shapes[Xa+1];this.shapes[Xa+1]=fb}});this.app.persist();return this});ib(this,"sendBackward",Ga=>{const Qa=this.parseShapesArg(Ga);Qa.sort((Xa,fb)=>this.shapes.indexOf(Xa)-this.shapes.indexOf(fb)).map(Xa=>this.shapes.indexOf(Xa)).forEach(Xa=>{if(0!==Xa&&!Qa.includes(this.shapes[Xa-1])){var fb=this.shapes[Xa];this.shapes[Xa]=this.shapes[Xa-1];this.shapes[Xa-1]=fb}});this.app.persist();return this});
ib(this,"bringToFront",Ga=>{const Qa=this.parseShapesArg(Ga);this.shapes=this.shapes.filter(Xa=>!Qa.includes(Xa)).concat(Qa);this.app.persist();return this});ib(this,"sendToBack",Ga=>{const Qa=this.parseShapesArg(Ga);this.shapes=Qa.concat(this.shapes.filter(Xa=>!Qa.includes(Xa)));this.app.persist();return this});ib(this,"flip",(Ga,Qa)=>{Ga=this.parseShapesArg(Ga);const Xa=vf.getCommonBounds(Ga.map(fb=>fb.bounds));Ga.forEach(fb=>{var mb;const Gb=vf.getRelativeTransformedBoundingBox(Xa,Xa,fb.bounds,
"horizontal"===Qa,"vertical"===Qa);if(fb.serialized)fb.onResize(fb.serialized,{bounds:Gb,center:vf.getBoundsCenter(Gb),rotation:null!=(mb=fb.props.rotation)?mb:-0,type:"top_left_corner",scale:fb.canFlip&&fb.props.scale?"horizontal"===Qa?[-fb.props.scale[0],1]:[1,-fb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});ib(this,"getShapeById",Ga=>this.shapes.find(Qa=>Qa.id===Ga));ib(this,"cleanup",Ga=>{Ga=mc(this.bindings,Ga);const Qa=new Set;let Xa=!1,fb=!1;const mb=
fr(this.bindings);Ga.forEach(Gb=>{var Wb;if(this.bindings[Gb.id]){var Mb=this.getShapeById(Gb.toId),dc=this.getShapeById(Gb.fromId);Mb&&dc?Qa.has(dc.id)||(Gb=this.updateArrowBindings(dc),Qa.add(dc.id),Gb&&(dc=oe(oe({},dc.props),Gb),Xa=!0,null==(Wb=this.getShapeById(dc.id))?void 0:Wb.update(dc,!1,!0))):(delete mb[Gb.id],fb=!0)}});Object.keys(mb).forEach(Gb=>{const Wb=this.bindings[Gb];0===this.shapes.filter(Mb=>Mb.id===Wb.fromId||Mb.id===Wb.toId).length&&(delete mb[Gb],fb=!0)});fb&&this.update({bindings:mb});
(Xa||fb)&&this.app.persist(!0)});ib(this,"updateArrowBindings",Ga=>{var Qa,Xa,fb,mb={start:fr(Ga.props.handles.start),end:fr(Ga.props.handles.end)},Gb={isBound:!1,handle:Ga.props.handles.start,point:je.add(Ga.props.handles.start.point,Ga.props.point)},Wb={isBound:!1,handle:Ga.props.handles.end,point:je.add(Ga.props.handles.end.point,Ga.props.point)};if(Ga.props.handles.start.bindingId){var Mb=void 0!==(null==(Qa=Ga.props.decorations)?void 0:Qa.start);Qa=Ga.props.handles.start;var dc=this.bindings[Ga.props.handles.start.bindingId],
hc=this.getShapeById(null==dc?void 0:dc.toId);if(hc){Gb=hc.getBounds();var Ub=hc.getExpandedBounds(),nc=vf.expandBounds(Gb,Mb?dc.distance:1);const {minX:Bc,minY:Ec,width:Sc,height:Jd}=Ub,Wd=je.add([Bc,Ec],je.mulV([Sc,Jd],je.rotWith(dc.point,[.5,.5],hc.props.rotation||0)));Gb={isBound:!0,hasDecoration:Mb,binding:dc,handle:Qa,point:Wd,target:hc,bounds:Gb,expandedBounds:Ub,intersectBounds:nc,center:hc.getCenter()}}}if(Ga.props.handles.end.bindingId&&(Mb=void 0!==(null==(Xa=Ga.props.decorations)?void 0:
Xa.end),Xa=Ga.props.handles.end,Qa=this.bindings[Ga.props.handles.end.bindingId],dc=this.getShapeById(null==Qa?void 0:Qa.toId))){Wb=dc.getBounds();hc=dc.getExpandedBounds();Ub=Mb?vf.expandBounds(Wb,Qa.distance):Wb;const {minX:Bc,minY:Ec,width:Sc,height:Jd}=hc;nc=je.add([Bc,Ec],je.mulV([Sc,Jd],je.rotWith(Qa.point,[.5,.5],dc.props.rotation||0)));Wb={isBound:!0,hasDecoration:Mb,binding:Qa,handle:Xa,point:nc,target:dc,bounds:Wb,expandedBounds:hc,intersectBounds:Ub,center:dc.getCenter()}}for(const Bc of["end",
"start"]){Xa="start"===Bc?Gb:Wb;const Ec="start"===Bc?Wb:Gb;if(Xa.isBound)if(Xa.binding.distance){if(Mb=je.uni(je.sub(Xa.point,Ec.point)),Qa=C(Ec.point,Mb,Xa.intersectBounds,Xa.target.props.rotation).filter(Sc=>Sc.didIntersect).map(Sc=>Sc.points[0]).sort((Sc,Jd)=>je.dist(Sc,Ec.point)-je.dist(Jd,Ec.point)),Qa[0])if(dc=void 0,Ec.isBound&&(dc=C(Ec.point,Mb,Ec.intersectBounds,Ec.target.props.rotation).filter(Sc=>Sc.didIntersect).map(Sc=>Sc.points[0]).sort((Sc,Jd)=>je.dist(Sc,Ec.point)-je.dist(Jd,Ec.point))[0]),
Ec.isBound&&(2>Qa.length||dc&&Qa[0]&&10>Math.ceil(je.dist(Qa[0],dc))||vf.boundsContain(Xa.expandedBounds,Ec.expandedBounds)||vf.boundsCollide(Xa.expandedBounds,Ec.expandedBounds)))Mb=je.uni(je.sub(Ec.point,Xa.point)),Qa=C(Xa.point,Mb,Xa.bounds,Xa.target.props.rotation).filter(Sc=>Sc.didIntersect).map(Sc=>Sc.points[0]),Qa[0]&&(mb[Bc].point=je.toFixed(je.sub(Qa[0],Ga.props.point)),mb["start"===Bc?"end":"start"].point=je.toFixed(je.add(je.sub(Qa[0],Ga.props.point),je.mul(Mb,Math.min(je.dist(Qa[0],Ec.point),
10*(vf.boundsContain(Ec.bounds,Xa.intersectBounds)?-1:1))))));else{if(!Ec.isBound&&(Qa[0]&&10>je.dist(Qa[0],Ec.point)||Gk.pointInBounds(Ec.point,Xa.intersectBounds)))return mb=je.uni(je.sub(Xa.center,Ec.point)),null==(fb=Ga.getHandlesChange)?void 0:fb.call(Ga,Ga.props,{[Bc]:rf(oe({},Ga.props.handles[Bc]),{point:je.toFixed(je.add(je.sub(Ec.point,Ga.props.point),je.mul(mb,10)))})});Qa[0]&&(mb[Bc].point=je.toFixed(je.sub(Qa[0],Ga.props.point)))}}else mb[Bc].point=je.sub(Xa.point,Ga.props.point)}return Ga.getHandlesChange(Ga.props,
mb)});const {id:p,name:G,shapes:U=[],bindings:la={},nonce:pa}=g;this.id=p;this.name=G;this.bindings=Object.assign({},la);this.app=b;this.nonce=pa||0;this.addShapes(...U);zg(this);Md(()=>{const Ga=0<this.shapes.length?Object.fromEntries(this.shapes.map(Qa=>[Qa.id,Qa.nonce])):null;if(this.lastShapesNounces&&Ga){const Qa=this.lastShapesNounces,Xa=[...(new Set([...Object.keys(Ga),...Object.keys(Qa)]))].filter(fb=>Qa[fb]!==Ga[fb]);requestAnimationFrame(()=>{this.cleanup(Xa)})}Ga&&(this.lastShapesNounces=
Ga)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(b=>b.serialized).filter(b=>!!b).map(b=>Fc(b)),bindings:fr(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(b=>[b.id,b]))}update(b){Object.assign(this,b);return this}updateBindings(b){Object.assign(this.bindings,b);return this}updateShapesIndex(b){this.shapes.sort((g,p)=>b.indexOf(g.id)-b.indexOf(p.id));return this}addShapes(...b){if(0!==b.length)return b="getBounds"in b[0]?b:b.map(g=>
new (this.app.getShapeClass(g.type))(g)),this.shapes.push(...b),b}parseShapesArg(b){return"string"===typeof b[0]?this.shapes.filter(g=>b.includes(g.id)):b}removeShapes(...b){const g=this.parseShapesArg(b);this.shapes=this.shapes.filter(p=>!g.includes(p));return g}getBindableShapes(){return this.shapes.filter(b=>b.canBind).sort((b,g)=>g.nonce-b.nonce).map(b=>b.id)}};de([uf],Bm.prototype,"id",2);de([uf],Bm.prototype,"name",2);de([uf],Bm.prototype,"shapes",2);de([uf],Bm.prototype,"bindings",2);de([Pg],
Bm.prototype,"serialized",1);de([Pg],Bm.prototype,"shapesById",1);de([uf],Bm.prototype,"nonce",2);de([og],Bm.prototype,"update",1);de([og],Bm.prototype,"updateBindings",1);de([og],Bm.prototype,"updateShapesIndex",1);de([og],Bm.prototype,"addShapes",1);de([og],Bm.prototype,"removeShapes",1);de([og],Bm.prototype,"bringForward",2);de([og],Bm.prototype,"sendBackward",2);de([og],Bm.prototype,"bringToFront",2);de([og],Bm.prototype,"sendToBack",2);de([og],Bm.prototype,"cleanup",2);var Xk=class{constructor(){ib(this,
"shiftKey",!1);ib(this,"ctrlKey",!1);ib(this,"modKey",!1);ib(this,"altKey",!1);ib(this,"spaceKey",!1);ib(this,"isPinching",!1);ib(this,"currentScreenPoint",[0,0]);ib(this,"currentPoint",[0,0]);ib(this,"previousScreenPoint",[0,0]);ib(this,"previousPoint",[0,0]);ib(this,"originScreenPoint",[0,0]);ib(this,"originPoint",[0,0]);ib(this,"pointerIds",new Set);ib(this,"state","idle");ib(this,"containerOffset",[0,0]);ib(this,"onPointerDown",(b,g)=>{this.pointerIds.add(g.pointerId);this.updateModifiers(g);
this.originScreenPoint=this.currentScreenPoint;this.originPoint=b;this.state="pointing"});ib(this,"onPointerMove",(b,g)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(g),this.previousPoint=this.currentPoint,this.currentPoint=b)});ib(this,"onPointerUp",(b,g)=>{this.pointerIds.clear();this.updateModifiers(g);this.state="idle"});ib(this,"onKeyDown",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!0}});ib(this,"onKeyUp",b=>{this.updateModifiers(b);
switch(b.key){case " ":this.spaceKey=!1}});ib(this,"onPinchStart",(b,g)=>{this.updateModifiers(g);this.state="pinching"});ib(this,"onPinch",(b,g)=>{"pinching"===this.state&&this.updateModifiers(g)});ib(this,"onPinchEnd",(b,g)=>{"pinching"===this.state&&(this.updateModifiers(g),this.state="idle")});zg(this)}updateContainerOffset(b){Object.assign(this.containerOffset,b)}updateModifiers(b){b.isPrimary&&("clientX"in b&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=je.sub([b.clientX,
b.clientY],this.containerOffset)),"shiftKey"in b&&(this.shiftKey=b.shiftKey,this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.modKey=Kk()?b.metaKey:b.ctrlKey))}};de([uf],Xk.prototype,"shiftKey",2);de([uf],Xk.prototype,"ctrlKey",2);de([uf],Xk.prototype,"modKey",2);de([uf],Xk.prototype,"altKey",2);de([uf],Xk.prototype,"spaceKey",2);de([uf],Xk.prototype,"isPinching",2);de([uf],Xk.prototype,"currentScreenPoint",2);de([uf],Xk.prototype,"currentPoint",2);de([uf],Xk.prototype,"previousScreenPoint",2);de([uf],
Xk.prototype,"previousPoint",2);de([uf],Xk.prototype,"originScreenPoint",2);de([uf],Xk.prototype,"originPoint",2);de([uf],Xk.prototype,"state",2);de([uf],Xk.prototype,"containerOffset",2);de([og],Xk.prototype,"updateContainerOffset",1);de([og],Xk.prototype,"updateModifiers",1);de([og],Xk.prototype,"onPointerDown",2);de([og],Xk.prototype,"onPointerMove",2);de([og],Xk.prototype,"onPointerUp",2);de([og],Xk.prototype,"onKeyDown",2);de([og],Xk.prototype,"onKeyUp",2);de([og],Xk.prototype,"onPinchStart",
2);de([og],Xk.prototype,"onPinch",2);de([og],Xk.prototype,"onPinchEnd",2);var tE=(b,g=100)=>-(Math.cos(Math.PI*Id.clamp(b/g,0,1))-1)/2,it=class{constructor(){ib(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});ib(this,"camera",{point:[0,0],zoom:1});ib(this,"updateBounds",b=>{this.bounds=b;return this});ib(this,"panCamera",b=>this.update({point:Id.sub(this.camera.point,Id.div(b,this.camera.zoom))}));ib(this,"panToPointWhenOutOfBounds",b=>{const g=Id.sub([this.currentView.maxX,
this.currentView.maxY],b);b=Id.sub([this.currentView.minX,this.currentView.minY],b);this.panCamera(Id.mul([0>g[0]?g[0]:0<b[0]?b[0]:0,0>g[1]?g[1]:0<b[1]?b[1]:0],-it.panMultiplier))});ib(this,"update",({point:b,zoom:g})=>{void 0===b||isNaN(b[0])||isNaN(b[1])||(this.camera.point=b);void 0===g||isNaN(g)||(this.camera.zoom=Math.min(4,Math.max(.1,g)));return this});ib(this,"getPagePoint",b=>{const {camera:g,bounds:p}=this;return Id.sub(Id.div(Id.sub(b,[p.minX,p.minY]),g.zoom),g.point)});ib(this,"getScreenPoint",
b=>{const {camera:g}=this;return Id.mul(Id.add(b,g.point),g.zoom)});ib(this,"onZoom",(b,g,p=!1)=>this.pinchZoom(b,[0,0],g,p));ib(this,"pinchZoom",(b,g,p,G=!1)=>{var {camera:U}=this;g=Id.sub(U.point,Id.div(g,U.zoom));p=Id.clamp(p,it.minZoom,it.maxZoom);U=Id.div(b,U.zoom);b=Id.div(b,p);b=Id.toFixed(Id.add(g,Id.sub(b,U)));G?this.animateCamera({point:b,zoom:p}):this.update({point:b,zoom:p});return this});ib(this,"setZoom",(b,g=!1)=>{const {bounds:p}=this;this.onZoom([p.width/2,p.height/2],b,g)});ib(this,
"zoomIn",()=>{const {camera:b}=this;this.setZoom(b.zoom/.8,!0)});ib(this,"zoomOut",()=>{const {camera:b}=this;this.setZoom(.8*b.zoom,!0)});ib(this,"resetZoom",()=>{this.setZoom(1,!0);return this});ib(this,"animateCamera",({point:b,zoom:g})=>this.animateToViewport({minX:-b[0],minY:-b[1],maxX:this.bounds.width/g-b[0],maxY:this.bounds.height/g-b[1],width:this.bounds.width/g,height:this.bounds.height/g}));ib(this,"animateToViewport",b=>{const g=performance.now(),p=oe({},this.currentView),G=()=>{var U=
performance.now()-g;U=tE(U);var la=p.minX+(b.minX-p.minX)*U;this.update({point:[-la,-(p.minY+(b.minY-p.minY)*U)],zoom:this.bounds.width/(p.maxX+(b.maxX-p.maxX)*U-la)});1>U&&requestAnimationFrame(G)};G()});ib(this,"zoomToBounds",({width:b,height:g,minX:p,minY:G})=>{const {bounds:U,camera:la}=this;let pa=Math.min((U.width-100)/b,(U.height-100)/g);pa=Math.min(1,Math.max(it.minZoom,la.zoom===pa||1>la.zoom?Math.min(1,pa):pa));b=Id.add([-p,-G],[(U.width-b*pa)/2/pa,(U.height-g*pa)/2/pa]);this.animateCamera({point:b,
zoom:pa})});zg(this)}get currentView(){const {bounds:b,camera:{point:g,zoom:p}}=this,G=b.width/p,U=b.height/p;return{minX:-g[0],minY:-g[1],maxX:G-g[0],maxY:U-g[1],width:G,height:U}}},So=it;ib(So,"minZoom",.1);ib(So,"maxZoom",4);ib(So,"panMultiplier",.05);de([uf],So.prototype,"bounds",2);de([uf],So.prototype,"camera",2);de([og],So.prototype,"updateBounds",2);de([og],So.prototype,"update",2);de([Pg],So.prototype,"currentView",1);var KD=class{constructor(b){ib(this,"app");ib(this,"editShape",g=>{this.app.transition("select").selectedTool.transition("editingShape",
{shape:g});return this});ib(this,"hoverShape",g=>{this.app.setHoveredShape(g);return this});ib(this,"createShapes",(...g)=>{this.app.createShapes(g);return this});ib(this,"updateShapes",(...g)=>{this.app.updateShapes(g);return this});ib(this,"deleteShapes",(...g)=>{this.app.deleteShapes(g.length?g:this.app.selectedShapesArray);return this});ib(this,"selectShapes",(...g)=>{this.app.setSelectedShapes(g);return this});ib(this,"deselectShapes",(...g)=>{const p="string"===typeof g[0]?g:g.map(G=>G.id);
this.app.setSelectedShapes(this.app.selectedShapesArray.filter(G=>!p.includes(G.id)));return this});ib(this,"flipHorizontal",(...g)=>{this.app.flipHorizontal(g);return this});ib(this,"flipVertical",(...g)=>{this.app.flipVertical(g);return this});ib(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(g=>!this.app.shapesInGroups().includes(g)));return this});ib(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});ib(this,"zoomIn",()=>{this.app.viewport.zoomIn();
return this});ib(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});ib(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});ib(this,"zoomToFit",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=vf.getCommonBounds(g.map(p=>p.bounds));this.app.viewport.zoomToBounds(g);return this});ib(this,"cameraToCenter",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=vf.getCommonBounds(g.map(p=>p.bounds));this.app.viewport.update({point:je.add(je.neg(vf.getBoundsCenter(g)),
[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});ib(this,"zoomToSelection",()=>{const {selectionBounds:g}=this.app;if(!g)return this;this.app.viewport.zoomToBounds(g);return this});ib(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:je.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});ib(this,"toggleGrid",()=>{const {settings:g}=this.app;g.update({showGrid:!g.showGrid});return this});ib(this,
"setColor",g=>{const {settings:p}=this.app;p.update({color:g});this.app.selectedShapesArray.forEach(G=>{G.update({fill:g,stroke:g})});this.app.persist();return this});ib(this,"setScaleLevel",g=>{const {settings:p}=this.app;p.update({scaleLevel:g});this.app.selectedShapes.forEach(G=>{G.setScaleLevel(g)});this.app.persist();return this});ib(this,"save",()=>{this.app.save();return this});ib(this,"saveAs",()=>{this.app.save();return this});ib(this,"undo",()=>{this.app.undo();return this});ib(this,"redo",
()=>{this.app.redo();return this});ib(this,"persist",()=>{this.app.persist();return this});ib(this,"createNewLineBinding",(g,p)=>this.app.createNewLineBinding(g,p));ib(this,"cloneShapes",({shapes:g,assets:p,bindings:G,point:U=[0,0]})=>{const la=vf.getCommonBounds(g.filter(Qa=>"group"!==Qa.type).map(Qa=>{var Xa,fb,mb,Gb,Wb,Mb,dc,hc,Ub,nc,Bc,Ec,Sc,Jd,Wd,ye;return{minX:null!=(fb=null==(Xa=Qa.point)?void 0:Xa[0])?fb:U[0],minY:null!=(Gb=null==(mb=Qa.point)?void 0:mb[1])?Gb:U[1],width:null!=(Mb=null==(Wb=
Qa.size)?void 0:Wb[0])?Mb:4,height:null!=(hc=null==(dc=Qa.size)?void 0:dc[1])?hc:4,maxX:(null!=(nc=null==(Ub=Qa.point)?void 0:Ub[0])?nc:U[0])+(null!=(Ec=null==(Bc=Qa.size)?void 0:Bc[0])?Ec:4),maxY:(null!=(Jd=null==(Sc=Qa.point)?void 0:Sc[1])?Jd:U[1])+(null!=(ye=null==(Wd=Qa.size)?void 0:Wd[1])?ye:4)}})),pa=g.map(Qa=>rf(oe({},Qa),{id:Hk(),point:[U[0]+Qa.point[0]-la.minX,U[1]+Qa.point[1]-la.minY]}));pa.forEach(Qa=>{var Xa;Qa.children&&0<(null==(Xa=Qa.children)?void 0:Xa.length)&&(Qa.children=Qa.children.map(fb=>
{var mb;return null==(mb=pa[g.findIndex(Gb=>Gb.id===fb)])?void 0:mb.id}).filter(ti))});const Ga=[];pa.flatMap(Qa=>{var Xa;return Object.values(null!=(Xa=Qa.handles)?Xa:{})}).forEach(Qa=>{if(Qa.bindingId){var Xa=G[Qa.bindingId];if(Xa){var fb=g.findIndex(Gb=>Gb.id===Xa.fromId);const mb=g.findIndex(Gb=>Gb.id===Xa.toId);Xa&&-1!==fb&&-1!==mb?(fb=rf(oe({},Xa),{id:Hk(),fromId:pa[fb].id,toId:pa[mb].id}),Ga.push(fb),Qa.bindingId=fb.id):Qa.bindingId=void 0}else console.warn("binding not found",Qa.bindingId)}});
p=p.filter(Qa=>pa.some(Xa=>Xa.assetId===Qa.id));return{shapes:pa,assets:p,bindings:Ga}});ib(this,"getClonedShapesFromTldrString",(g,p)=>{try{{var G;const Xa=null==(G=g.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:G[1];if(Xa){try{var U=JSON.parse(Xa)}catch(fb){U=null}var la=U}else la=void 0}g=la;if(!g)return null;const {shapes:pa,bindings:Ga,assets:Qa}=g;return this.cloneShapes({shapes:pa,bindings:Ga,assets:Qa,point:p})}catch(pa){console.log(pa)}return null});ib(this,"cloneShapesIntoCurrentPage",
g=>{(g=this.cloneShapes(g))&&this.addClonedShapes(g);return this});ib(this,"addClonedShapes",g=>{const {shapes:p,assets:G,bindings:U}=g;0<G.length&&this.app.createAssets(G);0<p.length&&this.app.createShapes(p);this.app.currentPage.updateBindings(Object.fromEntries(U.map(la=>[la.id,la])));this.app.selectedTool.transition("idle");return this});ib(this,"addClonedShapesFromTldrString",(g,p)=>{(g=this.getClonedShapesFromTldrString(g,p))&&this.addClonedShapes(g);return this});ib(this,"doGroup",(g=this.app.allSelectedShapesArray)=>
{if(!this.app.readOnly){var p=[...g.filter(G=>"group"===G.type),...g.map(G=>this.app.getParentGroup(G))].filter(ti);this.app.currentPage.removeShapes(...p);g=g.filter(G=>"group"!==G.type);1<g.length&&(p=this.app.getShapeClass("group"),p=new p({id:Hk(),type:p.id,parentId:this.app.currentPage.id,children:g.map(G=>G.id)}),this.app.currentPage.addShapes(p),this.app.setSelectedShapes([p]),this.app.bringForward(g));this.app.persist()}});ib(this,"unGroup",(g=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){g=
[...g.filter(G=>"group"===G.type),...g.map(G=>this.app.getParentGroup(G))].filter(ti);var p=this.app.shapesInGroups(g);0<g.length&&(this.app.currentPage.removeShapes(...g),this.app.persist(),this.app.setSelectedShapes(p))}});this.app=b}},$r=class{constructor(){ib(this,"cursor","default");ib(this,"rotation",0);ib(this,"reset",()=>{this.cursor="default"});ib(this,"setCursor",(b,g=0)=>{if(b!==this.cursor||g!==this.rotation)this.cursor=b,this.rotation=g});ib(this,"setRotation",b=>{b!==this.rotation&&
(this.rotation=b)});zg(this)}};de([uf],$r.prototype,"cursor",2);de([uf],$r.prototype,"rotation",2);de([og],$r.prototype,"reset",2);de([og],$r.prototype,"setCursor",2);de([og],$r.prototype,"setRotation",2);var Zr=class{constructor(b){ib(this,"app");ib(this,"stack",[]);ib(this,"isPaused",!0);ib(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});ib(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});ib(this,"persist",(g=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:g})});
ib(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});ib(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});ib(this,"instantiateShape",g=>new (this.app.getShapeClass(g.type))(g));ib(this,"deserialize",g=>{Hd(()=>{var p,{pages:G}=g;const U=this.isPaused;this.pause();const la=[...this.app.selectedIds];try{const pa=new Map(this.app.pages),Ga=[];for(const Qa of G){const Xa=
pa.get(Qa.id);if(void 0!==Xa){const fb=new Map(Xa.shapes.map(mb=>[mb.props.id,mb]));G=[];for(const mb of Qa.shapes){const Gb=fb.get(mb.id);void 0!==Gb?(Gb.nonce!==mb.nonce&&(Gb.update(mb,!0),Gb.nonce=mb.nonce,Gb.setLastSerialized(mb)),fb.delete(mb.id)):G.push(this.instantiateShape(mb))}0<fb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&Xa.removeShapes(...fb.values());0<G.length&&Xa.addShapes(...G);pa.delete(Qa.id);Xa.updateBindings(Qa.bindings);Xa.nonce=null!=(p=Qa.nonce)?p:0}else{const {id:fb,
name:mb,shapes:Gb,bindings:Wb,nonce:Mb}=Qa;Ga.push(new Bm(this.app,{id:fb,name:mb,nonce:Mb,bindings:Wb,shapes:Gb.map(dc=>this.instantiateShape(dc))}))}}0<Ga.length&&this.app.addPages(Ga);0<pa.size&&this.app.removePages(Array.from(pa.values()));this.app.setSelectedShapes(la).setErasingShapes([])}catch(pa){console.warn(pa)}U||this.resume()})});this.app=b;zg(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};de([uf],Zr.prototype,"stack",2);de([og],Zr.prototype,"persist",
2);de([og],Zr.prototype,"undo",2);de([og],Zr.prototype,"redo",2);de([og],Zr.prototype,"deserialize",2);var Yr=class{constructor(){ib(this,"mode","light");ib(this,"showGrid",!0);ib(this,"scaleLevel","md");ib(this,"color","");zg(this)}update(b){Object.assign(this,b)}};de([uf],Yr.prototype,"mode",2);de([uf],Yr.prototype,"showGrid",2);de([uf],Yr.prototype,"scaleLevel",2);de([uf],Yr.prototype,"color",2);de([og],Yr.prototype,"update",1);var gh=class extends Ir{constructor(b,g,p,G){var U,la;super();ib(this,
"keybindingRegistered",!1);ib(this,"uuid",Hk());ib(this,"readOnly");ib(this,"api");ib(this,"inputs",new Xk);ib(this,"cursors",new $r);ib(this,"viewport",new So);ib(this,"settings",new Yr);ib(this,"Tools",[]);ib(this,"history",new Zr(this));ib(this,"persist",this.history.persist);ib(this,"undo",this.history.undo);ib(this,"redo",this.history.redo);ib(this,"saving",!1);ib(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=
!1)}))});ib(this,"load",()=>{this.notify("load",null);return this});ib(this,"save",()=>{this.notify("save",null);return this});ib(this,"saveAs",()=>{this.notify("saveAs",null);return this});ib(this,"pages",new Map([["page",new Bm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));ib(this,"getPageById",pa=>{const Ga=this.pages.get(pa);if(!Ga)throw Error(`Could not find a page named ${pa}.`);return Ga});ib(this,"getShapeById",(pa,Ga=this.currentPage.id)=>{var Qa;return null==(Qa=this.getPageById(Ga))?
void 0:Qa.shapesById[pa]});ib(this,"createShapes",pa=>{if(this.readOnly)return this;(pa=this.currentPage.addShapes(...pa))&&this.notify("create-shapes",pa);this.persist();return this});ib(this,"updateShapes",pa=>{if(this.readOnly)return this;pa.forEach(Ga=>{var Qa;return null==(Qa=this.getShapeById(Ga.id))?void 0:Qa.update(Ga)});this.persist();return this});ib(this,"deleteShapes",pa=>{if(0===pa.length||this.readOnly)return this;pa=pa.map(fb=>"string"===typeof fb?this.getShapeById(fb):fb).filter(ti);
const Ga=this.shapesInGroups(pa);pa.forEach(fb=>{this.getParentGroup(fb)&&Ga.push(fb)});let Qa=new Set([...pa,...Ga].map(fb=>fb.id));Ga.forEach(fb=>{var mb;const Gb=this.getParentGroup(fb);if(Gb){const Wb=null==(mb=Gb.props.children)?void 0:mb.filter(Mb=>Mb!==fb.id);!Wb||1>=(null==Wb?void 0:Wb.length)?Qa.add(Gb.id):Gb.update({children:Wb})}});const Xa=(fb,mb)=>{var Gb;[...Qa].includes(fb)&&"line"===(null==(Gb=this.getShapeById(mb))?void 0:Gb.type)&&Qa.add(mb)};this.currentPage.shapes.flatMap(fb=>
{var mb;return Object.values(null!=(mb=fb.props.handles)?mb:{})}).flatMap(fb=>fb.bindingId).filter(ti).map(fb=>{var mb,Gb;const Wb=null==(mb=this.currentPage.bindings[fb])?void 0:mb.toId;fb=null==(Gb=this.currentPage.bindings[fb])?void 0:Gb.fromId;Wb&&fb&&(Xa(Wb,fb),Xa(fb,Wb))});pa=[...Qa].map(fb=>this.getShapeById(fb));this.setSelectedShapes(this.selectedShapesArray.filter(fb=>!Qa.has(fb.id)));(pa=this.currentPage.removeShapes(...pa))&&this.notify("delete-shapes",pa);this.persist();return this});
ib(this,"bringForward",(pa=this.selectedShapesArray)=>{0<pa.length&&!this.readOnly&&this.currentPage.bringForward(pa);return this});ib(this,"sendBackward",(pa=this.selectedShapesArray)=>{0<pa.length&&!this.readOnly&&this.currentPage.sendBackward(pa);return this});ib(this,"sendToBack",(pa=this.selectedShapesArray)=>{0<pa.length&&!this.readOnly&&this.currentPage.sendToBack(pa);return this});ib(this,"bringToFront",(pa=this.selectedShapesArray)=>{0<pa.length&&!this.readOnly&&this.currentPage.bringToFront(pa);
return this});ib(this,"flipHorizontal",(pa=this.selectedShapesArray)=>{this.currentPage.flip(pa,"horizontal");return this});ib(this,"flipVertical",(pa=this.selectedShapesArray)=>{this.currentPage.flip(pa,"vertical");return this});ib(this,"align",(pa,Ga=this.selectedShapesArray)=>{if(2>Ga.length||this.readOnly)return this;const Qa=Ga.map(Wb=>{const Mb=Wb.getBounds();return{id:Wb.id,point:[Mb.minX,Mb.minY],bounds:Mb}}),Xa=vf.getCommonBounds(Qa.map(({bounds:Wb})=>Wb)),fb=Xa.minX+Xa.width/2,mb=Xa.minY+
Xa.height/2,Gb=Object.fromEntries(Qa.map(({id:Wb,point:Mb,bounds:dc})=>[Wb,{prev:Mb,next:{top:[Mb[0],Xa.minY],centerVertical:[Mb[0],mb-dc.height/2],bottom:[Mb[0],Xa.maxY-dc.height],left:[Xa.minX,Mb[1]],centerHorizontal:[fb-dc.width/2,Mb[1]],right:[Xa.maxX-dc.width,Mb[1]]}[pa]}]));Ga.forEach(Wb=>{Gb[Wb.id]&&Wb.update({point:Gb[Wb.id].next})});this.persist();return this});ib(this,"distribute",(pa,Ga=this.selectedShapesArray)=>{if(2>Ga.length||this.readOnly)return this;const Qa=Object.fromEntries(vf.getDistributions(Ga,
pa).map(Xa=>[Xa.id,Xa]));Ga.forEach(Xa=>{Qa[Xa.id]&&Xa.update({point:Qa[Xa.id].next})});this.persist();return this});ib(this,"packIntoRectangle",(pa=this.selectedShapesArray)=>{if(2>pa.length||this.readOnly)return this;const Ga=Object.fromEntries(vf.getPackedDistributions(pa).map(Qa=>[Qa.id,Qa]));pa.forEach(Qa=>{Ga[Qa.id]&&Qa.update({point:Ga[Qa.id].next})});this.persist();return this});ib(this,"assets",{});ib(this,"removeUnusedAssets",()=>{const pa=this.getCleanUpAssets();Object.keys(this.assets).forEach(Ga=>
{pa.some(Qa=>Qa.id===Ga)||delete this.assets[Ga]});this.persist();return this});ib(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const Ga=this.allSelectedShapesArray;var pa=JSON.stringify({shapes:Ga.map(Xa=>Xa.serialized),assets:this.getCleanUpAssets().filter(Xa=>Ga.some(fb=>fb.props.assetId===Xa.id)),bindings:Fc(this.currentPage.bindings)});pa=encodeURIComponent(`<whiteboard-tldr>${pa}</whiteboard-tldr>`);const Qa=this.selectedShapesArray.map(Xa=>`((${Xa.props.id}))`).join(" ");
this.notify("copy",{text:Qa,html:pa})}});ib(this,"paste",(pa,Ga)=>{var Qa;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!Ga,dataTransfer:null!=(Qa=null==pa?void 0:pa.clipboardData)?Qa:void 0})});ib(this,"cut",()=>{this.copy();this.api.deleteShapes()});ib(this,"drop",(pa,Ga)=>{this.notify("drop",{dataTransfer:pa,point:Ga?this.viewport.getPagePoint(Ga):vf.getBoundsCenter(this.viewport.currentView)})});ib(this,"selectTool",(pa,Ga={})=>{this.readOnly&&
!["select","move"].includes(pa)||this.transition(pa,Ga)});ib(this,"editingId");ib(this,"setEditingShape",pa=>{this.editingId="string"===typeof pa?pa:null==pa?void 0:pa.id;return this});ib(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});ib(this,"hoveredId");ib(this,"setHoveredShape",pa=>{this.hoveredId="string"===typeof pa?pa:null==pa?void 0:pa.id;return this});ib(this,"selectedIds",new Set);ib(this,"selectedShapes",new Set);ib(this,"selectionRotation",
0);ib(this,"setSelectedShapes",pa=>{var Ga;const {selectedIds:Qa,selectedShapes:Xa}=this;Qa.clear();Xa.clear();pa[0]&&"string"===typeof pa[0]?pa.forEach(mb=>Qa.add(mb)):pa.forEach(mb=>Qa.add(mb.id));const fb=this.currentPage.shapes.filter(mb=>Qa.has(mb.id));fb.forEach(mb=>Xa.add(mb));this.selectionRotation=1===fb.length?null!=(Ga=fb[0].props.rotation)?Ga:0:0;0===pa.length&&this.setEditingShape();return this});ib(this,"erasingIds",new Set);ib(this,"erasingShapes",new Set);ib(this,"setErasingShapes",
pa=>{const {erasingIds:Ga,erasingShapes:Qa}=this;Ga.clear();Qa.clear();pa[0]&&"string"===typeof pa[0]?pa.forEach(Xa=>Ga.add(Xa)):pa.forEach(Xa=>Ga.add(Xa.id));this.currentPage.shapes.filter(Xa=>Ga.has(Xa.id)).forEach(Xa=>Qa.add(Xa));return this});ib(this,"bindingIds");ib(this,"setBindingShapes",pa=>{this.bindingIds=pa;return this});ib(this,"clearBindingShape",()=>this.setBindingShapes());ib(this,"createNewLineBinding",(pa,Ga)=>{pa="string"===typeof pa?this.getShapeById(pa):pa;Ga="string"===typeof Ga?
this.getShapeById(Ga):Ga;if((null==pa?0:pa.canBind)&&(null==Ga?0:Ga.canBind)&&(Ga=nd(pa,Ga))){const [Qa,Xa]=Ga;this.createShapes([Qa]);this.currentPage.updateBindings(Object.fromEntries(Xa.map(fb=>[fb.id,fb])));this.persist();return!0}return!1});ib(this,"brush");ib(this,"setBrush",pa=>{this.brush=pa;return this});ib(this,"setCamera",(pa,Ga)=>{this.viewport.update({point:pa,zoom:Ga});return this});ib(this,"getPagePoint",pa=>{const {camera:Ga}=this.viewport;return Id.sub(Id.div(pa,Ga.zoom),Ga.point)});
ib(this,"getScreenPoint",pa=>{const {camera:Ga}=this.viewport;return Id.mul(Id.add(pa,Ga.point),Ga.zoom)});ib(this,"Shapes",new Map);ib(this,"registerShapes",pa=>{pa.forEach(Ga=>{if("group"===Ga.id){const Qa=this;Ga.prototype.getShapes=function(){var Xa,fb;return null!=(fb=null==(Xa=this.props.children)?void 0:Xa.map(mb=>Qa.getShapeById(mb)).filter(Boolean))?fb:[]}}return this.Shapes.set(Ga.id,Ga)})});ib(this,"deregisterShapes",pa=>{pa.forEach(Ga=>this.Shapes.delete(Ga.id))});ib(this,"getShapeClass",
pa=>{if(!pa)throw Error("No shape type provided.");const Ga=this.Shapes.get(pa);if(!Ga)throw Error(`Could not find shape class for ${pa}`);return Ga});ib(this,"wrapUpdate",pa=>{Hd(()=>{const Ga=!this.history.isPaused;Ga&&this.history.pause();pa();Ga&&(this.history.resume(),this.persist())})});ib(this,"subscriptions",new Set([]));ib(this,"subscribe",(pa,Ga)=>{if(void 0===Ga)throw Error("Callback is required.");const Qa={event:pa,callback:Ga};this.subscriptions.add(Qa);return()=>this.unsubscribe(Qa)});
ib(this,"unsubscribe",pa=>{this.subscriptions.delete(pa);return this});ib(this,"notify",(pa,Ga)=>{this.subscriptions.forEach(Qa=>{Qa.event===pa&&Qa.callback(this,Ga)});return this});ib(this,"onTransition",()=>{});ib(this,"onPointerDown",(pa,Ga)=>{if(!this.editingShape&&1===Ga.button&&!this.isIn("move"))this.temporaryTransitionToMove(Ga);else if(2===Ga.button&&!this.editingShape)Ga.preventDefault(),this.transition("select");else if("clientX"in Ga)this.inputs.onPointerDown([...this.viewport.getPagePoint([Ga.clientX,
Ga.clientY]),.5],Ga)});ib(this,"onPointerUp",(pa,Ga)=>{if(!this.editingShape&&1===Ga.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ga.stopPropagation(),Ga.preventDefault();else if("clientX"in Ga)this.inputs.onPointerUp([...this.viewport.getPagePoint([Ga.clientX,Ga.clientY]),.5],Ga)});ib(this,"onPointerMove",(pa,Ga)=>{if("clientX"in Ga)this.inputs.onPointerMove([...this.viewport.getPagePoint([Ga.clientX,Ga.clientY]),.5],Ga)});ib(this,"onKeyDown",(pa,Ga)=>{if(this.editingShape||
" "!==Ga.key||this.isIn("move"))this.inputs.onKeyDown(Ga);else this.temporaryTransitionToMove(Ga)});ib(this,"onKeyUp",(pa,Ga)=>{if(!this.editingShape&&" "===Ga.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ga.stopPropagation(),Ga.preventDefault();else this.inputs.onKeyUp(Ga)});ib(this,"onPinchStart",(pa,Ga)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(pa.point),.5],Ga)});ib(this,"onPinch",(pa,Ga)=>{this.inputs.onPinch([...this.viewport.getPagePoint(pa.point),.5],
Ga)});ib(this,"onPinchEnd",(pa,Ga)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(pa.point),.5],Ga)});this._states=[Wr,Xr];this.readOnly=G;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),G=null!=(U=this.initial)?U:this.states[0].id,U=this.children.get(G))&&(this.currentState=U,null==(la=this.currentState)?void 0:la._events.onEnter({fromId:"initial"}));g&&this.registerShapes(g);p&&this.registerTools(p);this.history.resume();b&&this.history.deserialize(b);
this.api=new KD(this);zg(this);this.notify("mount",null)}dispose(){super.dispose();this.keybindingRegistered=!1;return this}initKeyboardShortcuts(){if(!this.keybindingRegistered){var b=this.constructor.shortcuts||[],g=Array.from(this.children.values()).filter(p=>p.constructor.shortcut).map(p=>({keys:p.constructor.shortcut,fn:(G,U,la)=>{this.selectTool(p.id)}}));this._disposables.push(...[{keys:"shift+0",fn:()=>this.api.resetZoom()},{keys:"shift+1",fn:()=>this.api.zoomToFit()},{keys:"mod+shift+1",
fn:()=>this.api.zoomToSelection()},{keys:"mod+-",fn:()=>this.api.zoomOut()},{keys:"mod+\x3d",fn:()=>this.api.zoomIn()},{keys:"mod+x",fn:()=>this.cut()},{keys:"[",fn:()=>this.sendBackward()},{keys:"shift+[",fn:()=>this.sendToBack()},{keys:"]",fn:()=>this.bringForward()},{keys:"shift+]",fn:()=>this.bringToFront()},{keys:"mod+a",fn:()=>{const {selectedTool:p}=this;"select"!==p.id&&this.selectTool("select");this.api.selectAll()}},{keys:"mod+shift+s",fn:()=>{this.saveAs();this.notify("saveAs",null)}},
{keys:"mod+shift+v",fn:(p,G,U)=>{this.editingShape||(U.preventDefault(),this.paste(void 0,!0))}},{keys:["del","backspace"],fn:()=>{this.editingShape||(this.api.deleteShapes(),this.selectedTool.transition("idle"))}},{keys:"mod+g",fn:()=>{this.api.doGroup()}},{keys:"mod+shift+g",fn:()=>{this.api.unGroup()}},{keys:"shift+g",fn:()=>{this.api.toggleGrid()}},...b,...g].map(({keys:p,fn:G})=>Tp.registerShortcut(p,U=>{G(this,this,U)})));this.keybindingRegistered=!0}}loadDocumentModel(b){this.history.deserialize(b);
b.assets&&0<b.assets.length&&this.addAssets(b.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(b){b.forEach(g=>this.pages.set(g.id,g));this.persist();return this}removePages(b){b.forEach(g=>this.pages.delete(g.id));this.persist();return this}shapesInGroups(b=this.shapes){return b.flatMap(g=>g.props.children).filter(ti).map(g=>this.getShapeById(g)).filter(ti)}getParentGroup(b){return this.shapes.find(g=>
{var p;return null==(p=g.props.children)?void 0:p.includes(b.id)})}addAssets(b){b.forEach(g=>this.assets[g.id]=g);this.persist();return this}removeAssets(b){"string"===typeof b[0]?b.forEach(g=>delete this.assets[g]):b.forEach(g=>delete this.assets[g.id]);this.persist();return this}getCleanUpAssets(){const b=new Set;this.pages.forEach(g=>g.shapes.forEach(p=>{p.props.assetId&&this.assets[p.props.assetId]&&b.add(this.assets[p.props.assetId])}));return Array.from(b)}createAssets(b){this.addAssets(b);
this.notify("create-assets",{assets:b});this.persist();return this}get selectedTool(){return this.currentState}registerTools(b){this.Tools=b;return this.registerStates(b)}get editingShape(){const {editingId:b,currentPage:g}=this;return b?g.shapes.find(p=>p.id===b):void 0}get hoveredShape(){const {hoveredId:b,currentPage:g}=this;return b?g.shapes.find(p=>p.id===b):void 0}get hoveredGroup(){const {hoveredShape:b}=this;return b?this.shapes.find(g=>{var p;return"group"===g.type&&(null==(p=g.props.children)?
void 0:p.includes(b.id))}):void 0}get selectedShapesArray(){const {selectedShapes:b,selectedTool:g}=this;return"select"!==g.id?[]:Array.from(b.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:b}=this;return[...(new Set([...b,...this.shapesInGroups(b)]))]}setSelectionRotation(b){this.selectionRotation=b}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var b;const g=1===this.selectedShapesArray.length?
this.selectedShapesArray.flatMap(G=>{var U;return Object.values(null!=(U=G.props.handles)?U:{})}).flatMap(G=>G.bindingId).filter(ti).flatMap(G=>{var U,la;return[null==(U=this.currentPage.bindings[G])?void 0:U.fromId,null==(la=this.currentPage.bindings[G])?void 0:la.toId]}).filter(ti):[],p=[...(null!=(b=this.bindingIds)?b:[]),...g];return p?this.currentPage.shapes.filter(G=>null==p?void 0:p.includes(G.id)):void 0}get currentGrid(){const {zoom:b}=this.viewport.camera;return.15>b?128:1>b?32:8}get shapes(){const {currentPage:{shapes:b}}=
this;return Array.from(b.values())}get shapesInViewport(){const {selectedShapes:b,currentPage:g,viewport:{currentView:p}}=this;return g.shapes.filter(G=>!G.canUnmount||b.has(G)||vf.boundsContain(p,G.rotatedBounds)||vf.boundsCollide(p,G.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:b,viewport:{currentView:g}}=this;if(b&&!vf.boundsContain(g,b)&&!vf.boundsCollide(g,b)){var p=vf.getBoundsCenter(b);return Id.clampV([(p[0]-g.minX-g.width/2)/g.width,(p[1]-g.minY-g.height/2)/g.height],
-1,1)}}get selectionBounds(){const {selectedShapesArray:b}=this;if(0!==b.length)return 1===b.length?rf(oe({},b[0].bounds),{rotation:b[0].props.rotation}):vf.getCommonBounds(this.selectedShapesArray.map(g=>g.rotatedBounds))}get showSelection(){var b;const {selectedShapesArray:g}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===g.length&&!(null==(b=g[0])?0:b.hideSelection)||1<g.length)}get showSelectionDetail(){return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(b=>b.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<b.length&&!this.readOnly&&!b.every(g=>g.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:b}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<b.length&&!this.readOnly&&!b.some(g=>g.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===b.length&&!this.readOnly&&!b.every(g=>g.hideResizeHandles)}temporaryTransitionToMove(b){b.stopPropagation();
b.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};ib(gh,"id","app");ib(gh,"initial","select");de([Pg],gh.prototype,"serialized",1);de([uf],gh.prototype,"pages",2);de([Pg],gh.prototype,"currentPageId",1);de([Pg],gh.prototype,"currentPage",1);de([og],gh.prototype,"addPages",1);de([og],gh.prototype,"removePages",1);de([og],gh.prototype,"createShapes",2);de([og],gh.prototype,"updateShapes",2);de([og],gh.prototype,"deleteShapes",2);de([uf],
gh.prototype,"assets",2);de([og],gh.prototype,"addAssets",1);de([og],gh.prototype,"removeAssets",1);de([og],gh.prototype,"removeUnusedAssets",2);de([Pg],gh.prototype,"selectedTool",1);de([uf],gh.prototype,"editingId",2);de([Pg],gh.prototype,"editingShape",1);de([og],gh.prototype,"setEditingShape",2);de([uf],gh.prototype,"hoveredId",2);de([Pg],gh.prototype,"hoveredShape",1);de([Pg],gh.prototype,"hoveredGroup",1);de([og],gh.prototype,"setHoveredShape",2);de([uf],gh.prototype,"selectedIds",2);de([uf],
gh.prototype,"selectedShapes",2);de([uf],gh.prototype,"selectionRotation",2);de([Pg],gh.prototype,"selectedShapesArray",1);de([Pg],gh.prototype,"allSelectedShapes",1);de([Pg],gh.prototype,"allSelectedShapesArray",1);de([og],gh.prototype,"setSelectedShapes",2);de([og],gh.prototype,"setSelectionRotation",1);de([uf],gh.prototype,"erasingIds",2);de([uf],gh.prototype,"erasingShapes",2);de([Pg],gh.prototype,"erasingShapesArray",1);de([og],gh.prototype,"setErasingShapes",2);de([uf],gh.prototype,"bindingIds",
2);de([Pg],gh.prototype,"bindingShapes",1);de([og],gh.prototype,"setBindingShapes",2);de([og],gh.prototype,"createNewLineBinding",2);de([uf],gh.prototype,"brush",2);de([og],gh.prototype,"setBrush",2);de([og],gh.prototype,"setCamera",2);de([Pg],gh.prototype,"currentGrid",1);de([Pg],gh.prototype,"shapes",1);de([Pg],gh.prototype,"shapesInViewport",1);de([Pg],gh.prototype,"selectionDirectionHint",1);de([Pg],gh.prototype,"selectionBounds",1);de([Pg],gh.prototype,"showSelection",1);de([Pg],gh.prototype,
"showSelectionDetail",1);de([Pg],gh.prototype,"showSelectionRotation",1);de([Pg],gh.prototype,"showContextBar",1);de([Pg],gh.prototype,"showRotateHandles",1);de([Pg],gh.prototype,"showResizeHandles",1);var ID=Function.prototype.toString,Sv=Object.create,JD=Object.prototype.toString,LD=function(){function b(){this._keys=[];this._values=[]}b.prototype.has=function(g){return!!~this._keys.indexOf(g)};b.prototype.get=function(g){return this._values[this._keys.indexOf(g)]};b.prototype.set=function(g,p){this._keys.push(g);
this._values.push(p)};return b}(),HD="undefined"!==typeof WeakMap?Ve:xe,ED="g"===/test/g.flags?Lf:jg,DD="undefined"!==typeof Symbol?Xf:zf,GD=Object.defineProperty,FD=Object.getOwnPropertyDescriptor,Rv=Object.getOwnPropertyNames,Qv=Object.getOwnPropertySymbols,oz=Object.prototype,Xy=oz.hasOwnProperty,WD=oz.propertyIsEnumerable,Yy="function"===typeof Qv,XD=Yy?Tg:Rv,YD=Array.isArray,Yv=Object.assign,ZD=Object.getPrototypeOf,Zy={array:function(b,g){var p=new g.Constructor;g.cache.set(b,p);for(var G=0,
U=b.length;G<U;++G)p[G]=g.copier(b[G],g);return p},arrayBuffer:function(b,g){return b.slice(0)},blob:function(b,g){return b.slice(0,b.size,b.type)},dataView:function(b,g){return new g.Constructor(b.buffer.slice(0))},date:function(b,g){return new g.Constructor(b.getTime())},error:Sh,map:xh,object:Yy?di:si,regExp:function(b,g){g=new g.Constructor(b.source,ED(b));g.lastIndex=b.lastIndex;return g},set:ef},$D=Yv({},Zy,{array:function(b,g){var p=new g.Constructor;g.cache.set(b,p);return li(b,p,g)},map:function(b,
g){return li(b,xh(b,g),g)},object:function(b,g){var p=Nf(g.prototype);g.cache.set(b,p);return li(b,p,g)},set:function(b,g){return li(b,ef(b,g),g)}});Th(Yv({},$D,{}));var aE=Th({});nf(Sp());var bE=nf(Lq()),fr=aE,eo=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const p=b.ownerDocument,G=p.activeElement;G!==b&&b.focus();p.execCommand("insertText",
!1,g)||eo.insertTextFirefox(b,g);G===p.body?b.blur():G instanceof HTMLElement&&G!==b&&G.focus()}static set(b,g){b.select();eo.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:p}=b;return b.value.slice(g?g:void 0,p?p:void 0)}static wrapSelection(b,g,p){const {selectionStart:G,selectionEnd:U}=b,la=eo.getSelection(b);eo.insert(b,g+la+(null!=p?p:g));b.selectionStart=(G||0)+g.length;b.selectionEnd=(U||0)+g.length}static replace(b,g,p){let G=0;b.value.replace(g,(...U)=>{const la=
G+U[U.length-2],pa=U[0].length;b.selectionStart=la;b.selectionEnd=la+pa;U="string"===typeof p?p:p(...U);eo.insert(b,U);b.selectionStart=la;G+=U.length-pa;return U})}static findLineEnd(b,g){const p=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(p)?g:p+1}static indent(b){var g;const {selectionStart:p,selectionEnd:G,value:U}=b;var la=U.slice(p,G);if((la=null==(g=/\n/g.exec(la))?void 0:g.length)&&0<la){g=U.lastIndexOf("\n",p-1)+1;var pa=b.value.slice(g,G-1);la=pa.replace(/^|\n/g,`$&${eo.INDENT}`);pa=
la.length-pa.length;b.setSelectionRange(g,G-1);eo.insert(b,la);b.setSelectionRange(p+1,G+pa)}else eo.insert(b,eo.INDENT)}static unindent(b){const {selectionStart:g,selectionEnd:p,value:G}=b;var U=G.lastIndexOf("\n",g-1)+1;const la=eo.findLineEnd(G,p);var pa=b.value.slice(U,la);const Ga=pa.replace(/(^|\n)(\t| {1,2})/g,"$1");pa=pa.length-Ga.length;b.setSelectionRange(U,la);eo.insert(b,Ga);U=(U=/\t| {1,2}/.exec(G.slice(U,g)))?U[0].length:0;b.setSelectionRange(g-U,Math.max(g-U,p-pa))}static normalizeText(b){return b.replace(eo.fixNewLines,
"\n")}},as=eo;ib(as,"fixNewLines",/\r?\n|\r/g);ib(as,"INDENT","  ");var gq;"undefined"!==typeof window&&(gq=Jk());var Zv=new Map,Ro=Kk()?"⌘":"Ctrl",VD=class extends gh{},Wy=nf(X(22)),TD=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var Vy=nf(X(22)),Xv={},ft=nf(X(22)),RD=b=>{for(b=b.parentElement;b&&b!==document.body;){const {overflowY:g}=window.getComputedStyle(b);if(b.scrollHeight>b.clientHeight&&("auto"===g||"scroll"===g||"overlay"===g))return b;b=b.parentElement}return document},
Uv=nf(X(22)),Vv=new Map,PD={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},QD=((b,...g)=>b.reduce((p,G,U)=>p+G+(U<g.length?g[U]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,Ty=nf(X(22)),Uy=nf(X(22)),Tv={},Yk={toVector(b,g){void 0===b&&(b=g);return Array.isArray(b)?b:[b,b]},add(b,g){return[b[0]+g[0],b[1]+g[1]]},sub(b,g){return[b[0]-g[0],b[1]-g[1]]},addTo(b,g){b[0]+=g[0];b[1]+=g[1]},subTo(b,g){b[0]-=g[0];b[1]-=g[1]}},Sy={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},OD=["enter","leave"],ND=["gotpointercapture","lostpointercapture"],
gp=class{constructor(b,g,p){this.ctrl=b;this.args=g;this.key=p;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(b){this.ctrl.state[this.key]=b}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:b,
shared:g,ingKey:p,args:G}=this;g[p]=b._active=b.active=b._blocked=b._force=!1;b._step=[!1,!1];b.intentional=!1;b._movement=[0,0];b._distance=[0,0];b._direction=[0,0];b._delta=[0,0];b._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];b.args=G;b.axis=void 0;b.memo=void 0;b.elapsedTime=0;b.direction=[0,0];b.distance=[0,0];b.overflow=[0,0];b._movementBound=[!1,!1];b.velocity=[0,0];b.movement=[0,0];b.delta=[0,0];b.timeStamp=0}start(b){const g=this.state,p=this.config;g._active||(this.reset(),this.computeInitial(),
g._active=!0,g.target=b.target,g.currentTarget=b.currentTarget,g.lastOffset=p.from?Ui(p.from,g):g.offset,g.offset=g.lastOffset);g.startTime=g.timeStamp=b.timeStamp}computeValues(b){const g=this.state;g._values=b;g.values=this.config.transform(b)}computeInitial(){const b=this.state;b._initial=b._values;b.initial=b.values}compute(b){const {state:g,config:p,shared:G}=this;g.args=this.args;var U=0;if(b){g.event=b;p.preventDefault&&b.cancelable&&g.event.preventDefault();g.type=b.type;G.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;G.locked=!!document.pointerLockElement;U=Object;var la=U.assign,pa={};"buttons"in b&&(pa.buttons=b.buttons);if("shiftKey"in b){const {shiftKey:Ec,altKey:Sc,metaKey:Jd,ctrlKey:Wd}=b;Object.assign(pa,{shiftKey:Ec,altKey:Sc,metaKey:Jd,ctrlKey:Wd})}la.call(U,G,pa);G.down=G.pressed=1===G.buttons%2||0<G.touches;U=b.timeStamp-g.timeStamp;g.timeStamp=b.timeStamp;g.elapsedTime=g.timeStamp-g.startTime}g._active&&(la=g._delta.map(Math.abs),Yk.addTo(g._distance,la));this.axisIntent&&this.axisIntent(b);
const [Ga,Qa]=g._movement,[Xa,fb]=p.threshold,{_step:mb,values:Gb}=g;p.hasCustomTransform?(!1===mb[0]&&(mb[0]=Math.abs(Ga)>=Xa&&Gb[0]),!1===mb[1]&&(mb[1]=Math.abs(Qa)>=fb&&Gb[1])):(!1===mb[0]&&(mb[0]=Math.abs(Ga)>=Xa&&Math.sign(Ga)*Xa),!1===mb[1]&&(mb[1]=Math.abs(Qa)>=fb&&Math.sign(Qa)*fb));g.intentional=!1!==mb[0]||!1!==mb[1];if(g.intentional){la=[0,0];if(p.hasCustomTransform){const [Ec,Sc]=Gb;la[0]=!1!==mb[0]?Ec-mb[0]:0;la[1]=!1!==mb[1]?Sc-mb[1]:0}else la[0]=!1!==mb[0]?Ga-mb[0]:0,la[1]=!1!==mb[1]?
Qa-mb[1]:0;this.restrictToAxis&&!g._blocked&&this.restrictToAxis(la);pa=g.offset;var Wb=g._active&&!g._blocked||g.active;Wb&&(g.first=g._active&&!g.active,g.last=!g._active&&g.active,g.active=G[this.ingKey]=g._active,b&&(g.first&&("bounds"in p&&(g._bounds=Ui(p.bounds,g)),this.setup&&this.setup()),g.movement=la,this.computeOffset()));var [Mb,dc]=g.offset,[[hc,Ub],[nc,Bc]]=g._bounds;g.overflow=[Mb<hc?-1:Mb>Ub?1:0,dc<nc?-1:dc>Bc?1:0];g._movementBound[0]=g.overflow[0]?!1===g._movementBound[0]?g._movement[0]:
g._movementBound[0]:!1;g._movementBound[1]=g.overflow[1]?!1===g._movementBound[1]?g._movement[1]:g._movementBound[1]:!1;g.offset=Hi(g._bounds,g.offset,g._active?p.rubberband||[0,0]:[0,0]);g.delta=Yk.sub(g.offset,pa);this.computeMovement();Wb&&(!g.last||32<U)&&(g.delta=Yk.sub(g.offset,pa),b=g.delta.map(Math.abs),Yk.addTo(g.distance,b),g.direction=g.delta.map(Math.sign),g._direction=g._delta.map(Math.sign),!g.first&&0<U&&(g.velocity=[b[0]/U,b[1]/U]))}}emit(){const b=this.state;var g=this.shared;const p=
this.config;b._active||this.clean();if(!b._blocked&&b.intentional||b._force||p.triggerAllEvents)g=this.handler(Hg(Hg(Hg({},g),b),{},{[this.aliasKey]:b.values})),void 0!==g&&(b.memo=g)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Dn=class extends gp{constructor(...b){super(...b);Oh(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Yk.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
Yk.sub(this.state.offset,this.state.lastOffset)}axisIntent(b){const g=this.state,p=this.config;!g.axis&&b&&(b="object"===typeof p.axisThreshold?p.axisThreshold[bl(b)]:p.axisThreshold,g.axis=wi(g._movement,b));g._blocked=(p.lockDirection||!!p.axis)&&!g.axis||!!p.axis&&p.axis!==g.axis}restrictToAxis(b){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":b[1]=0;break;case "y":b[0]=0}}},UD=b=>b,Ry={enabled(b=!0){return b},eventOptions(b,g,p){return Hg(Hg({},p.shared.eventOptions),
b)},preventDefault(b=!1){return b},triggerAllEvents(b=!1){return b},rubberband(b=0){switch(b){case !0:return[.15,.15];case !1:return[0,0];default:return Yk.toVector(b)}},from(b){if("function"===typeof b)return b;if(null!=b)return Yk.toVector(b)},transform(b,g,p){b=b||p.shared.transform;this.hasCustomTransform=!!b;return b||UD},threshold(b){return Yk.toVector(b,0)}},dr=Hg(Hg({},Ry),{},{axis(b,g,{axis:p}){this.lockDirection="lock"===p;if(!this.lockDirection)return p},axisThreshold(b=0){return b},bounds(b=
{}){if("function"===typeof b)return la=>dr.bounds(b(la));if("current"in b)return()=>b.current;if("function"===typeof HTMLElement&&b instanceof HTMLElement)return b;const {left:g=-Infinity,right:p=Infinity,top:G=-Infinity,bottom:U=Infinity}=b;return[[g,p],[G,U]]}}),pz={ArrowRight:(b=1)=>[10*b,0],ArrowLeft:(b=1)=>[-10*b,0],ArrowUp:(b=1)=>[0,-10*b],ArrowDown:(b=1)=>[0,10*b]},uE=class extends Dn{constructor(...b){super(...b);Oh(this,"ingKey","dragging")}reset(){super.reset();const b=this.state;b._pointerId=
void 0;b._pointerActive=!1;b._keyboardActive=!1;b._preventScroll=!1;b._delayed=!1;b.swipe=[0,0];b.tap=!1;b.canceled=!1;b.cancel=this.cancel.bind(this)}setup(){const b=this.state;if(b._bounds instanceof HTMLElement){const g=b._bounds.getBoundingClientRect(),p=b.currentTarget.getBoundingClientRect();b._bounds=dr.bounds({left:g.left-p.left+b.offset[0],right:g.right-p.right+b.offset[0],top:g.top-p.top+b.offset[1],bottom:g.bottom-p.bottom+b.offset[1]})}}cancel(){const b=this.state;b.canceled||(b.canceled=
!0,b._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(b){const g=this.config,p=this.state;if(null==b.buttons||(Array.isArray(g.pointerButtons)?g.pointerButtons.includes(b.buttons):-1===g.pointerButtons||g.pointerButtons===b.buttons)){var G=this.ctrl.setEventIds(b);g.pointerCapture&&b.target.setPointerCapture(b.pointerId);
G&&1<G.size&&p._pointerActive||(this.start(b),this.setupPointer(b),p._pointerId=Di(b),p._pointerActive=!0,this.computeValues(sj(b)),this.computeInitial(),g.preventScrollAxis&&"mouse"!==bl(b)?(p._active=!1,this.setupScrollPrevention(b)):0<g.delay?(this.setupDelayTrigger(b),g.triggerAllEvents&&(this.compute(b),this.emit())):this.startPointerDrag(b))}}startPointerDrag(b){const g=this.state;g._active=!0;g._preventScroll=!0;g._delayed=!1;this.compute(b);this.emit()}pointerMove(b){const g=this.state,p=
this.config;if(g._pointerActive&&(g.type!==b.type||b.timeStamp!==g.timeStamp)){var G=Di(b);if(void 0===g._pointerId||G===g._pointerId)G=sj(b),document.pointerLockElement===b.target?g._delta=[b.movementX,b.movementY]:(g._delta=Yk.sub(G,g._values),this.computeValues(G)),Yk.addTo(g._movement,g._delta),this.compute(b),g._delayed&&g.intentional?(this.timeoutStore.remove("dragDelay"),g.active=!1,this.startPointerDrag(b)):p.preventScrollAxis&&!g._preventScroll?g.axis&&(g.axis===p.preventScrollAxis||"xy"===
p.preventScrollAxis?(g._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(b))):this.emit()}}pointerUp(b){this.ctrl.setEventIds(b);try{this.config.pointerCapture&&b.target.hasPointerCapture(b.pointerId)&&b.target.releasePointerCapture(b.pointerId)}catch(pa){}const g=this.state,p=this.config;if(g._active&&g._pointerActive){var G=Di(b);if(void 0===g._pointerId||G===g._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(b);var [U,la]=g._distance;
g.tap=U<=p.tapsThreshold&&la<=p.tapsThreshold;if(g.tap&&p.filterTaps)g._force=!0;else{const [pa,Ga]=g.direction,[Qa,Xa]=g.velocity,[fb,mb]=g.movement,[Gb,Wb]=p.swipe.velocity,[Mb,dc]=p.swipe.distance;g.elapsedTime<p.swipe.duration&&(Math.abs(Qa)>Gb&&Math.abs(fb)>Mb&&(g.swipe[0]=pa),Math.abs(Xa)>Wb&&Math.abs(mb)>dc&&(g.swipe[1]=Ga))}this.emit()}}}pointerClick(b){!this.state.tap&&0<b.detail&&(b.preventDefault(),b.stopPropagation())}setupPointer(b){const g=this.config,p=g.device;g.pointerLock&&b.currentTarget.requestPointerLock();
g.pointerCapture||(this.eventStore.add(this.sharedConfig.window,p,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,p,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,p,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(b){this.state._preventScroll&&b.cancelable&&b.preventDefault()}setupScrollPrevention(b){this.state._preventScroll=
!1;"persist"in b&&"function"===typeof b.persist&&b.persist();const g=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",g);this.eventStore.add(this.sharedConfig.window,"touch","cancel",g);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,b)}setupDelayTrigger(b){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(b)},this.config.delay)}keyDown(b){const g=pz[b.key];if(g){const p=this.state,G=b.shiftKey?10:b.altKey?.1:1;this.start(b);p._delta=g(G);p._keyboardActive=!0;Yk.addTo(p._movement,p._delta);this.compute(b);this.emit()}}keyUp(b){b.key in pz&&(this.state._keyboardActive=!1,this.setActive(),this.compute(b),this.emit())}bind(b){const g=this.config.device;b(g,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(b(g,"change",this.pointerMove.bind(this)),b(g,"end",this.pointerUp.bind(this)),
b(g,"cancel",this.pointerUp.bind(this)),b("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(b("key","down",this.keyDown.bind(this)),b("key","up",this.keyUp.bind(this)));this.config.filterTaps&&b("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},fq="undefined"!==typeof window&&window.document&&window.document.createElement;try{var Wv="constructor"in GestureEvent}catch(b){Wv=!1}var SD=Wv,er=fq&&"ontouchstart"in window||fq&&1<window.navigator.maxTouchPoints,gt=fq&&
"ontouchstart"in window||fq&&1<window.navigator.maxTouchPoints,bz=fq&&"onpointerdown"in window,vE=fq&&"exitPointerLock"in window.document,gz={mouse:0,touch:0,pen:8},wE=Hg(Hg({},dr),{},{device(b,g,{pointer:{touch:p=!1,lock:G=!1,mouse:U=!1}={}}){this.pointerLock=G&&vE;return er&&p?"touch":this.pointerLock?"mouse":bz&&!U?"pointer":er?"touch":"mouse"},preventScrollAxis(b,g,{preventScroll:p}){this.preventScrollDelay="number"===typeof p?p:p||void 0===p&&b?250:void 0;if(gt&&!1!==p)return b?b:void 0!==p?
"y":void 0},pointerCapture(b,g,{pointer:{capture:p=!0,buttons:G=1,keys:U=!0}={}}){this.pointerButtons=G;this.keys=U;return!this.pointerLock&&"pointer"===this.device&&p},threshold(b,g,{filterTaps:p=!1,tapsThreshold:G=3,axis:U}){b=Yk.toVector(b,p?G:U?1:0);this.filterTaps=p;this.tapsThreshold=G;return b},swipe({velocity:b=.5,distance:g=50,duration:p=250}={}){return{velocity:this.transform(Yk.toVector(b)),distance:this.transform(Yk.toVector(g)),duration:p}},delay(b=0){switch(b){case !0:return 180;case !1:return 0;
default:return b}},axisThreshold(b){return b?Hg(Hg({},gz),b):gz}}),xE=class extends gp{constructor(...b){super(...b);Oh(this,"ingKey","pinching");Oh(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const b=this.state;b._touchIds=[];b.canceled=!1;b.cancel=this.cancel.bind(this);b.turns=0}computeOffset(){const {type:b,movement:g,lastOffset:p}=this.state;this.state.offset="wheel"===b?Yk.add(g,p):[(1+g[0])*p[0],g[1]+
p[1]]}computeMovement(){const {offset:b,lastOffset:g}=this.state;this.state.movement=[b[0]/g[0],b[1]-g[1]]}axisIntent(){const b=this.state,[g,p]=b._movement;if(!b.axis){const G=30*Math.abs(g)-Math.abs(p);0>G?b.axis="angle":0<G&&(b.axis="scale")}}restrictToAxis(b){this.config.lockDirection&&("scale"===this.state.axis?b[1]=0:"angle"===this.state.axis&&(b[0]=0))}cancel(){const b=this.state;b.canceled||setTimeout(()=>{b.canceled=!0;b._active=!1;this.compute();this.emit()},0)}touchStart(b){this.ctrl.setEventIds(b);
var g=this.state;const p=this.ctrl.touchIds;g._active&&g._touchIds.every(G=>p.has(G))||2>p.size||(this.start(b),g._touchIds=Array.from(p).slice(0,2),g=kk(b,g._touchIds),this.pinchStart(b,g))}pointerStart(b){if(null==b.buttons||1===b.buttons%2){this.ctrl.setEventIds(b);b.target.setPointerCapture(b.pointerId);var g=this.state,p=g._pointerEvents,G=this.ctrl.pointerIds;g._active&&Array.from(p.keys()).every(U=>G.has(U))||(2>p.size&&p.set(b.pointerId,b),2>g._pointerEvents.size||(this.start(b),g=pl(...Array.from(p.values())),
this.pinchStart(b,g)))}}pinchStart(b,g){this.state.origin=g.origin;this.computeValues([g.distance,g.angle]);this.computeInitial();this.compute(b);this.emit()}touchMove(b){if(this.state._active){var g=kk(b,this.state._touchIds);this.pinchMove(b,g)}}pointerMove(b){var g=this.state._pointerEvents;g.has(b.pointerId)&&g.set(b.pointerId,b);this.state._active&&(g=pl(...Array.from(g.values())),this.pinchMove(b,g))}pinchMove(b,g){const p=this.state,G=g.angle-p._values[1];let U=0;270<Math.abs(G)&&(U+=Math.sign(G));
this.computeValues([g.distance,g.angle-360*U]);p.origin=g.origin;p.turns=U;p._movement=[p._values[0]/p._initial[0]-1,p._values[1]-p._initial[1]];this.compute(b);this.emit()}touchEnd(b){this.ctrl.setEventIds(b);this.state._active&&this.state._touchIds.some(g=>!this.ctrl.touchIds.has(g))&&(this.state._active=!1,this.compute(b),this.emit())}pointerEnd(b){const g=this.state;this.ctrl.setEventIds(b);try{b.target.releasePointerCapture(b.pointerId)}catch(p){}g._pointerEvents.has(b.pointerId)&&g._pointerEvents.delete(b.pointerId);
g._active&&2>g._pointerEvents.size&&(g._active=!1,this.compute(b),this.emit())}gestureStart(b){b.cancelable&&b.preventDefault();const g=this.state;g._active||(this.start(b),this.computeValues([b.scale,b.rotation]),g.origin=[b.clientX,b.clientY],this.compute(b),this.emit())}gestureMove(b){b.cancelable&&b.preventDefault();if(this.state._active){var g=this.state;this.computeValues([b.scale,b.rotation]);g.origin=[b.clientX,b.clientY];var p=g._movement;g._movement=[b.scale-1,b.rotation];g._delta=Yk.sub(g._movement,
p);this.compute(b);this.emit()}}gestureEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}wheel(b){const g=this.config.modifierKey;if(!g||b[g])this.state._active?this.wheelChange(b):this.wheelStart(b),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(b){this.start(b);this.wheelChange(b)}wheelChange(b){"uv"in b||b.cancelable&&b.preventDefault();const g=this.state;g._delta=[-Zh(b)[1]/100*g.offset[0],0];Yk.addTo(g._movement,g._delta);cl(g);this.state.origin=
[b.clientX,b.clientY];this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){const g=this.config.device;g&&(b(g,"start",this[g+"Start"].bind(this)),b(g,"change",this[g+"Move"].bind(this)),b(g,"end",this[g+"End"].bind(this)),b(g,"cancel",this[g+"End"].bind(this)));this.config.pinchOnWheel&&b("wheel","",this.wheel.bind(this),{passive:!1})}},yE=Hg(Hg({},Ry),{},{device(b,g,{shared:p,pointer:{touch:G=!1}={}}){if(p.target&&!er&&SD)return"gesture";
if(er&&G)return"touch";if(gt){if(bz)return"pointer";if(er)return"touch"}},bounds(b,g,{scaleBounds:p={},angleBounds:G={}}){const U=pa=>{pa=Ui(p,pa);pa=Object.assign({},{min:-Infinity,max:Infinity},pa||{});return[pa.min,pa.max]},la=pa=>{pa=Ui(G,pa);pa=Object.assign({},{min:-Infinity,max:Infinity},pa||{});return[pa.min,pa.max]};return"function"!==typeof p&&"function"!==typeof G?[U(),la()]:pa=>[U(pa),la(pa)]},threshold(b,g,p){this.lockDirection="lock"===p.axis;return Yk.toVector(b,this.lockDirection?
[.1,3]:0)},modifierKey(b){return void 0===b?"ctrlKey":b},pinchOnWheel(b=!0){return b}}),zE=class extends Dn{constructor(...b){super(...b);Oh(this,"ingKey","moving")}move(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.state._active?this.moveChange(b):this.moveStart(b),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(b){this.start(b);this.computeValues(sj(b));this.compute(b);this.computeInitial();this.emit()}moveChange(b){if(this.state._active){var g=sj(b),p=this.state;
p._delta=Yk.sub(g,p._values);Yk.addTo(p._movement,p._delta);this.computeValues(g);this.compute(b);this.emit()}}moveEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}bind(b){b("pointer","change",this.move.bind(this));b("pointer","leave",this.moveEnd.bind(this))}},AE=Hg(Hg({},dr),{},{mouseOnly:(b=!0)=>b}),BE=class extends Dn{constructor(...b){super(...b);Oh(this,"ingKey","scrolling")}scroll(b){this.state._active||this.start(b);this.scrollChange(b);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(b){b.cancelable&&b.preventDefault();const g=this.state;var p,G;const {scrollX:U,scrollY:la,scrollLeft:pa,scrollTop:Ga}=b.currentTarget;var Qa=[null!==(p=null!==U&&void 0!==U?U:pa)&&void 0!==p?p:0,null!==(G=null!==la&&void 0!==la?la:Ga)&&void 0!==G?G:0];g._delta=Yk.sub(Qa,g._values);Yk.addTo(g._movement,g._delta);this.computeValues(Qa);this.compute(b);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("scroll",
"",this.scroll.bind(this))}},CE=dr,DE=class extends Dn{constructor(...b){super(...b);Oh(this,"ingKey","wheeling")}wheel(b){this.state._active||this.start(b);this.wheelChange(b);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(b){const g=this.state;g._delta=Zh(b);Yk.addTo(g._movement,g._delta);cl(g);this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("wheel","",this.wheel.bind(this))}},EE=dr,FE=class extends Dn{constructor(...b){super(...b);
Oh(this,"ingKey","hovering")}enter(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.start(b),this.computeValues(sj(b)),this.compute(b),this.emit())}leave(b){if(!this.config.mouseOnly||"mouse"===b.pointerType){var g=this.state;if(g._active){g._active=!1;var p=sj(b);g._movement=g._delta=Yk.sub(p,g._values);this.computeValues(p);this.compute(b);g.delta=g.movement;this.emit()}}}bind(b){b("pointer","enter",this.enter.bind(this));b("pointer","leave",this.leave.bind(this))}},GE=Hg(Hg({},dr),{},{mouseOnly:(b=
!0)=>b}),bw=new Map,aw=new Map,oE={key:"drag",engine:uE,resolver:wE},nE={key:"hover",engine:FE,resolver:GE},jE={key:"move",engine:zE,resolver:AE},kE={key:"pinch",engine:xE,resolver:yE},lE={key:"scroll",engine:BE,resolver:CE},mE={key:"wheel",engine:DE,resolver:EE},$v=nf(X(22)),eE={target(b){if(b)return()=>"current"in b?b.current:b},enabled(b=!0){return b},window(b=fq?window:void 0){return b},eventOptions({passive:b=!0,capture:g=!1}={}){return{passive:b,capture:g}},transform(b){return b}},fE=["target",
"eventOptions","window","enabled","transform"],ez=class{constructor(b,g){Oh(this,"_listeners",new Set);this._ctrl=b;this._gestureKey=g}add(b,g,p,G,U){const la=this._listeners,pa=Uh(g,p),Ga=Hg(Hg({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),U);b.addEventListener(pa,G,Ga);const Qa=()=>{b.removeEventListener(pa,G,Ga);la.delete(Qa)};la.add(Qa);return Qa}clean(){this._listeners.forEach(b=>b());this._listeners.clear()}},gE=class{constructor(){Oh(this,"_timeouts",new Map)}add(b,
g,p=140,...G){this.remove(b);this._timeouts.set(b,window.setTimeout(g,p,...G))}remove(b){(b=this._timeouts.get(b))&&window.clearTimeout(b)}clean(){this._timeouts.forEach(b=>void window.clearTimeout(b));this._timeouts.clear()}},hE=class{constructor(b){Oh(this,"gestures",new Set);Oh(this,"_targetEventStore",new ez(this));Oh(this,"gestureEventStores",{});Oh(this,"gestureTimeoutStores",{});Oh(this,"handlers",{});Oh(this,"config",{});Oh(this,"pointerIds",new Set);Oh(this,"touchIds",new Set);Oh(this,"state",
{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});b.drag&&Ni(this,"drag");b.wheel&&Ni(this,"wheel");b.scroll&&Ni(this,"scroll");b.move&&Ni(this,"move");b.pinch&&Ni(this,"pinch");b.hover&&Ni(this,"hover")}setEventIds(b){if("touches"in b)return this.touchIds=new Set(fn(b));if("pointerId"in b)return"pointerup"===b.type||"pointercancel"===b.type?this.pointerIds.delete(b.pointerId):"pointerdown"===b.type&&this.pointerIds.add(b.pointerId),this.pointerIds}applyHandlers(b,g){this.handlers=b;this.nativeHandlers=
g}applyConfig(b,g){this.config=Qg(b,g,this.config)}clean(){this._targetEventStore.clean();for(const b of this.gestures)this.gestureEventStores[b].clean(),this.gestureTimeoutStores[b].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...b){var g=this.config.shared;const p={};let G;if(g.target&&(G=g.target(),!G))return;if(g.enabled){for(const U of this.gestures){const la=this.config[U],pa=fz(p,la.eventOptions,!!G);la.enabled&&(new (bw.get(U))(this,
b,U)).bind(pa)}g=fz(p,g.eventOptions,!!G);for(const U in this.nativeHandlers)g(U,"",la=>this.nativeHandlers[U](Hg(Hg({},this.state.shared),{},{event:la,args:b})),void 0,!0)}for(const U in p)p[U]=hj(...p[U]);if(!G)return p;for(const U in p){const {device:la,capture:pa,passive:Ga}=Mi(U);this._targetEventStore.add(G,la,"",p[U],{capture:pa,passive:Ga})}}},fz=(b,g,p)=>(G,U,la,pa={},Ga=!1)=>{var Qa,Xa;const fb=null!==(Qa=pa.capture)&&void 0!==Qa?Qa:g.capture;pa=null!==(Xa=pa.passive)&&void 0!==Xa?Xa:g.passive;
G=Ga?G:Ph(G,U,fb);p&&pa&&(G+="Passive");b[G]=b[G]||[];b[G].push(la)},iE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,ku=nf(X(22)),cw=nf(X(22)),dz=nf(X(22)),cz=nf(X(22)),HE=nf(X(22)),IE=nf(X(22)),JE=nf(X(22)),KE=nf(X(22)),LE={none:(b,g)=>"none",["default"]:(b,g)=>"default",pointer:(b,g)=>"pointer",crosshair:(b,g)=>"crosshair",move:(b,g)=>"move",wait:(b,g)=>"wait",progress:(b,g)=>"progress",grab:(b,g)=>jj('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
b,g),grabbing:(b,g)=>jj("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
b,g),text:(b,g)=>jj("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
b,g),["resize-edge"]:(b,g)=>jj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["resize-corner"]:(b,g)=>jj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b,g),["ew-resize"]:(b,g)=>jj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["ns-resize"]:(b,g)=>jj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
b+90,g),["nesw-resize"]:(b,g)=>jj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",b,g),["nwse-resize"]:(b,g)=>jj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b+90,g),rotate:(b,g)=>jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+45,g),["nwse-rotate"]:(b,g)=>jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b,g),["nesw-rotate"]:(b,g)=>jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+90,g),["senw-rotate"]:(b,g)=>jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+180,g),["swne-rotate"]:(b,g)=>jj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+270,g)},dE=nf(X(22));nf(X(22));var qz=X(22),rz=nf(X(22));if(!X(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!zg)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var ME=X(31),jt=nf(X(22)),sz="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,NE=1E4,OE=function(b){var g="function"===typeof Symbol&&Symbol.iterator,p=g&&b[g],G=0;if(p)return p.call(b);if(b&&"number"===typeof b.length)return{next:function(){b&&G>=
b.length&&(b=void 0);return{value:b&&b[G++],done:!b}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.");},tz=sz?tm(sz):uh(),PE=tz.addReactionToTrack,QE=tz.recordReactionAsCommitted,hz=function(b,g){var p="function"===typeof Symbol&&b[Symbol.iterator];if(!p)return b;b=p.call(b);var G,U=[];try{for(;(void 0===g||0<g--)&&!(G=b.next()).done;)U.push(G.value)}catch(pa){var la={error:pa}}finally{try{G&&!G.done&&(p=b["return"])&&p.call(b)}finally{if(la)throw la.error;}}return U},
pE=function(){return function(){}}(),bs=X(22),kz="function"===typeof Symbol&&Symbol.for,lz=kz?Symbol.for("react.forward_ref"):"function"===typeof bs.forwardRef&&(0,bs.forwardRef)(function(b){return null}).$$typeof,iz=kz?Symbol.for("react.memo"):"function"===typeof bs.memo&&(0,bs.memo)(function(b){return null}).$$typeof,rE={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};lk.displayName="Observer";X(22);X(22);X(22);(function(b){b||=gm;Ke({reactionScheduler:b})})(ME.unstable_batchedUpdates);
var qE=nf(X(22));nb=X(588);var uo=qE.forwardRef(function(b,g){var {children:p,opacity:G,centered:U,className:la=""}=b,pa=Bf(b,["children","opacity","centered","className"]);return(0,nb.jsx)(lk,{children:()=>(0,nb.jsx)("div",{ref:g,className:`tl-positioned-div ${la}`,style:G?{opacity:G}:void 0,draggable:!1,children:(0,nb.jsx)("div",rf(oe({className:`tl-positioned-inner ${U?"tl-centered":""}`},pa),{children:p}))})})}),sE=nf(X(22));nb=X(588);var to=sE.forwardRef(function(b,g){var {id:p,className:G="",
style:U,children:la}=b,pa=Bf(b,["id","className","style","children"]);return(0,nb.jsx)(lk,{children:()=>(0,nb.jsx)("svg",{ref:g,style:U,className:`tl-positioned-svg ${G}`,children:(0,nb.jsx)("g",rf(oe({id:p,className:"tl-centered-g"},pa),{children:la}))})})}),ht=nf(X(22)),jz=nf(X(22)),ju=nf(X(22));nb=X(588);var hq=df(function(b){var {id:g,bounds:p,zIndex:G,rotation:U=0,className:la="",children:pa}=b;b=Bf(b,"id bounds zIndex rotation className children".split(" "));const Ga=ju.useRef(null);ju.useLayoutEffect(()=>
{Ga.current.style.transform=`translate(
        calc(${p.minX}px - var(--tl-padding)),
        calc(${p.minY}px - var(--tl-padding)))
        rotate(${U+(p.rotation||0)}rad)`},[p.minX,p.minY,U,p.rotation]);ju.useLayoutEffect(()=>{const Qa=Ga.current;Qa.style.width=`calc(${Math.floor(p.width)}px + (var(--tl-padding) * 2))`;Qa.style.height=`calc(${Math.floor(p.height)}px + (var(--tl-padding) * 2))`},[p.width,p.height]);ju.useLayoutEffect(()=>{const Qa=Ga.current;void 0!==G&&(Qa.style.zIndex=G.toString())},[G]);return(0,nb.jsx)("div",rf(oe({id:g,ref:Ga,className:`tl-positioned ${la}`,"aria-label":"container"},b),{children:pa}))}),
RE=nf(X(22));nb=X(588);var SE=df(function({shapes:b,hidden:g,bounds:p,rotation:G=0}){const {components:{ContextBar:U},viewport:{bounds:la,camera:{point:[pa,Ga],zoom:Qa}}}=vi(),Xa=RE.useRef(null);var fb=vf.getRotatedBounds(p,G);fb=vf.multiplyBounds(fb,Qa);ij(Xa,p,G,10005);if(!U)throw Error("Expected a ContextBar component.");const mb=vf.translateBounds(fb,[pa*Qa,Ga*Qa]);return(0,nb.jsx)("div",{ref:Xa,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,nb.jsx)(U,{hidden:g,shapes:b,bounds:p,offsets:{left:mb.minX,right:la.width-mb.maxX,top:mb.minY,bottom:la.height-mb.maxY,width:mb.width,height:mb.height},scaledBounds:fb,rotation:G})})}),uz=nf(X(22));nb=X(588);var vz=df(function({children:b}){const g=uz.useRef(null),{viewport:p}=vi(),G=g.current,{zoom:U,point:la}=p.camera;uz.useEffect(()=>{G&&(G.style.transform=`scale(${U}) translate3d(${la[0]}px, ${la[1]}px, 0)`)},[U,la,G]);return(0,nb.jsx)("div",{ref:g,className:"tl-absolute tl-layer",
children:b})});nb=X(588);var wz=df(function({shape:b,isHovered:g=!1,isSelected:p=!1,isBinding:G=!1,isEditing:U=!1,meta:la}){const {bounds:pa,props:{scale:Ga,rotation:Qa=0},ReactIndicator:Xa}=b;return(0,nb.jsx)(hq,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:pa,rotation:Qa,scale:Ga,zIndex:U?1E3:1E4,children:(0,nb.jsx)(to,{children:(0,nb.jsx)("g",{className:`tl-indicator-container ${p?"tl-selected":"tl-hovered"}`,children:(0,nb.jsx)(Xa,{isEditing:U,isBinding:G,isHovered:g,isSelected:p,
isErasing:!1,meta:la})})})})}),xz=nf(X(22));nb=X(588);var TE=df(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:p}},components:{QuickLinks:G}}=vi();var U=af();const la=hm(g);if(!G)throw Error("Expected a QuickLinks component.");U=50>b.height*p||!U.selectedShapesArray.includes(g);return(0,nb.jsx)(hq,{bounds:b,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,nb.jsx)(uo,{children:(0,nb.jsx)("span",rf(oe({style:{position:"absolute",top:"100%",pointerEvents:"all",
transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},la),{onPointerDown:pa=>pa.stopPropagation(),children:(0,nb.jsx)(G,{className:"tl-backlinks-count "+(U?"tl-backlinks-count-rounded":""),id:g.id,shape:g})}))})})});nb=X(588);var UE=df(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:p}},components:{BacklinksCount:G}}=vi();var U=af();if(!G)throw Error("Expected a BacklinksCount component.");const la=pa=>pa.stopPropagation();U=50>b.height*p||!U.selectedShapesArray.includes(g)||
g.hideSelection;return(0,nb.jsx)(hq,{bounds:b,className:"tl-backlinks-count-container",children:(0,nb.jsx)(uo,{children:(0,nb.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:la,onWheelCapture:la,onKeyDown:la,title:"Shape Backlinks",children:(0,nb.jsx)(G,{className:"tl-backlinks-count "+(U?"tl-backlinks-count-rounded":""),id:g.id,shape:g})})})})}),VE=nf(X(22));nb=X(588);var WE=df(function({bounds:b,
hidden:g,shapes:p,rotation:G=0,detail:U="size"}){const {components:{SelectionDetail:la},viewport:{camera:{zoom:pa}}}=vi(),Ga=VE.useRef(null),Qa=vf.multiplyBounds(b,pa);ij(Ga,b,G,10003);if(!la)throw Error("Expected a SelectionDetail component.");return(0,nb.jsx)("div",{ref:Ga,className:`tl-counter-scaled-positioned ${g?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,nb.jsx)(la,{shapes:p,bounds:b,scaledBounds:Qa,zoom:pa,rotation:G,detail:U})})});
nb=X(588);var XE=df(function({shape:b,isHovered:g=!1,isSelected:p=!1,isBinding:G=!1,isErasing:U=!1,isEditing:la=!1,onEditingEnd:pa,asset:Ga,meta:Qa,zIndex:Xa}){const {bounds:fb,props:{rotation:mb,scale:Gb},ReactComponent:Wb}=b,Mb=af(),dc=hm(b);return(0,nb.jsx)(hq,{"data-shape-id":b.id,"data-html2canvas-ignore":!p&&0!==Mb.selectedShapes.size||null,zIndex:Xa,"data-type":"Shape",bounds:fb,rotation:mb,scale:Gb,children:(0,nb.jsx)(Wb,{meta:Qa,isEditing:la,isBinding:G,isHovered:g,isSelected:p,isErasing:U,
events:dc,asset:Ga,onEditingEnd:pa})})});nb=X(588);var yz=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],YE=df(function({size:b}){const {viewport:{camera:{point:g,zoom:p}}}=vi();return(0,nb.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,nb.jsx)("defs",{children:yz.map(([G,U,la],pa)=>{la=la*b*p;var Ga=g[0]*p,Qa=g[1]*p;Ga=0<Ga?Ga%la:la+Ga%la;Qa=0<Qa?Qa%la:la+Qa%la;G=Rl(p,[G,U],[0,1]);return(0,nb.jsx)("pattern",{id:`grid-${pa}`,
width:la,height:la,patternUnits:"userSpaceOnUse",children:!(2<G||.1>G)&&(0,nb.jsx)("circle",{className:"tl-grid-dot",cx:Ga,cy:Qa,r:1.5,opacity:Math.max(0,Math.min(G,1))})},`grid-pattern-${pa}`)})}),yz.map((G,U)=>(0,nb.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${U})`},`grid-rect-${U}`))]})}),zz=df(function({size:b}){return(0,nb.jsx)(YE,{size:b})});nb=X(588);var Az=df(function({bounds:b}){const g=Ij("background");return(0,nb.jsx)(to,rf(oe({"data-html2canvas-ignore":"true"},g),{children:(0,nb.jsx)("rect",
{className:"tl-bounds-bg",width:Math.max(1,b.width),height:Math.max(1,b.height),pointerEvents:"all",rx:8,ry:8})}))});X(22);nb=X(588);var Bz=df(function({scaledBounds:b,shapes:g,detail:p="size",rotation:G=0}){var U;const la=1===g.length?G:null!=(U=b.rotation)?U:0;return(0,nb.jsx)(uo,{centered:!0,children:(0,nb.jsx)("div",{className:"tl-bounds-detail",style:{transform:la<oo||la>3*oo?`rotate(${la}rad) translateY(${b.height/2+24}px)`:`rotate(${Math.PI+la}rad) translateY(${b.height/2+32}px)`,padding:"2px 3px",
borderRadius:"1px"},children:1===g.length&&"line"===g[0].type?`${je.dist(g[0].props.handles.start.point,g[0].props.handles.end.point).toFixed()}`:"size"===p?`${b.width.toFixed()} \xD7 ${b.height.toFixed()}`:`\u2220${pm.radiansToDegrees(pm.clampRadians(G)).toFixed()}\xB0`})})});nb=X(588);var ZE={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},lu=df(function({cx:b,cy:g,size:p,targetSize:G,corner:U,isHidden:la}){const pa=
Ij(U);return(0,nb.jsxs)("g",rf(oe({opacity:la?0:1},pa),{children:[(0,nb.jsx)("rect",{className:"tl-transparent "+(la?"":ZE[U]),"aria-label":`${U} target`,x:b-1.25*G,y:g-1.25*G,width:2.5*G,height:2.5*G,pointerEvents:la?"none":"all"}),(0,nb.jsx)("rect",{className:"tl-corner-handle","aria-label":`${U} handle`,x:b-p/2,y:g-p/2,width:p,height:p,pointerEvents:"none"})]}))});nb=X(588);var $E={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},mu=df(function({x:b,
y:g,width:p,height:G,targetSize:U,edge:la,disabled:pa,isHidden:Ga}){const Qa=Ij(la);return(0,nb.jsx)("rect",oe({pointerEvents:Ga||pa?"none":"all",className:"tl-transparent tl-edge-handle "+(Ga?"":$E[la]),"aria-label":`${la} target`,opacity:Ga?0:1,x:b-U,y:g-U,width:Math.max(1,p+2*U),height:Math.max(1,G+2*U)},Qa))});X(22);nb=X(588);df(function({cx:b,cy:g,size:p,targetSize:G,isHidden:U}){const la=Ij("rotate");return(0,nb.jsxs)("g",rf(oe({opacity:U?0:1},la),{children:[(0,nb.jsx)("circle",{className:"tl-transparent ",
"aria-label":"rotate target",cx:b,cy:g,r:G,pointerEvents:U?"none":"all"}),(0,nb.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:b,cy:g,r:p/2,pointerEvents:"none"})]}))});X(22);nb=X(588);var nu=df(function({cx:b,cy:g,targetSize:p,corner:G,isHidden:U}){const la=Ij(G);return(0,nb.jsx)("g",rf(oe({opacity:U?0:1},la),{children:(0,nb.jsx)("rect",{className:"tl-transparent","aria-label":`${G} target`,x:b-2.5*p,y:g-2.5*p,width:3*p,height:3*p,pointerEvents:U?"none":"all"})}))});
nb=X(588);var Cz=df(function({bounds:b,showResizeHandles:g,showRotateHandles:p,shapes:G}){var U,la;const pa=af();let {width:Ga,height:Qa}=b;var Xa=pa.viewport.camera.zoom;b=8/Xa;Xa=6/Xa;G=1===G.length?G[0].canResize:[!0,!0];const fb=null!=(la=null==(U=pa.editingShape)?void 0:U.props.borderRadius)?la:0;return(0,nb.jsxs)(to,{children:[!pa.editingShape&&(0,nb.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ga,1),height:Math.max(Qa,1),rx:fb,ry:fb,pointerEvents:"none"}),(0,nb.jsx)(mu,{x:2*Xa,y:0,
width:Ga-4*Xa,height:0,targetSize:Xa,edge:"top_edge",disabled:!G[1],isHidden:!g}),(0,nb.jsx)(mu,{x:Ga,y:2*Xa,width:0,height:Qa-4*Xa,targetSize:Xa,edge:"right_edge",disabled:!G[0],isHidden:!g}),(0,nb.jsx)(mu,{x:2*Xa,y:Qa,width:Ga-4*Xa,height:0,targetSize:Xa,edge:"bottom_edge",disabled:!G[1],isHidden:!g}),(0,nb.jsx)(mu,{x:0,y:2*Xa,width:0,height:Qa-4*Xa,targetSize:Xa,edge:"left_edge",disabled:!G[0],isHidden:!g}),(0,nb.jsx)(nu,{cx:0,cy:0,targetSize:Xa,corner:"top_left_resize_corner",isHidden:!p}),(0,nb.jsx)(nu,
{cx:Ga+2*Xa,cy:0,targetSize:Xa,corner:"top_right_resize_corner",isHidden:!p}),(0,nb.jsx)(nu,{cx:Ga+2*Xa,cy:Qa+2*Xa,targetSize:Xa,corner:"bottom_right_resize_corner",isHidden:!p}),(0,nb.jsx)(nu,{cx:0,cy:Qa+2*Xa,targetSize:Xa,corner:"bottom_left_resize_corner",isHidden:!p}),(null==G?void 0:G.every(mb=>mb))&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)(lu,{cx:0,cy:0,size:b,targetSize:Xa,corner:"top_left_corner",isHidden:!g}),(0,nb.jsx)(lu,{cx:Ga,cy:0,size:b,targetSize:Xa,corner:"top_right_corner",isHidden:!g}),
(0,nb.jsx)(lu,{cx:Ga,cy:Qa,size:b,targetSize:Xa,corner:"bottom_right_corner",isHidden:!g}),(0,nb.jsx)(lu,{cx:0,cy:Qa,size:b,targetSize:Xa,corner:"bottom_left_corner",isHidden:!g})]})]})});nb=X(588);var Dz=df(function({bounds:b}){return(0,nb.jsx)(hq,{bounds:b,zIndex:10001,children:(0,nb.jsx)(to,{children:(0,nb.jsx)("rect",{className:"tl-brush",x:0,y:0,width:b.width,height:b.height})})})});nb=X(588);df(function(){return(0,nb.jsx)(nb.Fragment,{})});nb=X(588);var Ez=df(function({shape:b,handle:g,id:p}){b=
Im(b,p);const [G,U]=g.point;return(0,nb.jsxs)("g",rf(oe({className:"tl-handle","aria-label":"handle"},b),{transform:`translate(${G}, ${U})`,children:[(0,nb.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,nb.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),Fz=nf(X(22));nb=X(588);var dw=df(function({direction:b}){const {viewport:{bounds:g}}=vi(),p=Fz.useRef(null);Fz.useLayoutEffect(()=>{const G=p.current;if(G){var U=[g.width/2,g.height/2],la=vf.getRectangleSides([12,
12],[g.width-24,g.height-24]);for(const [,[pa,Ga]]of la)la=w(U,b,pa,Ga),la.didIntersect&&(la=la.points[0],G.style.transform=`translate(${la[0]-6}px,${la[1]-6}px) rotate(${je.toAngle(b)}rad)`)}},[b,g]);return(0,nb.jsx)("div",{ref:p,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,nb.jsx)("svg",{height:12,width:12,children:(0,nb.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});nb=X(588);var aF=df(function({id:b,className:g,brush:p,shapes:G,assets:U,bindingShapes:la,editingShape:pa,
hoveredShape:Ga,hoveredGroup:Qa,selectionBounds:Xa,selectedShapes:fb,erasingShapes:mb,selectionDirectionHint:Gb,cursor:Wb="default",cursorRotation:Mb=0,selectionRotation:dc=0,showSelection:hc=!0,showHandles:Ub=!0,showSelectionRotation:nc=!1,showResizeHandles:Bc=!0,showRotateHandles:Ec=!0,showSelectionDetail:Sc=!0,showContextBar:Jd=!0,showGrid:Wd=!0,gridSize:ye=8,onEditingEnd:Fe=TD,theme:Ye=Kq,children:jf}){var Oe;const Be=ht.useRef(null),{viewport:zd,components:ad,meta:ed}=vi(),ld=af(),$d=ht.useCallback(wf=>
{ld.inputs.updateContainerOffset([wf.minX,wf.minY])},[]);ik(Ye,b);Bl(Be);Al(Be,zd,$d);Nk(Be);Zj();Jm(Be,Wb,Mb);fm(Be);Ek(Be);b=ug();const Pe=(Wb=1===(null==fb?void 0:fb.length)&&fb[0])&&"handles"in Wb.props?null==fb?void 0:fb[0]:void 0,kf=ht.useMemo(()=>new Set(fb||[]),[fb]),Sf=ht.useMemo(()=>new Set(mb||[]),[mb]);Wb=1===(null==fb?void 0:fb.length)?fb[0]:void 0;Qa=[...(new Set([Qa,Ga]))].filter(ti);return(0,nb.jsxs)("div",{ref:Be,className:`tl-container ${null!=g?g:""}`,children:[(0,nb.jsxs)("div",
rf(oe({tabIndex:-1,className:"tl-absolute tl-canvas"},b),{children:[Wd&&ad.Grid&&(0,nb.jsx)(ad.Grid,{size:ye}),(0,nb.jsxs)(vz,{children:[ad.SelectionBackground&&fb&&Xa&&hc&&(0,nb.jsx)(hq,{"data-type":"SelectionBackground",bounds:Xa,zIndex:2,"data-html2canvas-ignore":"true",children:(0,nb.jsx)(ad.SelectionBackground,{shapes:fb,bounds:Xa,showResizeHandles:Bc,showRotateHandles:Ec})}),G&&G.map((wf,Gf)=>(0,nb.jsx)(XE,{shape:wf,asset:U&&wf.props.assetId?U[wf.props.assetId]:void 0,isEditing:wf===pa,isHovered:wf===
Ga,isBinding:null==la?void 0:la.includes(wf),isSelected:kf.has(wf),isErasing:Sf.has(wf),meta:ed,zIndex:1E3+Gf,onEditingEnd:Fe},"shape_"+wf.id)),!ld.isIn("select.pinching")&&(null==fb?void 0:fb.map(wf=>(0,nb.jsx)(wz,{shape:wf,isEditing:wf===pa,isHovered:!1,isBinding:!1,isSelected:!0},"selected_indicator_"+wf.id))),Qa.map(wf=>wf!==pa&&(0,nb.jsx)(wz,{shape:wf},"hovered_indicator_"+wf.id)),Wb&&ad.BacklinksCount&&(0,nb.jsx)(UE,{hidden:!1,bounds:Wb.bounds,shape:Wb}),Ga&&Ga!==Wb&&ad.QuickLinks&&(0,nb.jsx)(TE,
{hidden:!1,bounds:Ga.bounds,shape:Ga}),p&&ad.Brush&&(0,nb.jsx)(ad.Brush,{bounds:p}),fb&&Xa&&(0,nb.jsxs)(nb.Fragment,{children:[hc&&ad.SelectionForeground&&(0,nb.jsx)(hq,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:Xa,zIndex:pa&&fb.includes(pa)?1002:10002,children:(0,nb.jsx)(ad.SelectionForeground,{shapes:fb,bounds:Xa,showResizeHandles:Bc,showRotateHandles:Ec})}),Ub&&Pe&&ad.Handle&&(0,nb.jsx)(hq,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",
bounds:Xa,zIndex:10003,children:(0,nb.jsx)(to,{children:Object.entries(null!=(Oe=Pe.props.handles)?Oe:{}).map(([wf,Gf])=>ht.createElement(ad.Handle,{key:`${Gf.id}_handle_${Gf.id}`,shape:Pe,handle:Gf,id:wf}))})}),fb&&ad.SelectionDetail&&(0,nb.jsx)(WE,{"data-html2canvas-ignore":"true",shapes:fb,bounds:Xa,detail:nc?"rotation":"size",hidden:!Sc,rotation:dc},"detail"+fb.map(wf=>wf.id).join(""))]})]}),Gb&&Xa&&fb&&(0,nb.jsx)(dw,{direction:Gb,bounds:Xa,shapes:fb}),(0,nb.jsx)("div",{id:"tl-dev-tools-canvas-anchor",
"data-html2canvas-ignore":"true"})]})),(0,nb.jsx)(vz,{children:fb&&Xa&&(0,nb.jsx)(nb.Fragment,{children:fb&&ad.ContextBar&&(0,nb.jsx)(SE,{shapes:fb,hidden:!Jd,bounds:Wb?Wb.bounds:Xa,rotation:Wb?Wb.props.rotation:0},"context"+fb.map(wf=>wf.id).join(""))})}),jf]})}),Gz=nf(X(22)),Hz=nf(X(22));nb=X(588);df(function({children:b}){const g=Hz.useRef(null),{viewport:p}=vi();Hz.useEffect(()=>Md(()=>{const G=g.current;if(G){var {zoom:U,point:la}=p.camera;G.style.transform=`scale(${U}) translateX(${la[0]}px) translateY(${la[1]}px)`}}),
[]);return(0,nb.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,nb.jsx)("g",{ref:g,pointerEvents:"none",children:b})})});nb=X(588);var bF=df(function(b){const g=un(b),p=yk(b.id);Ok(g,b);yj(g,b);return(0,nb.jsx)(p.Provider,{value:g,children:b.children})});nb=X(588);var cF=df(function({id:b="noid",viewport:g,inputs:p,callbacks:G=Kq,meta:U=Kq,components:la=Kq,children:pa}){const [Ga,Qa]=Gz.useState(()=>{const {Brush:fb,ContextBar:mb,DirectionIndicator:Gb,Grid:Wb,Handle:Mb,
SelectionBackground:dc,SelectionDetail:hc,SelectionForeground:Ub}=la,nc=Bf(la,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:b,viewport:g,inputs:p,callbacks:G,meta:U,components:rf(oe({},nc),{Brush:null===fb?void 0:Dz,ContextBar:mb,DirectionIndicator:null===Gb?void 0:dw,Grid:null===Wb?void 0:zz,Handle:null===Mb?void 0:Ez,SelectionBackground:null===dc?void 0:Az,SelectionDetail:null===hc?void 0:Bz,SelectionForeground:null===
Ub?void 0:Cz})}});Gz.useLayoutEffect(()=>{const {Brush:fb,ContextBar:mb,DirectionIndicator:Gb,Grid:Wb,Handle:Mb,SelectionBackground:dc,SelectionDetail:hc,SelectionForeground:Ub}=la,nc=Bf(la,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return Md(()=>{Qa({id:b,viewport:g,inputs:p,callbacks:G,meta:U,components:rf(oe({},nc),{Brush:null===fb?void 0:Dz,ContextBar:mb,DirectionIndicator:null===Gb?void 0:dw,Grid:null===Wb?void 0:zz,Handle:null===
Mb?void 0:Ez,SelectionBackground:null===dc?void 0:Az,SelectionDetail:null===hc?void 0:Bz,SelectionForeground:null===Ub?void 0:Cz})})})},[]);const Xa=sm(b);return(0,nb.jsx)(Xa.Provider,{value:Ga,children:pa})});nb=X(588);nb=X(588);var dF=df(function(b){const g=af();return(0,nb.jsx)(pg,oe({viewport:g.viewport,inputs:g.inputs,callbacks:g._events,brush:g.brush,editingShape:g.editingShape,hoveredShape:g.hoveredShape,hoveredGroup:g.hoveredGroup,bindingShapes:g.bindingShapes,selectionDirectionHint:g.selectionDirectionHint,
selectionBounds:g.selectionBounds,selectedShapes:g.selectedShapesArray,erasingShapes:g.erasingShapesArray,shapes:g.shapes,assets:g.assets,showGrid:g.settings.showGrid,showSelection:g.showSelection,showSelectionRotation:g.showSelectionRotation,showResizeHandles:g.showResizeHandles,showRotateHandles:g.showRotateHandles,showSelectionDetail:g.showSelectionDetail,showContextBar:g.showContextBar,cursor:g.cursors.cursor,cursorRotation:g.cursors.rotation,selectionRotation:g.selectionRotation,onEditingEnd:g.clearEditingState},
b))});nb=X(588);var cs=nf(X(22)),ou=nf(X(22));nb=X(588);var eF="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),Fh=b=>{var {name:g,className:p}=b;b=Bf(b,["name","className"]);const G=eF.includes(g)?"tie tie-":"ti ti-";return(0,nb.jsx)("i",oe({className:[G+g,p].join(" ")},
b))},hh=X(22),fF=X(22),gr=X(22),Mn=X(22),ew=X(22),gF=X(31),$m=X(22),hp=(0,$m.forwardRef)((b,g)=>{var {children:p}=b;b=Bf(b,["children"]);const G=$m.Children.toArray(p),U=G.find(rg);if(U){const la=U.props.children;p=G.map(pa=>pa===U?1<$m.Children.count(la)?$m.Children.only(null):(0,$m.isValidElement)(la)?la.props.children:null:pa);return(0,$m.createElement)(fw,ff({},b,{ref:g}),(0,$m.isValidElement)(la)?(0,$m.cloneElement)(la,void 0,p):null)}return(0,$m.createElement)(fw,ff({},b,{ref:g}),p)});hp.displayName=
"Slot";var fw=(0,$m.forwardRef)((b,g)=>{const {children:p}=b;b=Bf(b,["children"]);return(0,$m.isValidElement)(p)?(0,$m.cloneElement)(p,rf(oe({},lj(b,p.props)),{ref:Fk(g,p.ref)})):1<$m.Children.count(p)?$m.Children.only(null):null});fw.displayName="SlotClone";var Iz=({children:b})=>(0,$m.createElement)($m.Fragment,null,b),il="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const p=(0,ew.forwardRef)((G,U)=>{var {asChild:la}=G;G=Bf(G,["asChild"]);la=la?hp:g;(0,ew.useEffect)(()=>
{window[Symbol.for("radix-ui")]=!0},[]);return(0,ew.createElement)(la,ff({},G,{ref:U}))});p.displayName=`Primitive.${g}`;return rf(oe({},b),{[g]:p})},{}),gw=X(22),hF=X(22),Jz,iF=(0,Mn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hw=(0,Mn.forwardRef)((b,g)=>{var p;const {disableOutsidePointerEvents:G=!1,onEscapeKeyDown:U,onPointerDownOutside:la,onFocusOutside:pa,onInteractOutside:Ga,onDismiss:Qa}=b,Xa=Bf(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),
fb=(0,Mn.useContext)(iF),[mb,Gb]=(0,Mn.useState)(null),Wb=null!==(p=null===mb||void 0===mb?void 0:mb.ownerDocument)&&void 0!==p?p:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Mb]=(0,Mn.useState)({});g=Cf(g,Bc=>Gb(Bc));p=Array.from(fb.layers);var [dc]=[...fb.layersWithOutsidePointerEventsDisabled].slice(-1);dc=p.indexOf(dc);const hc=mb?p.indexOf(mb):-1;p=0<fb.layersWithOutsidePointerEventsDisabled.size;const Ub=hc>=dc;dc=Qj(Bc=>{const Ec=Bc.target,Sc=[...fb.branches].some(Jd=>
Jd.contains(Ec));Ub&&!Sc&&(null===la||void 0===la||la(Bc),null===Ga||void 0===Ga||Ga(Bc),Bc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Wb);const nc=Tl(Bc=>{const Ec=Bc.target;[...fb.branches].some(Sc=>Sc.contains(Ec))||(null===pa||void 0===pa||pa(Bc),null===Ga||void 0===Ga||Ga(Bc),Bc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Wb);mk(Bc=>{hc===fb.layers.size-1&&(null===U||void 0===U||U(Bc),!Bc.defaultPrevented&&Qa&&(Bc.preventDefault(),Qa()))},Wb);(0,Mn.useEffect)(()=>{if(mb)return G&&
(0===fb.layersWithOutsidePointerEventsDisabled.size&&(Jz=Wb.body.style.pointerEvents,Wb.body.style.pointerEvents="none"),fb.layersWithOutsidePointerEventsDisabled.add(mb)),fb.layers.add(mb),Mk(),()=>{G&&1===fb.layersWithOutsidePointerEventsDisabled.size&&(Wb.body.style.pointerEvents=Jz)}},[mb,Wb,G,fb]);(0,Mn.useEffect)(()=>()=>{mb&&(fb.layers.delete(mb),fb.layersWithOutsidePointerEventsDisabled.delete(mb),Mk())},[mb,fb]);(0,Mn.useEffect)(()=>{const Bc=()=>Mb({});document.addEventListener("dismissableLayer.update",
Bc);return()=>document.removeEventListener("dismissableLayer.update",Bc)},[]);return(0,Mn.createElement)(il.div,ff({},Xa,{ref:g,style:oe({pointerEvents:p?Ub?"auto":"none":void 0},b.style),onFocusCapture:If(b.onFocusCapture,nc.onFocusCapture),onBlurCapture:If(b.onBlurCapture,nc.onBlurCapture),onPointerDownCapture:If(b.onPointerDownCapture,dc.onPointerDownCapture)}))}),Kz=nf(X(22)),jF=X(22),Nm=(null===globalThis||void 0===globalThis?0:globalThis.document)?jF.useLayoutEffect:()=>{},kF=Kz["useId".toString()]||
(()=>{}),lF=0,$l=X(22),Lz=(b,g,p)=>$h(void 0,null,function*(){const {placement:G="bottom",strategy:U="absolute",middleware:la=[],platform:pa}=p,Ga=yield null==pa.isRTL?void 0:pa.isRTL(g);let Qa=yield pa.getElementRects({reference:b,floating:g,strategy:U}),{x:Xa,y:fb}=tl(Qa,G,Ga),mb=G,Gb={},Wb=0;for(let Mb=0;Mb<la.length;Mb++){const {name:dc,fn:hc}=la[Mb],{x:Ub,y:nc,data:Bc,reset:Ec}=yield hc({x:Xa,y:fb,initialPlacement:G,placement:mb,strategy:U,middlewareData:Gb,rects:Qa,platform:pa,elements:{reference:b,
floating:g}});Xa=null!=Ub?Ub:Xa;fb=null!=nc?nc:fb;Gb=rf(oe({},Gb),{[dc]:oe(oe({},Gb[dc]),Bc)});Ec&&50>=Wb&&(Wb++,"object"==typeof Ec&&(Ec.placement&&(mb=Ec.placement),Ec.rects&&(Qa=!0===Ec.rects?yield pa.getElementRects({reference:b,floating:g,strategy:U}):Ec.rects),{x:Xa,y:fb}=tl(Qa,mb,Ga)),Mb=-1)}return{x:Xa,y:fb,placement:mb,strategy:U,middlewareData:Gb}}),pu=Math.min,Bp=Math.max,Mz=b=>({name:"arrow",options:b,fn(g){return $h(this,null,function*(){const {element:p,padding:G=0}=null!=b?b:{},{x:U,
y:la,placement:pa,rects:Ga,platform:Qa}=g;if(null==p)return{};const Xa=gn(G),fb={x:U,y:la},mb=Dk(pa),Gb=pa.split("-")[1],Wb=nk(mb);var Mb=yield Qa.getDimensions(p);const dc="y"===mb?"top":"left",hc="y"===mb?"bottom":"right";var Ub=Ga.reference[Wb]+Ga.reference[mb]-fb[mb]-Ga.floating[Wb];const nc=fb[mb]-Ga.reference[mb];var Bc=yield null==Qa.getOffsetParent?void 0:Qa.getOffsetParent(p);let Ec=Bc?"y"===mb?Bc.clientHeight||0:Bc.clientWidth||0:0;0===Ec&&(Ec=Ga.floating[Wb]);Bc=Xa[dc];const Sc=Ec-Mb[Wb]-
Xa[hc];Mb=Ec/2-Mb[Wb]/2+(Ub/2-nc/2);Ub=Bp(Bc,pu(Mb,Sc));return{[mb]:fb[mb]-(0<("start"===Gb?Xa[dc]:Xa[hc])&&Mb!==Ub&&Ga.reference[Wb]<=Ga.floating[Wb]?Mb<Bc?Bc-Mb:Sc-Mb:0),data:{[mb]:Ub,centerOffset:Mb-Ub}}})}}),mF={left:"right",right:"left",bottom:"top",top:"bottom"},nF={start:"end",end:"start"},Nz=["top","right","bottom","left"];Nz.reduce((b,g)=>b.concat(g,g+"-start",g+"-end"),[]);var Oz=function(b){return void 0===b&&(b={}),{name:"flip",options:b,fn(g){return $h(this,null,function*(){var p;const {placement:G,
middlewareData:U,rects:la,initialPlacement:pa,platform:Ga,elements:Qa}=g;var Xa=b;const {mainAxis:fb=!0,crossAxis:mb=!0,fallbackPlacements:Gb,fallbackStrategy:Wb="bestFit",flipAlignment:Mb=!0}=Xa;Xa=Bf(Xa,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const dc=Wi(G);var hc=Gb||(dc!==pa&&Mb?function(Jd){const Wd=vm(Jd);return[Tj(Jd),Wd,Tj(Wd)]}(pa):[vm(pa)]);hc=[pa,...hc];const Ub=yield ql(g,Xa),nc=[];Xa=(null==(p=U.flip)?void 0:p.overflows)||[];if(fb&&nc.push(Ub[dc]),
mb){const {main:Jd,cross:Wd}=sl(G,la,yield null==Ga.isRTL?void 0:Ga.isRTL(Qa.floating));nc.push(Ub[Jd],Ub[Wd])}if(Xa=[...Xa,{placement:G,overflows:nc}],!nc.every(Jd=>0>=Jd)){var Bc,Ec;p=(null!=(Bc=null==(Ec=U.flip)?void 0:Ec.index)?Bc:0)+1;if(Bc=hc[p])return{data:{index:p,overflows:Xa},reset:{placement:Bc}};Bc="bottom";switch(Wb){case "bestFit":var Sc;(Ec=null==(Sc=Xa.map(Jd=>[Jd,Jd.overflows.filter(Wd=>0<Wd).reduce((Wd,ye)=>Wd+ye,0)]).sort((Jd,Wd)=>Jd[1]-Wd[1])[0])?void 0:Sc[0].placement)&&(Bc=Ec);
break;case "initialPlacement":Bc=pa}if(G!==Bc)return{reset:{placement:Bc}}}return{}})}}},Pz=function(b){b=void 0===b?{}:b;let {strategy:g="referenceHidden"}=b,p=Bf(b,["strategy"]);return{name:"hide",fn(G){return $h(this,null,function*(){var {rects:U}=G;switch(g){case "referenceHidden":return U=Qk(yield ql(G,rf(oe({},p),{elementContext:"reference"})),U.reference),{data:{referenceHiddenOffsets:U,referenceHidden:ok(U)}};case "escaped":return U=Qk(yield ql(G,rf(oe({},p),{altBoundary:!0})),U.floating),
{data:{escapedOffsets:U,escaped:ok(U)}};default:return{}}})}}},Qz=function(b){return void 0===b&&(b=0),{name:"offset",options:b,fn(g){return $h(this,null,function*(){const {x:p,y:G}=g,U=yield function(la,pa){return $h(this,null,function*(){const {placement:Ga,platform:Qa,elements:Xa}=la;var fb=yield null==Qa.isRTL?void 0:Qa.isRTL(Xa.floating),mb=Wi(Ga);const Gb=Ga.split("-")[1],Wb="x"===Dk(Ga);mb=["left","top"].includes(mb)?-1:1;fb=fb&&Wb?-1:1;const Mb="function"==typeof pa?pa(la):pa;let {mainAxis:dc,
crossAxis:hc,alignmentAxis:Ub}="number"==typeof Mb?{mainAxis:Mb,crossAxis:0,alignmentAxis:null}:oe({mainAxis:0,crossAxis:0,alignmentAxis:null},Mb);return Gb&&"number"==typeof Ub&&(hc="end"===Gb?-1*Ub:Ub),Wb?{x:hc*fb,y:dc*mb}:{x:dc*mb,y:hc*fb}})}(g,b);return{x:p+U.x,y:G+U.y,data:U}})}}},Rz=function(b){return void 0===b&&(b={}),{name:"shift",options:b,fn(g){return $h(this,null,function*(){const {x:p,y:G,placement:U}=g;var la=b;const {mainAxis:pa=!0,crossAxis:Ga=!1,limiter:Qa={fn:Wb=>{let {x:Mb,y:dc}=
Wb;return{x:Mb,y:dc}}}}=la;var Xa=Bf(la,["mainAxis","crossAxis","limiter"]);la={x:p,y:G};Xa=yield ql(g,Xa);const fb=Dk(Wi(U)),mb="x"===fb?"y":"x";let Gb=la[fb];la=la[mb];pa&&(Gb=Bp(Gb+Xa["y"===fb?"top":"left"],pu(Gb,Gb-Xa["y"===fb?"bottom":"right"])));Ga&&(la=Bp(la+Xa["y"===mb?"top":"left"],pu(la,la-Xa["y"===mb?"bottom":"right"])));la=Qa.fn(rf(oe({},g),{[fb]:Gb,[mb]:la}));return rf(oe({},la),{data:{x:la.x-p,y:la.y-G}})})}}},Sz=function(b){return void 0===b&&(b={}),{options:b,fn(g){const {x:p,y:G,
placement:U,rects:la,middlewareData:pa}=g,{offset:Ga=0,mainAxis:Qa=!0,crossAxis:Xa=!0}=b;var fb={x:p,y:G};g=Dk(U);const mb="x"===g?"y":"x";let Gb=fb[g];fb=fb[mb];var Wb="function"==typeof Ga?Ga(rf(oe({},la),{placement:U})):Ga;Wb="number"==typeof Wb?{mainAxis:Wb,crossAxis:0}:oe({mainAxis:0,crossAxis:0},Wb);if(Qa){var Mb="y"===g?"height":"width",dc=la.reference[g]-la.floating[Mb]+Wb.mainAxis;Mb=la.reference[g]+la.reference[Mb]-Wb.mainAxis;Gb<dc?Gb=dc:Gb>Mb&&(Gb=Mb)}if(Xa){var hc,Ub,nc,Bc;const Ec="y"===
g?"width":"height";dc=["top","left"].includes(Wi(U));Mb=la.reference[mb]-la.floating[Ec]+(dc&&null!=(hc=null==(Ub=pa.offset)?void 0:Ub[mb])?hc:0)+(dc?0:Wb.crossAxis);hc=la.reference[mb]+la.reference[Ec]+(dc?0:null!=(nc=null==(Bc=pa.offset)?void 0:Bc[mb])?nc:0)-(dc?Wb.crossAxis:0);fb<Mb?fb=Mb:fb>hc&&(fb=hc)}return{[g]:Gb,[mb]:fb}}}},oF=function(b){return void 0===b&&(b={}),{name:"size",options:b,fn(g){return $h(this,null,function*(){const {placement:p,rects:G,platform:U,elements:la}=g;var pa=b,{apply:Ga}=
pa;pa=Bf(pa,["apply"]);pa=yield ql(g,pa);var Qa=Wi(p),Xa=p.split("-")[1],fb,mb;"top"===Qa||"bottom"===Qa?(fb=Qa,mb=Xa===((yield null==U.isRTL?void 0:U.isRTL(la.floating))?"start":"end")?"left":"right"):(mb=Qa,fb="end"===Xa?"top":"bottom");Qa=Bp(pa.left,0);Xa=Bp(pa.right,0);const Gb=Bp(pa.top,0),Wb=Bp(pa.bottom,0);mb={availableHeight:G.floating.height-(["left","right"].includes(p)?2*(0!==Gb||0!==Wb?Gb+Wb:Bp(pa.top,pa.bottom)):pa[fb]),availableWidth:G.floating.width-(["top","bottom"].includes(p)?2*
(0!==Qa||0!==Xa?Qa+Xa:Bp(pa.left,pa.right)):pa[mb])};fb=yield U.getDimensions(la.floating);null==Ga||Ga(oe(oe({},g),mb));Ga=yield U.getDimensions(la.floating);return fb.width!==Ga.width||fb.height!==Ga.height?{reset:{rects:!0}}:{}})}}},Tz=Math.min,kt=Math.max,qu=Math.round,pF={getClippingRect:function(b){let {element:g,boundary:p,rootBoundary:G,strategy:U}=b;b=[...("clippingAncestors"===p?gk(g):[].concat(p)),G];b=b.reduce((la,pa)=>{pa=Jg(g,pa,U);return la.top=kt(pa.top,la.top),la.right=Tz(pa.right,
la.right),la.bottom=Tz(pa.bottom,la.bottom),la.left=kt(pa.left,la.left),la},Jg(g,b[0],U));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(b){let {rect:g,offsetParent:p,strategy:G}=b;var U=Kj(p);const la=vl(p);if(p===la)return g;b={scrollLeft:0,scrollTop:0};var pa=0,Ga=0;(U||!U&&"fixed"!==G)&&(("body"!==Bj(p)||im(la))&&(b=bk(p)),Kj(p))&&(U=tj(p,!0),pa=U.x+p.clientLeft,Ga=U.y+p.clientTop);return rf(oe({},g),{x:g.x-b.scrollLeft+
pa,y:g.y-b.scrollTop+Ga})},isElement:Aj,getDimensions:xk,getOffsetParent:qk,getDocumentElement:vl,getElementRects:b=>{let {reference:g,floating:p,strategy:G}=b;b=qk(p);var U=Kj(b);const la=vl(b);var pa;if(pa=U)pa=tj(b),pa=qu(pa.width)!==b.offsetWidth||qu(pa.height)!==b.offsetHeight;pa=tj(g,pa,"fixed"===G);let Ga={scrollLeft:0,scrollTop:0};var Qa=0,Xa=0;if(U||!U&&"fixed"!==G)(("body"!==Bj(b)||im(la))&&(Ga=bk(b)),Kj(b))?(U=tj(b,!0),Qa=U.x+b.clientLeft,Xa=U.y+b.clientTop):la&&(Qa=pk(la));return{reference:{x:pa.left+
Ga.scrollLeft-Qa,y:pa.top+Ga.scrollTop-Xa,width:pa.width,height:pa.height},floating:rf(oe({},xk(p)),{x:0,y:0})}},getClientRects:b=>Array.from(b.getClientRects()),isRTL:b=>"rtl"===Sk(b).direction},qF=(b,g,p)=>Lz(b,g,oe({platform:pF},p)),fo=nf(X(22),1),Uz=X(22),rF=nf(X(31),1),iw="undefined"!==typeof document?Uz.useLayoutEffect:Uz.useEffect,Vz=b=>{const {element:g,padding:p}=b;return{name:"arrow",options:b,fn(G){if(Object.prototype.hasOwnProperty.call(g,"current")){if(null!=g.current)return Mz({element:g.current,
padding:p}).fn(G)}else if(g)return Mz({element:g,padding:p}).fn(G);return{}}}},jw=X(22),sF=(0,jw.forwardRef)((b,g)=>{const {children:p,width:G=10,height:U=5}=b,la=Bf(b,["children","width","height"]);return(0,jw.createElement)(il.svg,ff({},la,{ref:g,width:G,height:U,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),b.asChild?p:(0,jw.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),tF=X(22),[kw,ds]=zj("Popper"),[uF,Wz]=kw("Popper"),lw=(0,$l.forwardRef)((b,g)=>{const {__scopePopper:p,virtualRef:G}=
b;b=Bf(b,["__scopePopper","virtualRef"]);const U=Wz("PopperAnchor",p),la=(0,$l.useRef)(null);g=Cf(g,la);(0,$l.useEffect)(()=>{U.onAnchorChange((null===G||void 0===G?void 0:G.current)||la.current)});return G?null:(0,$l.createElement)(il.div,ff({},b,{ref:g}))}),[vF,wF]=kw("PopperContent"),[xF,yF]=kw("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),mw=(0,$l.forwardRef)((b,g)=>{var p,G,U,la,pa,Ga,Qa,Xa;const {__scopePopper:fb,side:mb="bottom",sideOffset:Gb=0,align:Wb="center",alignOffset:Mb=
0,arrowPadding:dc=0,collisionBoundary:hc=[],collisionPadding:Ub=0,sticky:nc="partial",hideWhenDetached:Bc=!1,avoidCollisions:Ec=!0}=b;b=Bf(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Sc=Wz("PopperContent",fb),[Jd,Wd]=(0,$l.useState)(null);g=Cf(g,ll=>Wd(ll));const [ye,Fe]=(0,$l.useState)(null);var Ye=Wf(ye),jf=null!==(p=null===Ye||void 0===Ye?void 0:Ye.width)&&void 0!==p?p:0;p=null!==(G=
null===Ye||void 0===Ye?void 0:Ye.height)&&void 0!==G?G:0;G=mb+("center"!==Wb?"-"+Wb:"");Ye="number"===typeof Ub?Ub:oe({top:0,right:0,bottom:0,left:0},Ub);const Oe=Array.isArray(hc)?hc:[hc],Be=0<Oe.length;Ye={padding:Ye,boundary:Oe.filter(Cj),altBoundary:Be};const {reference:zd,floating:ad,strategy:ed,x:ld,y:$d,placement:Pe,middlewareData:kf,update:Sf}=Yi({strategy:"fixed",placement:G,whileElementsMounted:Mh,middleware:[Qz({mainAxis:Gb+p,alignmentAxis:Mb}),Ec?Rz(oe({mainAxis:!0,crossAxis:!1,limiter:"partial"===
nc?Sz():void 0},Ye)):void 0,ye?Vz({element:ye,padding:dc}):void 0,Ec?Oz(oe({},Ye)):void 0,AF({arrowWidth:jf,arrowHeight:p}),Bc?Pz({strategy:"referenceHidden"}):void 0].filter(Mg)});Nm(()=>{zd(Sc.anchor)},[zd,Sc.anchor]);const wf=null!==ld&&null!==$d,[Gf,jh]=ni(Pe);jf=null===(U=kf.arrow)||void 0===U?void 0:U.x;U=null===(la=kf.arrow)||void 0===la?void 0:la.y;la=0!==(null===(pa=kf.arrow)||void 0===pa?void 0:pa.centerOffset);const [Ef,lh]=(0,$l.useState)();Nm(()=>{Jd&&lh(window.getComputedStyle(Jd).zIndex)},
[Jd]);const {hasParent:vh,positionUpdateFns:pj}=yF("PopperContent",fb),kl=!vh;(0,$l.useLayoutEffect)(()=>{if(!kl)return pj.add(Sf),()=>{pj.delete(Sf)}},[kl,pj,Sf]);(0,$l.useLayoutEffect)(()=>{kl&&wf&&Array.from(pj).reverse().forEach(ll=>requestAnimationFrame(ll))},[kl,wf,pj]);pa=rf(oe({"data-side":Gf,"data-align":jh},b),{ref:g,style:rf(oe({},b.style),{animation:wf?void 0:"none",opacity:null!==(Ga=kf.hide)&&void 0!==Ga&&Ga.referenceHidden?0:void 0})});return(0,$l.createElement)("div",{ref:ad,"data-radix-popper-content-wrapper":"",
style:{position:ed,left:0,top:0,transform:wf?`translate3d(${Math.round(ld)}px, ${Math.round($d)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Ef,["--radix-popper-transform-origin"]:[null===(Qa=kf.transformOrigin)||void 0===Qa?void 0:Qa.x,null===(Xa=kf.transformOrigin)||void 0===Xa?void 0:Xa.y].join(" ")}},(0,$l.createElement)(vF,{scope:fb,placedSide:Gf,onArrowChange:Fe,arrowX:jf,arrowY:U,shouldHideArrow:la},kl?(0,$l.createElement)(xF,{scope:fb,hasParent:!0,positionUpdateFns:pj},
(0,$l.createElement)(il.div,pa)):(0,$l.createElement)(il.div,pa)))}),zF={top:"bottom",right:"left",bottom:"top",left:"right"},Xz=(0,$l.forwardRef)(function(b,g){var {__scopePopper:p}=b;b=Bf(b,["__scopePopper"]);p=wF("PopperArrow",p);return(0,$l.createElement)("span",{ref:p.onArrowChange,style:{position:"absolute",left:p.arrowX,top:p.arrowY,[zF[p.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[p.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",
bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[p.placedSide],visibility:p.shouldHideArrow?"hidden":void 0}},(0,$l.createElement)(sF,ff({},b,{ref:g,style:rf(oe({},b.style),{display:"block"})})))}),AF=b=>({name:"transformOrigin",options:b,fn(g){var p,G,U,la,pa;const {placement:Ga,rects:Qa,middlewareData:Xa}=g,fb=(g=0!==(null===(p=Xa.arrow)||void 0===p?void 0:p.centerOffset))?0:b.arrowWidth;p=g?0:b.arrowHeight;const [mb,Gb]=ni(Ga),Wb={start:"0%",center:"50%",end:"100%"}[Gb],
Mb=(null!==(G=null===(U=Xa.arrow)||void 0===U?void 0:U.x)&&void 0!==G?G:0)+fb/2;G=(null!==(la=null===(pa=Xa.arrow)||void 0===pa?void 0:pa.y)&&void 0!==la?la:0)+p/2;pa=la="";"bottom"===mb?(la=g?Wb:`${Mb}px`,pa=`${-p}px`):"top"===mb?(la=g?Wb:`${Mb}px`,pa=`${Qa.floating.height+p}px`):"right"===mb?(la=`${-p}px`,pa=g?Wb:`${G}px`):"left"===mb&&(la=`${Qa.floating.width+p}px`,pa=g?Wb:`${G}px`);return{data:{x:la,y:pa}}}}),nw=b=>{const {__scopePopper:g,children:p}=b,[G,U]=(0,$l.useState)(null);return(0,$l.createElement)(uF,
{scope:g,anchor:G,onAnchorChange:U},p)},Yz=X(22),BF=nf(X(31)),CF=(0,Yz.forwardRef)((b,g)=>{var p;const {container:G=null===globalThis||void 0===globalThis?void 0:null===(p=globalThis.document)||void 0===p?void 0:p.body}=b;b=Bf(b,["container"]);return G?BF.default.createPortal((0,Yz.createElement)(il.div,ff({},b,{ref:g})),G):null}),Cp=X(22),DF=X(31),lt=b=>{const {present:g,children:p}=b;b=wg(g);const G="function"===typeof p?p({present:b.isPresent}):Cp.Children.only(p),U=Cf(b.ref,G.ref);return"function"===
typeof p||b.isPresent?(0,Cp.cloneElement)(G,{ref:U}):null};lt.displayName="Presence";var ru=X(22),Zz=X(22),EF=(0,Zz.forwardRef)((b,g)=>(0,Zz.createElement)(il.span,ff({},b,{ref:g,style:oe({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},b.style)}))),[su]=zj("Tooltip",[ds]),tu=ds(),[FF,ow]=su("TooltipProvider"),[GF,mt]=su("Tooltip"),HF=(0,hh.forwardRef)((b,g)=>{var {__scopeTooltip:p}=b;const G=Bf(b,["__scopeTooltip"]),
U=mt("TooltipTrigger",p),la=ow("TooltipTrigger",p);p=tu(p);const pa=(0,hh.useRef)(null);g=Cf(g,pa,U.onTriggerChange);const Ga=(0,hh.useRef)(!1),Qa=(0,hh.useRef)(!1),Xa=(0,hh.useCallback)(()=>Ga.current=!1,[]);(0,hh.useEffect)(()=>()=>document.removeEventListener("pointerup",Xa),[Xa]);return(0,hh.createElement)(lw,ff({asChild:!0},p),(0,hh.createElement)(il.button,ff({"aria-describedby":U.open?U.contentId:void 0,"data-state":U.stateAttribute},G,{ref:g,onPointerMove:If(b.onPointerMove,fb=>{"touch"===
fb.pointerType||Qa.current||la.isPointerInTransitRef.current||(U.onTriggerEnter(),Qa.current=!0)}),onPointerLeave:If(b.onPointerLeave,()=>{U.onTriggerLeave();Qa.current=!1}),onPointerDown:If(b.onPointerDown,()=>{Ga.current=!0;document.addEventListener("pointerup",Xa,{once:!0})}),onFocus:If(b.onFocus,()=>{if(!Ga.current)U.onOpen()}),onBlur:If(b.onBlur,U.onClose),onClick:If(b.onClick,U.onClose)})))}),[IF,JF]=su("TooltipPortal",{forceMount:void 0}),KF=(0,hh.forwardRef)((b,g)=>{var p=JF("TooltipContent",
b.__scopeTooltip);const {forceMount:G=p.forceMount,side:U="top"}=b;p=Bf(b,["forceMount","side"]);b=mt("TooltipContent",b.__scopeTooltip);return(0,hh.createElement)(lt,{present:G||b.open},b.disableHoverableContent?(0,hh.createElement)($z,ff({side:U},p,{ref:g})):(0,hh.createElement)(LF,ff({side:U},p,{ref:g})))}),LF=(0,hh.forwardRef)((b,g)=>{const p=mt("TooltipContent",b.__scopeTooltip),G=ow("TooltipContent",b.__scopeTooltip),U=(0,hh.useRef)(null);g=Cf(g,U);const [la,pa]=(0,hh.useState)(null),{trigger:Ga,
onClose:Qa}=p,Xa=U.current,{onPointerInTransitChange:fb}=G,mb=(0,hh.useCallback)(()=>{pa(null);fb(!1)},[fb]),Gb=(0,hh.useCallback)((Wb,Mb)=>{const dc=aj({x:Wb.clientX,y:Wb.clientY},Wb.currentTarget.getBoundingClientRect()),hc="right"===dc||"bottom"===dc?-5:5;Wb="right"===dc||"left"===dc?{x:Wb.clientX+hc,y:Wb.clientY}:{x:Wb.clientX,y:Wb.clientY+hc};Mb=Mb.getBoundingClientRect();const {top:Ub,right:nc,bottom:Bc,left:Ec}=Mb;Mb=Rb([Wb,{x:Ec,y:Ub},{x:nc,y:Ub},{x:nc,y:Bc},{x:Ec,y:Bc}]);pa(Mb);fb(!0)},[fb]);
(0,hh.useEffect)(()=>()=>mb(),[mb]);(0,hh.useEffect)(()=>{if(Ga&&Xa){const Wb=dc=>Gb(dc,Xa),Mb=dc=>Gb(dc,Ga);Ga.addEventListener("pointerleave",Wb);Xa.addEventListener("pointerleave",Mb);return()=>{Ga.removeEventListener("pointerleave",Wb);Xa.removeEventListener("pointerleave",Mb)}}},[Ga,Xa,Gb,mb]);(0,hh.useEffect)(()=>{if(la){const Wb=Mb=>{var dc=Mb.target;Mb={x:Mb.clientX,y:Mb.clientY};dc=(null===Ga||void 0===Ga?void 0:Ga.contains(dc))||(null===Xa||void 0===Xa?void 0:Xa.contains(dc));const {x:hc,
y:Ub}=Mb;Mb=!1;for(let nc=0,Bc=la.length-1;nc<la.length;Bc=nc++){const Ec=la[nc].x,Sc=la[nc].y,Jd=la[Bc].x,Wd=la[Bc].y;Sc>Ub!==Wd>Ub&&hc<(Jd-Ec)*(Ub-Sc)/(Wd-Sc)+Ec&&(Mb=!Mb)}Mb=!Mb;dc?mb():Mb&&(mb(),Qa())};document.addEventListener("pointermove",Wb);return()=>document.removeEventListener("pointermove",Wb)}},[Ga,Xa,la,Qa,mb]);return(0,hh.createElement)($z,ff({},b,{ref:g}))}),[MF,NF]=su("Tooltip",{isInside:!1}),$z=(0,hh.forwardRef)((b,g)=>{const {__scopeTooltip:p,children:G,"aria-label":U,onEscapeKeyDown:la,
onPointerDownOutside:pa}=b;b=Bf(b,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Ga=mt("TooltipContent",p),Qa=tu(p),{onClose:Xa}=Ga;(0,hh.useEffect)(()=>{document.addEventListener("tooltip.open",Xa);return()=>document.removeEventListener("tooltip.open",Xa)},[Xa]);(0,hh.useEffect)(()=>{if(Ga.trigger){const fb=mb=>{mb=mb.target;null!==mb&&void 0!==mb&&mb.contains(Ga.trigger)&&Xa()};window.addEventListener("scroll",fb,{capture:!0});return()=>window.removeEventListener("scroll",
fb,{capture:!0})}},[Ga.trigger,Xa]);return(0,hh.createElement)(hw,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:la,onPointerDownOutside:pa,onFocusOutside:fb=>fb.preventDefault(),onDismiss:Xa},(0,hh.createElement)(mw,ff({"data-state":Ga.stateAttribute},Qa,b,{ref:g,style:rf(oe({},b.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,hh.createElement)(Iz,null,G),(0,hh.createElement)(MF,{scope:p,isInside:!0},(0,hh.createElement)(EF,{id:Ga.contentId,
role:"tooltip"},U||G))))}),OF=(0,hh.forwardRef)((b,g)=>{const {__scopeTooltip:p}=b;b=Bf(b,["__scopeTooltip"]);const G=tu(p);return NF("TooltipArrow",p).isInside?null:(0,hh.createElement)(Xz,ff({},G,b,{ref:g}))}),PF=b=>{const {__scopeTooltip:g,delayDuration:p=700,skipDelayDuration:G=300,disableHoverableContent:U=!1,children:la}=b,[pa,Ga]=(0,hh.useState)(!0),Qa=(0,hh.useRef)(!1),Xa=(0,hh.useRef)(0);(0,hh.useEffect)(()=>{const fb=Xa.current;return()=>window.clearTimeout(fb)},[]);return(0,hh.createElement)(FF,
{scope:g,isOpenDelayed:pa,delayDuration:p,onOpen:(0,hh.useCallback)(()=>{window.clearTimeout(Xa.current);Ga(!1)},[]),onClose:(0,hh.useCallback)(()=>{window.clearTimeout(Xa.current);Xa.current=window.setTimeout(()=>Ga(!0),G)},[G]),isPointerInTransitRef:Qa,onPointerInTransitChange:(0,hh.useCallback)(fb=>{Qa.current=fb},[]),disableHoverableContent:U},la)},QF=b=>{const {__scopeTooltip:g,children:p,open:G,defaultOpen:U=!1,onOpenChange:la,disableHoverableContent:pa,delayDuration:Ga}=b,Qa=ow("Tooltip",b.__scopeTooltip);
b=tu(g);const [Xa,fb]=(0,hh.useState)(null),mb=yi(),Gb=(0,hh.useRef)(0),Wb=null!==pa&&void 0!==pa?pa:Qa.disableHoverableContent,Mb=null!==Ga&&void 0!==Ga?Ga:Qa.delayDuration,dc=(0,hh.useRef)(!1),[hc=!1,Ub]=Lj({prop:G,defaultProp:U,onChange:Jd=>{if(Jd)Qa.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else Qa.onClose();null===la||void 0===la||la(Jd)}}),nc=(0,hh.useMemo)(()=>hc?dc.current?"delayed-open":"instant-open":"closed",[hc]),Bc=(0,hh.useCallback)(()=>{window.clearTimeout(Gb.current);
dc.current=!1;Ub(!0)},[Ub]),Ec=(0,hh.useCallback)(()=>{window.clearTimeout(Gb.current);Ub(!1)},[Ub]),Sc=(0,hh.useCallback)(()=>{window.clearTimeout(Gb.current);Gb.current=window.setTimeout(()=>{dc.current=!0;Ub(!0)},Mb)},[Mb,Ub]);(0,hh.useEffect)(()=>()=>window.clearTimeout(Gb.current),[]);return(0,hh.createElement)(nw,b,(0,hh.createElement)(GF,{scope:g,contentId:mb,open:hc,stateAttribute:nc,trigger:Xa,onTriggerChange:fb,onTriggerEnter:(0,hh.useCallback)(()=>{Qa.isOpenDelayed?Sc():Bc()},[Qa.isOpenDelayed,
Sc,Bc]),onTriggerLeave:(0,hh.useCallback)(()=>{Wb?Ec():window.clearTimeout(Gb.current)},[Ec,Wb]),onOpen:Bc,onClose:Ec,disableHoverableContent:Wb},p))},RF=HF,SF=b=>{const {__scopeTooltip:g,forceMount:p,children:G,container:U}=b;b=mt("TooltipPortal",g);return(0,hh.createElement)(IF,{scope:g,forceMount:p},(0,hh.createElement)(lt,{present:p||b.open},(0,hh.createElement)(CF,{asChild:!0,container:U},G)))},TF=KF,UF=OF;nb=X(588);nb=X(588);var aA=nf(X(22));nb=X(588);var bA=({active:b,style:g,icon:p,otherIcon:G,
onClick:U})=>{const [la,pa]=aA.default.useState(!1);aA.default.useEffect(()=>{pa(!0);const Ga=setTimeout(()=>{pa(!1)},500);return()=>clearTimeout(Ga)},[b]);return(0,nb.jsx)("button",{"data-active":b,"data-recently-changed":la,"data-html2canvas-ignore":"true",style:g,className:"tl-circle-button",onPointerDown:U,children:(0,nb.jsxs)("div",{className:"tl-circle-button-icons-wrapper","data-icons-count":G?2:1,children:[G&&(0,nb.jsx)(Fh,{name:G}),(0,nb.jsx)(Fh,{name:p})]})})},wo=X(22),Yg=X(22),ip=nf(X(22)),
cA=X(22),VF=(0,cA.createContext)(void 0),WF=X(22),pw=0,iq=X(22),dA={bubbles:!1,cancelable:!0},eA=(0,iq.forwardRef)((b,g)=>{const {loop:p=!1,trapped:G=!1,onMountAutoFocus:U,onUnmountAutoFocus:la}=b;b=Bf(b,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [pa,Ga]=(0,iq.useState)(null),Qa=qf(U),Xa=qf(la),fb=(0,iq.useRef)(null);g=Cf(g,Wb=>Ga(Wb));const mb=(0,iq.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,iq.useEffect)(()=>{if(G){let Wb=function(dc){!mb.paused&&
pa&&(dc=dc.target,pa.contains(dc)?fb.current=dc:Ac(fb.current,{select:!0}))},Mb=function(dc){!mb.paused&&pa&&(pa.contains(dc.relatedTarget)||Ac(fb.current,{select:!0}))};document.addEventListener("focusin",Wb);document.addEventListener("focusout",Mb);return()=>{document.removeEventListener("focusin",Wb);document.removeEventListener("focusout",Mb)}}},[G,pa,mb.paused]);(0,iq.useEffect)(()=>{if(pa){fA.add(mb);const Wb=document.activeElement;if(!pa.contains(Wb)){const Mb=new CustomEvent("focusScope.autoFocusOnMount",
dA);pa.addEventListener("focusScope.autoFocusOnMount",Qa);pa.dispatchEvent(Mb);Mb.defaultPrevented||(Qb(Tc(tb(pa)),{select:!0}),document.activeElement===Wb&&Ac(pa))}return()=>{pa.removeEventListener("focusScope.autoFocusOnMount",Qa);setTimeout(()=>{const Mb=new CustomEvent("focusScope.autoFocusOnUnmount",dA);pa.addEventListener("focusScope.autoFocusOnUnmount",Xa);pa.dispatchEvent(Mb);Mb.defaultPrevented||Ac(null!==Wb&&void 0!==Wb?Wb:document.body,{select:!0});pa.removeEventListener("focusScope.autoFocusOnUnmount",
Xa);fA.remove(mb)},0)}}},[pa,Qa,Xa,mb]);const Gb=(0,iq.useCallback)(Wb=>{if((p||G)&&!mb.paused){var Mb=document.activeElement;if("Tab"===Wb.key&&!Wb.altKey&&!Wb.ctrlKey&&!Wb.metaKey&&Mb){const hc=Wb.currentTarget;var dc=hc;const Ub=tb(dc),nc=Nb(Ub,dc);dc=Nb(Ub.reverse(),dc);const [Bc,Ec]=[nc,dc];Bc&&Ec?Wb.shiftKey||Mb!==Ec?Wb.shiftKey&&Mb===Bc&&(Wb.preventDefault(),p&&Ac(Ec,{select:!0})):(Wb.preventDefault(),p&&Ac(Bc,{select:!0})):Mb===hc&&Wb.preventDefault()}}},[p,G,mb.paused]);return(0,iq.createElement)(il.div,
ff({tabIndex:-1},b,{ref:g,onKeyDown:Gb}))}),fA=function(){let b=[];return{add(g){const p=b[0];g===p||null!==p&&void 0!==p&&p.pause();b=Oc(b,g);b.unshift(g)},remove(g){var p;b=Oc(b,g);null===(p=b[0])||void 0===p||p.resume()}}}(),mm=X(22),XF={bubbles:!1,cancelable:!0},[qw,gA,YF]=Eb("RovingFocusGroup"),[ZF,uu]=zj("RovingFocusGroup",[YF]),[$F,aG]=ZF("RovingFocusGroup"),hA=(0,mm.forwardRef)((b,g)=>(0,mm.createElement)(qw.Provider,{scope:b.__scopeRovingFocusGroup},(0,mm.createElement)(qw.Slot,{scope:b.__scopeRovingFocusGroup},
(0,mm.createElement)(bG,ff({},b,{ref:g}))))),bG=(0,mm.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:p,orientation:G,loop:U=!1,dir:la,currentTabStopId:pa,defaultCurrentTabStopId:Ga,onCurrentTabStopIdChange:Qa,onEntryFocus:Xa}=b,fb=Bf(b,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),mb=(0,mm.useRef)(null);g=Cf(g,mb);const Gb=Tb(la),[Wb=null,Mb]=Lj({prop:pa,defaultProp:Ga,onChange:Qa}),[dc,hc]=(0,mm.useState)(!1),
Ub=qf(Xa),nc=gA(p),Bc=(0,mm.useRef)(!1),[Ec,Sc]=(0,mm.useState)(0);(0,mm.useEffect)(()=>{const Jd=mb.current;if(Jd)return Jd.addEventListener("rovingFocusGroup.onEntryFocus",Ub),()=>Jd.removeEventListener("rovingFocusGroup.onEntryFocus",Ub)},[Ub]);return(0,mm.createElement)($F,{scope:p,orientation:G,dir:Gb,loop:U,currentTabStopId:Wb,onItemFocus:(0,mm.useCallback)(Jd=>Mb(Jd),[Mb]),onItemShiftTab:(0,mm.useCallback)(()=>hc(!0),[]),onFocusableItemAdd:(0,mm.useCallback)(()=>Sc(Jd=>Jd+1),[]),onFocusableItemRemove:(0,mm.useCallback)(()=>
Sc(Jd=>Jd-1),[])},(0,mm.createElement)(il.div,ff({tabIndex:dc||0===Ec?-1:0,"data-orientation":G},fb,{ref:g,style:oe({outline:"none"},b.style),onMouseDown:If(b.onMouseDown,()=>{Bc.current=!0}),onFocus:If(b.onFocus,Jd=>{var Wd=!Bc.current;if(Jd.target===Jd.currentTarget&&Wd&&!dc&&(Wd=new CustomEvent("rovingFocusGroup.onEntryFocus",XF),Jd.currentTarget.dispatchEvent(Wd),!Wd.defaultPrevented)){Jd=nc().filter(Fe=>Fe.focusable);Wd=Jd.find(Fe=>Fe.active);const ye=Jd.find(Fe=>Fe.id===Wb);Jd=[Wd,ye,...Jd].filter(Boolean).map(Fe=>
Fe.ref.current);Rd(Jd)}Bc.current=!1}),onBlur:If(b.onBlur,()=>hc(!1))})))}),iA=(0,mm.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:p,focusable:G=!0,active:U=!1}=b,la=Bf(b,["__scopeRovingFocusGroup","focusable","active"]),pa=yi(),Ga=aG("RovingFocusGroupItem",p),Qa=Ga.currentTabStopId===pa,Xa=gA(p),{onFocusableItemAdd:fb,onFocusableItemRemove:mb}=Ga;(0,mm.useEffect)(()=>{if(G)return fb(),()=>mb()},[G,fb,mb]);return(0,mm.createElement)(qw.ItemSlot,{scope:p,id:pa,focusable:G,active:U},(0,mm.createElement)(il.span,
ff({tabIndex:Qa?0:-1,"data-orientation":Ga.orientation},la,{ref:g,onMouseDown:If(b.onMouseDown,Gb=>{if(G)Ga.onItemFocus(pa);else Gb.preventDefault()}),onFocus:If(b.onFocus,()=>Ga.onItemFocus(pa)),onKeyDown:If(b.onKeyDown,Gb=>{if("Tab"===Gb.key&&Gb.shiftKey)Ga.onItemShiftTab();else if(Gb.target===Gb.currentTarget){var Wb=wd(Gb,Ga.orientation,Ga.dir);if(void 0!==Wb){Gb.preventDefault();let Mb=Xa().filter(dc=>dc.focusable).map(dc=>dc.ref.current);if("last"===Wb)Mb.reverse();else if("prev"===Wb||"next"===
Wb)"prev"===Wb&&Mb.reverse(),Gb=Mb.indexOf(Gb.currentTarget),Mb=Ga.loop?Ed(Mb,Gb+1):Mb.slice(Gb+1);setTimeout(()=>Rd(Mb))}}})})))}),cG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},dG=function(b){return"undefined"===typeof document?null:(Array.isArray(b)?b[0]:b).ownerDocument.body},es=new WeakMap,vu=new WeakMap,wu={},rw=0,sw=function(b,g,p){void 0===g&&(g=dG(b));void 0===p&&(p="data-aria-hidden");var G=Array.isArray(b)?
b:[b];wu[p]||(wu[p]=new WeakMap);var U=wu[p],la=[],pa=new Set,Ga=function(Xa){Xa&&!pa.has(Xa)&&(pa.add(Xa),Ga(Xa.parentNode))};G.forEach(Ga);var Qa=function(Xa){!Xa||0<=G.indexOf(Xa)||Array.prototype.forEach.call(Xa.children,function(fb){if(pa.has(fb))Qa(fb);else{var mb=fb.getAttribute("aria-hidden");mb=null!==mb&&"false"!==mb;var Gb=(es.get(fb)||0)+1,Wb=(U.get(fb)||0)+1;es.set(fb,Gb);U.set(fb,Wb);la.push(fb);1===Gb&&mb&&vu.set(fb,!0);1===Wb&&fb.setAttribute(p,"true");mb||fb.setAttribute("aria-hidden",
"true")}})};Qa(g);pa.clear();rw++;return function(){la.forEach(function(Xa){var fb=es.get(Xa)-1,mb=U.get(Xa)-1;es.set(Xa,fb);U.set(Xa,mb);fb||(vu.has(Xa)||Xa.removeAttribute("aria-hidden"),vu.delete(Xa));mb||Xa.removeAttribute(p)});rw--;rw||(es=new WeakMap,es=new WeakMap,vu=new WeakMap,wu={})}},eG=nf(Qp(),1),{__assign:jq,__rest:jA,__spreadArray:fG}=eG.default,kA=nf(X(22)),Dp=nf(X(22)),gG=X(22),hG=nf(X(22)),lA=function(b){var g=b.sideCar;b=jA(b,["sideCar"]);if(!g)throw Error("Sidecar: please provide `sideCar` property to import the right car");
g=g.read();if(!g)throw Error("Sidecar medium not found");return hG.createElement(g,jq({},b))};lA.isSideCarExport=!0;var mA=function(b){void 0===b&&(b={});var g=Zf(null);g.options=jq({async:!0,ssr:!1},b);return g}(),tw=function(){},xu=Dp.forwardRef(function(b,g){var p=Dp.useRef(null),G=Dp.useState({onScrollCapture:tw,onWheelCapture:tw,onTouchMoveCapture:tw}),U=G[0];G=G[1];var la=b.forwardProps,pa=b.children,Ga=b.className,Qa=b.removeScrollBar,Xa=b.enabled,fb=b.shards,mb=b.sideCar,Gb=b.noIsolation,
Wb=b.inert,Mb=b.allowPinchZoom,dc=b.as;dc=void 0===dc?"div":dc;b=jA(b,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));g=Gd([p,g]);U=jq(jq({},b),U);return Dp.createElement(Dp.Fragment,null,Xa&&Dp.createElement(mb,{sideCar:mA,removeScrollBar:Qa,shards:fb,noIsolation:Gb,inert:Wb,setCallbacks:G,allowPinchZoom:!!Mb,lockRef:p}),la?Dp.cloneElement(Dp.Children.only(pa),jq(jq({},U),{ref:g})):Dp.createElement(dc,jq({},U,{className:Ga,
ref:g}),pa))});xu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xu.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var Cm=nf(X(22)),nA=nf(X(22)),iG=nf(X(22)),jG=function(){var b=0,g=null;return{add:function(p){if(0==b){if(document){var G=document.createElement("style");G.type="text/css";var U="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;U&&G.setAttribute("nonce",U)}else G=null;if(g=G)G=g,G.styleSheet?G.styleSheet.cssText=p:G.appendChild(document.createTextNode(p)),
p=g,(document.head||document.getElementsByTagName("head")[0]).appendChild(p)}b++},remove:function(){b--;!b&&g&&(g.parentNode&&g.parentNode.removeChild(g),g=null)}}},kG=function(){var b=jG();return function(g,p){iG.useEffect(function(){b.add(g);return function(){b.remove()}},[g&&p])}},oA=function(){var b=kG();return function(g){b(g.styles,g.dynamic);return null}},lG={left:0,top:0,right:0,gap:0},mG=oA(),nG=function(b,g,p,G){var U=b.left,la=b.top,pa=b.right;b=b.gap;void 0===p&&(p="margin");return"\n  .".concat("with-scroll-bars-hidden",
" {\n   overflow: hidden ").concat(G,";\n   padding-right: ").concat(b,"px ").concat(G,";\n  }\n  body {\n    overflow: hidden ").concat(G,";\n    overscroll-behavior: contain;\n    ").concat([g&&"position: relative ".concat(G,";"),"margin"===p&&"\n    padding-left: ".concat(U,"px;\n    padding-top: ").concat(la,"px;\n    padding-right: ").concat(pa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(b,"px ").concat(G,";\n    "),"padding"===p&&"padding-right: ".concat(b,"px ").concat(G,
";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(b,"px ").concat(G,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(b,"px ").concat(G,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(G,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(G,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",
": ").concat(b,"px;\n  }\n")},hr=function(b){var g=b.noRelative,p=b.noImportant;b=b.gapMode;var G=void 0===b?"margin":b;b=nA.useMemo(function(){var U=G;void 0===U&&(U="margin");if("undefined"===typeof window)U=lG;else{var la=window.getComputedStyle(document.body),pa=la["padding"===U?"paddingTop":"marginTop"],Ga=la["padding"===U?"paddingRight":"marginRight"];U=[parseInt(la["padding"===U?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(pa||"",10)||0,parseInt(Ga||"",10)||0];U={left:U[0],top:U[1],right:U[2],
gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+U[2]-U[0])}}return U},[G]);return nA.createElement(mG,{styles:nG(b,!g,G,p?"":"!important")})},uw=!1;if("undefined"!==typeof window)try{var yu=Object.defineProperty({},"passive",{get:function(){return uw=!0}});window.addEventListener("test",yu,yu);window.removeEventListener("test",yu,yu)}catch(b){uw=!1}var fs=uw?{passive:!1}:!1,pA=function(b,g){var p=window.getComputedStyle(b);return"hidden"!==p[g]&&!(p.overflowY===p.overflowX&&
"TEXTAREA"!==b.tagName&&"visible"===p[g])},qA=function(b,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(rA(b,g)){var p=sA(b,g);if(p[1]>p[2])return!0}g=g.parentNode}while(g&&g!==document.body);return!1},rA=function(b,g){return"v"===b?pA(g,"overflowY"):pA(g,"overflowX")},sA=function(b,g){return"v"===b?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},zu=function(b){return"changedTouches"in b?[b.changedTouches[0].clientX,b.changedTouches[0].clientY]:
[0,0]},tA=function(b){return b&&"current"in b?b.current:b},oG=function(b){return"\n  .block-interactivity-".concat(b," {pointer-events: none;}\n  .allow-interactivity-").concat(b," {pointer-events: all;}\n")},pG=0,gs=[];mA.useMedium(function(b){var g=Cm.useRef([]),p=Cm.useRef([0,0]),G=Cm.useRef(),U=Cm.useState(pG++)[0],la=Cm.useState(function(){return oA()})[0],pa=Cm.useRef(b);Cm.useEffect(function(){pa.current=b},[b]);Cm.useEffect(function(){if(b.inert){document.body.classList.add("block-interactivity-".concat(U));
var Mb=fG([b.lockRef.current],(b.shards||[]).map(tA),!0).filter(Boolean);Mb.forEach(function(dc){return dc.classList.add("allow-interactivity-".concat(U))});return function(){document.body.classList.remove("block-interactivity-".concat(U));Mb.forEach(function(dc){return dc.classList.remove("allow-interactivity-".concat(U))})}}},[b.inert,b.lockRef.current,b.shards]);var Ga=Cm.useCallback(function(Mb,dc){if("touches"in Mb&&2===Mb.touches.length)return!pa.current.allowPinchZoom;var hc=zu(Mb),Ub=p.current,
nc="deltaX"in Mb?Mb.deltaX:Ub[0]-hc[0];Ub="deltaY"in Mb?Mb.deltaY:Ub[1]-hc[1];var Bc=Mb.target,Ec=Math.abs(nc)>Math.abs(Ub)?"h":"v";if("touches"in Mb&&"h"===Ec&&"range"===Bc.type)return!1;var Sc=qA(Ec,Bc);if(!Sc)return!0;Sc?hc=Ec:(hc="v"===Ec?"h":"v",Sc=qA(Ec,Bc));if(!Sc)return!1;!G.current&&"changedTouches"in Mb&&(nc||Ub)&&(G.current=hc);if(!hc)return!0;hc=G.current||hc;Ub="h"===hc?nc:Ub;nc=window.getComputedStyle(dc).direction;nc="h"===hc&&"rtl"===nc?-1:1;Ec=nc*Ub;Mb=Mb.target;Ub=dc.contains(Mb);
Bc=!1;Ec=0<Ec;var Jd=Sc=0;do{var Wd=sA(hc,Mb),ye=Wd[0];Wd=Wd[1]-Wd[2]-nc*ye;(ye||Wd)&&rA(hc,Mb)&&(Sc+=Wd,Jd+=ye);Mb=Mb.parentNode}while(!Ub&&Mb!==document.body||Ub&&(dc.contains(Mb)||dc===Mb));Ec&&0===Sc?Bc=!0:Ec||0!==Jd||(Bc=!0);return Bc},[]),Qa=Cm.useCallback(function(Mb){if(gs.length&&gs[gs.length-1]===la){var dc="deltaY"in Mb?[Mb.deltaX,Mb.deltaY]:zu(Mb),hc=g.current.filter(function(Ub){var nc;if(nc=Ub.name===Mb.type&&Ub.target===Mb.target)Ub=Ub.delta,nc=Ub[0]===dc[0]&&Ub[1]===dc[1];return nc})[0];
hc&&hc.should?Mb.cancelable&&Mb.preventDefault():hc||(hc=(pa.current.shards||[]).map(tA).filter(Boolean).filter(function(Ub){return Ub.contains(Mb.target)}),(0<hc.length?Ga(Mb,hc[0]):!pa.current.noIsolation)&&Mb.cancelable&&Mb.preventDefault())}},[]),Xa=Cm.useCallback(function(Mb,dc,hc,Ub){var nc={name:Mb,delta:dc,target:hc,should:Ub};g.current.push(nc);setTimeout(function(){g.current=g.current.filter(function(Bc){return Bc!==nc})},1)},[]),fb=Cm.useCallback(function(Mb){p.current=zu(Mb);G.current=
void 0},[]),mb=Cm.useCallback(function(Mb){Xa(Mb.type,[Mb.deltaX,Mb.deltaY],Mb.target,Ga(Mb,b.lockRef.current))},[]),Gb=Cm.useCallback(function(Mb){Xa(Mb.type,zu(Mb),Mb.target,Ga(Mb,b.lockRef.current))},[]);Cm.useEffect(function(){gs.push(la);b.setCallbacks({onScrollCapture:mb,onWheelCapture:mb,onTouchMoveCapture:Gb});document.addEventListener("wheel",Qa,fs);document.addEventListener("touchmove",Qa,fs);document.addEventListener("touchstart",fb,fs);return function(){gs=gs.filter(function(Mb){return Mb!==
la});document.removeEventListener("wheel",Qa,fs);document.removeEventListener("touchmove",Qa,fs);document.removeEventListener("touchstart",fb,fs)}},[]);var Wb=b.removeScrollBar;return Cm.createElement(Cm.Fragment,null,b.inert?Cm.createElement(la,{styles:oG(U)}):null,Wb?Cm.createElement(hr,{gapMode:"margin"}):null)});var Au=kA.forwardRef(function(b,g){return kA.createElement(xu,jq({},b,{ref:g,sideCar:lA}))});Au.classNames=xu.classNames;var vw=["Enter"," "],uA=["ArrowUp","PageDown","End"],qG=["ArrowDown",
"PageUp","Home",...uA];[...vw];[...vw];var [ww,rG,sG]=Eb("Menu"),[ir,Bu]=zj("Menu",[sG,ds,uu]),xw=ds(),vA=uu(),[tG,Cu]=ir("Menu"),[uG,yw]=ir("Menu"),wA=(0,Yg.forwardRef)((b,g)=>{var {__scopeMenu:p}=b;b=Bf(b,["__scopeMenu"]);p=xw(p);return(0,Yg.createElement)(lw,ff({},p,b,{ref:g}))}),[,vG]=ir("MenuPortal",{forceMount:void 0}),[wG,xA]=ir("MenuContent"),yA=(0,Yg.forwardRef)((b,g)=>{var p=vG("MenuContent",b.__scopeMenu);({forceMount:p=p.forceMount}=b);const G=Bf(b,["forceMount"]),U=Cu("MenuContent",b.__scopeMenu),
la=yw("MenuContent",b.__scopeMenu);return(0,Yg.createElement)(ww.Provider,{scope:b.__scopeMenu},(0,Yg.createElement)(lt,{present:p||U.open},(0,Yg.createElement)(ww.Slot,{scope:b.__scopeMenu},la.modal?(0,Yg.createElement)(xG,ff({},G,{ref:g})):(0,Yg.createElement)(yG,ff({},G,{ref:g})))))}),xG=(0,Yg.forwardRef)((b,g)=>{const p=Cu("MenuContent",b.__scopeMenu),G=(0,Yg.useRef)(null);g=Cf(g,G);(0,Yg.useEffect)(()=>{const U=G.current;if(U)return sw(U)},[]);return(0,Yg.createElement)(zA,ff({},b,{ref:g,trapFocus:p.open,
disableOutsidePointerEvents:p.open,disableOutsideScroll:!0,onFocusOutside:If(b.onFocusOutside,U=>U.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>p.onOpenChange(!1)}))}),yG=(0,Yg.forwardRef)((b,g)=>{const p=Cu("MenuContent",b.__scopeMenu);return(0,Yg.createElement)(zA,ff({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>p.onOpenChange(!1)}))}),zA=(0,Yg.forwardRef)((b,g)=>{const {__scopeMenu:p,loop:G=!1,trapFocus:U,onOpenAutoFocus:la,onCloseAutoFocus:pa,
disableOutsidePointerEvents:Ga,onEscapeKeyDown:Qa,onPointerDownOutside:Xa,onFocusOutside:fb,onInteractOutside:mb,onDismiss:Gb,disableOutsideScroll:Wb}=b,Mb=Bf(b,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),dc=Cu("MenuContent",p),hc=yw("MenuContent",p),Ub=xw(p),nc=vA(p),Bc=rG(p),[Ec,Sc]=(0,Yg.useState)(null),Jd=(0,Yg.useRef)(null);g=Cf(g,Jd,dc.onContentChange);
const Wd=(0,Yg.useRef)(0),ye=(0,Yg.useRef)(""),Fe=(0,Yg.useRef)(0),Ye=(0,Yg.useRef)(null),jf=(0,Yg.useRef)("right"),Oe=(0,Yg.useRef)(0),Be=Wb?Au:Yg.Fragment,zd=Wb?{as:hp,allowPinchZoom:!0}:void 0,ad=ld=>{var $d,Pe;ld=ye.current+ld;const kf=Bc().filter(Ef=>!Ef.disabled),Sf=document.activeElement,wf=null===($d=kf.find(Ef=>Ef.ref.current===Sf))||void 0===$d?void 0:$d.textValue;$d=kf.map(Ef=>Ef.textValue);const Gf=Qe($d,ld,wf),jh=null===(Pe=kf.find(Ef=>Ef.textValue===Gf))||void 0===Pe?void 0:Pe.ref.current;
(function vh(lh){ye.current=lh;window.clearTimeout(Wd.current);""!==lh&&(Wd.current=window.setTimeout(()=>vh(""),1E3))})(ld);jh&&setTimeout(()=>jh.focus())};(0,Yg.useEffect)(()=>()=>window.clearTimeout(Wd.current),[]);vb();const ed=(0,Yg.useCallback)(ld=>{var $d,Pe,kf;if(kf=jf.current===(null===($d=Ye.current)||void 0===$d?void 0:$d.side)){if($d=null===(Pe=Ye.current)||void 0===Pe?void 0:Pe.area){const {x:Sf,y:wf}={x:ld.clientX,y:ld.clientY};ld=!1;for(let Gf=0,jh=$d.length-1;Gf<$d.length;jh=Gf++){Pe=
$d[Gf].x;kf=$d[Gf].y;const Ef=$d[jh].x,lh=$d[jh].y;kf>wf!==lh>wf&&Sf<(Ef-Pe)*(wf-kf)/(lh-kf)+Pe&&(ld=!ld)}$d=ld}else $d=!1;kf=$d}return kf},[]);return(0,Yg.createElement)(wG,{scope:p,searchRef:ye,onItemEnter:(0,Yg.useCallback)(ld=>{ed(ld)&&ld.preventDefault()},[ed]),onItemLeave:(0,Yg.useCallback)(ld=>{var $d;ed(ld)||(null===($d=Jd.current)||void 0===$d||$d.focus(),Sc(null))},[ed]),onTriggerLeave:(0,Yg.useCallback)(ld=>{ed(ld)&&ld.preventDefault()},[ed]),pointerGraceTimerRef:Fe,onPointerGraceIntentChange:(0,Yg.useCallback)(ld=>
{Ye.current=ld},[])},(0,Yg.createElement)(Be,zd,(0,Yg.createElement)(eA,{asChild:!0,trapped:U,onMountAutoFocus:If(la,ld=>{var $d;ld.preventDefault();null===($d=Jd.current)||void 0===$d||$d.focus()}),onUnmountAutoFocus:pa},(0,Yg.createElement)(hw,{asChild:!0,disableOutsidePointerEvents:Ga,onEscapeKeyDown:Qa,onPointerDownOutside:Xa,onFocusOutside:fb,onInteractOutside:mb,onDismiss:Gb},(0,Yg.createElement)(hA,ff({asChild:!0},nc,{dir:hc.dir,orientation:"vertical",loop:G,currentTabStopId:Ec,onCurrentTabStopIdChange:Sc,
onEntryFocus:ld=>{hc.isUsingKeyboardRef.current||ld.preventDefault()}}),(0,Yg.createElement)(mw,ff({role:"menu","aria-orientation":"vertical","data-state":dc.open?"open":"closed","data-radix-menu-content":"",dir:hc.dir},Ub,Mb,{ref:g,style:oe({outline:"none"},Mb.style),onKeyDown:If(Mb.onKeyDown,ld=>{var $d=ld.target.closest("[data-radix-menu-content]")===ld.currentTarget;const Pe=ld.ctrlKey||ld.altKey||ld.metaKey,kf=1===ld.key.length;$d&&("Tab"===ld.key&&ld.preventDefault(),!Pe&&kf&&ad(ld.key));ld.target===
Jd.current&&qG.includes(ld.key)&&(ld.preventDefault(),$d=Bc().filter(Sf=>!Sf.disabled).map(Sf=>Sf.ref.current),uA.includes(ld.key)&&$d.reverse(),ve($d))}),onBlur:If(b.onBlur,ld=>{ld.currentTarget.contains(ld.target)||(window.clearTimeout(Wd.current),ye.current="")}),onPointerMove:If(b.onPointerMove,Se(ld=>{const $d=Oe.current!==ld.clientX;ld.currentTarget.contains(ld.target)&&$d&&(jf.current=ld.clientX>Oe.current?"right":"left",Oe.current=ld.clientX)}))})))))))}),AA=(0,Yg.forwardRef)((b,g)=>{const {disabled:p=
!1,onSelect:G}=b,U=Bf(b,["disabled","onSelect"]),la=(0,Yg.useRef)(null),pa=yw("MenuItem",b.__scopeMenu),Ga=xA("MenuItem",b.__scopeMenu);g=Cf(g,la);const Qa=(0,Yg.useRef)(!1);return(0,Yg.createElement)(zG,ff({},U,{ref:g,disabled:p,onClick:If(b.onClick,()=>{const Xa=la.current;if(!p&&Xa){const fb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});Xa.addEventListener("menu.itemSelect",mb=>null===G||void 0===G?void 0:G(mb),{once:!0});rl(Xa,fb);if(fb.defaultPrevented)Qa.current=!1;else pa.onClose()}}),
onPointerDown:Xa=>{var fb;null===(fb=b.onPointerDown)||void 0===fb||fb.call(b,Xa);Qa.current=!0},onPointerUp:If(b.onPointerUp,Xa=>{var fb;Qa.current||null===(fb=Xa.currentTarget)||void 0===fb||fb.click()}),onKeyDown:If(b.onKeyDown,Xa=>{const fb=""!==Ga.searchRef.current;p||fb&&" "===Xa.key||!vw.includes(Xa.key)||(Xa.currentTarget.click(),Xa.preventDefault())})}))}),zG=(0,Yg.forwardRef)((b,g)=>{const {__scopeMenu:p,disabled:G=!1,textValue:U}=b,la=Bf(b,["__scopeMenu","disabled","textValue"]),pa=xA("MenuItem",
p),Ga=vA(p),Qa=(0,Yg.useRef)(null);g=Cf(g,Qa);const [Xa,fb]=(0,Yg.useState)(!1),[mb,Gb]=(0,Yg.useState)("");(0,Yg.useEffect)(()=>{const Wb=Qa.current;if(Wb){var Mb;Gb((null!==(Mb=Wb.textContent)&&void 0!==Mb?Mb:"").trim())}},[la.children]);return(0,Yg.createElement)(ww.ItemSlot,{scope:p,disabled:G,textValue:null!==U&&void 0!==U?U:mb},(0,Yg.createElement)(iA,ff({asChild:!0},Ga,{focusable:!G}),(0,Yg.createElement)(il.div,ff({role:"menuitem","data-highlighted":Xa?"":void 0,"aria-disabled":G||void 0,
"data-disabled":G?"":void 0},la,{ref:g,onPointerMove:If(b.onPointerMove,Se(Wb=>{if(G)pa.onItemLeave(Wb);else pa.onItemEnter(Wb),Wb.defaultPrevented||Wb.currentTarget.focus()})),onPointerLeave:If(b.onPointerLeave,Se(Wb=>pa.onItemLeave(Wb))),onFocus:If(b.onFocus,()=>fb(!0)),onBlur:If(b.onBlur,()=>fb(!1))}))))});ir("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});ir("MenuItemIndicator",{checked:!1});var AG=(0,Yg.forwardRef)((b,g)=>{b=Bf(b,["__scopeMenu"]);return(0,Yg.createElement)(il.div,ff({role:"separator",
"aria-orientation":"horizontal"},b,{ref:g}))});ir("MenuSub");var BA=b=>{const {__scopeMenu:g,open:p=!1,children:G,dir:U,onOpenChange:la,modal:pa=!0}=b;b=xw(g);const [Ga,Qa]=(0,Yg.useState)(null),Xa=(0,Yg.useRef)(!1),fb=qf(la),mb=Tb(U);(0,Yg.useEffect)(()=>{const Gb=()=>{Xa.current=!0;document.addEventListener("pointerdown",Wb,{capture:!0,once:!0});document.addEventListener("pointermove",Wb,{capture:!0,once:!0})},Wb=()=>Xa.current=!1;document.addEventListener("keydown",Gb,{capture:!0});return()=>{document.removeEventListener("keydown",
Gb,{capture:!0});document.removeEventListener("pointerdown",Wb,{capture:!0});document.removeEventListener("pointermove",Wb,{capture:!0})}},[]);return(0,Yg.createElement)(nw,b,(0,Yg.createElement)(tG,{scope:g,open:p,onOpenChange:fb,content:Ga,onContentChange:Qa},(0,Yg.createElement)(uG,{scope:g,onClose:(0,Yg.useCallback)(()=>fb(!1),[fb]),isUsingKeyboardRef:Xa,dir:mb,modal:pa},G)))},[BG]=zj("DropdownMenu",[Bu]),Du=Bu(),[CG,CA]=BG("DropdownMenu"),DG=(0,wo.forwardRef)((b,g)=>{const {__scopeDropdownMenu:p,
disabled:G=!1}=b,U=Bf(b,["__scopeDropdownMenu","disabled"]),la=CA("DropdownMenuTrigger",p),pa=Du(p);return(0,wo.createElement)(wA,ff({asChild:!0},pa),(0,wo.createElement)(il.button,ff({type:"button",id:la.triggerId,"aria-haspopup":"menu","aria-expanded":la.open,"aria-controls":la.open?la.contentId:void 0,"data-state":la.open?"open":"closed","data-disabled":G?"":void 0,disabled:G},U,{ref:Fk(g,la.triggerRef),onPointerDown:If(b.onPointerDown,Ga=>{G||0!==Ga.button||!1!==Ga.ctrlKey||(la.onOpenToggle(),
la.open||Ga.preventDefault())}),onKeyDown:If(b.onKeyDown,Ga=>{if(!G){if(["Enter"," "].includes(Ga.key))la.onOpenToggle();if("ArrowDown"===Ga.key)la.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Ga.key)&&Ga.preventDefault()}})})))}),EG=(0,wo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:p}=b;const G=Bf(b,["__scopeDropdownMenu"]),U=CA("DropdownMenuContent",p);p=Du(p);const la=(0,wo.useRef)(!1);return(0,wo.createElement)(yA,ff({id:U.contentId,"aria-labelledby":U.triggerId},p,G,{ref:g,onCloseAutoFocus:If(b.onCloseAutoFocus,
pa=>{var Ga;la.current||null===(Ga=U.triggerRef.current)||void 0===Ga||Ga.focus();la.current=!1;pa.preventDefault()}),onInteractOutside:If(b.onInteractOutside,pa=>{pa=pa.detail.originalEvent;const Ga=0===pa.button&&!0===pa.ctrlKey;pa=2===pa.button||Ga;if(!U.modal||pa)la.current=!0}),style:rf(oe({},b.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),nt=(0,wo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:p}=b;b=Bf(b,["__scopeDropdownMenu"]);p=Du(p);
return(0,wo.createElement)(AA,ff({},p,b,{ref:g}))}),FG=b=>{const {__scopeDropdownMenu:g,children:p,dir:G,open:U,defaultOpen:la,onOpenChange:pa,modal:Ga=!0}=b;b=Du(g);const Qa=(0,wo.useRef)(null),[Xa=!1,fb]=Lj({prop:U,defaultProp:la,onChange:pa});return(0,wo.createElement)(CG,{scope:g,triggerId:yi(),triggerRef:Qa,contentId:yi(),open:Xa,onOpenChange:fb,onOpenToggle:(0,wo.useCallback)(()=>fb(mb=>!mb),[fb]),modal:Ga},(0,wo.createElement)(BA,ff({},b,{open:Xa,onOpenChange:fb,dir:G,modal:Ga}),p))};nb=X(588);
var GG=df(function(){const b=af(),g=p=>{p.preventDefault()};return(0,nb.jsxs)(FG,{children:[(0,nb.jsx)(DG,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*b.viewport.camera.zoom).toFixed(0)+"%"}),(0,nb.jsxs)(EG,{onCloseAutoFocus:p=>p.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,nb.jsxs)(nt,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToFit,children:["Zoom to drawing",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",
{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:"⇧"})," ",(0,nb.jsx)("code",{children:"1"})]})})]}),(0,nb.jsxs)(nt,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToSelection,disabled:0===b.selectedShapesArray.length,children:["Zoom to fit selection",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"⇧"})," ",(0,nb.jsx)("code",{children:"1"})]})})]}),
(0,nb.jsxs)(nt,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomIn,children:["Zoom in",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"+"})]})})]}),(0,nb.jsxs)(nt,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomOut,children:["Zoom out",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",
{children:Ro})," ",(0,nb.jsx)("code",{children:"-"})]})})]}),(0,nb.jsxs)(nt,{className:"tl-menu-item",onSelect:g,onClick:b.api.resetZoom,children:["Reset zoom",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:"⇧"})," ",(0,nb.jsx)("code",{children:"0"})]})})]})]})]})}),DA=X(22),EA=["horizontal","vertical"],jr=(0,DA.forwardRef)((b,g)=>{const {decorative:p,orientation:G="horizontal"}=b;b=Bf(b,["decorative",
"orientation"]);const U=EA.includes(G)?G:"horizontal";return(0,DA.createElement)(il.div,ff({"data-orientation":U},p?{role:"none"}:{"aria-orientation":"vertical"===U?U:void 0,role:"separator"},b,{ref:g}))});jr.propTypes={orientation(b,g,p){b=b[g];g=String(b);return b&&!EA.includes(b)?Error(`Invalid prop \`orientation\` of value \`${g}\` supplied to \`${p}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};nb=X(588);var HG=df(function(){const b=af(),g=ou.useCallback(()=>{b.api.undo()},[b]),p=ou.useCallback(()=>{b.api.redo()},[b]),G=ou.useCallback(()=>{b.api.zoomIn()},[b]),U=ou.useCallback(()=>{b.api.zoomOut()},[b]);return(0,nb.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",children:[!b.readOnly&&(0,nb.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,nb.jsx)(ka,{tooltip:"Undo",onClick:g,children:(0,nb.jsx)(Fh,{name:"arrow-back-up"})}),
(0,nb.jsx)(ka,{tooltip:"Redo",onClick:p,children:(0,nb.jsx)(Fh,{name:"arrow-forward-up"})})]}),(0,nb.jsxs)("div",{className:`tl-toolbar tl-zoom-bar ${b.readOnly?"":"ml-4"}`,children:[(0,nb.jsx)(ka,{tooltip:"Zoom in",onClick:G,id:"tl-zoom-in",children:(0,nb.jsx)(Fh,{name:"plus"})}),(0,nb.jsx)(ka,{tooltip:"Zoom out",onClick:U,id:"tl-zoom-out",children:(0,nb.jsx)(Fh,{name:"minus"})}),(0,nb.jsx)(jr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,nb.jsx)(GG,{})]})]})}),kr=nf(X(22)),zw=nf(X(31));
nb=X(588);var Eu=b=>`[${b.map(g=>{var p;return null!=(p=null==g?void 0:g.toFixed(2))?p:"-"}).join(", ")}]`;df(function(){const b=af(),g=kr.default.useRef(),[,p]=kr.default.useState(0);kr.default.useEffect(()=>{g.current=document.createElement("div");g.current.style.display="contents";document.body.append(g.current);p(G=>G+1);return()=>{var G;null==(G=g.current)?void 0:G.remove()}},[]);kr.default.useEffect(()=>{requestAnimationFrame(()=>{var G,U;null==(U=null==(G=g.current)?void 0:G.querySelector(`[data-item-index="${b.history.pointer}"]`))?
void 0:U.scrollIntoView()})},[b.history.pointer]);return g.current?zw.default.createPortal((0,nb.jsx)("div",{className:"fixed z-[1000] left-4 max-w-[400px] top-4 overflow-scroll bg-gray-200 flex gap-2 p-2",children:b.history.stack.map((G,U)=>(0,nb.jsx)("div",{"data-item-index":U,style:{background:b.history.pointer===U?"pink":"grey"},onClick:()=>b.history.setPointer(U),className:"flex items-center rounded-lg px-2 h-[32px] whitespace-nowrap",children:G.pages[0].nonce},U))}),g.current):null});var IG=
df(()=>{var b;const {viewport:{bounds:g,camera:{point:p,zoom:G}},inputs:U}=vi(),la=kr.default.useRef(),pa=kr.default.useRef();kr.default.useEffect(()=>{var Qa=document.getElementById("tl-dev-tools-canvas-anchor");la.current=Qa;Qa=document.getElementById("tl-statusbar-anchor");pa.current=Qa},[]);var Ga=[["Z",null!=(b=null==G?void 0:G.toFixed(2))?b:"null"],["MP",Eu(U.currentPoint)],["MS",Eu(U.currentScreenPoint)],["VP",Eu(p)],["VBR",Eu([g.maxX,g.maxY])]].map(Qa=>Qa.join("")).join("|");b=la.current?
zw.default.createPortal((0,nb.jsx)("svg",{className:"tl-renderer-dev-tools tl-grid",children:(0,nb.jsx)("circle",{cx:p[0]*G,cy:p[1]*G,r:"4",fill:"red"})}),la.current):null;Ga=pa.current?zw.default.createPortal((0,nb.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:Ga}),pa.current):null;return(0,nb.jsxs)(nb.Fragment,{children:[b,Ga]})}),JG=nf(X(22)),KG=nf(X(22));nb=X(588);var jp=df(b=>{var {id:g,icon:p,tooltip:G}=b;b=Bf(b,["id","icon","tooltip"]);var U;const la=af(),pa=KG.useCallback(Qa=>
{(Qa=Qa.currentTarget.dataset.tool)&&la.selectTool(Qa)},[la]),Ga=(null==(U=[...la.Tools,Wr,Xr])?void 0:U.find(Qa=>Qa.id===g)).shortcut;U=Ga?(0,nb.jsxs)(nb.Fragment,{children:[G,(0,nb.jsx)("span",{className:"ml-2 keyboard-shortcut",children:Ga.map((Qa,Xa)=>(0,nb.jsx)("code",{children:Qa.toUpperCase()},Xa)).reduce((Qa,Xa)=>[Qa," | ",Xa])})]}):G;return(0,nb.jsx)(ka,rf(oe({},b),{tooltipSide:"left",tooltip:U,"data-tool":g,"data-selected":g===la.selectedTool.id,onClick:pa,children:"string"===typeof p?(0,nb.jsx)(Fh,
{name:p}):p}))}),FA=nf(X(22)),Uj=X(22),[GA]=zj("Popover",[ds]),Fu=ds(),[LG,ot]=GA("Popover"),HA=(0,Uj.forwardRef)((b,g)=>{var {__scopePopover:p}=b;const G=Bf(b,["__scopePopover"]),U=ot("PopoverTrigger",p);p=Fu(p);g=Cf(g,U.triggerRef);b=(0,Uj.createElement)(il.button,ff({type:"button","aria-haspopup":"dialog","aria-expanded":U.open,"aria-controls":U.contentId,"data-state":U.open?"open":"closed"},G,{ref:g,onClick:If(b.onClick,U.onOpenToggle)}));return U.hasCustomAnchor?b:(0,Uj.createElement)(lw,ff({asChild:!0},
p),b)}),[,MG]=GA("PopoverPortal",{forceMount:void 0}),IA=(0,Uj.forwardRef)((b,g)=>{var p=MG("PopoverContent",b.__scopePopover);({forceMount:p=p.forceMount}=b);const G=Bf(b,["forceMount"]);b=ot("PopoverContent",b.__scopePopover);return(0,Uj.createElement)(lt,{present:p||b.open},b.modal?(0,Uj.createElement)(NG,ff({},G,{ref:g})):(0,Uj.createElement)(OG,ff({},G,{ref:g})))}),NG=(0,Uj.forwardRef)((b,g)=>{const p=ot("PopoverContent",b.__scopePopover),G=(0,Uj.useRef)(null);g=Cf(g,G);const U=(0,Uj.useRef)(!1);
(0,Uj.useEffect)(()=>{const la=G.current;if(la)return sw(la)},[]);return(0,Uj.createElement)(Au,{as:hp,allowPinchZoom:!0},(0,Uj.createElement)(JA,ff({},b,{ref:g,trapFocus:p.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:If(b.onCloseAutoFocus,la=>{var pa;la.preventDefault();U.current||null===(pa=p.triggerRef.current)||void 0===pa||pa.focus()}),onPointerDownOutside:If(b.onPointerDownOutside,la=>{la=la.detail.originalEvent;const pa=0===la.button&&!0===la.ctrlKey;U.current=2===la.button||pa},{checkForDefaultPrevented:!1}),
onFocusOutside:If(b.onFocusOutside,la=>la.preventDefault(),{checkForDefaultPrevented:!1})})))}),OG=(0,Uj.forwardRef)((b,g)=>{const p=ot("PopoverContent",b.__scopePopover),G=(0,Uj.useRef)(!1);return(0,Uj.createElement)(JA,ff({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:U=>{var la;null===(la=b.onCloseAutoFocus)||void 0===la||la.call(b,U);if(!U.defaultPrevented){var pa;G.current||null===(pa=p.triggerRef.current)||void 0===pa||pa.focus();U.preventDefault()}G.current=!1},onInteractOutside:U=>
{var la,pa;null===(la=b.onInteractOutside)||void 0===la||la.call(b,U);U.defaultPrevented||(G.current=!0);la=U.target;(null===(pa=p.triggerRef.current)||void 0===pa?0:pa.contains(la))&&U.preventDefault()}}))}),JA=(0,Uj.forwardRef)((b,g)=>{const {__scopePopover:p,trapFocus:G,onOpenAutoFocus:U,onCloseAutoFocus:la,disableOutsidePointerEvents:pa,onEscapeKeyDown:Ga,onPointerDownOutside:Qa,onFocusOutside:Xa,onInteractOutside:fb}=b;b=Bf(b,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));
const mb=ot("PopoverContent",p),Gb=Fu(p);vb();return(0,Uj.createElement)(eA,{asChild:!0,loop:!0,trapped:G,onMountAutoFocus:U,onUnmountAutoFocus:la},(0,Uj.createElement)(hw,{asChild:!0,disableOutsidePointerEvents:pa,onInteractOutside:fb,onEscapeKeyDown:Ga,onPointerDownOutside:Qa,onFocusOutside:Xa,onDismiss:()=>mb.onOpenChange(!1)},(0,Uj.createElement)(mw,ff({"data-state":mb.open?"open":"closed",role:"dialog",id:mb.contentId},Gb,b,{ref:g,style:rf(oe({},b.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),
KA=(0,Uj.forwardRef)((b,g)=>{var {__scopePopover:p}=b;b=Bf(b,["__scopePopover"]);p=Fu(p);return(0,Uj.createElement)(Xz,ff({},p,b,{ref:g}))}),LA=b=>{const {__scopePopover:g,children:p,open:G,defaultOpen:U,onOpenChange:la,modal:pa=!1}=b;b=Fu(g);const Ga=(0,Uj.useRef)(null),[Qa,Xa]=(0,Uj.useState)(!1),[fb=!1,mb]=Lj({prop:G,defaultProp:U,onChange:la});return(0,Uj.createElement)(nw,b,(0,Uj.createElement)(LG,{scope:g,contentId:yi(),triggerRef:Ga,open:fb,onOpenChange:mb,onOpenToggle:(0,Uj.useCallback)(()=>
mb(Gb=>!Gb),[mb]),hasCustomAnchor:Qa,onCustomAnchorAdd:(0,Uj.useCallback)(()=>Xa(!0),[]),onCustomAnchorRemove:(0,Uj.useCallback)(()=>Xa(!1),[]),modal:pa},p))};nb=X(588);var PG=df(function(){const b=[{id:"box",icon:"square",tooltip:"Rectangle"},{id:"ellipse",icon:"circle",tooltip:"Circle"},{id:"polygon",icon:"triangle",tooltip:"Triangle"}],g=af(),[p,G]=FA.useState(()=>{var U;return(null!=(U=b.find(la=>la.id===g.selectedTool.id))?U:b[0]).id});FA.useEffect(()=>{G(U=>{var la,pa;return null!=(pa=null==
(la=b.find(Ga=>Ga.id===g.selectedTool.id))?void 0:la.id)?pa:U})},[g.selectedTool.id]);return(0,nb.jsxs)(LA,{children:[(0,nb.jsx)(HA,{asChild:!0,children:(0,nb.jsxs)("div",{className:"tl-geometry-tools-pane-anchor",children:[(0,nb.jsx)(jp,oe({},b.find(U=>U.id===p))),(0,nb.jsx)(Fh,{"data-selected":b.some(U=>U.id===g.selectedTool.id),className:"tl-popover-indicator",name:"chevron-down-left"})]})}),(0,nb.jsxs)(IA,{className:"tl-popover-content",side:"left",sideOffset:15,children:[(0,nb.jsx)("div",{className:"tl-toolbar tl-geometry-toolbar",
children:b.map(U=>(0,nb.jsx)(jp,oe({},U),U.id))}),(0,nb.jsx)(KA,{className:"tl-popover-arrow"})]})]})}),ui=X(22),MA=X(22),NA=["PageUp","PageDown"],OA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],PA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[Aw,QG,RG]=Eb("Slider"),[QA]=zj("Slider",[RG]),[SG,Gu]=QA("Slider"),TG=(0,ui.forwardRef)((b,
g)=>{function p(Oe){const Be=ph(Fe,Oe);la(Oe,Be)}function G(Oe){la(Oe,Jd.current)}function U(){Fe[Jd.current]!==jf.current[Jd.current]&&hc(Fe)}function la(Oe,Be,{commit:zd}={commit:!1}){const ad=(String(Xa).split(".")[1]||"").length;Oe=Cg(Math.round((Oe-Ga)/Xa)*Xa+Ga,ad);const ed=sg(Oe,[Ga,Qa]);Ye((ld=[])=>{const $d=dj(ld,ed,Be);var Pe=Gb*Xa;if(0<Pe){const kf=Ug($d);Pe=Math.min(...kf)>=Pe}else Pe=!0;return Pe?(Jd.current=$d.indexOf(ed),(Pe=String($d)!==String(ld))&&zd&&hc($d),Pe?$d:ld):ld})}const {name:pa,
min:Ga=0,max:Qa=100,step:Xa=1,orientation:fb="horizontal",disabled:mb=!1,minStepsBetweenThumbs:Gb=0,defaultValue:Wb=[Ga],value:Mb,onValueChange:dc=()=>{},onValueCommit:hc=()=>{},inverted:Ub=!1}=b,nc=Bf(b,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[Bc,Ec]=(0,ui.useState)(null);g=Cf(g,Oe=>Ec(Oe));const Sc=(0,ui.useRef)(new Set),Jd=(0,ui.useRef)(0);var Wd="horizontal"===fb;const ye=Bc?!!Bc.closest("form"):!0;Wd=Wd?
UG:VG;const [Fe=[],Ye]=Lj({prop:Mb,defaultProp:Wb,onChange:Oe=>{var Be;null===(Be=[...Sc.current][Jd.current])||void 0===Be||Be.focus();dc(Oe)}}),jf=(0,ui.useRef)(Fe);return(0,ui.createElement)(SG,{scope:b.__scopeSlider,disabled:mb,min:Ga,max:Qa,valueIndexToChangeRef:Jd,thumbs:Sc.current,values:Fe,orientation:fb},(0,ui.createElement)(Aw.Provider,{scope:b.__scopeSlider},(0,ui.createElement)(Aw.Slot,{scope:b.__scopeSlider},(0,ui.createElement)(Wd,ff({"aria-disabled":mb,"data-disabled":mb?"":void 0},
nc,{ref:g,onPointerDown:If(nc.onPointerDown,()=>{mb||(jf.current=Fe)}),min:Ga,max:Qa,inverted:Ub,onSlideStart:mb?void 0:p,onSlideMove:mb?void 0:G,onSlideEnd:mb?void 0:U,onHomeKeyDown:()=>!mb&&la(Ga,0,{commit:!0}),onEndKeyDown:()=>!mb&&la(Qa,Fe.length-1,{commit:!0}),onStepKeyDown:({event:Oe,direction:Be})=>{if(!mb){Oe=NA.includes(Oe.key)||Oe.shiftKey&&OA.includes(Oe.key);const zd=Jd.current;la(Fe[zd]+Xa*(Oe?10:1)*Be,zd,{commit:!0})}}})))),ye&&Fe.map((Oe,Be)=>(0,ui.createElement)($G,{key:Be,name:pa?
pa+(1<Fe.length?"[]":""):void 0,value:Oe})))}),[RA,SA]=QA("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),UG=(0,ui.forwardRef)((b,g)=>{function p(nc){const Bc=Mb.current||Gb.getBoundingClientRect(),Ec=dh([0,Bc.width],Ub?[G,U]:[U,G]);Mb.current=Bc;return Ec(nc-Bc.left)}const {min:G,max:U,dir:la,inverted:pa,onSlideStart:Ga,onSlideMove:Qa,onSlideEnd:Xa,onStepKeyDown:fb}=b,mb=Bf(b,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Gb,Wb]=(0,ui.useState)(null);
g=Cf(g,nc=>Wb(nc));const Mb=(0,ui.useRef)(),dc=Tb(la),hc="ltr"===dc,Ub=hc&&!pa||!hc&&pa;return(0,ui.createElement)(RA,{scope:b.__scopeSlider,startEdge:Ub?"left":"right",endEdge:Ub?"right":"left",direction:Ub?1:-1,size:"width"},(0,ui.createElement)(TA,ff({dir:dc,"data-orientation":"horizontal"},mb,{ref:g,style:rf(oe({},mb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:nc=>{nc=p(nc.clientX);null===Ga||void 0===Ga||Ga(nc)},onSlideMove:nc=>{nc=p(nc.clientX);null===Qa||void 0===
Qa||Qa(nc)},onSlideEnd:()=>{Mb.current=void 0;null===Xa||void 0===Xa||Xa()},onStepKeyDown:nc=>{const Bc=PA[Ub?"from-left":"from-right"].includes(nc.key);null===fb||void 0===fb||fb({event:nc,direction:Bc?-1:1})}})))}),VG=(0,ui.forwardRef)((b,g)=>{function p(Mb){const dc=Gb.current||mb.current.getBoundingClientRect(),hc=dh([0,dc.height],Wb?[U,G]:[G,U]);Gb.current=dc;return hc(Mb-dc.top)}const {min:G,max:U,inverted:la,onSlideStart:pa,onSlideMove:Ga,onSlideEnd:Qa,onStepKeyDown:Xa}=b,fb=Bf(b,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
mb=(0,ui.useRef)(null);g=Cf(g,mb);const Gb=(0,ui.useRef)(),Wb=!la;return(0,ui.createElement)(RA,{scope:b.__scopeSlider,startEdge:Wb?"bottom":"top",endEdge:Wb?"top":"bottom",size:"height",direction:Wb?1:-1},(0,ui.createElement)(TA,ff({"data-orientation":"vertical"},fb,{ref:g,style:rf(oe({},fb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Mb=>{Mb=p(Mb.clientY);null===pa||void 0===pa||pa(Mb)},onSlideMove:Mb=>{Mb=p(Mb.clientY);null===Ga||void 0===Ga||Ga(Mb)},onSlideEnd:()=>
{Gb.current=void 0;null===Qa||void 0===Qa||Qa()},onStepKeyDown:Mb=>{const dc=PA[Wb?"from-bottom":"from-top"].includes(Mb.key);null===Xa||void 0===Xa||Xa({event:Mb,direction:dc?-1:1})}})))}),TA=(0,ui.forwardRef)((b,g)=>{const {__scopeSlider:p,onSlideStart:G,onSlideMove:U,onSlideEnd:la,onHomeKeyDown:pa,onEndKeyDown:Ga,onStepKeyDown:Qa}=b,Xa=Bf(b,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),fb=Gu("Slider",p);return(0,ui.createElement)(il.span,
ff({},Xa,{ref:g,onKeyDown:If(b.onKeyDown,mb=>{"Home"===mb.key?(pa(mb),mb.preventDefault()):"End"===mb.key?(Ga(mb),mb.preventDefault()):NA.concat(OA).includes(mb.key)&&(Qa(mb),mb.preventDefault())}),onPointerDown:If(b.onPointerDown,mb=>{const Gb=mb.target;Gb.setPointerCapture(mb.pointerId);mb.preventDefault();fb.thumbs.has(Gb)?Gb.focus():G(mb)}),onPointerMove:If(b.onPointerMove,mb=>{mb.target.hasPointerCapture(mb.pointerId)&&U(mb)}),onPointerUp:If(b.onPointerUp,mb=>{const Gb=mb.target;Gb.hasPointerCapture(mb.pointerId)&&
(Gb.releasePointerCapture(mb.pointerId),la(mb))})}))}),WG=(0,ui.forwardRef)((b,g)=>{var {__scopeSlider:p}=b;b=Bf(b,["__scopeSlider"]);p=Gu("SliderTrack",p);return(0,ui.createElement)(il.span,ff({"data-disabled":p.disabled?"":void 0,"data-orientation":p.orientation},b,{ref:g}))}),XG=(0,ui.forwardRef)((b,g)=>{var {__scopeSlider:p}=b;const G=Bf(b,["__scopeSlider"]),U=Gu("SliderRange",p);p=SA("SliderRange",p);var la=(0,ui.useRef)(null);g=Cf(g,la);var pa=U.values.length;la=U.values.map(Ga=>Tf(Ga,U.min,
U.max));pa=1<pa?Math.min(...la):0;la=100-Math.max(...la);return(0,ui.createElement)(il.span,ff({"data-orientation":U.orientation,"data-disabled":U.disabled?"":void 0},G,{ref:g,style:rf(oe({},b.style),{[p.startEdge]:pa+"%",[p.endEdge]:la+"%"})}))}),YG=(0,ui.forwardRef)((b,g)=>{const p=QG(b.__scopeSlider),[G,U]=(0,ui.useState)(null);g=Cf(g,pa=>U(pa));const la=(0,ui.useMemo)(()=>G?p().findIndex(pa=>pa.ref.current===G):-1,[p,G]);return(0,ui.createElement)(ZG,ff({},b,{ref:g,index:la}))}),ZG=(0,ui.forwardRef)((b,
g)=>{const {__scopeSlider:p,index:G}=b,U=Bf(b,["__scopeSlider","index"]),la=Gu("SliderThumb",p),pa=SA("SliderThumb",p),[Ga,Qa]=(0,ui.useState)(null);g=Cf(g,Wb=>Qa(Wb));var Xa=Wf(Ga);const fb=la.values[G],mb=void 0===fb?0:Tf(fb,la.min,la.max),Gb=mg(G,la.values.length);Xa=(Xa=null===Xa||void 0===Xa?void 0:Xa[pa.size])?Sg(Xa,mb,pa.direction):0;(0,ui.useEffect)(()=>{if(Ga)return la.thumbs.add(Ga),()=>{la.thumbs.delete(Ga)}},[Ga,la.thumbs]);return(0,ui.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",
position:"absolute",[pa.startEdge]:`calc(${mb}% + ${Xa}px)`}},(0,ui.createElement)(Aw.ItemSlot,{scope:b.__scopeSlider},(0,ui.createElement)(il.span,ff({role:"slider","aria-label":b["aria-label"]||Gb,"aria-valuemin":la.min,"aria-valuenow":fb,"aria-valuemax":la.max,"aria-orientation":la.orientation,"data-orientation":la.orientation,"data-disabled":la.disabled?"":void 0,tabIndex:la.disabled?void 0:0},U,{ref:g,style:void 0===fb?{display:"none"}:b.style,onFocus:If(b.onFocus,()=>{la.valueIndexToChangeRef.current=
G})}))))}),$G=b=>{const {value:g}=b;b=Bf(b,["value"]);const p=(0,ui.useRef)(null),G=Vf(g);(0,ui.useEffect)(()=>{const U=p.current,la=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(G!==g&&la){const pa=new Event("input",{bubbles:!0});la.call(U,g);U.dispatchEvent(pa)}},[G,g]);return(0,ui.createElement)("input",ff({style:{display:"none"}},b,{ref:p,defaultValue:g}))},aH=TG,bH=WG,cH=XG,dH=YG,Hu=nf(X(22));nb=X(588);var UA=df(b=>{var {side:g,align:p,alignOffset:G,label:U,
arrow:la,children:pa,border:Ga}=b;b=Bf(b,"side align alignOffset label arrow children border".split(" "));const Qa=Hu.useRef(null),[Xa,fb]=Hu.useState(!1),{viewport:{bounds:mb,camera:{point:Gb,zoom:Wb}}}=af(),[Mb,dc]=Hu.useState(0);Hu.useEffect(()=>{if(Qa.current&&Xa){var hc=Qa.current.getBoundingClientRect();vf.boundsContain(mb,{minX:hc.x,minY:hc.y,maxX:hc.right,maxY:hc.bottom,width:hc.width,height:hc.height})||dc(Ub=>Ub+1)}},[Gb[0],Gb[1],Wb,Xa]);return(0,nb.jsxs)(LA,{onOpenChange:hc=>fb(hc),children:[(0,nb.jsx)(HA,
rf(oe({},b),{"data-border":Ga,className:"tl-button tl-popover-trigger-button",children:U})),(0,nb.jsxs)(IA,{ref:Qa,className:"tl-popover-content",align:p,alignOffset:G,side:g,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[pa,la&&(0,nb.jsx)(KA,{className:"tl-popover-arrow"})]},"popover-content-"+Mb)]})}),eH=nf(X(22));nb=X(588);var fH=nf(X(22)),yf=X(22),VA=X(31),kp=nf(X(22)),Nn=X(22),Bw=X(22),gH=X(31),En="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((b,
g)=>{const p=(0,Bw.forwardRef)((G,U)=>{var {asChild:la}=G;G=Bf(G,["asChild"]);la=la?hp:g;(0,Bw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Bw.createElement)(la,ff({},G,{ref:U}))});p.displayName=`Primitive.${g}`;return rf(oe({},b),{[g]:p})},{}),WA,hH=(0,Nn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),iH=(0,Nn.forwardRef)((b,g)=>{var p;const {disableOutsidePointerEvents:G=!1,onEscapeKeyDown:U,onPointerDownOutside:la,onFocusOutside:pa,
onInteractOutside:Ga,onDismiss:Qa}=b,Xa=Bf(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),fb=(0,Nn.useContext)(hH),[mb,Gb]=(0,Nn.useState)(null),Wb=null!==(p=null===mb||void 0===mb?void 0:mb.ownerDocument)&&void 0!==p?p:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Mb]=(0,Nn.useState)({});g=Cf(g,Bc=>Gb(Bc));p=Array.from(fb.layers);var [dc]=[...fb.layersWithOutsidePointerEventsDisabled].slice(-1);dc=
p.indexOf(dc);const hc=mb?p.indexOf(mb):-1;p=0<fb.layersWithOutsidePointerEventsDisabled.size;const Ub=hc>=dc;dc=Qf(Bc=>{const Ec=Bc.target,Sc=[...fb.branches].some(Jd=>Jd.contains(Ec));Ub&&!Sc&&(null===la||void 0===la||la(Bc),null===Ga||void 0===Ga||Ga(Bc),Bc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Wb);const nc=bj(Bc=>{const Ec=Bc.target;[...fb.branches].some(Sc=>Sc.contains(Ec))||(null===pa||void 0===pa||pa(Bc),null===Ga||void 0===Ga||Ga(Bc),Bc.defaultPrevented||null===Qa||void 0===Qa||
Qa())},Wb);mk(Bc=>{hc===fb.layers.size-1&&(null===U||void 0===U||U(Bc),!Bc.defaultPrevented&&Qa&&(Bc.preventDefault(),Qa()))},Wb);(0,Nn.useEffect)(()=>{if(mb)return G&&(0===fb.layersWithOutsidePointerEventsDisabled.size&&(WA=Wb.body.style.pointerEvents,Wb.body.style.pointerEvents="none"),fb.layersWithOutsidePointerEventsDisabled.add(mb)),fb.layers.add(mb),wh(),()=>{G&&1===fb.layersWithOutsidePointerEventsDisabled.size&&(Wb.body.style.pointerEvents=WA)}},[mb,Wb,G,fb]);(0,Nn.useEffect)(()=>()=>{mb&&
(fb.layers.delete(mb),fb.layersWithOutsidePointerEventsDisabled.delete(mb),wh())},[mb,fb]);(0,Nn.useEffect)(()=>{const Bc=()=>Mb({});document.addEventListener("dismissableLayer.update",Bc);return()=>document.removeEventListener("dismissableLayer.update",Bc)},[]);return(0,Nn.createElement)(En.div,ff({},Xa,{ref:g,style:oe({pointerEvents:p?Ub?"auto":"none":void 0},b.style),onFocusCapture:If(b.onFocusCapture,nc.onFocusCapture),onBlurCapture:If(b.onBlurCapture,nc.onBlurCapture),onPointerDownCapture:If(b.onPointerDownCapture,
dc.onPointerDownCapture)}))}),kq=X(22),XA={bubbles:!1,cancelable:!0},jH=(0,kq.forwardRef)((b,g)=>{const {loop:p=!1,trapped:G=!1,onMountAutoFocus:U,onUnmountAutoFocus:la}=b;b=Bf(b,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [pa,Ga]=(0,kq.useState)(null),Qa=qf(U),Xa=qf(la),fb=(0,kq.useRef)(null);g=Cf(g,Wb=>Ga(Wb));const mb=(0,kq.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,kq.useEffect)(()=>{if(G){let Wb=function(dc){!mb.paused&&pa&&(dc=dc.target,
pa.contains(dc)?fb.current=dc:Zi(fb.current,{select:!0}))},Mb=function(dc){!mb.paused&&pa&&(pa.contains(dc.relatedTarget)||Zi(fb.current,{select:!0}))};document.addEventListener("focusin",Wb);document.addEventListener("focusout",Mb);return()=>{document.removeEventListener("focusin",Wb);document.removeEventListener("focusout",Mb)}}},[G,pa,mb.paused]);(0,kq.useEffect)(()=>{if(pa){YA.add(mb);const Wb=document.activeElement;if(!pa.contains(Wb)){const Mb=new CustomEvent("focusScope.autoFocusOnMount",XA);
pa.addEventListener("focusScope.autoFocusOnMount",Qa);pa.dispatchEvent(Mb);Mb.defaultPrevented||(dk(Rm(Ai(pa)),{select:!0}),document.activeElement===Wb&&Zi(pa))}return()=>{pa.removeEventListener("focusScope.autoFocusOnMount",Qa);setTimeout(()=>{const Mb=new CustomEvent("focusScope.autoFocusOnUnmount",XA);pa.addEventListener("focusScope.autoFocusOnUnmount",Xa);pa.dispatchEvent(Mb);Mb.defaultPrevented||Zi(null!==Wb&&void 0!==Wb?Wb:document.body,{select:!0});pa.removeEventListener("focusScope.autoFocusOnUnmount",
Xa);YA.remove(mb)},0)}}},[pa,Qa,Xa,mb]);const Gb=(0,kq.useCallback)(Wb=>{if((p||G)&&!mb.paused){var Mb=document.activeElement;if("Tab"===Wb.key&&!Wb.altKey&&!Wb.ctrlKey&&!Wb.metaKey&&Mb){const hc=Wb.currentTarget;var dc=hc;const Ub=Ai(dc),nc=uk(Ub,dc);dc=uk(Ub.reverse(),dc);const [Bc,Ec]=[nc,dc];Bc&&Ec?Wb.shiftKey||Mb!==Ec?Wb.shiftKey&&Mb===Bc&&(Wb.preventDefault(),p&&Zi(Ec,{select:!0})):(Wb.preventDefault(),p&&Zi(Bc,{select:!0})):Mb===hc&&Wb.preventDefault()}}},[p,G,mb.paused]);return(0,kq.createElement)(En.div,
ff({tabIndex:-1},b,{ref:g,onKeyDown:Gb}))}),YA=function(){let b=[];return{add(g){const p=b[0];g===p||null!==p&&void 0!==p&&p.pause();b=nm(b,g);b.unshift(g)},remove(g){var p;b=nm(b,g);null===(p=b[0])||void 0===p||p.resume()}}}(),mn=X(22),[Cw,ZA]=zj("Popper"),[kH,$A]=Cw("Popper"),lH=(0,mn.forwardRef)((b,g)=>{const {__scopePopper:p,virtualRef:G}=b;b=Bf(b,["__scopePopper","virtualRef"]);const U=$A("PopperAnchor",p),la=(0,mn.useRef)(null);g=Cf(g,la);(0,mn.useEffect)(()=>{U.onAnchorChange((null===G||void 0===
G?void 0:G.current)||la.current)});return G?null:(0,mn.createElement)(En.div,ff({},b,{ref:g}))}),[mH]=Cw("PopperContent"),[nH,oH]=Cw("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),pH=(0,mn.forwardRef)((b,g)=>{var p,G,U,la,pa,Ga,Qa,Xa;const {__scopePopper:fb,side:mb="bottom",sideOffset:Gb=0,align:Wb="center",alignOffset:Mb=0,arrowPadding:dc=0,collisionBoundary:hc=[],collisionPadding:Ub=0,sticky:nc="partial",hideWhenDetached:Bc=!1,avoidCollisions:Ec=!0,onPlaced:Sc}=b,Jd=Bf(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),
Wd=$A("PopperContent",fb),[ye,Fe]=(0,mn.useState)(null);g=Cf(g,op=>Fe(op));const [Ye,jf]=(0,mn.useState)(null);var Oe=Wf(Ye),Be=null!==(p=null===Oe||void 0===Oe?void 0:Oe.width)&&void 0!==p?p:0;p=null!==(G=null===Oe||void 0===Oe?void 0:Oe.height)&&void 0!==G?G:0;G=mb+("center"!==Wb?"-"+Wb:"");Oe="number"===typeof Ub?Ub:oe({top:0,right:0,bottom:0,left:0},Ub);const zd=Array.isArray(hc)?hc:[hc],ad=0<zd.length;Oe={padding:Oe,boundary:zd.filter(cn),altBoundary:ad};const {reference:ed,floating:ld,strategy:$d,
x:Pe,y:kf,placement:Sf,middlewareData:wf,update:Gf}=Yi({strategy:"fixed",placement:G,whileElementsMounted:Mh,middleware:[qH(),Qz({mainAxis:Gb+p,alignmentAxis:Mb}),Ec?Rz(oe({mainAxis:!0,crossAxis:!1,limiter:"partial"===nc?Sz():void 0},Oe)):void 0,Ye?Vz({element:Ye,padding:dc}):void 0,Ec?Oz(oe({},Oe)):void 0,oF(rf(oe({},Oe),{apply:({elements:op,availableWidth:uK,availableHeight:vK})=>{op.floating.style.setProperty("--radix-popper-available-width",`${uK}px`);op.floating.style.setProperty("--radix-popper-available-height",
`${vK}px`)}})),rH({arrowWidth:Be,arrowHeight:p}),Bc?Pz({strategy:"referenceHidden"}):void 0].filter(tg)});Nm(()=>{ed(Wd.anchor)},[ed,Wd.anchor]);const jh=null!==Pe&&null!==kf,[Ef,lh]=bn(Sf),vh=qf(Sc);Nm(()=>{jh&&(null===vh||void 0===vh||vh())},[jh,vh]);Be=null===(U=wf.arrow)||void 0===U?void 0:U.x;U=null===(la=wf.arrow)||void 0===la?void 0:la.y;la=0!==(null===(pa=wf.arrow)||void 0===pa?void 0:pa.centerOffset);const [pj,kl]=(0,mn.useState)();Nm(()=>{ye&&kl(window.getComputedStyle(ye).zIndex)},[ye]);
const {hasParent:ll,positionUpdateFns:np}=oH("PopperContent",fb),Gp=!ll;(0,mn.useLayoutEffect)(()=>{if(!Gp)return np.add(Gf),()=>{np.delete(Gf)}},[Gp,np,Gf]);Nm(()=>{Gp&&jh&&Array.from(np).reverse().forEach(op=>requestAnimationFrame(op))},[Gp,jh,np]);pa=rf(oe({"data-side":Ef,"data-align":lh},Jd),{ref:g,style:rf(oe({},Jd.style),{animation:jh?void 0:"none",opacity:null!==(Ga=wf.hide)&&void 0!==Ga&&Ga.referenceHidden?0:void 0})});return(0,mn.createElement)("div",{ref:ld,"data-radix-popper-content-wrapper":"",
style:{position:$d,left:0,top:0,transform:jh?`translate3d(${Math.round(Pe)}px, ${Math.round(kf)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:pj,["--radix-popper-transform-origin"]:[null===(Qa=wf.transformOrigin)||void 0===Qa?void 0:Qa.x,null===(Xa=wf.transformOrigin)||void 0===Xa?void 0:Xa.y].join(" ")},dir:b.dir},(0,mn.createElement)(mH,{scope:fb,placedSide:Ef,onArrowChange:jf,arrowX:Be,arrowY:U,shouldHideArrow:la},Gp?(0,mn.createElement)(nH,{scope:fb,hasParent:!0,positionUpdateFns:np},
(0,mn.createElement)(En.div,pa)):(0,mn.createElement)(En.div,pa)))}),qH=()=>({name:"anchorCssProperties",fn(b){const {rects:g,elements:p}=b,{width:G,height:U}=g.reference;p.floating.style.setProperty("--radix-popper-anchor-width",`${G}px`);p.floating.style.setProperty("--radix-popper-anchor-height",`${U}px`);return{}}}),rH=b=>({name:"transformOrigin",options:b,fn(g){var p,G,U,la,pa;const {placement:Ga,rects:Qa,middlewareData:Xa}=g,fb=(g=0!==(null===(p=Xa.arrow)||void 0===p?void 0:p.centerOffset))?
0:b.arrowWidth;p=g?0:b.arrowHeight;const [mb,Gb]=bn(Ga),Wb={start:"0%",center:"50%",end:"100%"}[Gb],Mb=(null!==(G=null===(U=Xa.arrow)||void 0===U?void 0:U.x)&&void 0!==G?G:0)+fb/2;G=(null!==(la=null===(pa=Xa.arrow)||void 0===pa?void 0:pa.y)&&void 0!==la?la:0)+p/2;pa=la="";"bottom"===mb?(la=g?Wb:`${Mb}px`,pa=`${-p}px`):"top"===mb?(la=g?Wb:`${Mb}px`,pa=`${Qa.floating.height+p}px`):"right"===mb?(la=`${-p}px`,pa=g?Wb:`${G}px`):"left"===mb&&(la=`${Qa.floating.width+p}px`,pa=g?Wb:`${G}px`);return{data:{x:la,
y:pa}}}}),sH=b=>{const {__scopePopper:g,children:p}=b,[G,U]=(0,mn.useState)(null);return(0,mn.createElement)(kH,{scope:g,anchor:G,onAnchorChange:U},p)},aB=X(22),tH=nf(X(31)),uH=(0,aB.forwardRef)((b,g)=>{var p;const {container:G=null===globalThis||void 0===globalThis?void 0:null===(p=globalThis.document)||void 0===p?void 0:p.body}=b;b=Bf(b,["container"]);return G?tH.default.createPortal((0,aB.createElement)(En.div,ff({},b,{ref:g})),G):null}),bB=X(22),vH=(0,bB.forwardRef)((b,g)=>(0,bB.createElement)(En.span,
ff({},b,{ref:g,style:oe({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},b.style)}))),wH=[" ","Enter","ArrowUp","ArrowDown"],xH=[" ","Enter"],[Iu,Ju,yH]=function(b){var g=b+"CollectionProvider";const [p,G]=zj(g),[U,la]=p(g,{collectionRef:{current:null},itemMap:new Map}),pa=fb=>{const {scope:mb,children:Gb}=fb;fb=kp.default.useRef(null);const Wb=kp.default.useRef(new Map).current;return kp.default.createElement(U,
{scope:mb,itemMap:Wb,collectionRef:fb},Gb)};Object.assign(pa,{displayName:g});const Ga=b+"CollectionSlot";g=kp.default.forwardRef((fb,mb)=>{const {scope:Gb,children:Wb}=fb;fb=la(Ga,Gb);mb=Cf(mb,fb.collectionRef);return kp.default.createElement(hp,{ref:mb},Wb)});Object.assign(g,{displayName:Ga});const Qa=b+"CollectionItemSlot",Xa=kp.default.forwardRef((fb,mb)=>{const {scope:Gb,children:Wb}=fb,Mb=Bf(fb,["scope","children"]),dc=kp.default.useRef(null);fb=Cf(mb,dc);const hc=la(Qa,Gb);kp.default.useEffect(()=>
{hc.itemMap.set(dc,oe({ref:dc},Mb));return()=>void hc.itemMap.delete(dc)});return kp.default.createElement(hp,{["data-radix-collection-item"]:"",ref:fb},Wb)});Object.assign(Xa,{displayName:Qa});return[{Provider:pa,Slot:g,ItemSlot:Xa},function(fb){const mb=la(b+"CollectionConsumer",fb);return kp.default.useCallback(()=>{const Gb=mb.collectionRef.current;if(!Gb)return[];const Wb=Array.from(Gb.querySelectorAll("[data-radix-collection-item]"));return Array.from(mb.itemMap.values()).sort((Mb,dc)=>Wb.indexOf(Mb.ref.current)-
Wb.indexOf(dc.ref.current))},[mb.collectionRef,mb.itemMap])},G]}("Select"),[hs]=zj("Select",[yH,ZA]),Dw=ZA(),[zH,lr]=hs("Select"),[AH,BH]=hs("Select"),CH=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,disabled:G=!1}=b;b=Bf(b,["__scopeSelect","disabled"]);const U=Dw(p),la=lr("SelectTrigger",p),pa=la.disabled||G;g=Cf(g,la.onTriggerChange);const Ga=Ju(p),[Qa,Xa,fb]=bm(mb=>{const Gb=Ga().filter(Mb=>!Mb.disabled),Wb=Gb.find(Mb=>Mb.value===la.value);mb=Zk(Gb,mb,Wb);if(void 0!==mb)la.onValueChange(mb.value)});
return(0,yf.createElement)(lH,ff({asChild:!0},U),(0,yf.createElement)(En.button,ff({type:"button",role:"combobox","aria-controls":la.contentId,"aria-expanded":la.open,"aria-required":la.required,"aria-autocomplete":"none",dir:la.dir,"data-state":la.open?"open":"closed",disabled:pa,"data-disabled":pa?"":void 0,"data-placeholder":void 0===la.value?"":void 0},b,{ref:g,onClick:If(b.onClick,mb=>{mb.currentTarget.focus()}),onPointerDown:If(b.onPointerDown,mb=>{const Gb=mb.target;Gb.hasPointerCapture(mb.pointerId)&&
Gb.releasePointerCapture(mb.pointerId);0===mb.button&&!1===mb.ctrlKey&&(pa||(la.onOpenChange(!0),fb()),la.triggerPointerDownPosRef.current={x:Math.round(mb.pageX),y:Math.round(mb.pageY)},mb.preventDefault())}),onKeyDown:If(b.onKeyDown,mb=>{const Gb=""!==Qa.current;mb.ctrlKey||mb.altKey||mb.metaKey||1!==mb.key.length||Xa(mb.key);Gb&&" "===mb.key||!wH.includes(mb.key)||(pa||(la.onOpenChange(!0),fb()),mb.preventDefault())})})))}),DH=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,children:G,placeholder:U}=
b;b=Bf(b,["__scopeSelect","className","style","children","placeholder"]);const la=lr("SelectValue",p),{onValueNodeHasChildrenChange:pa}=la,Ga=void 0!==G;g=Cf(g,la.onValueNodeChange);Nm(()=>{pa(Ga)},[pa,Ga]);return(0,yf.createElement)(En.span,ff({},b,{ref:g,style:{pointerEvents:"none"}}),void 0===la.value&&void 0!==U?U:G)}),EH=(0,yf.forwardRef)((b,g)=>{const {children:p}=b;b=Bf(b,["__scopeSelect","children"]);return(0,yf.createElement)(En.span,ff({"aria-hidden":!0},b,{ref:g}),p||"▼")}),FH=(0,yf.forwardRef)((b,
g)=>{const p=lr("SelectContent",b.__scopeSelect),[G,U]=(0,yf.useState)();Nm(()=>{U(new DocumentFragment)},[]);return p.open?(0,yf.createElement)(GH,ff({},b,{ref:g})):G?(0,VA.createPortal)((0,yf.createElement)(cB,{scope:b.__scopeSelect},(0,yf.createElement)(Iu.Slot,{scope:b.__scopeSelect},(0,yf.createElement)("div",null,b.children))),G):null}),[cB,mr]=hs("SelectContent"),GH=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,position:G="item-aligned",onCloseAutoFocus:U,onEscapeKeyDown:la,onPointerDownOutside:pa,
side:Ga,sideOffset:Qa,align:Xa,alignOffset:fb,arrowPadding:mb,collisionBoundary:Gb,collisionPadding:Wb,sticky:Mb,hideWhenDetached:dc,avoidCollisions:hc}=b;b=Bf(b,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Ub=lr("SelectContent",p),[nc,Bc]=(0,yf.useState)(null),[Ec,Sc]=(0,yf.useState)(null);g=Cf(g,Ef=>Bc(Ef));const [Jd,Wd]=(0,yf.useState)(null),
[ye,Fe]=(0,yf.useState)(null),Ye=Ju(p),[jf,Oe]=(0,yf.useState)(!1),Be=(0,yf.useRef)(!1);(0,yf.useEffect)(()=>{if(nc)return sw(nc)},[nc]);vb();const zd=(0,yf.useCallback)(Ef=>{const [lh,...vh]=Ye().map(ll=>ll.ref.current),[pj]=vh.slice(-1),kl=document.activeElement;for(const ll of Ef){if(ll===kl)break;null===ll||void 0===ll||ll.scrollIntoView({block:"nearest"});ll===lh&&Ec&&(Ec.scrollTop=0);ll===pj&&Ec&&(Ec.scrollTop=Ec.scrollHeight);null===ll||void 0===ll||ll.focus();if(document.activeElement!==kl)break}},
[Ye,Ec]),ad=(0,yf.useCallback)(()=>zd([Jd,nc]),[zd,Jd,nc]);(0,yf.useEffect)(()=>{jf&&ad()},[jf,ad]);const {onOpenChange:ed,triggerPointerDownPosRef:ld}=Ub;(0,yf.useEffect)(()=>{if(nc){var Ef=0,lh=0;const vh=kl=>{var ll,np,Gp,op;Ef=Math.abs(Math.round(kl.pageX)-(null!==(ll=null===(np=ld.current)||void 0===np?void 0:np.x)&&void 0!==ll?ll:0));lh=Math.abs(Math.round(kl.pageY)-(null!==(Gp=null===(op=ld.current)||void 0===op?void 0:op.y)&&void 0!==Gp?Gp:0))},pj=kl=>{10>=Ef&&10>=lh?kl.preventDefault():nc.contains(kl.target)||
ed(!1);document.removeEventListener("pointermove",vh);ld.current=null};null!==ld.current&&(document.addEventListener("pointermove",vh),document.addEventListener("pointerup",pj,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",vh);document.removeEventListener("pointerup",pj,{capture:!0})}}},[nc,ed,ld]);(0,yf.useEffect)(()=>{const Ef=()=>ed(!1);window.addEventListener("blur",Ef);window.addEventListener("resize",Ef);return()=>{window.removeEventListener("blur",Ef);window.removeEventListener("resize",
Ef)}},[ed]);const [$d,Pe]=bm(Ef=>{const lh=Ye().filter(kl=>!kl.disabled),vh=lh.find(kl=>kl.ref.current===document.activeElement),pj=Zk(lh,Ef,vh);pj&&setTimeout(()=>pj.ref.current.focus())}),kf=(0,yf.useCallback)((Ef,lh,vh)=>{vh=!Be.current&&!vh;if(void 0!==Ub.value&&Ub.value===lh||vh)Wd(Ef),vh&&(Be.current=!0)},[Ub.value]),Sf=(0,yf.useCallback)(()=>null===nc||void 0===nc?void 0:nc.focus(),[nc]),wf=(0,yf.useCallback)((Ef,lh,vh)=>{vh=!Be.current&&!vh;(void 0!==Ub.value&&Ub.value===lh||vh)&&Fe(Ef)},
[Ub.value]),Gf="popper"===G?dB:HH,jh=Gf===dB?{side:Ga,sideOffset:Qa,align:Xa,alignOffset:fb,arrowPadding:mb,collisionBoundary:Gb,collisionPadding:Wb,sticky:Mb,hideWhenDetached:dc,avoidCollisions:hc}:{};return(0,yf.createElement)(cB,{scope:p,content:nc,viewport:Ec,onViewportChange:Sc,itemRefCallback:kf,selectedItem:Jd,onItemLeave:Sf,itemTextRefCallback:wf,focusSelectedItem:ad,selectedItemText:ye,position:G,isPositioned:jf,searchRef:$d},(0,yf.createElement)(Au,{as:hp,allowPinchZoom:!0},(0,yf.createElement)(jH,
{asChild:!0,trapped:Ub.open,onMountAutoFocus:Ef=>{Ef.preventDefault()},onUnmountAutoFocus:If(U,Ef=>{var lh;null===(lh=Ub.trigger)||void 0===lh||lh.focus({preventScroll:!0});Ef.preventDefault()})},(0,yf.createElement)(iH,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:la,onPointerDownOutside:pa,onFocusOutside:Ef=>Ef.preventDefault(),onDismiss:()=>Ub.onOpenChange(!1)},(0,yf.createElement)(Gf,ff({role:"listbox",id:Ub.contentId,"data-state":Ub.open?"open":"closed",dir:Ub.dir,onContextMenu:Ef=>
Ef.preventDefault()},b,jh,{onPlaced:()=>Oe(!0),ref:g,style:oe({display:"flex",flexDirection:"column",outline:"none"},b.style),onKeyDown:If(b.onKeyDown,Ef=>{var lh=Ef.ctrlKey||Ef.altKey||Ef.metaKey;"Tab"===Ef.key&&Ef.preventDefault();lh||1!==Ef.key.length||Pe(Ef.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Ef.key)){let vh=Ye().filter(pj=>!pj.disabled).map(pj=>pj.ref.current);["ArrowUp","End"].includes(Ef.key)&&(vh=vh.slice().reverse());["ArrowUp","ArrowDown"].includes(Ef.key)&&(lh=vh.indexOf(Ef.target),
vh=vh.slice(lh+1));setTimeout(()=>zd(vh));Ef.preventDefault()}})}))))))}),HH=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,onPlaced:G}=b;b=Bf(b,["__scopeSelect","onPlaced"]);const U=lr("SelectContent",p);var la=mr("SelectContent",p);const [pa,Ga]=(0,yf.useState)(null),[Qa,Xa]=(0,yf.useState)(null);g=Cf(g,Ec=>Xa(Ec));const fb=Ju(p),mb=(0,yf.useRef)(!1),Gb=(0,yf.useRef)(!0),{viewport:Wb,selectedItem:Mb,selectedItemText:dc,focusSelectedItem:hc}=la,Ub=(0,yf.useCallback)(()=>{if(U.trigger&&U.valueNode&&
pa&&Qa&&Wb&&Mb&&dc){var Ec=U.trigger.getBoundingClientRect(),Sc=Qa.getBoundingClientRect(),Jd=U.valueNode.getBoundingClientRect(),Wd=dc.getBoundingClientRect();"rtl"!==U.dir?(Wd=Jd.left-(Wd.left-Sc.left),Jd=Ec.width+(Ec.left-Wd),Sc=sg(Wd,[10,window.innerWidth-10-Math.max(Jd,Sc.width)]),pa.style.minWidth=Jd+"px",pa.style.left=Sc+"px"):(Wd=window.innerWidth-Jd.right-(Sc.right-Wd.right),Jd=Ec.width+(window.innerWidth-Ec.right-Wd),Sc=sg(Wd,[10,window.innerWidth-10-Math.max(Jd,Sc.width)]),pa.style.minWidth=
Jd+"px",pa.style.right=Sc+"px");const Be=fb();Sc=window.innerHeight-20;var ye=Wb.scrollHeight,Fe=window.getComputedStyle(Qa);Jd=parseInt(Fe.borderTopWidth,10);var Ye=parseInt(Fe.paddingTop,10);Wd=parseInt(Fe.borderBottomWidth,10);Fe=parseInt(Fe.paddingBottom,10);var jf=Jd+Ye+ye+Fe+Wd;ye=Math.min(5*Mb.offsetHeight,jf);var Oe=window.getComputedStyle(Wb);Fe=parseInt(Oe.paddingTop,10);Oe=parseInt(Oe.paddingBottom,10);const zd=Ec.top+Ec.height/2-10,ad=Sc-zd;Ec=Mb.offsetHeight/2;Ye=Jd+Ye+(Mb.offsetTop+
Ec);jf-=Ye;Ye<=zd?(Jd=Mb===Be[Be.length-1].ref.current,pa.style.bottom="0px",pa.style.height=Ye+Math.max(ad,Ec+(Jd?Oe:0)+(Qa.clientHeight-Wb.offsetTop-Wb.offsetHeight)+Wd)+"px"):(Wd=Mb===Be[0].ref.current,pa.style.top="0px",pa.style.height=Math.max(zd,Jd+Wb.offsetTop+(Wd?Fe:0)+Ec)+jf+"px",Wb.scrollTop=Ye-zd+Wb.offsetTop);pa.style.margin="10px 0";pa.style.minHeight=ye+"px";pa.style.maxHeight=Sc+"px";null===G||void 0===G||G();requestAnimationFrame(()=>mb.current=!0)}},[fb,U.trigger,U.valueNode,pa,Qa,
Wb,Mb,dc,U.dir,G]);Nm(()=>Ub(),[Ub]);const [nc,Bc]=(0,yf.useState)();Nm(()=>{Qa&&Bc(window.getComputedStyle(Qa).zIndex)},[Qa]);la=(0,yf.useCallback)(Ec=>{Ec&&!0===Gb.current&&(Ub(),null===hc||void 0===hc||hc(),Gb.current=!1)},[Ub,hc]);return(0,yf.createElement)(eB,{scope:p,contentWrapper:pa,shouldExpandOnScrollRef:mb,onScrollButtonChange:la},(0,yf.createElement)("div",{ref:Ga,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:nc}},(0,yf.createElement)(En.div,ff({},b,{ref:g,style:oe({boxSizing:"border-box",
maxHeight:"100%"},b.style)}))))}),dB=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,align:G="start",collisionPadding:U=10}=b;b=Bf(b,["__scopeSelect","align","collisionPadding"]);const la=Dw(p);return(0,yf.createElement)(pH,ff({},la,b,{ref:g,align:G,collisionPadding:U,style:rf(oe({boxSizing:"border-box"},b.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)",
"--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[eB,Ew]=hs("SelectContent",{}),IH=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p}=b;b=Bf(b,["__scopeSelect"]);const G=mr("SelectViewport",p),U=Ew("SelectViewport",p);g=Cf(g,G.onViewportChange);const la=(0,yf.useRef)(0);return(0,yf.createElement)(yf.Fragment,null,(0,yf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,yf.createElement)(Iu.Slot,{scope:p},(0,yf.createElement)(En.div,ff({"data-radix-select-viewport":"",role:"presentation"},b,{ref:g,style:oe({position:"relative",flex:1,overflow:"auto"},b.style),onScroll:If(b.onScroll,pa=>{pa=pa.currentTarget;const {contentWrapper:Ga,shouldExpandOnScrollRef:Qa}=U;if(null!==Qa&&void 0!==Qa&&Qa.current&&Ga){var Xa=Math.abs(la.current-pa.scrollTop);if(0<Xa){var fb=window.innerHeight-20,mb=parseFloat(Ga.style.minHeight);const Gb=parseFloat(Ga.style.height);mb=Math.max(mb,
Gb);mb<fb&&(Xa=mb+Xa,fb=Math.min(fb,Xa),Xa-=fb,Ga.style.height=fb+"px","0px"===Ga.style.bottom&&(pa.scrollTop=0<Xa?Xa:0,Ga.style.justifyContent="flex-end"))}}la.current=pa.scrollTop})}))))});hs("SelectGroup");var [JH,KH]=hs("SelectItem"),LH=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,value:G,disabled:U=!1,textValue:la}=b;b=Bf(b,["__scopeSelect","value","disabled","textValue"]);const pa=lr("SelectItem",p),Ga=mr("SelectItem",p),Qa=pa.value===G,[Xa,fb]=(0,yf.useState)(null!==la&&void 0!==la?la:
""),[mb,Gb]=(0,yf.useState)(!1);g=Cf(g,dc=>{var hc;return null===(hc=Ga.itemRefCallback)||void 0===hc?void 0:hc.call(Ga,dc,G,U)});const Wb=yi(),Mb=()=>{U||(pa.onValueChange(G),pa.onOpenChange(!1))};return(0,yf.createElement)(JH,{scope:p,value:G,disabled:U,textId:Wb,isSelected:Qa,onItemTextChange:(0,yf.useCallback)(dc=>{fb(hc=>{var Ub;return hc||(null!==(Ub=null===dc||void 0===dc?void 0:dc.textContent)&&void 0!==Ub?Ub:"").trim()})},[])},(0,yf.createElement)(Iu.ItemSlot,{scope:p,value:G,disabled:U,
textValue:Xa},(0,yf.createElement)(En.div,ff({role:"option","aria-labelledby":Wb,"data-highlighted":mb?"":void 0,"aria-selected":Qa&&mb,"data-state":Qa?"checked":"unchecked","aria-disabled":U||void 0,"data-disabled":U?"":void 0,tabIndex:U?void 0:-1},b,{ref:g,onFocus:If(b.onFocus,()=>Gb(!0)),onBlur:If(b.onBlur,()=>Gb(!1)),onPointerUp:If(b.onPointerUp,Mb),onPointerMove:If(b.onPointerMove,dc=>{if(U){var hc;null===(hc=Ga.onItemLeave)||void 0===hc||hc.call(Ga)}else dc.currentTarget.focus({preventScroll:!0})}),
onPointerLeave:If(b.onPointerLeave,dc=>{if(dc.currentTarget===document.activeElement){var hc;null===(hc=Ga.onItemLeave)||void 0===hc||hc.call(Ga)}}),onKeyDown:If(b.onKeyDown,dc=>{var hc;if(""===(null===(hc=Ga.searchRef)||void 0===hc?void 0:hc.current)||" "!==dc.key)xH.includes(dc.key)&&Mb()," "===dc.key&&dc.preventDefault()})}))))}),MH=(0,yf.forwardRef)((b,g)=>{var {__scopeSelect:p}=b;b=Bf(b,["__scopeSelect","className","style"]);const G=lr("SelectItemText",p),U=mr("SelectItemText",p),la=KH("SelectItemText",
p);p=BH("SelectItemText",p);const [pa,Ga]=(0,yf.useState)(null);g=Cf(g,Gb=>Ga(Gb),la.onItemTextChange,Gb=>{var Wb;return null===(Wb=U.itemTextRefCallback)||void 0===Wb?void 0:Wb.call(U,Gb,la.value,la.disabled)});const Qa=null===pa||void 0===pa?void 0:pa.textContent,Xa=(0,yf.useMemo)(()=>(0,yf.createElement)("option",{key:la.value,value:la.value,disabled:la.disabled},Qa),[la.disabled,la.value,Qa]),{onNativeOptionAdd:fb,onNativeOptionRemove:mb}=p;Nm(()=>{fb(Xa);return()=>mb(Xa)},[fb,mb,Xa]);return(0,yf.createElement)(yf.Fragment,
null,(0,yf.createElement)(En.span,ff({id:la.textId},b,{ref:g})),la.isSelected&&G.valueNode&&!G.valueNodeHasChildren?(0,VA.createPortal)(b.children,G.valueNode):null)}),NH=(0,yf.forwardRef)((b,g)=>{const p=mr("SelectScrollUpButton",b.__scopeSelect),G=Ew("SelectScrollUpButton",b.__scopeSelect),[U,la]=(0,yf.useState)(!1);g=Cf(g,G.onScrollButtonChange);Nm(()=>{if(p.viewport&&p.isPositioned){let pa=function(){la(0<Ga.scrollTop)};const Ga=p.viewport;pa();Ga.addEventListener("scroll",pa);return()=>Ga.removeEventListener("scroll",
pa)}},[p.viewport,p.isPositioned]);return U?(0,yf.createElement)(fB,ff({},b,{ref:g,onAutoScroll:()=>{const {viewport:pa,selectedItem:Ga}=p;pa&&Ga&&(pa.scrollTop-=Ga.offsetHeight)}})):null}),OH=(0,yf.forwardRef)((b,g)=>{const p=mr("SelectScrollDownButton",b.__scopeSelect),G=Ew("SelectScrollDownButton",b.__scopeSelect),[U,la]=(0,yf.useState)(!1);g=Cf(g,G.onScrollButtonChange);Nm(()=>{if(p.viewport&&p.isPositioned){let pa=function(){la(Math.ceil(Ga.scrollTop)<Ga.scrollHeight-Ga.clientHeight)};const Ga=
p.viewport;pa();Ga.addEventListener("scroll",pa);return()=>Ga.removeEventListener("scroll",pa)}},[p.viewport,p.isPositioned]);return U?(0,yf.createElement)(fB,ff({},b,{ref:g,onAutoScroll:()=>{const {viewport:pa,selectedItem:Ga}=p;pa&&Ga&&(pa.scrollTop+=Ga.offsetHeight)}})):null}),fB=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:p,onAutoScroll:G}=b;b=Bf(b,["__scopeSelect","onAutoScroll"]);const U=mr("SelectScrollButton",p),la=(0,yf.useRef)(null),pa=Ju(p),Ga=(0,yf.useCallback)(()=>{null!==la.current&&
(window.clearInterval(la.current),la.current=null)},[]);(0,yf.useEffect)(()=>()=>Ga(),[Ga]);Nm(()=>{var Qa;const Xa=pa().find(fb=>fb.ref.current===document.activeElement);null===Xa||void 0===Xa||null===(Qa=Xa.ref.current)||void 0===Qa||Qa.scrollIntoView({block:"nearest"})},[pa]);return(0,yf.createElement)(En.div,ff({"aria-hidden":!0},b,{ref:g,style:oe({flexShrink:0},b.style),onPointerMove:If(b.onPointerMove,()=>{var Qa;null===(Qa=U.onItemLeave)||void 0===Qa||Qa.call(U);null===la.current&&(la.current=
window.setInterval(G,50))}),onPointerLeave:If(b.onPointerLeave,()=>{Ga()})}))}),gB=(0,yf.forwardRef)((b,g)=>{const {value:p}=b;b=Bf(b,["value"]);const G=(0,yf.useRef)(null);g=Cf(g,G);const U=Vf(p);(0,yf.useEffect)(()=>{const la=G.current,pa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(U!==p&&pa){const Ga=new Event("change",{bubbles:!0});pa.call(la,p);la.dispatchEvent(Ga)}},[U,p]);return(0,yf.createElement)(vH,{asChild:!0},(0,yf.createElement)("select",ff({},b,
{ref:g,defaultValue:p})))});gB.displayName="BubbleSelect";var PH=b=>{const {__scopeSelect:g,children:p,open:G,defaultOpen:U,onOpenChange:la,value:pa,defaultValue:Ga,onValueChange:Qa,dir:Xa,name:fb,autoComplete:mb,disabled:Gb,required:Wb}=b,Mb=Dw(g),[dc,hc]=(0,yf.useState)(null),[Ub,nc]=(0,yf.useState)(null),[Bc,Ec]=(0,yf.useState)(!1),Sc=Tb(Xa),[Jd=!1,Wd]=Lj({prop:G,defaultProp:U,onChange:la}),[ye,Fe]=Lj({prop:pa,defaultProp:Ga,onChange:Qa}),Ye=(0,yf.useRef)(null),jf=dc?!!dc.closest("form"):!0,[Oe,
Be]=(0,yf.useState)(new Set),zd=Array.from(Oe).map(ad=>ad.props.value).join(";");return(0,yf.createElement)(sH,Mb,(0,yf.createElement)(zH,{required:Wb,scope:g,trigger:dc,onTriggerChange:hc,valueNode:Ub,onValueNodeChange:nc,valueNodeHasChildren:Bc,onValueNodeHasChildrenChange:Ec,contentId:yi(),value:ye,onValueChange:Fe,open:Jd,onOpenChange:Wd,dir:Sc,triggerPointerDownPosRef:Ye,disabled:Gb},(0,yf.createElement)(Iu.Provider,{scope:g},(0,yf.createElement)(AH,{scope:b.__scopeSelect,onNativeOptionAdd:(0,yf.useCallback)(ad=>
{Be(ed=>(new Set(ed)).add(ad))},[]),onNativeOptionRemove:(0,yf.useCallback)(ad=>{Be(ed=>{ed=new Set(ed);ed.delete(ad);return ed})},[])},p)),jf?(0,yf.createElement)(gB,{key:zd,"aria-hidden":!0,required:Wb,tabIndex:-1,name:fb,autoComplete:mb,value:ye,onChange:ad=>Fe(ad.target.value),disabled:Gb},void 0===ye?(0,yf.createElement)("option",{value:""}):null,Array.from(Oe)):null))},QH=CH,RH=DH,SH=EH,TH=b=>(0,yf.createElement)(uH,ff({asChild:!0},b)),UH=FH,VH=IH,WH=LH,XH=MH,YH=NH,ZH=OH;nb=X(588);nb=X(588);
nb=X(588);var $H=df(function(){const b=af(),g=JG.useCallback(p=>{b.api.setColor(p)},[]);return(0,nb.jsx)("div",{className:"tl-primary-tools","data-html2canvas-ignore":"true",children:(0,nb.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,nb.jsx)(jp,{tooltip:"Select",id:"select",icon:"select-cursor"}),(0,nb.jsx)(jp,{tooltip:"Move",id:"move",icon:b.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,nb.jsx)(jr,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,nb.jsx)(jp,
{tooltip:"Add block or page",id:"logseq-portal",icon:"circle-plus"}),(0,nb.jsx)(jp,{tooltip:"Draw",id:"pencil",icon:"ballpen"}),(0,nb.jsx)(jp,{tooltip:"Highlight",id:"highlighter",icon:"highlight"}),(0,nb.jsx)(jp,{tooltip:"Eraser",id:"erase",icon:"eraser"}),(0,nb.jsx)(jp,{tooltip:"Connector",id:"line",icon:"connector"}),(0,nb.jsx)(jp,{tooltip:"Text",id:"text",icon:"text"}),(0,nb.jsx)(PG,{}),(0,nb.jsx)(jr,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,nb.jsx)(ng,
{popoverSide:"left",color:b.settings.color,setColor:g}),(0,nb.jsx)(Kh,{scaleLevel:b.settings.scaleLevel,popoverSide:"left",compact:!0})]})})});nb=X(588);var aI=df(function(){const b=af();return(0,nb.jsxs)("div",{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[b.selectedTool.id," | ",b.selectedTool.currentState.id,(0,nb.jsx)("div",{style:{flex:1}}),(0,nb.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})});nb=X(588);var bI=df(function(){const b=af();return(0,nb.jsxs)(nb.Fragment,
{children:[yh()&&(0,nb.jsx)(aI,{}),yh()&&(0,nb.jsx)(IG,{}),!b.readOnly&&(0,nb.jsx)($H,{}),(0,nb.jsx)(HG,{})]})}),pt=nf(X(22)),Ep=nf(X(22)),cI=nf(X(22)),an=nf(X(22)).default.createContext({}),dI=nf(X(22));nb=X(588);var hB=({id:b,showReferenceContent:g=!1})=>{var p;const {handlers:{isWhiteboardPage:G,redirectToPage:U,sidebarAddBlock:la,queryBlockByUUID:pa},renderers:{Breadcrumb:Ga,PageName:Qa}}=dI.default.useContext(an);var Xa="";let fb=ek(b)?"B":"P",mb="";if(ek(b)){Xa=pa(b);if(!Xa)return(0,nb.jsx)("span",
{className:"p-2",children:"Invalid reference. Did you remove it?"});mb=Xa.content;Xa="whiteboard-shape"===(null==(p=Xa.properties)?void 0:p["ls-type"])?"link-to-whiteboard":"link-to-block"}else Xa=G(b)?"link-to-whiteboard":"link-to-page";p=mb&&23<mb.length?mb.slice(0,20)+"...":mb;return(0,nb.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Gb=>{Gb.stopPropagation();Gb.shiftKey?la(b,"B"===fb?"block":"page"):U(b)},children:[(0,nb.jsx)(Fh,{name:Xa}),(0,nb.jsx)("span",{className:"pointer-events-none block-link-reference-row",
children:"P"===fb?(0,nb.jsx)(Qa,{pageName:b}):(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)(Ga,{levelLimit:1,blockId:b,endSeparator:g}),g&&p]})})]})},Om=nf(X(22)),On=X(22),eI=["children"],Ku="undefined"!==typeof document?On.useLayoutEffect:On.useEffect,ih=nf(X(22)),ii=X(22),fI=X(31),qt,Dm,gI="undefined"!=typeof document?ii.useLayoutEffect:ii.useEffect;!function(b){b[b.DEBUG=0]="DEBUG";b[b.INFO=1]="INFO";b[b.WARN=2]="WARN";b[b.ERROR=3]="ERROR"}(Dm||={});var hI=((qt={})[Dm.DEBUG]="debug",qt[Dm.INFO]=
"log",qt[Dm.WARN]="warn",qt[Dm.ERROR]="error",qt),lq=sh(function(){var b=Pd(Dm.ERROR);return{log:Pd(function(g,p,G){var U;void 0===G&&(G=Dm.INFO);G>=(null!=(U=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?U:b(4))&&console[hI[G]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",g,p)}),logLevel:b}},[],{singleton:!0}),Pn=sh(function(){var b=Uf(),g=Uf(),p=Pd(0),G=Uf(),U=Pd(0),la=Uf(),pa=Uf(),Ga=Pd(0),Qa=Pd(0),Xa=Pd(0),fb=Pd(0),mb=Uf(),Gb=Uf(),Wb=
Pd(!1),Mb=Pd(!1);return be(Ie(b,$f(function(dc){return dc.scrollTop})),g),be(Ie(b,$f(function(dc){return dc.scrollHeight})),pa),be(g,U),{scrollContainerState:b,scrollTop:g,viewportHeight:la,headerHeight:Ga,fixedHeaderHeight:Qa,fixedFooterHeight:Xa,footerHeight:fb,scrollHeight:pa,smoothScrollTargetReached:G,react18ConcurrentRendering:Mb,scrollTo:mb,scrollBy:Gb,statefulScrollTop:U,deviation:p,scrollingInProgress:Wb}},[],{singleton:!0}),Pi={lvl:0},Fw=sh(function(){return{recalcInProgress:Pd(!1)}},[],
{singleton:!0}),iI={offsetHeight:"height",offsetWidth:"width"},Fp=sh(function(b){var g=b[0].log,p=b[1].recalcInProgress;b=Uf();var G=Uf(),U=Ri(G,0),la=Uf(),pa=Uf(),Ga=Pd(0),Qa=Pd([]),Xa=Pd(void 0),fb=Pd(void 0),mb=Pd(function(nc,Bc){return gl(nc,iI[Bc])}),Gb=Pd(void 0),Wb=Pd(0),Mb={offsetTree:[],sizeTree:Pi,groupOffsetTree:Pi,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},dc=Ri(Ie(b,eg(Qa,g,Wb),nl(Ci,Mb),ig()),Mb);be(Ie(Qa,Wg(function(nc){return 0<nc.length}),eg(dc,Wb),$f(function(nc){var Bc=
nc[0],Ec=nc[1],Sc=nc[2];nc=Bc.reduce(function(Jd,Wd,ye){return ua(Jd,Wd,Hh(Wd,Ec.offsetTree,Sc)||ye)},Pi);return kg({},Ec,{groupIndices:Bc,groupOffsetTree:nc})})),dc);be(Ie(G,eg(dc),Wg(function(nc){return nc[0]<nc[1].lastIndex}),$f(function(nc){var Bc=nc[1];return[{startIndex:nc[0],endIndex:Bc.lastIndex,size:Bc.lastSize}]})),b);be(Xa,fb);var hc=Ri(Ie(Xa,$f(function(nc){return void 0===nc})),!0);be(Ie(fb,Wg(function(nc){return void 0!==nc&&dc(4).sizeTree===Pi}),$f(function(nc){return[{startIndex:0,
endIndex:0,size:nc}]})),b);Mb=qj(Ie(b,eg(dc),nl(function(nc,Bc){Bc=Bc[1];return{changed:Bc!==nc.sizes,sizes:Bc}},{changed:!1,sizes:Mb}),$f(function(nc){return nc.changed})));dg(Ie(Ga,nl(function(nc,Bc){return{diff:nc.prev-Bc,prev:Bc}},{diff:0,prev:0}),$f(function(nc){return nc.diff})),function(nc){0<nc?(p(0,!0),la(0,nc)):0>nc&&pa(0,nc)});dg(Ie(Ga,eg(g)),function(nc){0>nc[0]&&(0,nc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",
{firstItemIndex:Ga},Dm.ERROR)});g=qj(la);be(Ie(la,eg(dc),$f(function(nc){var Bc=nc[0];nc=nc[1];if(0<nc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return $a(nc.sizeTree).reduce(function(Ec,Sc){var Jd=Sc.k;Sc=Sc.v;return{ranges:[].concat(Ec.ranges,[{startIndex:Ec.prevIndex,endIndex:Jd+Bc-1,size:Ec.prevSize}]),prevIndex:Jd+Bc,prevSize:Sc}},{ranges:[],prevIndex:0,prevSize:nc.lastSize}).ranges})),b);var Ub=qj(Ie(pa,eg(dc,Wb),$f(function(nc){return Hh(-nc[0],
nc[1].offsetTree,nc[2])})));return be(Ie(pa,eg(dc,Wb),$f(function(nc){var Bc=nc[0],Ec=nc[1];nc=nc[2];if(0<Ec.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Sc=$a(Ec.sizeTree).reduce(function(Jd,Wd){return ua(Jd,Math.max(0,Wd.k+Bc),Wd.v)},Pi);return kg({},Ec,{sizeTree:Sc},bi(Ec.offsetTree,0,Sc,nc))})),dc),{data:Gb,totalCount:G,sizeRanges:b,groupIndices:Qa,defaultItemSize:fb,fixedItemSize:Xa,unshiftWith:la,shiftWith:pa,shiftWithOffset:Ub,beforeUnshiftWith:g,
firstItemIndex:Ga,gap:Wb,sizes:dc,listRefresh:Mb,statefulTotalCount:U,trackItemSizes:hc,itemSize:mb}},pe(lq,Fw),{singleton:!0}),jI="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,rt=sh(function(b){function g(){hc&&(hc(),hc=null);nc&&(nc(),nc=null);Ub&&(clearTimeout(Ub),Ub=null);Ga(0,!1)}var p=b[0],G=p.sizes,U=p.totalCount,la=p.listRefresh;p=p.gap;var pa=b[1],Ga=pa.scrollingInProgress,Qa=pa.viewportHeight,Xa=pa.scrollTo,fb=pa.smoothScrollTargetReached,mb=pa.headerHeight,
Gb=pa.footerHeight,Wb=pa.fixedHeaderHeight;pa=pa.fixedFooterHeight;b=b[2].log;var Mb=Uf(),dc=Pd(0),hc=null,Ub=null,nc=null;return be(Ie(Mb,eg(G,Qa,U,dc,mb,Gb,b),eg(p,Wb,pa),$f(function(Bc){var Ec=Bc[0],Sc=Ec[0],Jd=Ec[1],Wd=Ec[2],ye=Ec[3],Fe=Ec[4],Ye=Ec[5],jf=Ec[6],Oe=Ec[7],Be=Bc[1];Ec=Bc[2];Bc=Bc[3];var zd=Ch(Sc),ad=zd.align,ed=zd.behavior,ld=zd.offset;--ye;zd=gg(zd,Jd,ye);Ye=Hh(zd,Jd.offsetTree,Be)+Ye;"end"===ad?(Ye+=Ec+xa(Jd.sizeTree,zd)[1]-Wd+Bc,zd===ye&&(Ye+=jf)):"center"===ad?Ye+=(Ec+xa(Jd.sizeTree,
zd)[1]-Wd+Bc)/2:Ye-=Fe;ld&&(Ye+=ld);var $d=function(kf){g();kf?(Oe("retrying to scroll to",{location:Sc},Dm.DEBUG),Mb(0,Sc)):Oe("list did not change, scroll successful",{},Dm.DEBUG)};if(g(),"smooth"===ed){var Pe=!1;nc=dg(la,function(kf){Pe=Pe||kf});hc=Me(fb,function(){$d(Pe)})}else hc=Me(Ie(la,function(kf){var Sf=setTimeout(function(){kf(!1)},150);return function(wf){wf&&(kf(!0),clearTimeout(Sf))}}),$d);Ub=setTimeout(function(){g()},1200);Ga(0,!0);return Oe("scrolling from index to",{index:zd,top:Ye,
behavior:ed},Dm.DEBUG),{top:Ye,behavior:ed}})),Xa),{scrollToIndex:Mb,topListHeight:dc}},pe(Fp,Pn,lq),{singleton:!0}),kI={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},st=sh(function(b){var g=b[0],p=g.scrollContainerState;b=g.scrollTop;var G=g.viewportHeight,U=g.headerHeight,la=g.footerHeight,pa=g.scrollBy;g=Pd(!1);var Ga=Pd(!0),Qa=Uf(),Xa=Uf(),fb=Pd(4),mb=Pd(0),Gb=Ri(Ie(qi(Ie(Bh(b),Uk(1),Pf(!0)),Ie(Bh(b),Uk(1),Pf(!1),Fl(100))),
ig()),!1),Wb=Ri(Ie(qi(Ie(pa,Pf(!0)),Ie(pa,Pf(!1),Fl(200))),ig()),!1);be(Ie(Li(Bh(b),Bh(mb)),$f(function(Mb){return Mb[0]<=Mb[1]}),ig()),Ga);be(Ie(Ga,Jf(50)),Xa);G=qj(Ie(Li(p,Bh(G),Bh(U),Bh(la),Bh(fb)),nl(function(Mb,dc){var hc,Ub,nc=dc[0],Bc=nc.scrollTop;nc=nc.scrollHeight;var Ec=dc[1],Sc={viewportHeight:Ec,scrollTop:Bc,scrollHeight:nc};return Bc+Ec-nc>-dc[4]?(Bc>Mb.state.scrollTop?(hc="SCROLLED_DOWN",Ub=Mb.state.scrollTop-Bc):(hc="SIZE_DECREASED",Ub=Mb.state.scrollTop-Bc||Mb.scrollTopDelta),{atBottom:!0,
state:Sc,atBottomBecause:hc,scrollTopDelta:Ub}):{atBottom:!1,notAtBottomBecause:Sc.scrollHeight>Mb.state.scrollHeight?"SIZE_INCREASED":Ec<Mb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Bc<Mb.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Sc}},kI),ig(function(Mb,dc){return Mb&&Mb.atBottom===dc.atBottom})));U=Ri(Ie(p,nl(function(Mb,dc){var hc=dc.scrollTop,Ub=dc.scrollHeight;dc=dc.viewportHeight;return 1.01>Math.abs(Mb.scrollHeight-Ub)?{scrollTop:hc,scrollHeight:Ub,
jump:0,changed:!1}:Mb.scrollTop!==hc&&1>Ub-(hc+dc)?{scrollHeight:Ub,scrollTop:hc,jump:Mb.scrollTop-hc,changed:!0}:{scrollHeight:Ub,scrollTop:hc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Wg(function(Mb){return Mb.changed}),$f(function(Mb){return Mb.jump})),0);be(Ie(G,$f(function(Mb){return Mb.atBottom})),g);be(Ie(g,Jf(50)),Qa);la=Pd("down");be(Ie(p,$f(function(Mb){return Mb.scrollTop}),ig(),nl(function(Mb,dc){return Wb(4)?{direction:Mb.direction,prevScrollTop:dc}:{direction:dc<
Mb.prevScrollTop?"up":"down",prevScrollTop:dc}},{direction:"down",prevScrollTop:0}),$f(function(Mb){return Mb.direction})),la);be(Ie(p,Jf(50),Pf("none")),la);p=Pd(0);return be(Ie(Gb,Wg(function(Mb){return!Mb}),Pf(0)),p),be(Ie(b,Jf(100),eg(Gb),Wg(function(Mb){return!!Mb[1]}),nl(function(Mb,dc){return[Mb[1],dc[0]]},[0,0]),$f(function(Mb){return Mb[1]-Mb[0]})),p),{isScrolling:Gb,isAtTop:Ga,isAtBottom:g,atBottomState:G,atTopStateChange:Xa,atBottomStateChange:Qa,scrollDirection:la,atBottomThreshold:fb,
atTopThreshold:mb,scrollVelocity:p,lastJumpDueToItemResize:U}},pe(Pn)),nr=sh(function(b){var g=b[0].log;b=Pd(!1);var p=qj(Ie(b,Wg(function(G){return G}),ig()));return dg(b,function(G){G&&g(4)("props updated",{},Dm.DEBUG)}),{propsReady:b,didMount:p}},pe(lq),{singleton:!0}),Gw=sh(function(b){var g=b[0],p=g.sizes,G=g.listRefresh;g=g.defaultItemSize;var U=b[1].scrollTop,la=b[2].scrollToIndex;b=b[3].didMount;var pa=Pd(!0),Ga=Pd(0);return be(Ie(b,eg(Ga),Wg(function(Qa){return!!Qa[1]}),Pf(!1)),pa),dg(Ie(Li(G,
b),eg(pa,p,g),Wg(function(Qa){var Xa=Qa[1],fb=Qa[3];return Qa[0][1]&&(Qa[2].sizeTree!==Pi||void 0!==fb)&&!Xa}),eg(Ga)),function(Qa){var Xa=Qa[1];setTimeout(function(){Me(U,function(){pa(0,!0)});la(0,Xa)})}),{scrolledToInitialItem:pa,initialTopMostItemIndex:Ga}},pe(Fp,Pn,rt,nr),{singleton:!0}),lI=sh(function(b){function g(dc){Qa(0,{index:"LAST",align:"end",behavior:dc})}function p(dc){var hc=Me(Ga,function(Ub){!dc||Ub.atBottom||"SIZE_INCREASED"!==Ub.notAtBottomBecause||Mb||(mb(4)("scrolling to bottom due to increased size",
{},Dm.DEBUG),g("auto"))});setTimeout(hc,100)}var G=b[0],U=G.totalCount,la=G.listRefresh,pa=b[1];G=pa.isAtBottom;var Ga=pa.atBottomState,Qa=b[2].scrollToIndex;pa=b[3].scrolledToInitialItem;var Xa=b[4],fb=Xa.propsReady;Xa=Xa.didMount;var mb=b[5].log;b=b[6].scrollingInProgress;var Gb=Pd(!1),Wb=Uf(),Mb=null;return dg(Ie(Li(Ie(Bh(U),Uk(1)),Xa),eg(Bh(Gb),G,pa,b),$f(function(dc){var hc=dc[0],Ub=hc[0];hc=hc[1]&&dc[3];var nc="auto";hc&&(nc=dc[1],dc=dc[2]||dc[4],nc="function"==typeof nc?kh(nc(dc)):dc&&kh(nc),
hc=hc&&!!nc);return{totalCount:Ub,shouldFollow:hc,followOutputBehavior:nc}}),Wg(function(dc){return dc.shouldFollow})),function(dc){var hc=dc.totalCount,Ub=dc.followOutputBehavior;Mb&&(Mb(),Mb=null);Mb=Me(la,function(){mb(4)("following output to ",{totalCount:hc},Dm.DEBUG);g(Ub);Mb=null})}),dg(Ie(Li(Bh(Gb),U,fb),Wg(function(dc){return dc[0]&&dc[2]}),nl(function(dc,hc){hc=hc[1];return{refreshed:dc.value===hc,value:hc}},{refreshed:!1,value:0}),Wg(function(dc){return dc.refreshed}),eg(Gb,U)),function(dc){p(!1!==
dc[1])}),dg(Wb,function(){p(!1!==Gb(4))}),dg(Li(Bh(Gb),Ga),function(dc){var hc=dc[1];dc[0]&&!hc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===hc.notAtBottomBecause&&g("auto")}),{followOutput:Gb,autoscrollToBottom:Wb}},pe(Fp,st,rt,Gw,nr,lq,Pn)),iB=sh(function(b){var g=b[0],p=g.totalCount,G=g.groupIndices;g=g.sizes;var U=b[1];b=U.scrollTop;U=U.headerHeight;var la=Uf(),pa=Uf(),Ga=qj(Ie(la,$f(Dj)));return be(Ie(Ga,$f(function(Qa){return Qa.totalCount})),p),be(Ie(Ga,$f(function(Qa){return Qa.groupIndices})),
G),be(Ie(Li(b,g,U),Wg(function(Qa){return Qa[1].groupOffsetTree!==Pi}),$f(function(Qa){return xa(Qa[1].groupOffsetTree,Math.max(Qa[0]-Qa[2],0),"v")[0]}),ig(),$f(function(Qa){return[Qa]})),pa),{groupCounts:la,topItemsIndexes:pa}},pe(Fp,Pn)),Hw=sh(function(b){var g=b[0];b=g.scrollTop;var p=g.viewportHeight,G=g.deviation,U=g.headerHeight,la=g.fixedHeaderHeight;g=Uf();var pa=Pd(0),Ga=Pd(0),Qa=Pd(0);b=Ri(Ie(Li(Bh(b),Bh(p),Bh(U),Bh(g,mi),Bh(Qa),Bh(pa),Bh(la),Bh(G),Bh(Ga)),$f(function(Xa){var fb=Xa[0],mb=
Xa[1],Gb=Xa[2],Wb=Xa[3],Mb=Wb[0];Wb=Wb[1];var dc=Xa[4],hc=Xa[6],Ub=Xa[7],nc=Xa[8],Bc=fb-Ub;Xa=Xa[5]+hc;var Ec=Math.max(Gb-Bc,0),Sc="none",Jd="number"==typeof nc?nc:nc.top||0;nc="number"==typeof nc?nc:nc.bottom||0;return Mb-=Ub,Wb+=Gb+hc,Mb+(Gb+hc)>fb+Xa-Jd&&(Sc="up"),Wb-Ub<fb-Ec+mb+nc&&(Sc="down"),"none"!==Sc?[Math.max(Bc-Gb-Pl(dc,"top",Sc)-Jd,0),Bc-Ec-hc+mb+Pl(dc,"bottom",Sc)+nc]:null}),Wg(function(Xa){return null!=Xa}),ig(mi)),[0,0]);return{listBoundary:g,overscan:Qa,topListHeight:pa,increaseViewportBy:Ga,
visibleRange:b}},pe(Pn),{singleton:!0}),jB={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},is=sh(function(b){var g=b[0],p=g.sizes,G=g.totalCount,U=g.data,la=g.firstItemIndex,pa=g.gap,Ga=b[1],Qa=b[2],Xa=Qa.visibleRange;g=Qa.listBoundary;Qa=Qa.topListHeight;var fb=b[3],mb=fb.scrolledToInitialItem,Gb=fb.initialTopMostItemIndex;fb=b[4].topListHeight;var Wb=b[5],Mb=b[6].didMount,dc=b[7].recalcInProgress;b=Pd([]);var hc=Uf();be(Ga.topItemsIndexes,
b);p=Ri(Ie(Li(Mb,dc,Bh(Xa,mi),Bh(G),Bh(p),Bh(Gb),mb,Bh(b),Bh(la),Bh(pa),U),Wg(function(Ub){return Ub[0]&&!Ub[1]}),$f(function(Ub){var nc=Ub[2],Bc=nc[0],Ec=nc[1];nc=Ub[3];var Sc=Ub[5],Jd=Ub[6],Wd=Ub[7],ye=Ub[8],Fe=Ub[9],Ye=Ub[10];Ub=Ub[4];var jf=Ub.sizeTree,Oe=Ub.offsetTree;if(0===nc||0===Bc&&0===Ec)return kg({},jB,{totalCount:nc});if(jf===Pi)return jm(function(wf,Gf,jh){return Gf.groupOffsetTree!==Pi?(wf=Rf(wf,Gf),[{index:xa(Gf.groupOffsetTree,wf)[0],size:0,offset:0},{index:wf,size:0,offset:0,data:jh&&
jh[0]}]):[{index:wf,size:0,offset:0,data:jh&&jh[0]}]}("number"==typeof Sc?Sc:"LAST"===Sc.index?nc-1:Sc.index,Ub,Ye),[],nc,Fe,Ub,ye);Sc=[];if(0<Wd.length){var Be,zd=Wd[0],ad=Wd[Wd.length-1],ed=0;for(jf=Wl(Fd(jf,zd,ad));!(Be=jf()).done;){var ld=Be.value;Be=ld.value;var $d=Math.min(ld.end,ad);for(ld=Math.max(ld.start,zd);ld<=$d;ld++)Sc.push({index:ld,size:Be,offset:ed,data:Ye&&Ye[ld]}),ed+=Be}}if(!Jd)return jm([],Sc,nc,Fe,Ub,ye);var Pe=0<Wd.length?Wd[Wd.length-1]+1:0,kf=function(wf,Gf,jh,Ef){return void 0===
Ef&&(Ef=0),0<Ef&&(Gf=Math.max(Gf,wf[Af(wf,Ef,uj)].offset)),Nd((vh=jh,kl=Af(lh=wf,Gf,pj=xg),ll=Af(lh,vh,pj,kl),lh.slice(kl,ll+1)),qh);var lh,vh,pj,kl,ll}(Oe,Bc,Ec,Pe);if(0===kf.length)return null;var Sf=nc-1;return jm($k([],function(wf){for(var Gf,jh=Wl(kf);!(Gf=jh()).done;){var Ef=Gf.value,lh=Ef.value;Gf=lh.offset;var vh=Ef.start,pj=lh.size;lh.offset<Bc&&(lh=(vh+=Math.floor((Bc-lh.offset+Fe)/(pj+Fe)))-Ef.start,Gf+=lh*pj+lh*Fe);vh<Pe&&(Gf+=(Pe-vh)*pj,vh=Pe);for(Ef=Math.min(Ef.end,Sf);vh<=Ef&&!(Gf>=
Ec);vh++)wf.push({index:vh,size:pj,offset:Gf,data:Ye&&Ye[vh]}),Gf+=pj+Fe}}),Sc,nc,Fe,Ub,ye)}),Wg(function(Ub){return null!==Ub}),ig()),jB);return be(Ie(U,Wg(function(Ub){return void 0!==Ub}),$f(function(Ub){return Ub.length})),G),be(Ie(p,$f(function(Ub){return Ub.topListHeight})),fb),be(fb,Qa),be(Ie(p,$f(function(Ub){return[Ub.top,Ub.bottom]})),g),be(Ie(p,$f(function(Ub){return Ub.items})),hc),kg({listState:p,topItemsIndexes:b,endReached:qj(Ie(p,Wg(function(Ub){return 0<Ub.items.length}),eg(G,U),
Wg(function(Ub){var nc=Ub[0].items;return nc[nc.length-1].originalIndex===Ub[1]-1}),$f(function(Ub){return[Ub[1]-1,Ub[2]]}),ig(mi),$f(function(Ub){return Ub[0]}))),startReached:qj(Ie(p,Jf(200),Wg(function(Ub){var nc=Ub.items;return 0<nc.length&&nc[0].originalIndex===Ub.topItems.length}),$f(function(Ub){return Ub.items[0].index}),ig())),rangeChanged:qj(Ie(p,Wg(function(Ub){return 0<Ub.items.length}),$f(function(Ub){Ub=Ub.items;for(var nc=0,Bc=Ub.length-1;"group"===Ub[nc].type&&nc<Bc;)nc++;for(;"group"===
Ub[Bc].type&&Bc>nc;)Bc--;return{startIndex:Ub[nc].index,endIndex:Ub[Bc].index}}),ig(Yj))),itemsRendered:hc},Wb)},pe(Fp,iB,Hw,Gw,rt,st,nr,Fw),{singleton:!0}),mI=sh(function(b){var g=b[0],p=g.sizes,G=g.firstItemIndex,U=g.data;g=g.gap;var la=b[1].listState;b=b[2].didMount;var pa=Pd(0);return be(Ie(b,eg(pa),Wg(function(Ga){return 0!==Ga[1]}),eg(p,G,g,U),$f(function(Ga){var Qa=Ga[0][1],Xa=Ga[1],fb=Ga[2],mb=Ga[3];Ga=Ga[4];var Gb=void 0===Ga?[]:Ga;Ga=0;if(0<Xa.groupIndices.length)for(var Wb,Mb=Wl(Xa.groupIndices);!((Wb=
Mb()).done||Wb.value-Ga>=Qa);)Ga++;Qa+=Ga;return jm(Array.from({length:Qa}).map(function(dc,hc){return{index:hc,size:0,offset:0,data:Gb[hc]}}),[],Qa,mb,Xa,fb)})),la),{initialItemCount:pa}},pe(Fp,is,nr),{singleton:!0}),kB=sh(function(b){b=b[0].scrollVelocity;var g=Pd(!1),p=Uf(),G=Pd(!1);return be(Ie(b,eg(G,g,p),Wg(function(U){return!!U[1]}),$f(function(U){var la=U[0],pa=U[1],Ga=U[2];U=U[3];var Qa=pa.enter;if(Ga){if((0,pa.exit)(la,U))return!1}else if(Qa(la,U))return!0;return Ga}),ig()),g),dg(Ie(Li(g,
b,p),eg(G)),function(U){var la=U[0];U=U[1];return la[0]&&U&&U.change&&U.change(la[1],la[2])}),{isSeeking:g,scrollSeekConfiguration:G,scrollVelocity:b,scrollSeekRangeChanged:p}},pe(st),{singleton:!0}),nI=sh(function(b){b=b[0].topItemsIndexes;var g=Pd(0);return be(Ie(g,Wg(function(p){return 0<p}),$f(function(p){return Array.from({length:p}).map(function(G,U){return U})})),b),{topItemCount:g}},pe(is)),Iw=sh(function(b){var g=b[0],p=g.footerHeight,G=g.headerHeight,U=g.fixedHeaderHeight;g=g.fixedFooterHeight;
var la=b[1].listState;b=Uf();p=Ri(Ie(Li(p,g,G,U,la),$f(function(pa){var Ga=pa[4];return pa[0]+pa[1]+pa[2]+pa[3]+Ga.offsetBottom+Ga.bottom})),0);return be(Bh(p),b),{totalListHeight:p,totalListHeightChanged:b}},pe(Pn,is),{singleton:!0}),oI=bp(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),pI=sh(function(b){function g(hc){0<hc?(G(0,{top:-hc,behavior:"auto"}),la(0,0)):(la(0,0),G(0,{top:-hc,behavior:"auto"}))}var p=b[0],G=p.scrollBy,U=p.scrollTop,la=p.deviation,
pa=p.scrollingInProgress,Ga=b[1];p=Ga.isScrolling;var Qa=Ga.isAtBottom,Xa=Ga.scrollDirection,fb=b[3],mb=fb.beforeUnshiftWith,Gb=fb.shiftWithOffset,Wb=fb.sizes;fb=fb.gap;var Mb=b[4].log,dc=b[5].recalcInProgress;b=qj(Ie(b[2].listState,eg(Ga.lastJumpDueToItemResize),nl(function(hc,Ub){var nc=hc[1],Bc=Ub[0],Ec=Bc.items,Sc=Bc.totalCount;Bc=Bc.bottom+Bc.offsetBottom;var Jd=0;return hc[2]===Sc&&0<nc.length&&0<Ec.length&&(0===Ec[0].originalIndex&&0===nc[0].originalIndex||0!=(Jd=Bc-hc[3])&&(Jd+=Ub[1])),[Jd,
Ec,Sc,Bc]},[0,[],0,0]),Wg(function(hc){return 0!==hc[0]}),eg(U,Xa,pa,Qa,Mb),Wg(function(hc){return!hc[3]&&0!==hc[1]&&"up"===hc[2]}),$f(function(hc){var Ub=hc[0][0];return(0,hc[5])("Upward scrolling compensation",{amount:Ub},Dm.DEBUG),Ub})));return dg(Ie(b,eg(la,p)),function(hc){var Ub=hc[0],nc=hc[1];hc[2]&&oI()?la(0,nc-Ub):g(-Ub)}),dg(Ie(Li(Ri(p,!1),la,dc),Wg(function(hc){return!hc[0]&&!hc[2]&&0!==hc[1]}),$f(function(hc){return hc[1]}),Jf(1)),g),be(Ie(Gb,$f(function(hc){return{top:-hc}})),G),dg(Ie(mb,
eg(Wb,fb),$f(function(hc){var Ub=hc[0];return Ub*hc[1].lastSize+Ub*hc[2]})),function(hc){la(0,hc);requestAnimationFrame(function(){gj(G,{top:hc});requestAnimationFrame(function(){la(0,0);dc(0,!1)})})}),{deviation:la}},pe(Pn,st,is,Fp,lq,Fw)),qI=sh(function(b){var g=b[0].totalListHeight,p=b[1].didMount,G=b[2].scrollTo;b=Pd(0);return dg(Ie(p,eg(b),Wg(function(U){return 0!==U[1]}),$f(function(U){return{top:U[1]}})),function(U){Me(Ie(g,Wg(function(la){return 0!==la})),function(){setTimeout(function(){G(0,
U)})})}),{initialScrollTop:b}},pe(Iw,nr,Pn),{singleton:!0}),rI=sh(function(b){var g=b[0].viewportHeight;b=b[1].totalListHeight;var p=Pd(!1);return{alignToBottom:p,paddingTopAddition:Ri(Ie(Li(p,g,b),Wg(function(G){return G[0]}),$f(function(G){return Math.max(0,G[1]-G[2])}),ig()),0)}},pe(Pn,Iw),{singleton:!0}),lB=sh(function(b){var g=b[0];b=g.scrollTo;g=g.scrollContainerState;var p=Uf(),G=Uf(),U=Uf(),la=Pd(!1),pa=Pd(void 0);return be(Ie(Li(p,G),$f(function(Ga){var Qa=Ga[0];return{scrollTop:Math.max(0,
Qa.scrollTop-Ga[1].offsetTop),scrollHeight:Qa.scrollHeight,viewportHeight:Qa.viewportHeight}})),g),be(Ie(b,eg(G),$f(function(Ga){var Qa=Ga[0];return kg({},Qa,{top:Qa.top+Ga[1].offsetTop})})),U),{useWindowScroll:la,customScrollParent:pa,windowScrollContainerState:p,windowViewportRect:G,windowScrollTo:U}},pe(Pn)),sI=["done","behavior","align"],tI=sh(function(b){var g=b[0],p=g.sizes,G=g.totalCount;g=g.gap;var U=b[1],la=U.scrollTop,pa=U.viewportHeight,Ga=U.headerHeight,Qa=U.fixedHeaderHeight,Xa=U.fixedFooterHeight,
fb=U.scrollingInProgress;b=b[2].scrollToIndex;U=Uf();return be(Ie(U,eg(p,pa,G,Ga,Qa,Xa,la),eg(g),$f(function(mb){var Gb=mb[0],Wb=Gb[0],Mb=Gb[1],dc=Gb[2],hc=Gb[3],Ub=Gb[4],nc=Gb[5],Bc=Gb[6];Gb=Gb[7];var Ec=mb[1];mb=Wb.done;var Sc=Wb.behavior,Jd=Wb.align,Wd=zi(Wb,sI),ye=null;Wb=gg(Wb,Mb,hc-1);Ub=Hh(Wb,Mb.offsetTree,Ec)+Ub+nc;return Ub<Gb+nc?ye=kg({},Wd,{behavior:Sc,align:null!=Jd?Jd:"start"}):Ub+xa(Mb.sizeTree,Wb)[1]>Gb+dc-Bc&&(ye=kg({},Wd,{behavior:Sc,align:null!=Jd?Jd:"end"})),ye?mb&&Me(Ie(fb,Uk(1),
Wg(function(Fe){return!1===Fe})),mb):mb&&mb(),ye}),Wg(function(mb){return null!==mb})),b),{scrollIntoView:U}},pe(Fp,Pn,rt,is,lq),{singleton:!0}),uI=["listState","topItemsIndexes"],vI=sh(function(b){return kg({},b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},pe(Hw,mI,nr,kB,Iw,qI,rI,lB,tI)),mB=sh(function(b){var g=b[0],p=g.totalCount,G=g.sizeRanges,U=g.fixedItemSize,la=g.defaultItemSize,pa=g.trackItemSizes,Ga=g.itemSize,Qa=g.data,Xa=g.firstItemIndex,fb=g.groupIndices,mb=g.statefulTotalCount;g=g.gap;
var Gb=b[1],Wb=Gb.initialTopMostItemIndex;Gb=Gb.scrolledToInitialItem;var Mb=b[2],dc=b[3],hc=b[4],Ub=hc.listState,nc=hc.topItemsIndexes;hc=zi(hc,uI);var Bc=b[5].scrollToIndex,Ec=b[7].topItemCount,Sc=b[8].groupCounts,Jd=b[9];b=b[10];return be(hc.rangeChanged,Jd.scrollSeekRangeChanged),be(Ie(Jd.windowViewportRect,$f(function(Wd){return Wd.visibleHeight})),Mb.viewportHeight),kg({totalCount:p,data:Qa,firstItemIndex:Xa,sizeRanges:G,initialTopMostItemIndex:Wb,scrolledToInitialItem:Gb,topItemsIndexes:nc,
topItemCount:Ec,groupCounts:Sc,fixedItemHeight:U,defaultItemHeight:la,gap:g},dc,{statefulTotalCount:mb,listState:Ub,scrollToIndex:Bc,trackItemSizes:pa,itemSize:Ga,groupIndices:fb},hc,Jd,Mb,b)},pe(Fp,Gw,Pn,lI,is,rt,pI,nI,iB,vI,lq)),nB=bp(function(){if("undefined"==typeof document)return"sticky";var b=document.createElement("div");return b.style.position="-webkit-sticky","-webkit-sticky"===b.style.position?"-webkit-sticky":"sticky"}),Lu=ih.createContext(void 0),oB=ih.createContext(void 0),wI=["placeholder"],
xI=["style","children"],yI=["style","children"],zI=sh(function(){var b=Pd(function(Qa){return"Item "+Qa}),g=Pd(null),p=Pd(function(Qa){return"Group "+Qa}),G=Pd({}),U=Pd(bh),la=Pd("div"),pa=Pd(Fi),Ga=function(Qa,Xa){return void 0===Xa&&(Xa=null),Ri(Ie(G,$f(function(fb){return fb[Qa]}),ig()),Xa)};return{context:g,itemContent:b,groupContent:p,components:G,computeItemKey:U,headerFooterTag:la,scrollerRef:pa,FooterComponent:Ga("Footer"),HeaderComponent:Ga("Header"),TopItemListComponent:Ga("TopItemList"),
ListComponent:Ga("List","div"),ItemComponent:Ga("Item","div"),GroupComponent:Ga("Group","div"),ScrollerComponent:Ga("Scroller","div"),EmptyPlaceholder:Ga("EmptyPlaceholder"),ScrollSeekPlaceholder:Ga("ScrollSeekPlaceholder")}}),AI=sh(function(b){function g(U,la,pa){be(Ie(U,eg(G.components),$f(function(Ga){var Qa,Xa=Ga[0];Ga=Ga[1];return console.warn("react-virtuoso: "+pa+" property is deprecated. Pass components."+la+" instead."),kg({},Ga,((Qa={})[la]=Xa,Qa))})),G.components)}var p=b[0],G=b[1];b={item:xm(G.itemContent,
"Rename the %citem%c prop to %citemContent."),group:xm(G.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:xm(p.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:xm(p.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:xm(p.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Uf(),maxHeightCacheSize:Uf(),footer:Uf(),header:Uf(),HeaderContainer:Uf(),FooterContainer:Uf(),
ItemContainer:Uf(),ScrollContainer:Uf(),GroupContainer:Uf(),ListContainer:Uf(),emptyComponent:Uf(),scrollSeek:Uf()};return dg(b.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),dg(b.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
dg(b.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),dg(b.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),dg(b.scrollSeek,function(U){var la=U.placeholder;
U=zi(U,wI);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=kg({},(0,G.components)(4),{ScrollSeekPlaceholder:la});(0,G.components)(0,la);(0,p.scrollSeekConfiguration)(0,U)}),g(b.footer,"Footer","footer"),g(b.header,"Header","header"),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),g(b.emptyComponent,
"EmptyPlaceholder","emptyComponent"),g(b.GroupContainer,"Group","GroupContainer"),kg({},p,G,b)},pe(mB,zI)),BI=function(b){return ih.createElement("div",{style:{height:b.height}})},CI={position:nB(),zIndex:1,overflowAnchor:"none"},DI={overflowAnchor:"none"},pB=ih.memo(function(b){b=b.showTopList;b=void 0!==b&&b;var g=oj("listState"),p=xo("sizeRanges"),G=oj("useWindowScroll"),U=oj("customScrollParent"),la=xo("windowScrollContainerState"),pa=xo("scrollContainerState");G=U||G?la:pa;var Ga=oj("itemContent"),
Qa=oj("context"),Xa=oj("groupContent");la=oj("trackItemSizes");pa=oj("itemSize");var fb=oj("log"),mb=xo("gap");p=Ti(p,pa,la,b?Fi:G,fb,mb,U).callbackRef;U=ih.useState(0);var Gb=U[0],Wb=U[1];Jw("deviation",function(Ec){Gb!==Ec&&Wb(Ec)});U=oj("EmptyPlaceholder");var Mb=oj("ScrollSeekPlaceholder")||BI;G=oj("ListComponent");var dc=oj("ItemComponent"),hc=oj("GroupComponent"),Ub=oj("computeItemKey"),nc=oj("isSeeking"),Bc=0<oj("groupIndices").length;la=oj("paddingTopAddition");la=b?{}:{boxSizing:"border-box",
paddingTop:g.offsetTop+la,paddingBottom:g.offsetBottom,marginTop:Gb};return!b&&0===g.totalCount&&U?(0,ii.createElement)(U,ci(U,Qa)):(0,ii.createElement)(G,kg({},ci(G,Qa),{ref:p,style:la,"data-test-id":b?"virtuoso-top-item-list":"virtuoso-item-list"}),(b?g.topItems:g.items).map(function(Ec){var Sc=Ec.originalIndex,Jd=Ub(Sc+g.firstItemIndex,Ec.data,Qa);return nc?(0,ii.createElement)(Mb,kg({},ci(Mb,Qa),{key:Jd,index:Ec.index,height:Ec.size,type:Ec.type||"item"},"group"===Ec.type?{}:{groupIndex:Ec.groupIndex})):
"group"===Ec.type?(0,ii.createElement)(hc,kg({},ci(hc,Qa),{key:Jd,"data-index":Sc,"data-known-size":Ec.size,"data-item-index":Ec.index,style:CI}),Xa(Ec.index)):(0,ii.createElement)(dc,kg({},ci(dc,Qa),{key:Jd,"data-index":Sc,"data-known-size":Ec.size,"data-item-index":Ec.index,"data-item-group-index":Ec.groupIndex,style:DI}),Bc?Ga(Ec.index,Ec.groupIndex,Ec.data,Qa):Ga(Ec.index,Ec.data,Qa))}))}),EI={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},js=
{width:"100%",height:"100%",position:"absolute",top:0},FI={width:"100%",position:nB(),top:0},GI=ih.memo(function(){var b=oj("HeaderComponent"),g=xo("headerHeight"),p=oj("headerFooterTag"),G=Yf(function(la){return g(gl(la,"height"))}),U=oj("context");return b?(0,ii.createElement)(p,{ref:G},(0,ii.createElement)(b,ci(b,U))):null}),HI=ih.memo(function(){var b=oj("FooterComponent"),g=xo("footerHeight"),p=oj("headerFooterTag"),G=Yf(function(la){return g(gl(la,"height"))}),U=oj("context");return b?(0,ii.createElement)(p,
{ref:G},(0,ii.createElement)(b,ci(b,U))):null}),II=function(b){b=b.children;var g=(0,ii.useContext)(Lu),p=xo("viewportHeight"),G=xo("fixedItemHeight"),U=Yf(pi(p,function(la){return gl(la,"height")}));return ih.useEffect(function(){g&&(p(g.viewportHeight),G(g.itemHeight))},[g,p,G]),ih.createElement("div",{style:js,ref:U,"data-viewport-type":"element"},b)},JI=function(b){b=b.children;var g=(0,ii.useContext)(Lu),p=xo("windowViewportRect"),G=xo("fixedItemHeight"),U=oj("customScrollParent");U=hn(p,U);
return ih.useEffect(function(){g&&(G(g.itemHeight),p({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,p,G]),ih.createElement("div",{ref:U,style:js,"data-viewport-type":"window"},b)},KI=function(b){b=b.children;var g=oj("TopItemListComponent"),p=oj("headerHeight");p=kg({},FI,{marginTop:p+"px"});var G=oj("context");return(0,ii.createElement)(g||"div",{style:p,context:G},b)},Mu=Sm(AI,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ih.memo(function(b){var g=oj("useWindowScroll"),p=0<oj("topItemsIndexes").length,G=oj("customScrollParent"),U=G||g?JI:II;return ih.createElement(G||g?NI:MI,kg({},b),ih.createElement(U,null,ih.createElement(GI,null),ih.createElement(pB,null),ih.createElement(HI,
null)),p&&ih.createElement(KI,null,ih.createElement(pB,{showTopList:!0})))})),LI=Mu.Component,xo=Mu.usePublisher,oj=Mu.useEmitterValue,Jw=Mu.useEmitter,MI=Vn({usePublisher:xo,useEmitterValue:oj,useEmitter:Jw}),NI=dn({usePublisher:xo,useEmitterValue:oj,useEmitter:Jw}),qB={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},OI={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},rB=Math.round,sB=Math.ceil,Nu=Math.floor,Kw=Math.min,ks=Math.max,
PI=sh(function(b){var g=b[0],p=g.overscan,G=g.visibleRange,U=g.listBoundary,la=b[1];g=la.scrollTop;var pa=la.viewportHeight,Ga=la.scrollBy,Qa=la.scrollTo,Xa=la.smoothScrollTargetReached,fb=la.scrollContainerState,mb=la.footerHeight;la=la.headerHeight;var Gb=b[2],Wb=b[3],Mb=b[4],dc=Mb.propsReady,hc=Mb.didMount,Ub=b[5];Mb=Ub.windowViewportRect;var nc=Ub.windowScrollTo,Bc=Ub.useWindowScroll,Ec=Ub.customScrollParent;Ub=Ub.windowScrollContainerState;b=b[6];var Sc=Pd(0),Jd=Pd(0),Wd=Pd(qB),ye=Pd({height:0,
width:0}),Fe=Pd({height:0,width:0}),Ye=Uf(),jf=Uf(),Oe=Pd(0),Be=Pd(void 0),zd=Pd({row:0,column:0});be(Ie(Li(hc,Jd,Be),Wg(function(ad){return 0!==ad[1]}),$f(function(ad){return{items:Wn(0,ad[1]-1,ad[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Wd);be(Ie(Li(Bh(Sc),G,Bh(zd,Bo),Bh(Fe,function(ad,ed){return ad&&ad.width===ed.width&&ad.height===ed.height}),Be),eg(ye),$f(function(ad){var ed=ad[0],ld=ed[0],$d=ed[1],Pe=$d[0],kf=$d[1],Sf=ed[2],wf=ed[3],Gf=ed[4],jh=ad[1];ad=Sf.row;
var Ef=Sf.column;ed=wf.height;$d=wf.width;var lh=jh.width;if(0===ld||0===lh)return qB;if(0===$d)return kg({},OI,{items:Wn(0,0,Gf)});Ef=ks(1,Nu((lh+Ef)/($d+Ef)));Pe=Ef*Nu((Pe+ad)/(ed+ad));kf=Ef*sB((kf+ad)/(ed+ad))-1;kf=Kw(ld-1,ks(kf,Ef-1));Pe=Wn(Kw(kf,ks(0,Pe)),kf,Gf);wf=rm(jh,Sf,wf,Pe);Sf=wf.top;wf=wf.bottom;ld=sB(ld/Ef);return{items:Pe,offsetTop:Sf,offsetBottom:ld*ed+(ld-1)*ad-wf,top:Sf,bottom:wf,itemHeight:ed,itemWidth:$d}})),Wd);be(Ie(Be,Wg(function(ad){return void 0!==ad}),$f(function(ad){return ad.length})),
Sc);be(Ie(ye,$f(function(ad){return ad.height})),pa);be(Ie(Li(ye,Fe,Wd,zd),$f(function(ad){ad=rm(ad[0],ad[3],ad[1],ad[2].items);return[ad.top,ad.bottom]}),ig(mi)),U);G=qj(Ie(Bh(Wd),Wg(function(ad){return 0<ad.items.length}),eg(Sc),Wg(function(ad){var ed=ad[0].items;return ed[ed.length-1].index===ad[1]-1}),$f(function(ad){return ad[1]-1}),ig()));U=qj(Ie(Bh(Wd),Wg(function(ad){ad=ad.items;return 0<ad.length&&0===ad[0].index}),Pf(0),ig()));pa=qj(Ie(Bh(Wd),Wg(function(ad){return 0<ad.items.length}),$f(function(ad){ad=
ad.items;return{startIndex:ad[0].index,endIndex:ad[ad.length-1].index}}),ig(Yj)));be(pa,Wb.scrollSeekRangeChanged);be(Ie(Ye,eg(ye,Fe,Sc,zd),$f(function(ad){var ed=ad[1],ld=ad[2],$d=ad[3],Pe=ad[4],kf=Ch(ad[0]);ad=kf.align;var Sf=kf.behavior,wf=kf.offset;kf=kf.index;"LAST"===kf&&(kf=$d-1);$d=Tm(ed,Pe,ld,ks(0,kf,Kw($d-1,kf)));return"end"===ad?$d=rB($d-ed.height+ld.height):"center"===ad&&($d=rB($d-ed.height/2+ld.height/2)),wf&&($d+=wf),{top:$d,behavior:Sf}})),Qa);hc=Ri(Ie(Wd,$f(function(ad){return ad.offsetBottom+
ad.bottom})),0);return be(Ie(Mb,$f(function(ad){return{width:ad.visibleWidth,height:ad.visibleHeight}})),ye),kg({data:Be,totalCount:Sc,viewportDimensions:ye,itemDimensions:Fe,scrollTop:g,scrollHeight:jf,overscan:p,scrollBy:Ga,scrollTo:Qa,scrollToIndex:Ye,smoothScrollTargetReached:Xa,windowViewportRect:Mb,windowScrollTo:nc,useWindowScroll:Bc,customScrollParent:Ec,windowScrollContainerState:Ub,deviation:Oe,scrollContainerState:fb,footerHeight:mb,headerHeight:la,initialItemCount:Jd,gap:zd},Wb,{gridState:Wd,
totalListHeight:hc},Gb,{startReached:U,endReached:G,rangeChanged:pa,propsReady:dc},b)},pe(Hw,Pn,st,kB,nr,lB,lq)),QI=["placeholder"],RI=sh(function(){var b=Pd(function(Xa){return"Item "+Xa}),g=Pd({}),p=Pd(null),G=Pd("virtuoso-grid-item"),U=Pd("virtuoso-grid-list"),la=Pd(bh),pa=Pd("div"),Ga=Pd(Fi),Qa=function(Xa,fb){return void 0===fb&&(fb=null),Ri(Ie(g,$f(function(mb){return mb[Xa]}),ig()),fb)};return{context:p,itemContent:b,components:g,computeItemKey:la,itemClassName:G,listClassName:U,headerFooterTag:pa,
scrollerRef:Ga,FooterComponent:Qa("Footer"),HeaderComponent:Qa("Header"),ListComponent:Qa("List","div"),ItemComponent:Qa("Item","div"),ScrollerComponent:Qa("Scroller","div"),ScrollSeekPlaceholder:Qa("ScrollSeekPlaceholder","div")}}),SI=sh(function(b){function g(U,la,pa){be(Ie(U,eg(G.components),$f(function(Ga){var Qa,Xa=Ga[0];Ga=Ga[1];return console.warn("react-virtuoso: "+pa+" property is deprecated. Pass components."+la+" instead."),kg({},Ga,((Qa={})[la]=Xa,Qa))})),G.components)}var p=b[0],G=b[1];
b={item:xm(G.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Uf(),ScrollContainer:Uf(),ListContainer:Uf(),emptyComponent:Uf(),scrollSeek:Uf()};return dg(b.scrollSeek,function(U){var la=U.placeholder;U=zi(U,QI);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");la=kg({},(0,G.components)(4),{ScrollSeekPlaceholder:la});(0,G.components)(0,la);(0,p.scrollSeekConfiguration)(0,
U)}),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),kg({},p,G,b)},pe(PI,RI)),TI=ih.memo(function(){var b=Jl("gridState"),g=Jl("listClassName"),p=Jl("itemClassName"),G=Jl("itemContent"),U=Jl("computeItemKey"),la=Jl("isSeeking"),pa=To("scrollHeight"),Ga=Jl("ItemComponent"),Qa=Jl("ListComponent"),Xa=Jl("ScrollSeekPlaceholder"),fb=Jl("context"),mb=To("itemDimensions"),Gb=To("gap"),Wb=Jl("log"),Mb=Yf(function(dc){pa(dc.parentElement.parentElement.scrollHeight);
var hc=dc.firstChild;hc&&mb(hc.getBoundingClientRect());Gb({row:al("row-gap",getComputedStyle(dc).rowGap,Wb),column:al("column-gap",getComputedStyle(dc).columnGap,Wb)})});return(0,ii.createElement)(Qa,kg({ref:Mb,className:g},ci(Qa,fb),{style:{paddingTop:b.offsetTop,paddingBottom:b.offsetBottom}}),b.items.map(function(dc){var hc=U(dc.index,dc.data,fb);return la?(0,ii.createElement)(Xa,kg({key:hc},ci(Xa,fb),{index:dc.index,height:b.itemHeight,width:b.itemWidth})):(0,ii.createElement)(Ga,kg({},ci(Ga,
fb),{className:p,"data-index":dc.index,key:hc}),G(dc.index,dc.data,fb))}))}),UI=ih.memo(function(){var b=Jl("HeaderComponent"),g=To("headerHeight"),p=Jl("headerFooterTag"),G=Yf(function(la){return g(gl(la,"height"))}),U=Jl("context");return b?(0,ii.createElement)(p,{ref:G},(0,ii.createElement)(b,ci(b,U))):null}),VI=ih.memo(function(){var b=Jl("FooterComponent"),g=To("footerHeight"),p=Jl("headerFooterTag"),G=Yf(function(la){return g(gl(la,"height"))}),U=Jl("context");return b?(0,ii.createElement)(p,
{ref:G},(0,ii.createElement)(b,ci(b,U))):null}),WI=function(b){b=b.children;var g=(0,ii.useContext)(oB),p=To("itemDimensions"),G=To("viewportDimensions"),U=Yf(function(la){G(la.getBoundingClientRect())});return ih.useEffect(function(){g&&(G({height:g.viewportHeight,width:g.viewportWidth}),p({height:g.itemHeight,width:g.itemWidth}))},[g,G,p]),ih.createElement("div",{style:js,ref:U},b)},XI=function(b){b=b.children;var g=(0,ii.useContext)(oB),p=To("windowViewportRect"),G=To("itemDimensions"),U=Jl("customScrollParent");
U=hn(p,U);return ih.useEffect(function(){g&&(G({height:g.itemHeight,width:g.itemWidth}),p({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:g.viewportWidth}))},[g,p,G]),ih.createElement("div",{ref:U,style:js},b)},Lw=Sm(SI,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},ih.memo(function(b){b=kg({},b);var g=Jl("useWindowScroll"),p=Jl("customScrollParent"),G=p||g?XI:WI;return ih.createElement(p||g?ZI:YI,kg({},b),ih.createElement(G,null,ih.createElement(UI,null),ih.createElement(TI,null),ih.createElement(VI,null)))})),To=Lw.usePublisher,Jl=Lw.useEmitterValue,tB=Lw.useEmitter,YI=Vn({usePublisher:To,useEmitterValue:Jl,useEmitter:tB}),ZI=dn({usePublisher:To,useEmitterValue:Jl,useEmitter:tB}),$I=sh(function(){var b=Pd(function(Qa){return ih.createElement("td",
null,"Item $",Qa)}),g=Pd(null),p=Pd(null),G=Pd(null),U=Pd({}),la=Pd(bh),pa=Pd(Fi),Ga=function(Qa,Xa){return void 0===Xa&&(Xa=null),Ri(Ie(U,$f(function(fb){return fb[Qa]}),ig()),Xa)};return{context:g,itemContent:b,fixedHeaderContent:p,fixedFooterContent:G,components:U,computeItemKey:la,scrollerRef:pa,TableComponent:Ga("Table","table"),TableHeadComponent:Ga("TableHead","thead"),TableFooterComponent:Ga("TableFoot","tfoot"),TableBodyComponent:Ga("TableBody","tbody"),TableRowComponent:Ga("TableRow","tr"),
ScrollerComponent:Ga("Scroller","div"),EmptyPlaceholder:Ga("EmptyPlaceholder"),ScrollSeekPlaceholder:Ga("ScrollSeekPlaceholder"),FillerRow:Ga("FillerRow")}}),aJ=sh(function(b){return kg({},b[0],b[1])},pe(mB,$I)),bJ=function(b){return ih.createElement("tr",null,ih.createElement("td",{style:{height:b.height}}))},cJ=function(b){return ih.createElement("tr",null,ih.createElement("td",{style:{height:b.height,padding:0,border:0}}))},dJ=ih.memo(function(){var b=Vj("listState"),g=Uo("sizeRanges"),p=Vj("useWindowScroll"),
G=Vj("customScrollParent"),U=Uo("windowScrollContainerState"),la=Uo("scrollContainerState");p=G||p?U:la;var pa=Vj("itemContent");U=Vj("trackItemSizes");G=Ti(g,Vj("itemSize"),U,p,Vj("log"),void 0,G);g=G.callbackRef;var Ga=G.ref;G=ih.useState(0);var Qa=G[0],Xa=G[1];Nw("deviation",function(Ub){Qa!==Ub&&(Ga.current.style.marginTop=Ub+"px",Xa(Ub))});U=Vj("EmptyPlaceholder");var fb=Vj("ScrollSeekPlaceholder")||bJ;p=Vj("FillerRow")||cJ;G=Vj("TableBodyComponent");var mb=Vj("TableRowComponent"),Gb=Vj("computeItemKey"),
Wb=Vj("isSeeking");la=Vj("paddingTopAddition");var Mb=Vj("firstItemIndex"),dc=Vj("statefulTotalCount"),hc=Vj("context");if(0===dc&&U)return(0,ii.createElement)(U,ci(U,hc));U=b.offsetTop+la+Qa;la=b.offsetBottom;U=0<U?ih.createElement(p,{height:U,key:"padding-top"}):null;p=0<la?ih.createElement(p,{height:la,key:"padding-bottom"}):null;b=b.items.map(function(Ub){var nc=Ub.originalIndex,Bc=Gb(nc+Mb,Ub.data,hc);return Wb?(0,ii.createElement)(fb,kg({},ci(fb,hc),{key:Bc,index:Ub.index,height:Ub.size,type:Ub.type||
"item"})):(0,ii.createElement)(mb,kg({},ci(mb,hc),{key:Bc,"data-index":nc,"data-known-size":Ub.size,"data-item-index":Ub.index,style:{overflowAnchor:"none"}}),pa(Ub.index,Ub.data,hc))});return(0,ii.createElement)(G,kg({ref:g,"data-test-id":"virtuoso-item-list"},ci(G,hc)),[U].concat(b,[p]))}),eJ=function(b){b=b.children;var g=(0,ii.useContext)(Lu),p=Uo("viewportHeight"),G=Uo("fixedItemHeight"),U=Yf(pi(p,function(la){return gl(la,"height")}));return ih.useEffect(function(){g&&(p(g.viewportHeight),G(g.itemHeight))},
[g,p,G]),ih.createElement("div",{style:js,ref:U,"data-viewport-type":"element"},b)},fJ=function(b){b=b.children;var g=(0,ii.useContext)(Lu),p=Uo("windowViewportRect"),G=Uo("fixedItemHeight"),U=Vj("customScrollParent");U=hn(p,U);return ih.useEffect(function(){g&&(G(g.itemHeight),p({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,p,G]),ih.createElement("div",{ref:U,style:js,"data-viewport-type":"window"},b)},Mw=Sm(aJ,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ih.memo(function(b){var g=Vj("useWindowScroll"),p=Vj("customScrollParent"),G=Uo("fixedHeaderHeight"),U=Uo("fixedFooterHeight"),la=Vj("fixedHeaderContent"),pa=Vj("fixedFooterContent"),Ga=Vj("context");G=Yf(pi(G,function(mb){return gl(mb,
"height")}));var Qa=Yf(pi(U,function(mb){return gl(mb,"height")}));U=p||g?hJ:gJ;g=p||g?fJ:eJ;p=Vj("TableComponent");var Xa=Vj("TableHeadComponent"),fb=Vj("TableFooterComponent");la=la?ih.createElement(Xa,kg({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:G},ci(Xa,Ga)),la()):null;pa=pa?ih.createElement(fb,kg({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Qa},ci(fb,Ga)),pa()):null;return ih.createElement(U,kg({},b),ih.createElement(g,null,ih.createElement(p,kg({style:{borderSpacing:0}},
ci(p,Ga)),[la,ih.createElement(dJ,{key:"TableBody"}),pa])))})),Uo=Mw.usePublisher,Vj=Mw.useEmitterValue,Nw=Mw.useEmitter,gJ=Vn({usePublisher:Uo,useEmitterValue:Vj,useEmitter:Nw}),hJ=dn({usePublisher:Uo,useEmitterValue:Vj,useEmitter:Nw}),uB=nf(X(22)),lp=function(b){function g(p){p=b.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+p+" for more information.")||this;if(void 0===p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return p}tn(g,b);return g}(Yn(Error)),vB={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",
darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",
gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",
olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},iJ=/^#[a-fA-F0-9]{6}$/,jJ=/^#[a-fA-F0-9]{8}$/,kJ=/^#[a-fA-F0-9]{3}$/,lJ=/^#[a-fA-F0-9]{4}$/,Ow=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,mJ=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,
nJ=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,oJ=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Pw=function(b){return 7===b.length&&b[1]===b[2]&&b[3]===b[4]&&b[5]===b[6]?"#"+b[1]+b[3]+b[5]:b},pJ=Co(Do,Do.length,[]);nb=X(588);var Vo=nf(X(22)),go=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||
0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const p=b.ownerDocument,G=p.activeElement;G!==b&&b.focus();p.execCommand("insertText",!1,g)||go.insertTextFirefox(b,g);G===p.body?b.blur():G instanceof HTMLElement&&G!==b&&G.focus()}static set(b,g){b.select();go.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:p}=b;return b.value.slice(g?g:void 0,p?p:void 0)}static wrapSelection(b,g,p){const {selectionStart:G,
selectionEnd:U}=b,la=go.getSelection(b);go.insert(b,g+la+(null!=p?p:g));b.selectionStart=(G||0)+g.length;b.selectionEnd=(U||0)+g.length}static replace(b,g,p){let G=0;b.value.replace(g,(...U)=>{const la=G+U[U.length-2],pa=U[0].length;b.selectionStart=la;b.selectionEnd=la+pa;U="string"===typeof p?p:p(...U);go.insert(b,U);b.selectionStart=la;G+=U.length-pa;return U})}static findLineEnd(b,g){const p=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(p)?g:p+1}static indent(b){var g;const {selectionStart:p,
selectionEnd:G,value:U}=b;var la=U.slice(p,G);if((la=null==(g=/\n/g.exec(la))?void 0:g.length)&&0<la){g=U.lastIndexOf("\n",p-1)+1;var pa=b.value.slice(g,G-1);la=pa.replace(/^|\n/g,"$\x26  ");pa=la.length-pa.length;b.setSelectionRange(g,G-1);go.insert(b,la);b.setSelectionRange(p+1,G+pa)}else go.insert(b,"  ")}static unindent(b){const {selectionStart:g,selectionEnd:p,value:G}=b;var U=G.lastIndexOf("\n",g-1)+1;const la=go.findLineEnd(G,p);var pa=b.value.slice(U,la);const Ga=pa.replace(/(^|\n)(\t| {1,2})/g,
"$1");pa=pa.length-Ga.length;b.setSelectionRange(U,la);go.insert(b,Ga);U=(U=/\t| {1,2}/.exec(G.slice(U,g)))?U[0].length:0;b.setSelectionRange(g-U,Math.max(g-U,p-pa))}};nb=X(588);var Ou=b=>b.stopPropagation(),Pu=Vo.memo(function({font:b,text:g,color:p,fontStyle:G,fontSize:U,fontWeight:la,offsetX:pa=0,offsetY:Ga=0,scale:Qa=1,isEditing:Xa=!1,pointerEvents:fb=!1,onBlur:mb,onChange:Gb}){const Wb=Vo.useRef(null),Mb=Vo.useRef(!1),dc=Vo.useCallback(Sc=>{Gb(as.normalizeText(Sc.currentTarget.value))},[Gb]),
hc=Vo.useCallback(Sc=>{if("Escape"!==Sc.key)if("Tab"===Sc.key&&0===g.length)Sc.preventDefault();else{if("Meta"!==Sc.key&&!Sc.metaKey)Sc.stopPropagation();else if("z"===Sc.key&&Sc.metaKey){document.execCommand(Sc.shiftKey?"redo":"undo",!1);Sc.stopPropagation();Sc.preventDefault();return}"Tab"===Sc.key&&(Sc.preventDefault(),Sc.shiftKey?go.unindent(Sc.currentTarget):go.indent(Sc.currentTarget),null==Gb?void 0:Gb(as.normalizeText(Sc.currentTarget.value)))}},[Gb]),Ub=Vo.useCallback(Sc=>{Xa&&(Sc.currentTarget.setSelectionRange(0,
0),null==mb?void 0:mb())},[mb]),nc=Vo.useCallback(Sc=>{Xa&&Mb.current&&document.activeElement===Sc.currentTarget&&Sc.currentTarget.select()},[Xa]),Bc=Vo.useCallback(Sc=>{Xa&&Sc.stopPropagation()},[Xa]);Vo.useEffect(()=>{Xa&&requestAnimationFrame(()=>{Mb.current=!0;const Sc=Wb.current;Sc&&(Sc.focus(),Sc.select())})},[Xa,mb]);const Ec=Vo.useRef(null);Vo.useLayoutEffect(()=>{const Sc=Ec.current;if(Sc){var Jd=Yh(g||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:U,lineHeight:1,fontWeight:la},
4);Sc.style.transform=`scale(${Qa}, ${Qa}) translate(${pa}px, ${Ga}px)`;Sc.style.width=Jd[0]+1+"px";Sc.style.height=Jd[1]+1+"px"}},[g,la,U,Ga,pa,Qa]);return(0,nb.jsx)("div",{className:"tl-text-label-wrapper",children:(0,nb.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Ec,style:{font:b,fontStyle:G,fontSize:U,fontWeight:la,color:p,pointerEvents:fb?"all":"none",userSelect:Xa?"text":"none"},children:[Xa?(0,nb.jsx)("textarea",{ref:Wb,style:{font:b,color:p,fontStyle:G,fontSize:U,fontWeight:la},
className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:g,color:p,onFocus:nc,onChange:dc,onKeyDown:hc,onBlur:Ub,onPointerDown:Bc,onContextMenu:Ou,onCopy:Ou,onPaste:Ou,onCut:Ou}):g,"​"]})})});nb=X(588);var wB={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ls=class extends yn{constructor(){super(...arguments);ib(this,
"canEdit",!0);ib(this,"ReactComponent",df(({events:b,isErasing:g,isBinding:p,isSelected:G,isEditing:U,onEditingEnd:la})=>{const {props:{size:[pa,Ga],stroke:Qa,fill:Xa,noFill:fb,strokeWidth:mb,strokeType:Gb,borderRadius:Wb,opacity:Mb,label:dc,italic:hc,fontWeight:Ub,fontSize:nc}}=this;var Bc=dc||U?Yh(dc,{fontFamily:"var(--ls-font-family)",fontSize:nc,lineHeight:1,fontWeight:Ub},4):[0,0];const Ec=je.mul(this.props.size,.5);Bc=Math.max(.5,Math.min(1,pa/Bc[0],Ga/Bc[1]));const Sc=this.getBounds(),Jd=uB.useMemo(()=>
je.sub(Ec,je.toFixed([Sc.width/2,Sc.height/2])),[Sc,Bc,Ec]),Wd=uB.useCallback(ye=>{var Fe;null==(Fe=this.update)?void 0:Fe.call(this,{label:ye})},[dc]);return(0,nb.jsxs)("div",rf(oe({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,nb.jsx)(Pu,{font:"20px / 1 var(--ls-font-family)",text:dc,color:$g(Qa,"text"),offsetX:Jd[0],offsetY:Jd[1],fontSize:nc,scale:Bc,isEditing:U,onChange:Wd,onBlur:la,fontStyle:hc?"italic":"normal",fontWeight:Ub,pointerEvents:!!dc}),
(0,nb.jsxs)(to,{opacity:g?.2:Mb,children:[p&&(0,nb.jsx)(no,{mode:"svg",strokeWidth:mb,size:[pa,Ga]}),(0,nb.jsx)("rect",{className:G||!fb?"tl-hitarea-fill":"tl-hitarea-stroke",x:mb/2,y:mb/2,rx:Wb,ry:Wb,width:Math.max(.01,pa-mb),height:Math.max(.01,Ga-mb),pointerEvents:"all"}),(0,nb.jsx)("rect",{x:mb/2,y:mb/2,rx:Wb,ry:Wb,width:Math.max(.01,pa-mb),height:Math.max(.01,Ga-mb),strokeWidth:mb,stroke:$g(Qa,"stroke"),strokeDasharray:"dashed"===Gb?"8 2":void 0,fill:fb?"none":$g(Xa,"background")})]})]}))}));
ib(this,"setScaleLevel",b=>$h(this,null,function*(){this.update({scaleLevel:b,fontSize:wB[null!=b?b:"md"],strokeWidth:wB[null!=b?b:"md"]/10});this.onResetBounds()}));ib(this,"ReactIndicator",df(()=>{const {props:{size:[b,g],borderRadius:p}}=this;return(0,nb.jsx)("g",{children:(0,nb.jsx)("rect",{width:b,height:g,rx:p,ry:p,fill:"transparent"})})}));ib(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));void 0!==b.borderRadius&&(b.borderRadius=
Math.max(0,b.borderRadius));return dm(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};ib(ls,"id","box");ib(ls,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});de([Pg],ls.prototype,"scaleLevel",1);de([og],ls.prototype,"setScaleLevel",2);var xB=nf(X(22));nb=X(588);var yB={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},
ms=class extends Hv{constructor(){super(...arguments);ib(this,"canEdit",!0);ib(this,"ReactComponent",df(({isSelected:b,isErasing:g,events:p,isEditing:G,onEditingEnd:U})=>{const {size:[la,pa],stroke:Ga,fill:Qa,noFill:Xa,strokeWidth:fb,strokeType:mb,opacity:Gb,label:Wb,italic:Mb,fontWeight:dc,fontSize:hc}=this.props;var Ub=Wb||G?Yh(Wb,{fontFamily:"var(--ls-font-family)",fontSize:hc,lineHeight:1,fontWeight:dc},4):[0,0];const nc=je.mul(this.props.size,.5);Ub=Math.max(.5,Math.min(1,la/Ub[0],pa/Ub[1]));
const Bc=this.getBounds(),Ec=xB.useMemo(()=>je.sub(nc,je.toFixed([Bc.width/2,Bc.height/2])),[Bc,Ub,nc]),Sc=xB.useCallback(Jd=>{var Wd;null==(Wd=this.update)?void 0:Wd.call(this,{label:Jd})},[Wb]);return(0,nb.jsxs)("div",rf(oe({},p),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,nb.jsx)(Pu,{font:"18px / 1 var(--ls-font-family)",text:Wb,color:$g(Ga,"text"),offsetX:Ec[0],offsetY:Ec[1],scale:Ub,isEditing:G,onChange:Sc,onBlur:U,fontStyle:Mb?"italic":"normal",fontSize:hc,fontWeight:dc,
pointerEvents:!!Wb}),(0,nb.jsxs)(to,rf(oe({},p),{opacity:g?.2:Gb,children:[(0,nb.jsx)("ellipse",{className:b||!Xa?"tl-hitarea-fill":"tl-hitarea-stroke",cx:la/2,cy:pa/2,rx:Math.max(.01,(la-fb)/2),ry:Math.max(.01,(pa-fb)/2)}),(0,nb.jsx)("ellipse",{cx:la/2,cy:pa/2,rx:Math.max(.01,(la-fb)/2),ry:Math.max(.01,(pa-fb)/2),strokeWidth:fb,stroke:$g(Ga,"stroke"),strokeDasharray:"dashed"===mb?"8 2":void 0,fill:Xa?"none":$g(Qa,"background")})]}))]}))}));ib(this,"setScaleLevel",b=>$h(this,null,function*(){this.update({scaleLevel:b,
fontSize:yB[null!=b?b:"md"],strokeWidth:yB[null!=b?b:"md"]/10});this.onResetBounds()}));ib(this,"ReactIndicator",df(()=>{const {size:[b,g]}=this.props;return(0,nb.jsx)("g",{children:(0,nb.jsx)("ellipse",{cx:b/2,cy:g/2,rx:b/2,ry:g/2,strokeWidth:2,fill:"transparent"})})}));ib(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return dm(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {size:[g,
p],stroke:G,fill:U,noFill:la,strokeWidth:pa,strokeType:Ga,opacity:Qa}=this.props;return(0,nb.jsxs)("g",{opacity:Qa,children:[(0,nb.jsx)("ellipse",{className:la?"tl-hitarea-stroke":"tl-hitarea-fill",cx:g/2,cy:p/2,rx:Math.max(.01,(g-pa)/2),ry:Math.max(.01,(p-pa)/2)}),(0,nb.jsx)("ellipse",{cx:g/2,cy:p/2,rx:Math.max(.01,(g-pa)/2),ry:Math.max(.01,(p-pa)/2),strokeWidth:pa,stroke:$g(G,"stroke"),strokeDasharray:"dashed"===Ga?"8 2":void 0,fill:la?"none":$g(U,"background")})]})}};ib(ms,"id","ellipse");ib(ms,
"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});de([Pg],ms.prototype,"scaleLevel",1);de([og],ms.prototype,"setScaleLevel",2);nb=X(588);var Qw=class extends $t{constructor(){super(...arguments);ib(this,"ReactComponent",df(({events:b})=>{const g=this.getBounds(),p=af(),G=p.selectedShapesArray.some(la=>p.shapesInGroups([this]).includes(la)),U=this.ReactIndicator;
return(0,nb.jsxs)(to,rf(oe({},b),{children:[(0,nb.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,g.width-2),height:Math.max(.01,g.height-2),pointerEvents:"all"}),G&&(0,nb.jsx)("g",{stroke:"var(--color-selectedFill)",children:(0,nb.jsx)(U,{})})]}))}));ib(this,"ReactIndicator",df(()=>{const b=this.getBounds();return(0,nb.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:b.width+16,height:b.height+16,fill:"transparent"})}))}};ib(Qw,"id","group");ib(Qw,"defaultProps",{id:"group",
type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});nb=X(588);var qJ={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},or=class extends Gr{constructor(b={}){super(b);ib(this,"ReactComponent",df(({events:g,isErasing:p})=>{const {pointsPath:G,props:{stroke:U,strokeWidth:la,opacity:pa}}=this;return(0,nb.jsx)(to,rf(oe({},g),{opacity:p?.2:1,children:(0,nb.jsx)("path",{d:G,strokeWidth:16*la,stroke:$g(U,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:pa})}))}));
ib(this,"setScaleLevel",g=>$h(this,null,function*(){this.update({scaleLevel:g,strokeWidth:qJ[null!=g?g:"md"]});this.onResetBounds()}));ib(this,"ReactIndicator",df(()=>{const {pointsPath:g}=this;return(0,nb.jsx)("path",{d:g,fill:"none"})}));ib(this,"validateProps",g=>{g=dm(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});zg(this)}get pointsPath(){const {points:b}=this.props;return tp.getCurvedPathForPoints(b)}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?
b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:p,opacity:G}}=this;return(0,nb.jsx)("path",{d:b,strokeWidth:16*p,stroke:$g(g,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:G})}};ib(or,"id","highlighter");ib(or,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});de([Pg],or.prototype,"pointsPath",1);de([Pg],
or.prototype,"scaleLevel",1);de([og],or.prototype,"setScaleLevel",2);var Rw=nf(X(22));nb=X(588);var Sw={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},mq=class extends yn{constructor(){super(...arguments);ib(this,"canChangeAspectRatio",!0);ib(this,"canFlip",!1);ib(this,"canEdit",!0);ib(this,"htmlAnchorRef",Rw.createRef());ib(this,"setScaleLevel",b=>$h(this,null,function*(){var g;const p=je.mul(this.props.size,Sw[null!=b?b:"md"]/Sw[null!=(g=this.props.scaleLevel)?g:"md"]);this.update({scaleLevel:b});yield Nj();
this.update({size:p})}));ib(this,"onResetBounds",b=>{var g;if(this.htmlAnchorRef.current){const p=this.htmlAnchorRef.current.getBoundingClientRect(),[G,U]=je.div([p.width,p.height],null!=(g=null==b?void 0:b.zoom)?g:1);this.update({size:[Math.max(Math.min(G||400,1400),10),Math.max(Math.min(U||400,1400),10)]})}return this});ib(this,"ReactComponent",df(({events:b,isErasing:g,isEditing:p})=>{const {props:{html:G,scaleLevel:U}}=this,la=Vl(),pa=af(),Ga=pa.selectedIds.has(this.id),Qa=la||Ga&&!p||"select"!==
pa.selectedTool.id,Xa=Rw.useCallback(mb=>{Qa||mb.stopPropagation()},[Qa]),fb=Sw[null!=U?U:"md"];Rw.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:pa.viewport.camera.zoom}),pa.persist(!0))},[]);return(0,nb.jsx)(uo,rf(oe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,nb.jsx)("div",{onWheelCapture:Xa,onPointerDown:Xa,onPointerUp:Xa,className:"tl-html-container",style:{pointerEvents:la||!p&&!Ga?"none":"all",overflow:p?"auto":"hidden",width:`calc(100% / ${fb})`,
height:`calc(100% / ${fb})`,transform:`scale(${fb})`},children:(0,nb.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:G.trim()}})})}))}));ib(this,"ReactIndicator",df(()=>{const {props:{size:[b,g]}}=this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent"})}));ib(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return dm(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?
b:"md"}};ib(mq,"id","html");ib(mq,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});de([Pg],mq.prototype,"scaleLevel",1);de([og],mq.prototype,"setScaleLevel",2);var zB=nf(X(22));nb=X(588);var pr=class extends yn{constructor(){super(...arguments);ib(this,"frameRef",zB.createRef());ib(this,"canEdit",!0);ib(this,"onIFrameSourceChange",b=>{this.update({url:b})});ib(this,"reload",()=>{var b,g;this.frameRef.current&&(this.frameRef.current.src=null==(g=null==(b=this.frameRef)?
void 0:b.current)?void 0:g.src)});ib(this,"ReactComponent",df(({events:b,isErasing:g,isEditing:p})=>{zB.useRef(null);return(0,nb.jsx)(uo,rf(oe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,nb.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:p?"all":"none",userSelect:"none"},children:this.props.url&&(0,nb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,nb.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",
width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin"})})})}))}));ib(this,"ReactIndicator",df(()=>{const {props:{size:[b,g]}}=this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}))}};ib(pr,"id","iframe");ib(pr,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});de([og],pr.prototype,"onIFrameSourceChange",2);de([og],pr.prototype,"reload",2);var rJ=nf(X(22));nb=X(588);var Qu=class extends Iv{constructor(){super(...arguments);
ib(this,"ReactComponent",df(({events:b,isErasing:g,isBinding:p,asset:G})=>{const {props:{opacity:U,objectFit:la,clipping:pa,size:[Ga,Qa]}}=this,[Xa,fb,mb,Gb]=Array.isArray(pa)?pa:[pa,pa,pa,pa],{handlers:Wb}=rJ.useContext(an);return(0,nb.jsxs)(uo,rf(oe({},b),{opacity:g?.2:U,children:[p&&(0,nb.jsx)(no,{mode:"html",strokeWidth:4,size:[Ga,Qa]}),(0,nb.jsx)("div",{"data-asset-loaded":!!G,className:"tl-image-shape-container",children:G?(0,nb.jsx)("img",{src:Wb?Wb.makeAssetUrl(G.src):G.src,draggable:!1,style:{position:"relative",
top:-Xa,left:-Gb,width:Ga+(Gb-fb),height:Qa+(Xa-mb),objectFit:la}}):"Asset is missing"})]}))}));ib(this,"ReactIndicator",df(()=>{const {props:{size:[b,g]}}=this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}getShapeSVGJsx({assets:b}){var g,p;const G=this.getBounds(),{assetId:U,clipping:la}=this.props;if(b=b.find(pa=>pa.id===U)){Array.isArray(la);const pa=null==(p=null==(g=window.logseq)?void 0:g.api)?void 0:p.make_asset_url;return(0,nb.jsx)("image",{width:G.width,height:G.height,
href:pa?pa(b.src):b.src})}return super.getShapeSVGJsx({})}};ib(Qu,"id","image");ib(Qu,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Tw=nf(X(22)),sJ=nf(X(22));nb=X(588);nb=X(588);var AB={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},tJ=sJ.memo(function({style:b,start:g,end:p,decorationStart:G,decorationEnd:U,scaleLevel:la}){const pa=je.dist(g,p);if(2>pa)return null;const {strokeWidth:Ga}=b,Qa=
1+Ga*AB[null!=la?la:"md"]/10,Xa="M"+je.toFixed(g)+"L"+je.toFixed(p);la=Math.min(pa/3,Ga*AB[null!=la?la:"md"]);G=G?Zn(g,p,la):null;U=U?Zn(p,g,la):null;return(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)("path",{className:"tl-stroke-hitarea",d:Xa}),(0,nb.jsx)("path",{d:Xa,strokeWidth:Qa,stroke:b.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===b.strokeType?"8 4":void 0,pointerEvents:"stroke"}),G&&(0,nb.jsx)(Um,{left:G.left,middle:g,right:G.right,stroke:b.stroke,strokeWidth:Qa}),
U&&(0,nb.jsx)(Um,{left:U.left,middle:p,right:U.right,stroke:b.stroke,strokeWidth:Qa})]})});nb=X(588);nb=X(588);var uJ={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ns=class extends Qs{constructor(){super(...arguments);ib(this,"hideSelection",!0);ib(this,"canEdit",!0);ib(this,"ReactComponent",df(({events:b,isErasing:g,isEditing:p,onEditingEnd:G})=>{const {stroke:U,handles:{start:la,end:pa},opacity:Ga,label:Qa,italic:Xa,fontWeight:fb,fontSize:mb,id:Gb}=this.props,Wb=Qa||p?Yh(Qa||"Enter text",{fontFamily:"var(--ls-font-family)",
fontSize:mb,lineHeight:1,fontWeight:fb},6):[0,0],Mb=je.med(la.point,pa.point);var dc=je.dist(la.point,pa.point);dc=Math.max(.5,Math.min(1,Math.max(dc/(Wb[1]+128),dc/(Wb[0]+128))));const hc=this.getBounds(),Ub=Tw.useMemo(()=>je.sub(Mb,je.toFixed([hc.width/2,hc.height/2])),[hc,dc,Mb]),nc=Tw.useCallback(Bc=>{var Ec;null==(Ec=this.update)?void 0:Ec.call(this,{label:Bc})},[Qa]);return(0,nb.jsxs)("div",rf(oe({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-line-container",children:[(0,nb.jsx)(Pu,
{font:"20px / 1 var(--ls-font-family)",text:Qa,fontSize:mb,color:$g(U,"text"),offsetX:Ub[0],offsetY:Ub[1],scale:dc,isEditing:p,onChange:nc,onBlur:G,fontStyle:Xa?"italic":"normal",fontWeight:fb,pointerEvents:!!Qa}),(0,nb.jsxs)(to,{opacity:g?.2:Ga,id:Gb+"_svg",children:[(0,nb.jsx)(Cl,{id:Gb,bounds:hc,labelSize:Wb,offset:Ub,scale:dc}),(0,nb.jsx)("g",{pointerEvents:"none",mask:Qa||p?`url(#${Gb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));ib(this,"setScaleLevel",b=>$h(this,null,function*(){this.update({scaleLevel:b,
fontSize:uJ[null!=b?b:"md"]});this.onResetBounds()}));ib(this,"ReactIndicator",df(({isEditing:b})=>{const {id:g,decorations:p,label:G,strokeWidth:U,fontSize:la,fontWeight:pa,handles:{start:Ga,end:Qa}}=this.props,Xa=this.getBounds(),fb=G||b?Yh(G,{fontFamily:"var(--ls-font-family)",fontSize:la,lineHeight:1,fontWeight:pa},6):[0,0],mb=je.med(Ga.point,Qa.point);var Gb=je.dist(Ga.point,Qa.point);Gb=Math.max(.5,Math.min(1,Math.max(Gb/(fb[1]+128),Gb/(fb[0]+128))));const Wb=Tw.useMemo(()=>je.sub(mb,je.toFixed([Xa.width/
2,Xa.height/2])),[Xa,Gb,mb]);return(0,nb.jsxs)("g",{children:[(0,nb.jsx)("path",{mask:G?`url(#${g}_clip)`:"",d:Mo({strokeWidth:U},Ga.point,Qa.point,null==p?void 0:p.start,null==p?void 0:p.end)}),G&&!b&&(0,nb.jsx)("rect",{x:Xa.width/2-fb[0]/2*Gb+Wb[0],y:Xa.height/2-fb[1]/2*Gb+Wb[1],width:fb[0]*Gb,height:fb[1]*Gb,rx:4*Gb,ry:4*Gb,fill:"transparent"})]})}));ib(this,"validateProps",b=>dm(this,b))}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx({preview:b}){const {stroke:g,
fill:p,strokeWidth:G,strokeType:U,decorations:la,label:pa,scaleLevel:Ga,handles:{start:Qa,end:Xa}}=this.props,fb=je.med(Qa.point,Xa.point);return(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)(tJ,{style:{stroke:$g(g,"text"),fill:p,strokeWidth:G,strokeType:U},scaleLevel:Ga,start:Qa.point,end:Xa.point,decorationStart:null==la?void 0:la.start,decorationEnd:null==la?void 0:la.end}),b&&(0,nb.jsx)(nb.Fragment,{children:(0,nb.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${fb[0]}, ${fb[1]})`,
textAnchor:"middle",fill:$g(g,"text"),stroke:$g(g,"text"),children:pa})})]})}};ib(ns,"id","line");ib(ns,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});de([Pg],ns.prototype,"scaleLevel",1);de([og],ns.prototype,"setScaleLevel",2);var Qn=nf(X(22));nb=
X(588);var tt={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},vJ=df(({type:b,fill:g,opacity:p,children:G})=>{const U="var(--ls-secondary-background-color)"!==g?$g(g,"background"):"var(--ls-tertiary-background-color)";g=g&&"var(--ls-secondary-background-color)"!==g?hg(g)?`var(--ls-highlight-color-${g})`:g:"var(--ls-secondary-background-color)";return(0,nb.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===b?"page":"block"}`,children:[(0,nb.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",
style:{opacity:p,background:"P"===b?U:`linear-gradient(0deg, ${g}, ${U})`}}),(0,nb.jsx)("div",{className:"relative",children:G})]})}),Kl=class extends yn{constructor(b={}){var g;super(b);ib(this,"hideRotateHandle",!0);ib(this,"canChangeAspectRatio",!0);ib(this,"canFlip",!0);ib(this,"canEdit",!0);ib(this,"persist",null);ib(this,"initialHeightCalculated",!0);ib(this,"getInnerHeight",null);ib(this,"toggleCollapsed",()=>$h(this,null,function*(){var p;const G=!this.collapsed;if("B"===this.props.blockType){if(this.update({compact:G}),
this.canResize[1]=!G,!G)this.onResetBounds()}else{const U=this.props.size[1];this.canResize[1]=!G;this.update({isAutoResizing:!G,collapsed:G,size:[this.props.size[0],G?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:G?U:this.props.collapsedHeight})}null==(p=this.persist)?void 0:p.call(this)}));ib(this,"setScaleLevel",p=>$h(this,null,function*(){var G;const U=je.mul(this.props.size,tt[null!=p?p:"md"]/tt[null!=(G=this.props.scaleLevel)?G:"md"]);this.update({scaleLevel:p});yield Nj();
this.update({size:U})}));ib(this,"onResetBounds",p=>{p=this.getAutoResizeHeight();null!==p&&1<Math.abs(p-this.props.size[1])&&(this.update({size:[this.props.size[0],p]}),this.initialHeightCalculated=!0);return this});ib(this,"onResize",(p,G)=>{var U;const {bounds:la,rotation:pa,scale:[Ga,Qa]}=G;p=[...this.scale];0>Ga&&(p[0]*=-1);0>Qa&&(p[1]*=-1);G=la.height;this.props.isAutoResizing&&(G=null!=(U=this.getAutoResizeHeight())?U:G);return this.update({point:[la.minX,la.minY],size:[Math.max(1,la.width),
Math.max(1,G)],scale:p,rotation:pa})});ib(this,"PortalComponent",df(({})=>{const {props:{pageId:p,fill:G,opacity:U}}=this,{renderers:la}=Qn.useContext(an),pa=af(),Ga=Qn.useRef(null),[,Qa]=this.useComponentSize(Ga,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==la||!la.Page)return null;const {Page:Xa,Block:fb}=la,[mb,Gb]=Qn.useState(!1);Qn.useEffect(()=>{var Wb,Mb;if(this.props.isAutoResizing){const dc=(null!=(Mb=null==(Wb=this.getInnerHeight)?
void 0:Wb.call(this))?Mb:Qa)+this.getHeaderHeight();Qa&&1<Math.abs(dc-this.props.size[1])&&(this.update({size:[this.props.size[0],dc]}),mb&&pa.persist(!0))}},[Qa,this.props.isAutoResizing]);Qn.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();pa.persist(!0)})},[this.initialHeightCalculated]);Qn.useEffect(()=>{setTimeout(function(){Gb(!0)})},[]);return(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>
pa.viewport.camera.zoom?"optimizeSpeed":"auto",background:G&&"var(--ls-secondary-background-color)"!==G?hg(G)?`var(--ls-highlight-color-${G})`:G:"var(--ls-secondary-background-color)",opacity:U}}),(0,nb.jsx)("div",{ref:Ga,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(mb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,nb.jsx)(fb,{blockId:p}):(0,nb.jsx)(Xa,{pageName:p}))})]})}));ib(this,"ReactComponent",
df(p=>{var G;const {events:U,isErasing:la,isEditing:pa,isBinding:Ga}=p,{props:{opacity:Qa,pageId:Xa,fill:fb,scaleLevel:mb,strokeWidth:Gb,size:Wb}}=this,Mb=af(),{renderers:dc,handlers:hc}=Qn.useContext(an);this.persist=()=>Mb.persist();const Ub=Vl(),nc=Mb.selectedIds.has(this.id)&&1===Mb.selectedIds.size,Bc=Mb.isIn("logseq-portal.creating")&&!Xa,Ec=(Ub||nc&&!pa||"select"!==Mb.selectedTool.id)&&!Bc,Sc=Qn.useCallback(ad=>{Ec||ad.stopPropagation()},[Ec]),Jd=1===Mb.selectedShapesArray.length&&Mb.selectedShapesArray.some(ad=>
"logseq-portal"===ad.type&&ad.props.id!==this.props.id&&Xa&&ad.props.pageId===Xa),Wd=tt[null!=mb?mb:"md"];Qn.useEffect(()=>this.props.collapsed&&pa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[pa,this.props.collapsed]);Qn.useEffect(()=>{if(Bc){const ad=[Mb.viewport.bounds.width,Mb.viewport.bounds.height],ed=Mb.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(ed[0]>ad[0]-400||ed[1]>ad[1]-
240||1.5<Mb.viewport.camera.zoom||.5>Mb.viewport.camera.zoom)&&Mb.viewport.zoomToBounds(rf(oe({},this.bounds),{minY:this.bounds.maxY+25}))}},[Mb.viewport.bounds.height.toFixed(2)]);const ye=Qn.useCallback(ad=>{this.initialHeightCalculated=!1;const ed=ek(ad)?"B":"P";this.update({pageId:ad,size:[400,320],blockType:ed,compact:"B"===ed});Mb.selectTool("select");Mb.history.resume();Mb.history.persist()},[]),Fe=this.PortalComponent;var Ye=Qn.useMemo(()=>{var ad;if(Xa&&"B"===this.props.blockType)return null==
(ad=null==hc?void 0:hc.queryBlockByUUID(Xa))?void 0:ad.content},[null==hc?void 0:hc.queryBlockByUUID,Xa]);Ye="B"===this.props.blockType&&"string"!==typeof Ye;const jf=(!this.props.collapsed||pa)&&!Ye;if(null==dc||!dc.Page)return null;const {Breadcrumb:Oe,PageName:Be}=dc,zd={width:`calc(100% / ${Wd})`,height:`calc(100% / ${Wd})`,opacity:la?.2:1};1!==Wd&&(zd.transform=`scale(${Wd})`);return(0,nb.jsxs)(uo,rf(oe({style:{pointerEvents:"all"}},U),{children:[Ga&&(0,nb.jsx)(no,{mode:"html",strokeWidth:Gb,
size:Wb}),(0,nb.jsx)("div",{"data-inner-events":!Ec,onWheelCapture:Sc,onPointerDown:Sc,onPointerUp:Sc,style:{width:"100%",height:"100%",pointerEvents:Ub||!pa&&!nc?"none":"all"},children:Bc?(0,nb.jsx)(QB,{onChange:ye,onAddBlock:ad=>{setTimeout(()=>{var ed,ld,$d;Mb.api.editShape(this);null==($d=null==(ld=null==(ed=window.logseq)?void 0:ed.api)?void 0:ld.edit_block)?void 0:$d.call(ld,ad)})},placeholder:"Create or search your graph..."}):(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsxs)("div",{className:"tl-logseq-portal-container",
"data-collapsed":this.collapsed,"data-page-id":Xa,"data-portal-selected":Jd,"data-editing":pa,style:zd,children:[!this.props.compact&&!Ye&&(0,nb.jsx)(vJ,{type:null!=(G=this.props.blockType)?G:"P",fill:fb,opacity:Qa,children:"P"===this.props.blockType?(0,nb.jsx)(Be,{pageName:Xa}):(0,nb.jsx)(Oe,{blockId:Xa})}),Ye&&(0,nb.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),jf&&(0,nb.jsx)(Fe,oe({},p))]}),!Mb.readOnly&&(0,nb.jsx)(bA,{active:!!this.collapsed,style:{opacity:nc?1:0},
icon:"B"===this.props.blockType?"block":"page",onClick:this.toggleCollapsed,otherIcon:"whiteboard-element"})]})})]}))}));ib(this,"ReactIndicator",df(()=>{const p=this.getBounds();return(0,nb.jsx)("rect",{width:p.width,height:p.height,fill:"transparent",rx:8,ry:8})}));ib(this,"validateProps",p=>{var G;if(void 0!==p.size){const U=tt[null!=(G=this.props.scaleLevel)?G:"md"];p.size[0]=Math.max(p.size[0],60*U);p.size[1]=Math.max(p.size[1],40*U)}return dm(this,p)});zg(this);b.collapsed&&Object.assign(this.canResize,
[!0,!1]);0===(null==(g=b.size)?void 0:g[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(b){return b?/^\(\(.*\)\)$/.test(b)&&40===b.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}useComponentSize(b,g=""){const [p,G]=Qn.useState([0,0]),U=af();Qn.useEffect(()=>{if(null==b?0:b.current){const la=g?b.current.querySelector(g):b.current;if(la){const pa=()=>{const {width:Qa,
height:Xa}=la.getBoundingClientRect(),fb=je.div([Qa,Xa],U.viewport.camera.zoom);G(fb);return fb};pa();this.getInnerHeight=()=>pa()[1];const Ga=new ResizeObserver(()=>{pa()});Ga.observe(la);return()=>{Ga.disconnect()}}}return()=>{}},[b,g]);return p}getHeaderHeight(){var b;const g=tt[null!=(b=this.props.scaleLevel)?b:"md"];return this.props.compact?0:40*g}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var b,g,p;const G=this.getBounds();
return(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?hg(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:$g(this.props.fill,"background"),strokeWidth:null!=(b=this.props.strokeWidth)?b:2,fillOpacity:null!=(g=this.props.opacity)?g:.2,width:G.width,rx:8,ry:8,height:G.height}),!this.props.compact&&(0,nb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==
this.props.fill?$g(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(p=this.props.opacity)?p:.2,x:1,y:1,width:G.width-2,height:38,rx:8,ry:8}),(0,nb.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${G.width/2}, ${10+G.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};ib(Kl,
"id","logseq-portal");ib(Kl,"defaultSearchQuery","");ib(Kl,"defaultSearchFilter",null);ib(Kl,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});de([Pg],Kl.prototype,"collapsed",1);de([og],Kl.prototype,"toggleCollapsed",2);de([Pg],Kl.prototype,"scaleLevel",1);de([og],Kl.prototype,"setScaleLevel",
2);var {min:os,PI:wJ}=Math,ut=wJ+1E-4;nb=X(588);var xJ={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},yJ={easing:b=>Math.sin(b*Math.PI/2),simulatePressure:!0},zJ={easing:b=>b*b,simulatePressure:!1},qr=class extends Gr{constructor(b={}){super(b);ib(this,"ReactComponent",df(({events:g,isErasing:p})=>{const {props:{opacity:G}}=this;return(0,nb.jsx)(to,rf(oe({},g),{opacity:p?.2:G,children:this.getShapeSVGJsx()}))}));ib(this,"setScaleLevel",g=>$h(this,null,function*(){this.update({scaleLevel:g,strokeWidth:xJ[null!=
g?g:"md"]});this.onResetBounds()}));ib(this,"ReactIndicator",df(()=>{const {pointsPath:g}=this;return(0,nb.jsx)("path",{d:g})}));ib(this,"validateProps",g=>{g=dm(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});zg(this)}get pointsPath(){var b=this.props;if(2>b.points.length)var g="";else g=rf(oe({size:1+1.5*b.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===b.points[1][2]?yJ:zJ),{last:b.isComplete}),b=tc(b.points,g),g=tp.getSvgPathFromStroke(Kb(b,g));
return g}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:p,strokeType:G}}=this;return(0,nb.jsx)("path",{pointerEvents:"all",d:b,strokeWidth:p/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:$g(g,"text"),fill:$g(g,"text"),strokeDasharray:"dashed"===G?"12 4":void 0})}};ib(qr,"id","pencil");ib(qr,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,
strokeType:"line",strokeWidth:2,opacity:1});de([Pg],qr.prototype,"pointsPath",1);de([Pg],qr.prototype,"scaleLevel",1);de([og],qr.prototype,"setScaleLevel",2);var BB=nf(X(22));nb=X(588);var CB={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},ps=class extends Up{constructor(){super(...arguments);ib(this,"canEdit",!0);ib(this,"ReactComponent",df(({events:b,isErasing:g,isSelected:p,isEditing:G,onEditingEnd:U})=>{const {offset:[la,pa],props:{stroke:Ga,fill:Qa,noFill:Xa,strokeWidth:fb,opacity:mb,strokeType:Gb,label:Wb,
italic:Mb,fontWeight:dc,fontSize:hc}}=this,Ub=this.getVertices(fb/2).join();var nc=Wb||G?Yh(Wb,{fontFamily:"var(--ls-font-family)",fontSize:hc,lineHeight:1,fontWeight:dc},4):[0,0];const Bc=[this.props.size[0]/2,2*this.props.size[1]/3];nc=Math.max(.5,Math.min(1,this.props.size[0]/(2*nc[0]),this.props.size[1]/(2*nc[1])));const Ec=this.getBounds(),Sc=BB.useMemo(()=>je.sub(Bc,je.toFixed([Ec.width/2,Ec.height/2])),[Ec,nc,Bc]),Jd=BB.useCallback(Wd=>{var ye;null==(ye=this.update)?void 0:ye.call(this,{label:Wd})},
[Wb]);return(0,nb.jsxs)("div",rf(oe({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,nb.jsx)(Pu,{font:"20px / 1 var(--ls-font-family)",text:Wb,fontSize:hc,color:$g(Ga,"text"),offsetX:Sc[0],offsetY:Sc[1]/nc,scale:nc,isEditing:G,onChange:Jd,onBlur:U,fontStyle:Mb?"italic":"normal",fontWeight:dc,pointerEvents:!!Wb}),(0,nb.jsx)(to,{opacity:g?.2:mb,children:(0,nb.jsxs)("g",{transform:`translate(${la}, ${pa})`,children:[(0,nb.jsx)("polygon",{className:p||!Xa?"tl-hitarea-fill":"tl-hitarea-stroke",
points:Ub}),(0,nb.jsx)("polygon",{points:Ub,stroke:$g(Ga,"stroke"),fill:Xa?"none":$g(Qa,"background"),strokeWidth:fb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Gb?"8 2":void 0})]})})]}))}));ib(this,"setScaleLevel",b=>$h(this,null,function*(){this.update({scaleLevel:b,fontSize:CB[null!=b?b:"md"],strokeWidth:CB[null!=b?b:"md"]/10});this.onResetBounds()}));ib(this,"ReactIndicator",df(()=>{const {offset:[b,g],props:{strokeWidth:p}}=this;return(0,nb.jsx)("g",{children:(0,nb.jsx)("polygon",
{transform:`translate(${b}, ${g})`,points:this.getVertices(p/2).join()})})}));ib(this,"validateProps",b=>{void 0!==b.sides&&(b.sides=Math.max(b.sides,3));return dm(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {offset:[g,p],props:{stroke:G,fill:U,noFill:la,strokeWidth:pa,opacity:Ga,strokeType:Qa}}=this;b=this.getVertices(pa/2).join();return(0,nb.jsxs)("g",{transform:`translate(${g}, ${p})`,opacity:Ga,children:[(0,nb.jsx)("polygon",{className:la?
"tl-hitarea-stroke":"tl-hitarea-fill",points:b}),(0,nb.jsx)("polygon",{points:b,stroke:$g(G,"stroke"),fill:la?"none":$g(U,"background"),strokeWidth:pa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Qa?"8 2":void 0})]})}};ib(ps,"id","polygon");ib(ps,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});de([Pg],
ps.prototype,"scaleLevel",1);de([og],ps.prototype,"setScaleLevel",2);var mp=nf(X(22));nb=X(588);var AJ={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},qs=class extends Jv{constructor(){super(...arguments);ib(this,"ReactComponent",df(({events:b,isErasing:g,isEditing:p,onEditingEnd:G})=>{const {props:{opacity:U,fontFamily:la,fontSize:pa,fontWeight:Ga,italic:Qa,lineHeight:Xa,text:fb,stroke:mb,padding:Gb}}=this,Wb=mp.useRef(null),Mb=mp.useRef(!1),dc=mp.useRef(null),hc=mp.useCallback(Sc=>{const {isSizeLocked:Jd}=
this.props;Sc=as.normalizeText(Sc.currentTarget.value);Jd?this.update({text:Sc,size:this.getAutoSizedBoundingBox({text:Sc})}):this.update({text:Sc})},[]),Ub=mp.useCallback(Sc=>{if("Escape"!==Sc.key)if("Tab"===Sc.key&&0===fb.length)Sc.preventDefault();else{if("Meta"!==Sc.key&&!Sc.metaKey)Sc.stopPropagation();else if("z"===Sc.key&&Sc.metaKey){Sc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Sc.stopPropagation();Sc.preventDefault();return}"Tab"===Sc.key&&(Sc.preventDefault(),
Sc.shiftKey?go.unindent(Sc.currentTarget):go.indent(Sc.currentTarget),this.update({text:as.normalizeText(Sc.currentTarget.value)}))}},[]),nc=mp.useCallback(Sc=>{p&&(Sc.currentTarget.setSelectionRange(0,0),null==G?void 0:G())},[G]),Bc=mp.useCallback(Sc=>{p&&Mb.current&&document.activeElement===Sc.currentTarget&&Sc.currentTarget.select()},[p]),Ec=mp.useCallback(Sc=>{p&&Sc.stopPropagation()},[p]);mp.useEffect(()=>{p?requestAnimationFrame(()=>{Mb.current=!0;const Sc=Wb.current;Sc&&(Sc.focus(),Sc.select())}):
null==G?void 0:G()},[p,G]);mp.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,nb.jsx)(uo,rf(oe({},b),{opacity:g?.2:U,children:(0,nb.jsx)("div",{ref:dc,className:"tl-text-shape-wrapper","data-hastext":!!fb,"data-isediting":p,style:{fontFamily:la,fontStyle:Qa?"italic":"normal",fontSize:pa,fontWeight:Ga,padding:Gb,lineHeight:Xa,color:$g(mb,"text")},children:p?(0,nb.jsx)("textarea",{ref:Wb,className:"tl-text-shape-input",name:"text",tabIndex:-1,
autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:fb,onFocus:Bc,onChange:hc,onKeyDown:Ub,onBlur:nc,onPointerDown:Ec}):(0,nb.jsxs)(nb.Fragment,{children:[fb,"​"]})})}))}));ib(this,"setScaleLevel",b=>$h(this,null,function*(){this.update({scaleLevel:b,fontSize:AJ[null!=b?b:"md"]});this.onResetBounds()}));ib(this,"ReactIndicator",df(({isEditing:b})=>{const {props:{borderRadius:g},bounds:p}=
this;return b?null:(0,nb.jsx)("rect",{width:p.width,height:p.height,rx:g,ry:g,fill:"transparent"})}));ib(this,"validateProps",b=>dm(this,b));ib(this,"getBounds",()=>{const [b,g]=this.props.point,[p,G]=this.props.size;return{minX:b,minY:g,maxX:b+p,maxY:g+G,width:p,height:G}});ib(this,"onResizeStart",({isSingle:b})=>{var g;if(!b)return this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];return this.update({isSizeLocked:!1})});ib(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),
isSizeLocked:!0});return this})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getAutoSizedBoundingBox(b={}){const {text:g=this.props.text,fontFamily:p=this.props.fontFamily,fontSize:G=this.props.fontSize,fontWeight:U=this.props.fontWeight,lineHeight:la=this.props.lineHeight,padding:pa=this.props.padding}=b,[Ga,Qa]=Yh(g,{fontFamily:p,fontSize:G,lineHeight:la,fontWeight:U},pa);return[Ga,Qa]}getShapeSVGJsx(){var b=window.navigator.userAgent.toLowerCase();if(b.includes("webkit")&&
!b.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:g,stroke:p,fontSize:G,fontFamily:U}}=this;b=this.getBounds();return(0,nb.jsx)("foreignObject",{width:b.width,height:b.height,children:(0,nb.jsx)("div",{style:{color:$g(p,"text"),fontSize:G,fontFamily:U,display:"contents"},children:g})})}};ib(qs,"id","text");ib(qs,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,
fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});de([Pg],qs.prototype,"scaleLevel",1);de([og],qs.prototype,"setScaleLevel",2);var DB=nf(X(22));nb=X(588);var Ru=class extends yn{constructor(){super(...arguments);ib(this,"canFlip",!1);ib(this,"canEdit",!0);ib(this,"canChangeAspectRatio",!1);ib(this,"ReactComponent",df(({events:b,isErasing:g,asset:p,isEditing:G})=>{const {props:{opacity:U}}=this,la=Vl();var pa=af();const Ga=pa.selectedIds.has(this.id),
Qa=la||Ga&&!G||"select"!==pa.selectedTool.id;pa=DB.useCallback(fb=>{Qa||fb.stopPropagation()},[Qa]);const {handlers:Xa}=DB.useContext(an);return(0,nb.jsx)(uo,rf(oe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:U}},b),{children:(0,nb.jsx)("div",{onWheelCapture:pa,onPointerDown:pa,onPointerUp:pa,className:"tl-video-container",style:{pointerEvents:la||!G&&!Ga?"none":"all",overflow:G?"auto":"hidden"},children:p&&(0,nb.jsx)("video",{controls:!0,src:Xa?Xa.makeAssetUrl(p.src):p.src})})}))}));
ib(this,"ReactIndicator",df(()=>{const {props:{size:[b,g]}}=this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}};ib(Ru,"id","video");ib(Ru,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});nb=X(588);var EB=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,FB=class extends yn{constructor(){super(...arguments);ib(this,"aspectRatio",
480/853);ib(this,"canChangeAspectRatio",!1);ib(this,"canFlip",!1);ib(this,"canEdit",!0);ib(this,"onYoutubeLinkChange",b=>{this.update({url:b,size:FB.defaultProps.size})});ib(this,"ReactComponent",df(({events:b,isErasing:g,isEditing:p})=>(0,nb.jsx)(uo,rf(oe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,nb.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:p?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},
children:this.embedId?(0,nb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,nb.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,nb.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},
children:(0,nb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,nb.jsxs)("g",{children:[(0,nb.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,nb.jsx)("g",{children:(0,nb.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,nb.jsxs)("g",{fill:"#fff",children:[(0,nb.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,nb.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))));ib(this,"ReactIndicator",df(()=>{const {props:{size:[b,g]}}=this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));ib(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[0]*this.aspectRatio,1));return dm(this,b)})}get embedId(){var b,g;const p=this.props.url,G=p.match(EB);return null!=(g=null!=(b=null==
G?void 0:G[1])?b:p)?g:""}getShapeSVGJsx(){const b=this.getBounds(),g=this.embedId;return g?(0,nb.jsxs)("g",{children:[(0,nb.jsx)("image",{width:b.width,height:b.height,href:`https://img.youtube.com/vi/${g}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,nb.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,nb.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},rr=FB;ib(rr,"id","youtube");ib(rr,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});de([Pg],rr.prototype,"embedId",1);de([og],rr.prototype,"onYoutubeLinkChange",2);var rs=nf(X(22));nb=X(588);var GB=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,HB=class extends yn{constructor(){super(...arguments);ib(this,"canFlip",!1);ib(this,"canEdit",!0);ib(this,"initialHeightCalculated",
!0);ib(this,"getInnerHeight",null);ib(this,"onTwitterLinkChange",b=>{this.update({url:b,size:HB.defaultProps.size})});ib(this,"ReactComponent",df(({events:b,isErasing:g,isEditing:p})=>{const {renderers:{Tweet:G}}=rs.useContext(an),U=af(),la=rs.useRef(null),[,pa]=this.useComponentSize(la);rs.useEffect(()=>{var Ga,Qa;const Xa=null!=(Qa=null==(Ga=this.getInnerHeight)?void 0:Ga.call(this))?Qa:pa;pa&&1<Math.abs(Xa-this.props.size[1])&&(this.update({size:[this.props.size[0],Xa]}),U.persist(!0))},[pa]);
rs.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();U.persist(!0)})},[this.initialHeightCalculated]);return(0,nb.jsx)(uo,rf(oe({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,nb.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:p?"all":"none",userSelect:"none"},children:this.embedId?(0,nb.jsx)("div",{ref:la,children:(0,nb.jsx)(G,{tweetId:this.embedId})}):null})}))}));ib(this,"ReactIndicator",
df(()=>{const {props:{size:[b,g]}}=this;return(0,nb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));ib(this,"onResetBounds",b=>{b=this.getAutoResizeHeight();null!==b&&1<Math.abs(b-this.props.size[1])&&(this.update({size:[this.props.size[0],b]}),this.initialHeightCalculated=!0);return this});ib(this,"onResize",(b,g)=>{var p;const {bounds:G,rotation:U,scale:[la,pa]}=g;b=[...this.scale];0>la&&(b[0]*=-1);0>pa&&(b[1]*=-1);g=null!=(p=this.getAutoResizeHeight())?p:G.height;return this.update({point:[G.minX,
G.minY],size:[Math.max(1,G.width),Math.max(1,g)],scale:b,rotation:U})});ib(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.min(Math.max(b.size[0],300),550),b.size[1]=Math.max(b.size[1],1));return dm(this,b)})}get embedId(){var b,g;const p=this.props.url,G=p.match(GB);return null!=(g=null!=(b=null==G?void 0:G[1])?b:p)?g:""}useComponentSize(b,g=""){const [p,G]=rs.useState([0,0]),U=af();rs.useEffect(()=>{if(null==b?0:b.current){const la=g?b.current.querySelector(g):b.current;if(la){const pa=
()=>{const {width:Qa,height:Xa}=la.getBoundingClientRect(),fb=je.div([Qa,Xa],U.viewport.camera.zoom);G(fb);return fb};pa();this.getInnerHeight=()=>pa()[1];const Ga=new ResizeObserver(()=>{pa()});Ga.observe(la);return()=>{Ga.disconnect()}}}return()=>{}},[b,g]);return p}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const b=this.getBounds();return this.embedId?(0,nb.jsxs)("g",{children:[(0,nb.jsx)("rect",{width:b.width,height:b.height,fill:"#15202b",rx:8,
ry:8}),(0,nb.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,nb.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},ss=HB;ib(ss,"id","tweet");ib(ss,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});de([Pg],ss.prototype,"embedId",1);de([og],ss.prototype,"onTwitterLinkChange",2);nb=X(588);var IB=[ls,ms,or,Qu,Ru,ns,qr,ps,qs,rr,ss,pr,mq,Kl,Qw],Uw=class extends up{constructor(){super(...arguments);ib(this,"Shape",ls)}};ib(Uw,"id","box");ib(Uw,"shortcut",["9","r"]);var Vw=class extends up{constructor(){super(...arguments);
ib(this,"Shape",ms)}};ib(Vw,"id","ellipse");ib(Vw,"shortcut",["o"]);var Ww=class extends Xt{};ib(Ww,"id","erase");ib(Ww,"shortcut",["6","e"]);var Xw=class extends Rs{constructor(){super(...arguments);ib(this,"Shape",or);ib(this,"simplify",!0);ib(this,"simplifyTolerance",.618)}};ib(Xw,"id","highlighter");ib(Xw,"shortcut",["5","h"]);var Yw=class extends Yt{constructor(){super(...arguments);ib(this,"Shape",ns)}};ib(Yw,"id","line");ib(Yw,"shortcut",["7","c"]);var Zw=class extends Rs{constructor(){super(...arguments);
ib(this,"Shape",qr);ib(this,"simplify",!1)}};ib(Zw,"id","pencil");ib(Zw,"shortcut",["4","d"]);var JB=class extends up{constructor(){super(...arguments);ib(this,"Shape",ps)}};ib(JB,"id","polygon");var $w=class extends Zt{constructor(){super(...arguments);ib(this,"Shape",qs)}};ib($w,"id","text");ib($w,"shortcut",["8","t"]);var KB=class extends up{constructor(){super(...arguments);ib(this,"Shape",rr)}};ib(KB,"id","youtube");var LB=class extends Ei{constructor(){super(...arguments);ib(this,"creatingShape");
ib(this,"offset",[0,0]);ib(this,"onEnter",()=>{this.app.history.pause();Hd(()=>{const b=new Kl({id:Hk(),parentId:this.app.currentPage.id,point:je.sub(this.app.inputs.originPoint,this.offset),size:Kl.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=b;this.app.currentPage.addShapes(b);this.app.setEditingShape(b);this.app.setSelectedShapes([b])})});ib(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.creatingShape)break;this.app.selectTool("select");
break;case "canvas":b.order||this.app.selectTool("select")}});ib(this,"onExit",()=>{var b;this.creatingShape&&(this.app.history.resume(),(null==(b=this.creatingShape)?0:b.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};ib(LB,"id","creating");var MB=class extends Ei{constructor(){super(...arguments);ib(this,"cursor","crosshair");ib(this,"onPointerDown",b=>{this.tool.transition("creating")})}};
ib(MB,"id","idle");var vt=class extends Vp{constructor(){super(...arguments);ib(this,"Shape",Kl);ib(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])})}};ib(vt,"id","logseq-portal");ib(vt,"shortcut",["3"]);ib(vt,"states",[MB,LB]);ib(vt,"initial","idle");var NB=class extends up{constructor(){super(...arguments);ib(this,"Shape",mq)}};ib(NB,"id","youtube");var OB=class extends up{constructor(){super(...arguments);ib(this,"Shape",pr)}};ib(OB,"id","iframe");var BJ=nf(X(591));nb=
X(588);var CJ=new Map(IB.map(b=>[b.id,b])),ax=class{constructor(b){ib(this,"shapes");ib(this,"pageId");ib(this,"assets");b&&this.load(b)}load(b){var g;const p=null==(g=null==b?void 0:b.pages)?void 0:g[0];this.pageId=null==p?void 0:p.id;this.assets=b.assets;this.shapes=null==p?void 0:p.shapes.map(G=>{var U=G.type;if(!U)throw Error("No shape type provided.");const la=CJ.get(U);if(!la)throw Error(`Could not find shape class for ${U}`);return new la(G)}).filter(G=>"group"!==G.type)}generatePreviewJsx(b,
g){var p,G;const U=[...(null!=(p=this.shapes)?p:[]).map(Xa=>Xa.getRotatedBounds())];(p=null==b?void 0:b.currentView)&&U.push(p);let la=vf.getCommonBounds(U);if(!la)return null;la=vf.expandBounds(la,16);la=g?vf.ensureRatio(la,g):la;const pa=Xa=>[(Xa[0]-la.minX).toFixed(2),(Xa[1]-la.minY).toFixed(2)],[Ga,Qa]=p?pa([p.minX,p.minY]):[0,0];return la&&(0,nb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":la.minX.toFixed(2),"data-common-bound-y":la.minY.toFixed(2),"data-common-bound-width":la.width.toFixed(2),
"data-common-bound-height":la.height.toFixed(2),viewBox:[0,0,la.width,la.height].join(" "),children:[(0,nb.jsx)("defs",{children:p&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Ga}, ${Qa})`,width:p.width,height:p.height}),(0,nb.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,nb.jsx)("rect",{width:la.width,height:la.height,fill:"white"}),(0,nb.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,nb.jsx)("g",
{id:this.pageId+"-preview-shapes",children:null==(G=this.shapes)?void 0:G.map(Xa=>{var fb,mb;const {bounds:Gb,props:{rotation:Wb}}=Xa,[Mb,dc]=pa([Gb.minX,Gb.minY]),hc=+(180*((null!=Wb?Wb:0)+(null!=(fb=Gb.rotation)?fb:0))/Math.PI).toFixed(2),[Ub,nc]=[(Gb.width/2).toFixed(2),(Gb.height/2).toFixed(2)];return(0,nb.jsx)("g",{transform:[`translate(${Mb}, ${dc})`,`rotate(${hc}, ${Ub}, ${nc})`].join(" "),children:Xa.getShapeSVGJsx({assets:null!=(mb=this.assets)?mb:[]})},Xa.id)})}),(0,nb.jsx)("rect",{mask:p?
`url(#${this.pageId}-camera-mask)`:"",width:la.width,height:la.height,fill:"transparent"}),p&&(0,nb.jsx)("use",{id:"minimap-camera-rect","data-x":Ga,"data-y":Qa,"data-width":p.width,"data-height":p.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/b.camera.zoom})]})}exportAsSVG(b){return(b=this.generatePreviewJsx(void 0,b))?BJ.default.renderToString(b):""}},DJ=nf(X(22));nb=X(588);var Su=DJ.forwardRef((b,g)=>{var {value:p,className:G}=b;b=Bf(b,["autoResize","value",
"className"]);return(0,nb.jsx)("div",{className:"tl-input"+(G?" "+G:""),children:(0,nb.jsxs)("div",{className:"tl-input-sizer",children:[(0,nb.jsx)("div",{className:"tl-input-hidden",children:p}),(0,nb.jsx)("input",oe({ref:g,value:p,className:"tl-text-input",type:"text"},b))]})})});nb=X(588);var nq=({type:b,active:g})=>(0,nb.jsx)("span",{className:"tl-type-tag","data-active":g,children:(0,nb.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",
BS:"block-search",PS:"page-search"})[b]}`})}),PB=(b,g)=>(0,nb.jsx)("span",{children:b.split(new RegExp(`(${g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((p,G)=>1===G%2?(0,nb.jsx)("mark",{className:"tl-highlighted",children:p}):p).map((p,G)=>(0,nb.jsx)(Om.default.Fragment,{children:p},G))}),EJ=(b,g)=>{const {handlers:p}=Om.default.useContext(an),[G,U]=Om.default.useState(null),la=Bk(b,200);Om.default.useEffect(()=>{let pa=!1;if(0<la.length){const Ga={"pages?":!0,"blocks?":!0,"files?":!1};
"B"===g?Ga["pages?"]=!1:"P"===g&&(Ga["blocks?"]=!1);p.search(la,Ga).then(Qa=>{pa||U(Qa)})}else U(null);return()=>{pa=!0}},[la,null==p?void 0:p.search]);return G},QB=df(({className:b,style:g,placeholder:p,onChange:G,onBlur:U,onAddBlock:la})=>{const [pa,Ga]=Om.default.useState(Kl.defaultSearchQuery),[Qa,Xa]=Om.default.useState(Kl.defaultSearchFilter),fb=Om.default.useRef(null),{handlers:mb,renderers:Gb}=Om.default.useContext(an),Wb=Om.default.useCallback(ye=>{var Fe;G(ye);null==(Fe=fb.current)?void 0:
Fe.blur();ye&&(Kl.defaultSearchQuery="",Kl.defaultSearchFilter=null)},[]),Mb=Om.default.useCallback(ye=>{if(ye=null==mb?void 0:mb.addNewBlock(ye))Wb(ye),null==la?void 0:la(ye);return ye},[la]),dc=Om.default.useRef(null),[hc,Ub]=Om.default.useState(0),nc=EJ(pa,Qa),[Bc,Ec]=Om.default.useState("circle-plus"),[Sc,Jd]=Om.default.useState(!1);Om.default.useEffect(()=>{setTimeout(()=>{var ye;null==(ye=fb.current)?void 0:ye.focus()})},[Qa]);Om.default.useEffect(()=>{Kl.defaultSearchQuery=pa;Kl.defaultSearchFilter=
Qa},[pa,Qa]);const Wd=Om.default.useMemo(()=>{var ye;const Fe=[],Ye=null==Gb?void 0:Gb.Breadcrumb;if(!Ye||!mb)return[];la&&Fe.push({actionIcon:"circle-plus",onChosen:()=>!!Mb(pa),element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{active:!0,type:"BA"}),0<pa.length?(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)("strong",{children:"New block:"}),pa]}):(0,nb.jsx)("strong",{children:"New block"})]})});(null==(ye=null==nc?void 0:nc.pages)?0:ye.some(jf=>jf.toLowerCase()===
pa.toLowerCase()))||!pa||Fe.push({actionIcon:"circle-plus",onChosen:()=>{Wb(pa);return!0},element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{active:!0,type:"PA"}),(0,nb.jsx)("strong",{children:"New page:"}),pa]})},{actionIcon:"circle-plus",onChosen:()=>{null==mb?void 0:mb.addNewWhiteboard(pa);Wb(pa);return!0},element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{active:!0,type:"WA"}),(0,nb.jsx)("strong",{children:"New whiteboard:"}),
pa]})});0===pa.length&&null===Qa&&Fe.push({actionIcon:"search",onChosen:()=>{Xa("B");return!0},element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{Xa("P");return!0},element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{type:"PS"}),"Search only pages"]})});Qa&&"P"!==Qa||!nc||!nc.pages||Fe.push(...nc.pages.map(jf=>({actionIcon:"search",onChosen:()=>{Wb(jf);
return!0},element:(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{type:mb.isWhiteboardPage(jf)?"WP":"P"}),PB(jf,pa)]})})));Qa&&"B"!==Qa||!nc||!nc.blocks||Fe.push(...nc.blocks.filter(jf=>jf.content&&jf.uuid).map(({content:jf,uuid:Oe})=>{const Be=mb.queryBlockByUUID(Oe);return{actionIcon:"search",onChosen:()=>{var zd,ad,ed;return Be?(Wb(Oe),null==(ed=null==(ad=null==(zd=window.logseq)?void 0:zd.api)?void 0:ad.set_blocks_id)?void 0:ed.call(ad,[Oe]),!0):!1},element:Be?
(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)(nq,{type:"B"}),(0,nb.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,nb.jsx)(Ye,{blockId:Oe})})]}),(0,nb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,nb.jsx)("div",{className:"tl-quick-search-option-placeholder"}),PB(jf,pa)]})]}):(0,nb.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));
return Fe},[pa,Qa,nc,null==Gb?void 0:Gb.Breadcrumb,mb]);Om.default.useEffect(()=>{const ye=Fe=>{var Ye,jf;let Oe=hc;"ArrowDown"===Fe.key?Oe=Math.min(Wd.length-1,hc+1):"ArrowUp"===Fe.key?Oe=Math.max(0,hc-1):"Enter"===Fe.key?(null==(Ye=Wd[hc])?void 0:Ye.onChosen(),Fe.stopPropagation(),Fe.preventDefault()):"Backspace"===Fe.key&&0===pa.length?Xa(null):"Escape"===Fe.key&&Wb("");Oe!==hc&&(Ye=Wd[Oe],Ub(Oe),Ec(Ye.actionIcon),Fe.stopPropagation(),Fe.preventDefault(),(Fe=null==(jf=dc.current)?void 0:jf.querySelector(".tl-quick-search-option:nth-child("+
(Oe+1)+")"))&&(null==Fe?void 0:Fe.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",ye,!0);return()=>{document.removeEventListener("keydown",ye,!0)}},[Wd,hc,pa]);return(0,nb.jsxs)("div",{className:"tl-quick-search "+(null!=b?b:""),style:g,children:[(0,nb.jsx)(bA,{icon:Bc,onClick:()=>{var ye;null==(ye=Wd[hc])?void 0:ye.onChosen()}}),(0,nb.jsxs)("div",{className:"tl-quick-search-input-container",children:[Qa&&(0,nb.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,nb.jsx)(nq,
{type:Qa}),"B"===Qa?"Search blocks":"Search pages",(0,nb.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>Xa(null),children:(0,nb.jsx)(Fh,{name:"x"})})]}),(0,nb.jsx)(Su,{ref:fb,type:"text",value:pa,className:"tl-quick-search-input",placeholder:null!=p?p:"Create or search your graph...",onChange:ye=>Ga(ye.target.value),onKeyDown:ye=>{"Enter"===ye.key&&Wb(pa);ye.stopPropagation()},onFocus:()=>{Jd(!0)},onBlur:()=>{Jd(!1);null==U?void 0:U()}})]}),0<Wd.length&&(0,nb.jsx)("div",{onWheelCapture:ye=>
ye.stopPropagation(),className:"tl-quick-search-options",ref:dc,style:{visibility:Sc?"visible":"hidden",pointerEvents:Sc?"all":"none"},children:(0,nb.jsx)(LI,{style:{height:40*Math.min(Math.max(1,Wd.length),12)},totalCount:Wd.length,itemContent:ye=>{const {actionIcon:Fe,onChosen:Ye,element:jf}=Wd[ye];return(0,nb.jsx)("div",{"data-focused":ye===hc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Ec(Fe);Ub(ye)},onPointerDownCapture:Oe=>{Ye()&&(Oe.stopPropagation(),Oe.preventDefault())},
children:jf},ye)}})})]})});nb=X(588);var FJ=df(function(b){var {pageId:g,portalType:p,refs:G,side:U,onRefsChange:la}=b;b=Bf(b,"pageId portalType shapeType refs side onRefsChange".split(" "));const pa=G.length+(g?1:0),Ga=0===G.length,Qa=fb=>{fb&&!G.includes(fb)&&Ga&&la([...G,fb])},Xa=!(!g||!p);return(0,nb.jsx)(UA,rf(oe({},b),{side:U,align:"start",alignOffset:-6,label:(0,nb.jsx)(ec,{content:"Link",sideOffset:14,children:(0,nb.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",
children:[(0,nb.jsx)(Fh,{name:0<pa?"link":"add-link"}),0<pa&&(0,nb.jsx)("div",{className:"tl-shape-links-count",children:pa})]})}),children:(0,nb.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":Xa,children:[Xa&&(0,nb.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,nb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,nb.jsx)(Fh,{className:"opacity-50",name:"internal-link"}),"References"]}),(0,nb.jsx)(ie,{type:p,id:g})]}),
(0,nb.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,nb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,nb.jsx)(Fh,{className:"opacity-50",name:"add-link"}),"Link to any page or block"]}),Ga&&(0,nb.jsx)(QB,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:"Start typing to search...",onChange:Qa}),0<G.length&&(0,nb.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:G.map((fb,mb)=>(0,nb.jsx)(ie,{id:fb,type:ek(fb)?
"B":"P",onRemove:()=>{la(G.filter((Gb,Wb)=>mb!==Wb))},showContent:!0},fb))})]})]})}))}),jl=nf(X(22)),RB=X(22),SB=(0,RB.forwardRef)((b,g)=>{const {pressed:p,defaultPressed:G=!1,onPressedChange:U}=b,la=Bf(b,["pressed","defaultPressed","onPressedChange"]),[pa=!1,Ga]=Lj({prop:p,onChange:U,defaultProp:G});return(0,RB.createElement)(il.button,ff({type:"button","aria-pressed":pa,"data-state":pa?"on":"off","data-disabled":b.disabled?"":void 0},la,{ref:g,onClick:If(b.onClick,()=>{b.disabled||Ga(!pa)})}))}),
GJ=SB,[TB]=zj("ToggleGroup",[uu]),UB=uu(),HJ=jl.default.forwardRef((b,g)=>{const {type:p}=b;b=Bf(b,["type"]);if("single"===p)return jl.default.createElement(IJ,ff({},b,{ref:g}));if("multiple"===p)return jl.default.createElement(JJ,ff({},b,{ref:g}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[VB,WB]=TB("ToggleGroup"),IJ=jl.default.forwardRef((b,g)=>{const {value:p,defaultValue:G,onValueChange:U=()=>{}}=b,la=Bf(b,["value","defaultValue","onValueChange"]),[pa,Ga]=Lj({prop:p,defaultProp:G,
onChange:U});return jl.default.createElement(VB,{scope:b.__scopeToggleGroup,type:"single",value:pa?[pa]:[],onItemActivate:Ga,onItemDeactivate:jl.default.useCallback(()=>Ga(""),[Ga])},jl.default.createElement(XB,ff({},la,{ref:g})))}),JJ=jl.default.forwardRef((b,g)=>{const {value:p,defaultValue:G,onValueChange:U=()=>{}}=b,la=Bf(b,["value","defaultValue","onValueChange"]),[pa=[],Ga]=Lj({prop:p,defaultProp:G,onChange:U}),Qa=jl.default.useCallback(fb=>Ga((mb=[])=>[...mb,fb]),[Ga]),Xa=jl.default.useCallback(fb=>
Ga((mb=[])=>mb.filter(Gb=>Gb!==fb)),[Ga]);return jl.default.createElement(VB,{scope:b.__scopeToggleGroup,type:"multiple",value:pa,onItemActivate:Qa,onItemDeactivate:Xa},jl.default.createElement(XB,ff({},la,{ref:g})))}),[KJ,LJ]=TB("ToggleGroup"),XB=jl.default.forwardRef((b,g)=>{const {__scopeToggleGroup:p,disabled:G=!1,rovingFocus:U=!0,orientation:la,dir:pa,loop:Ga=!0}=b;var Qa=Bf(b,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));b=UB(p);const Xa=Tb(pa);Qa=oe({role:"group",
dir:Xa},Qa);return jl.default.createElement(KJ,{scope:p,rovingFocus:U,disabled:G},U?jl.default.createElement(hA,ff({asChild:!0},b,{orientation:la,dir:Xa,loop:Ga}),jl.default.createElement(il.div,ff({},Qa,{ref:g}))):jl.default.createElement(il.div,ff({},Qa,{ref:g})))}),MJ=jl.default.forwardRef((b,g)=>{var p=WB("ToggleGroupItem",b.__scopeToggleGroup);const G=LJ("ToggleGroupItem",b.__scopeToggleGroup),U=UB(b.__scopeToggleGroup);p=p.value.includes(b.value);const la=G.disabled||b.disabled;b=rf(oe({},b),
{pressed:p,disabled:la});const pa=jl.default.useRef(null);return G.rovingFocus?jl.default.createElement(iA,ff({asChild:!0},U,{focusable:!la,active:p,ref:pa}),jl.default.createElement(YB,ff({},b,{ref:g}))):jl.default.createElement(YB,ff({},b,{ref:g}))}),YB=jl.default.forwardRef((b,g)=>{const {__scopeToggleGroup:p,value:G}=b,U=Bf(b,["__scopeToggleGroup","value"]),la=WB("ToggleGroupItem",p);b={role:"radio","aria-checked":b.pressed,"aria-pressed":void 0};return jl.default.createElement(SB,ff({},"single"===
la.type?b:void 0,U,{ref:g,onPressedChange:pa=>{if(pa)la.onItemActivate(G);else la.onItemDeactivate(G)}}))}),ZB=HJ,$B=MJ;nb=X(588);nb=X(588);nb=X(588);var aC="Edit AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource LogseqPortalViewMode ArrowMode Links".split(" "),NJ=["Edit","YoutubeLink","TwitterLink","IFrameSource","Links"],Rn=new Map,bx={"logseq-portal":"Swatch Edit LogseqPortalViewMode ScaleLevel AutoResizing Links".split(" "),youtube:["YoutubeLink",
"Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:"Edit TextStyle Swatch ScaleLevel ArrowMode Links".split(" "),pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:"Edit TextStyle Swatch ScaleLevel AutoResizing Links".split(" "),
html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"]},OJ=Object.entries(bx).filter(([,b])=>b.includes("NoFill")&&b.includes("Swatch")).map(([b])=>b),PJ=df(()=>{const {handlers:{isWhiteboardPage:b,redirectToPage:g,getRedirectPageName:p,insertFirstPageBlock:G}}=Ep.default.useContext(an),U=af(),la=Wa(U.selectedShapesArray,"Edit")[0];return(0,nb.jsx)(ka,{type:"button",tooltip:"Edit",onClick:()=>{var pa,Ga,Qa,Xa,fb,mb,Gb,Wb,Mb;U.api.editShape(la);if("logseq-portal"===la.props.type){var dc=
la.props.pageId;if("P"===la.props.blockType){b(dc)&&g(dc);dc=p(la.props.pageId);let hc=null==(Qa=null==(Ga=null==(pa=window.logseq)?void 0:pa.api)?void 0:Ga.get_page_blocks_tree)?void 0:Qa.call(Ga,dc);0===(null==hc?void 0:hc.length)&&(G(dc),hc=null==(mb=null==(fb=null==(Xa=window.logseq)?void 0:Xa.api)?void 0:fb.get_page_blocks_tree)?void 0:mb.call(fb,dc));pa=(null==hc?void 0:hc.find(Ub=>!("propertiesOrder"in Ub)))||hc[0];dc=null==pa?void 0:pa.uuid}null==(Mb=null==(Wb=null==(Gb=window.logseq)?void 0:
Gb.api)?void 0:Wb.edit_block)?void 0:Mb.call(Wb,dc)}},children:(0,nb.jsx)(Fh,{name:"label"in la.props&&la.props.label||"text"in la.props&&la.props.text?"forms":"text"})})}),QJ=df(()=>{const b=af(),g=Wa(b.selectedShapesArray,"AutoResizing"),p=g.every(G=>G.props.isAutoResizing);return(0,nb.jsx)(va,{tooltip:"Auto Resize",toggle:g.every(G=>"logseq-portal"===G.props.type),className:"tl-button",pressed:p,onPressedChange:G=>{g.forEach(U=>{if("logseq-portal"===U.props.type)U.update({isAutoResizing:G});else U.onResetBounds({zoom:b.viewport.camera.zoom})});
b.persist()},children:(0,nb.jsx)(Fh,{name:"dimensions"})})}),RJ=df(()=>{const b=af(),g=Wa(b.selectedShapesArray,"LogseqPortalViewMode"),p=g.every(G=>G.collapsed);return(0,nb.jsx)(Ge,{title:"View Mode",options:[{value:"1",icon:"object-compact",tooltip:"Collapse"},{value:"0",icon:"object-expanded",tooltip:"Expand"}],value:p?"1":"0",onValueChange:G=>{g.forEach(U=>{U.toggleCollapsed()});b.persist()}})}),SJ=df(()=>{const {handlers:{isMobile:b}}=Ep.default.useContext(an);var g=af();g=Wa(g.selectedShapesArray,
"ScaleLevel");g=1<(new Set(g.map(p=>p.scaleLevel))).size?"":g[0].scaleLevel;return(0,nb.jsx)(Kh,{scaleLevel:g,compact:b()})}),TJ=df(()=>{const b=af(),g=Wa(b.selectedShapesArray,"IFrameSource")[0],p=Ep.default.useCallback(U=>{g.onIFrameSourceChange(U.target.value.trim().toLowerCase());b.persist()},[]),G=Ep.default.useCallback(()=>{g.reload()},[]);return(0,nb.jsxs)("span",{className:"flex gap-3",children:[(0,nb.jsx)(ka,{tooltip:"Reload",type:"button",onClick:G,children:(0,nb.jsx)(Fh,{name:"refresh"})}),
(0,nb.jsx)(Su,{title:"Website Url",className:"tl-iframe-src",value:`${g.props.url}`,onChange:p}),(0,nb.jsx)(ka,{tooltip:"Open website url",type:"button",onClick:()=>window.open(g.props.url),children:(0,nb.jsx)(Fh,{name:"external-link"})})]})}),UJ=df(()=>{const b=af(),g=Wa(b.selectedShapesArray,"YoutubeLink")[0],p=Ep.default.useCallback(G=>{g.onYoutubeLinkChange(G.target.value);b.persist()},[]);return(0,nb.jsxs)("span",{className:"flex gap-3",children:[(0,nb.jsx)(Su,{title:"YouTube Link",className:"tl-youtube-link",
value:`${g.props.url}`,onChange:p}),(0,nb.jsx)(ka,{tooltip:"Open YouTube Link",type:"button",onClick:()=>{var G,U,la;return null==(la=null==(U=null==(G=window.logseq)?void 0:G.api)?void 0:U.open_external_link)?void 0:la.call(U,g.props.url)},children:(0,nb.jsx)(Fh,{name:"external-link"})})]})}),VJ=df(()=>{const b=af(),g=Wa(b.selectedShapesArray,"TwitterLink")[0],p=Ep.default.useCallback(G=>{g.onTwitterLinkChange(G.target.value);b.persist()},[]);return(0,nb.jsxs)("span",{className:"flex gap-3",children:[(0,nb.jsx)(Su,
{title:"Twitter Link",className:"tl-twitter-link",value:`${g.props.url}`,onChange:p}),(0,nb.jsx)(ka,{tooltip:"Open Twitter Link",type:"button",onClick:()=>{var G,U,la;return null==(la=null==(U=null==(G=window.logseq)?void 0:G.api)?void 0:U.open_external_link)?void 0:la.call(U,g.props.url)},children:(0,nb.jsx)(Fh,{name:"external-link"})})]})}),WJ=df(()=>{const b=af(),g=Wa(b.selectedShapesArray,"NoFill"),p=Ep.default.useCallback(U=>{g.forEach(la=>la.update({noFill:U}));b.persist()},[]),G=g.every(U=>
U.props.noFill);return(0,nb.jsx)(va,{tooltip:"Fill",className:"tl-button",pressed:G,onPressedChange:p,children:(0,nb.jsx)(Fh,{name:G?"droplet-off":"droplet"})})}),XJ=df(()=>{const b=af(),g=Wa(b.selectedShapesArray,"Swatch"),p=Ep.default.useCallback(U=>{g.forEach(la=>{la.update({fill:U,stroke:U})});b.persist()},[]),G=Ep.default.useCallback(U=>{g.forEach(la=>{la.update({opacity:U})});b.persist()},[]);return(0,nb.jsx)(ng,{popoverSide:"top",color:g[0].props.noFill?g[0].props.stroke:g[0].props.fill,opacity:g[0].props.opacity,
setOpacity:G,setColor:p})}),YJ=df(()=>{const b=af(),g=Wa(b.selectedShapesArray,"StrokeType"),p=g.every(G=>"dashed"===G.props.strokeType)?"dashed":g.every(G=>"line"===G.props.strokeType)?"line":"mixed";return(0,nb.jsx)(Ge,{title:"Stroke Type",options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:p,onValueChange:G=>{g.forEach(U=>{U.update({strokeType:G})});b.persist()}})}),ZJ=df(()=>{const b=af(),g=Wa(b.selectedShapesArray,"ArrowMode");var p=
g.every(U=>{var la;return"arrow"===(null==(la=U.props.decorations)?void 0:la.start)});const G=g.every(U=>{var la;return"arrow"===(null==(la=U.props.decorations)?void 0:la.end)});p=[p?"start":null,G?"end":null].filter(ti);return(0,nb.jsx)(fa,{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:p,onValueChange:U=>{g.forEach(la=>{var pa=la.update;var Ga={start:U.includes("start")?"arrow":null,end:U.includes("end")?"arrow":null};pa.call(la,
{decorations:Ga})});b.persist()}})}),$J=df(()=>{const b=af(),g=Wa(b.selectedShapesArray,"TextStyle"),p=g.every(U=>500<U.props.fontWeight),G=g.every(U=>U.props.italic);return(0,nb.jsxs)("span",{className:"flex gap-1",children:[(0,nb.jsx)(va,{tooltip:"Bold",className:"tl-button",pressed:p,onPressedChange:U=>{g.forEach(la=>{la.update({fontWeight:U?700:400});la.onResetBounds()});b.persist()},children:(0,nb.jsx)(Fh,{name:"bold"})}),(0,nb.jsx)(va,{tooltip:"Italic",className:"tl-button",pressed:G,onPressedChange:U=>
{g.forEach(la=>{la.update({italic:U});la.onResetBounds()});b.persist()},children:(0,nb.jsx)(Fh,{name:"italic"})})]})}),aK=df(()=>{var b;const g=af(),p=g.selectedShapesArray[0];return(0,nb.jsx)(FJ,{onRefsChange:G=>{p.update({refs:G});g.persist()},refs:null!=(b=p.props.refs)?b:[],shapeType:p.props.type,side:"right",pageId:"logseq-portal"===p.props.type?p.props.pageId:void 0,portalType:"logseq-portal"===p.props.type?p.props.blockType:void 0})});Rn.set("Edit",PJ);Rn.set("AutoResizing",QJ);Rn.set("LogseqPortalViewMode",
RJ);Rn.set("ScaleLevel",SJ);Rn.set("YoutubeLink",UJ);Rn.set("TwitterLink",VJ);Rn.set("IFrameSource",TJ);Rn.set("NoFill",WJ);Rn.set("Swatch",XJ);Rn.set("StrokeType",YJ);Rn.set("ArrowMode",ZJ);Rn.set("TextStyle",$J);Rn.set("Links",aK);var bC=b=>{var g;return(null!=(g=bx[b])?g:[]).filter(ti)},bK=b=>{const g=b.map(G=>G.props.type),p=new Set(0<b.length?bC(g[0]):[]);for(let G=1;G<g.length&&0<p.size;G++){const U=bC(g[G]);p.forEach(la=>{U.includes(la)||p.delete(la)})}1<b.length&&NJ.forEach(G=>{p.has(G)&&
p.delete(G)});return Array.from(p).sort((G,U)=>aC.indexOf(G)-aC.indexOf(U)).map(G=>Rn.get(G))};nb=X(588);var cK=df(({shapes:b,offsets:g,hidden:p})=>{const G=af(),U=pt.useRef(null),la=pt.useRef(null);pt.useLayoutEffect(()=>{setTimeout(()=>{const Ga=la.current;if(Ga){var {offsetWidth:Qa,offsetHeight:Xa}=Ga;U.current=[Qa,Xa]}})});pt.useLayoutEffect(()=>{var Ga;const Qa=la.current;if(Qa){var Xa=null!=(Ga=U.current)?Ga:[0,0];Ga=0;if(116>g.top){var fb=g.height/2+40;140>g.bottom&&(fb+=g.bottom-140)}else fb=
-(g.height/2+40);16>g.left+g.width/2-Xa[0]/2?Ga+=-(g.left+g.width/2-Xa[0]/2-16):16>g.right+g.width/2-Xa[0]/2&&(Ga+=g.right+g.width/2-Xa[0]/2-16);var [mb,Gb]=[Ga,fb];Qa.style.transform=`translateX(${mb}px) translateY(${Gb}px)`}},[g]);if(!G)return null;const pa=bK(b);return(0,nb.jsx)(uo,{centered:!0,children:0<pa.length&&(0,nb.jsx)("div",{ref:la,className:"tl-toolbar tl-context-bar",style:{visibility:p?"hidden":"visible",pointerEvents:p?"none":"all"},children:pa.map((Ga,Qa)=>(0,nb.jsxs)(pt.Fragment,
{children:[(0,nb.jsx)(Ga,{}),Qa<pa.length-1&&(0,nb.jsx)(jr,{className:"tl-toolbar-separator",orientation:"vertical"})]},Qa))})})}),cx=nf(X(22)),Ll=X(22),[dK]=zj("ContextMenu",[Bu]),wt=Bu(),[eK,cC]=dK("ContextMenu"),fK=(0,Ll.forwardRef)((b,g)=>{const {__scopeContextMenu:p,disabled:G=!1}=b,U=Bf(b,["__scopeContextMenu","disabled"]),la=cC("ContextMenuTrigger",p),pa=wt(p),Ga=(0,Ll.useRef)({x:0,y:0}),Qa=(0,Ll.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(oe({width:0,height:0},Ga.current))}),Xa=(0,Ll.useRef)(0),
fb=(0,Ll.useCallback)(()=>window.clearTimeout(Xa.current),[]);(0,Ll.useEffect)(()=>fb,[fb]);(0,Ll.useEffect)(()=>void(G&&fb()),[G,fb]);return(0,Ll.createElement)(Ll.Fragment,null,(0,Ll.createElement)(wA,ff({},pa,{virtualRef:Qa})),(0,Ll.createElement)(il.span,ff({"data-state":la.open?"open":"closed","data-disabled":G?"":void 0},U,{ref:g,style:oe({WebkitTouchCallout:"none"},b.style),onContextMenu:G?b.onContextMenu:If(b.onContextMenu,mb=>{fb();Ga.current={x:mb.clientX,y:mb.clientY};la.onOpenChange(!0);
mb.preventDefault()}),onPointerDown:G?b.onPointerDown:If(b.onPointerDown,xb(mb=>{fb();Xa.current=window.setTimeout(()=>{Ga.current={x:mb.clientX,y:mb.clientY};la.onOpenChange(!0)},700)})),onPointerMove:G?b.onPointerMove:If(b.onPointerMove,xb(fb)),onPointerCancel:G?b.onPointerCancel:If(b.onPointerCancel,xb(fb)),onPointerUp:G?b.onPointerUp:If(b.onPointerUp,xb(fb))})))}),gK=(0,Ll.forwardRef)((b,g)=>{var {__scopeContextMenu:p}=b;const G=Bf(b,["__scopeContextMenu"]),U=cC("ContextMenuContent",p);p=wt(p);
const la=(0,Ll.useRef)(!1);return(0,Ll.createElement)(yA,ff({},p,G,{ref:g,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:pa=>{var Ga;null===(Ga=b.onCloseAutoFocus)||void 0===Ga||Ga.call(b,pa);!pa.defaultPrevented&&la.current&&pa.preventDefault();la.current=!1},onInteractOutside:pa=>{var Ga;null===(Ga=b.onInteractOutside)||void 0===Ga||Ga.call(b,pa);pa.defaultPrevented||U.modal||(la.current=!0)},style:rf(oe({},b.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Pm=(0,Ll.forwardRef)((b,g)=>{var {__scopeContextMenu:p}=b;b=Bf(b,["__scopeContextMenu"]);p=wt(p);return(0,Ll.createElement)(AA,ff({},p,b,{ref:g}))}),oq=(0,Ll.forwardRef)((b,g)=>{var {__scopeContextMenu:p}=b;b=Bf(b,["__scopeContextMenu"]);p=wt(p);return(0,Ll.createElement)(AG,ff({},p,b,{ref:g}))}),hK=b=>{const {__scopeContextMenu:g,children:p,onOpenChange:G,dir:U,modal:la=!0}=b,[pa,Ga]=(0,Ll.useState)(!1);b=wt(g);const Qa=qf(G),Xa=(0,Ll.useCallback)(fb=>{Ga(fb);Qa(fb)},[Qa]);return(0,Ll.createElement)(eK,
{scope:g,open:pa,onOpenChange:Xa,modal:la},(0,Ll.createElement)(BA,ff({},b,{dir:U,open:pa,onOpenChange:Xa,modal:la}),p))};nb=X(588);var iK=df(function({children:b,collisionRef:g}){var p,G,U,la,pa,Ga,Qa;const Xa=af(),{handlers:fb}=cx.useContext(an),mb=cx.useRef(null),Gb=Mb=>{Mb();Xa.transition("select")},Wb=cx.useMemo(()=>yh(),[]);return(0,nb.jsxs)(hK,{onOpenChange:Mb=>{Mb&&!Xa.isIn("select.contextMenu")?Xa.transition("select").selectedTool.transition("contextMenu"):!Mb&&Xa.isIn("select.contextMenu")&&
Xa.selectedTool.transition("idle")},children:[(0,nb.jsx)(fK,{disabled:Xa.editingShape&&0!==Object.keys(Xa.editingShape).length,children:b}),(0,nb.jsx)(gK,{className:"tl-menu tl-context-menu",ref:mb,onEscapeKeyDown:()=>Xa.transition("select"),collisionBoundary:g.current,asChild:!0,tabIndex:-1,children:(0,nb.jsxs)("div",{children:[1<(null==(p=Xa.selectedShapes)?void 0:p.size)&&!Xa.readOnly&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsxs)(Pm,{children:[(0,nb.jsxs)("div",{className:"tl-menu-button-row pb-0",
children:[(0,nb.jsx)(ka,{tooltip:"Align left",onClick:()=>Gb(()=>Xa.align("left")),children:(0,nb.jsx)(Fh,{name:"layout-align-left"})}),(0,nb.jsx)(ka,{tooltip:"Align center horizontally",onClick:()=>Gb(()=>Xa.align("centerHorizontal")),children:(0,nb.jsx)(Fh,{name:"layout-align-center"})}),(0,nb.jsx)(ka,{tooltip:"Align right",onClick:()=>Gb(()=>Xa.align("right")),children:(0,nb.jsx)(Fh,{name:"layout-align-right"})}),(0,nb.jsx)(jr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,nb.jsx)(ka,
{tooltip:"Distribute horizontally",onClick:()=>Gb(()=>Xa.distribute("horizontal")),children:(0,nb.jsx)(Fh,{name:"layout-distribute-vertical"})})]}),(0,nb.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,nb.jsx)(ka,{tooltip:"Align top",onClick:()=>Gb(()=>Xa.align("top")),children:(0,nb.jsx)(Fh,{name:"layout-align-top"})}),(0,nb.jsx)(ka,{tooltip:"Align center vertically",onClick:()=>Gb(()=>Xa.align("centerVertical")),children:(0,nb.jsx)(Fh,{name:"layout-align-middle"})}),(0,nb.jsx)(ka,
{tooltip:"Align bottom",onClick:()=>Gb(()=>Xa.align("bottom")),children:(0,nb.jsx)(Fh,{name:"layout-align-bottom"})}),(0,nb.jsx)(jr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,nb.jsx)(ka,{tooltip:"Distribute vertically",onClick:()=>Gb(()=>Xa.distribute("vertical")),children:(0,nb.jsx)(Fh,{name:"layout-distribute-horizontal"})})]})]}),(0,nb.jsx)(oq,{className:"menu-separator"}),(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.packIntoRectangle),children:[(0,nb.jsx)(Fh,{className:"tl-menu-icon",
name:"layout-grid"}),"Pack into rectangle"]}),(0,nb.jsx)(oq,{className:"menu-separator"})]}),0<(null==(G=Xa.selectedShapes)?void 0:G.size)&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.api.zoomToSelection),children:["Zoom to fit",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"⇧"})," ",(0,nb.jsx)("code",{children:"1"})]})})]}),
(0,nb.jsx)(oq,{className:"menu-separator"})]}),(Xa.selectedShapesArray.some(Mb=>"group"===Mb.type||Xa.getParentGroup(Mb))||1<Xa.selectedShapesArray.length)&&!Xa.readOnly&&(0,nb.jsxs)(nb.Fragment,{children:[Xa.selectedShapesArray.some(Mb=>"group"===Mb.type||Xa.getParentGroup(Mb))&&(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.api.unGroup),children:[(0,nb.jsx)(Fh,{className:"tl-menu-icon",name:"ungroup"}),"Ungroup",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",
{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"⇧"})," ",(0,nb.jsx)("code",{children:"G"})]})})]}),1<Xa.selectedShapesArray.length&&(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.api.doGroup),children:[(0,nb.jsx)(Fh,{className:"tl-menu-icon",name:"group"}),"Group",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",
{children:"G"})]})})]}),(0,nb.jsx)(oq,{className:"menu-separator"})]}),0<(null==(U=Xa.selectedShapes)?void 0:U.size)&&(0,nb.jsxs)(nb.Fragment,{children:[!Xa.readOnly&&(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.cut),children:[(0,nb.jsx)(Fh,{className:"tl-menu-icon",name:"cut"}),"Cut",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"X"})]})})]}),(0,nb.jsxs)(Pm,
{className:"tl-menu-item",onClick:()=>Gb(Xa.copy),children:[(0,nb.jsx)(Fh,{className:"tl-menu-icon",name:"copy"}),"Copy",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"C"})]})})]})]}),!Xa.readOnly&&(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.paste),children:[(0,nb.jsx)(Fh,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,nb.jsx)("div",{className:"tl-menu-right-slot",
children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"V"})]})})]}),1===(null==(la=Xa.selectedShapes)?void 0:la.size)&&!Xa.readOnly&&(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(()=>Xa.paste(void 0,!0)),children:["Paste as link",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"⇧"}),
" ",(0,nb.jsx)("code",{children:"V"})]})})]}),(0,nb.jsx)(oq,{className:"menu-separator"}),(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(()=>{var Mb,dc;return fb.exportToImage(Xa.currentPageId,{x:Xa.selectionBounds.minX+Xa.viewport.camera.point[0]-8,y:Xa.selectionBounds.minY+Xa.viewport.camera.point[1]-8,width:(null==(Mb=Xa.selectionBounds)?void 0:Mb.width)+16,height:(null==(dc=Xa.selectionBounds)?void 0:dc.height)+16,zoom:Xa.viewport.camera.zoom})}),children:[(0,nb.jsx)(Fh,{className:"tl-menu-icon",
name:"file-export"}),"Export",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsx)("span",{className:"keyboard-shortcut"})})]}),(0,nb.jsx)(oq,{className:"menu-separator"}),(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.api.selectAll),children:["Select all",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:Ro})," ",(0,nb.jsx)("code",{children:"A"})]})})]}),1<(null==(pa=Xa.selectedShapes)?
void 0:pa.size)&&(0,nb.jsx)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.api.deselectAll),children:"Deselect all"}),0<(null==(Ga=Xa.selectedShapes)?void 0:Ga.size)&&!Xa.readOnly&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.api.deleteShapes),children:[(0,nb.jsx)(Fh,{className:"tl-menu-icon",name:"backspace"}),"Delete",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsx)("span",{className:"keyboard-shortcut",children:(0,nb.jsx)("code",
{children:"Del"})})})]}),1<(null==(Qa=Xa.selectedShapes)?void 0:Qa.size)&&!Xa.readOnly&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)(oq,{className:"menu-separator"}),(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.flipHorizontal),children:[(0,nb.jsx)(Fh,{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.flipVertical),children:[(0,nb.jsx)(Fh,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),
!Xa.readOnly&&(0,nb.jsxs)(nb.Fragment,{children:[(0,nb.jsx)(oq,{className:"menu-separator"}),(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.bringToFront),children:["Move to front",(0,nb.jsx)("div",{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:"⇧"})," ",(0,nb.jsx)("code",{children:"]"})]})})]}),(0,nb.jsxs)(Pm,{className:"tl-menu-item",onClick:()=>Gb(Xa.sendToBack),children:["Move to back",(0,nb.jsx)("div",
{className:"tl-menu-right-slot",children:(0,nb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,nb.jsx)("code",{children:"⇧"})," ",(0,nb.jsx)("code",{children:"["})]})})]})]}),Wb&&(0,nb.jsx)(Pm,{className:"tl-menu-item",onClick:()=>{1===Xa.selectedShapesArray.length?console.log(Fc(Xa.selectedShapesArray[0].serialized)):console.log(Xa.selectedShapesArray.map(Mb=>Fc(Mb.serialized)))},children:"(Dev) Print shape props"})]})]})})]})}),dC=nf(X(22));nb=X(588);var jK=df(({shape:b})=>{const g=af(),
{handlers:p}=dC.default.useContext(an),G=dC.default.useMemo(()=>{var U;const la=[...(null!=(U=b.props.refs)?U:[])].map(pa=>[pa,!0]);"logseq-portal"===b.props.type&&b.props.pageId&&la.unshift([b.props.pageId,!1]);return la.filter(pa=>pa[0].toLowerCase()!==g.currentPage.name&&p.getBlockPageName(pa[0])!==g.currentPage.name)},[b.props.type,b.props.parentId,b.props.refs]);return 0===G.length?null:(0,nb.jsx)("div",{className:"tl-quick-links",title:"Shape Quick Links",children:G.map(([U,la])=>(0,nb.jsx)("div",
{className:"tl-quick-links-row",children:(0,nb.jsx)(hB,{id:U,showReferenceContent:la})},U))})}),kK=nf(X(22)),eC=nf(X(22)),lK=[".png",".svg",".jpg",".jpeg",".gif"],mK=[".mp4",".webm",".ogg"],nK=(b,g,p)=>$h(void 0,[b,g,p],function*(G,{point:U,shiftKey:la,dataTransfer:pa,fromDrop:Ga},Qa){function Xa(ed,ld){return $h(this,null,function*(){const $d=Object.values(G.assets).find(Pe=>Pe.src===ed);return $d?$d:{id:Hk(),type:ld?"video":"image",src:ed,size:yield Hj(Qa.makeAssetUrl(ed),ld)}})}function fb(ed){return $h(this,
null,function*(){const ld=ed.filter($d=>"unknown"!==bc($d.name)).map($d=>$h(this,null,function*(){try{const Pe=yield Qa.saveAsset($d);return yield Xa(Pe,"video"===bc($d.name))}catch(Pe){console.error(Pe)}return null}));return(yield Promise.all(ld)).filter(ti)})}function mb(ed){return[rf(oe({},mq.defaultProps),{html:ed,point:[U[0],U[1]]})]}function Gb(ed){return $h(this,null,function*(){return wc(Mb,Ub,hc,nc,dc,Wd)(ed)})}function Wb(){return $h(this,null,function*(){const ed=yield navigator.clipboard.read(),
ld=wc(nc,dc,Wd);return(yield Promise.all(ed.map($d=>ld($d)))).flat().filter(ti)})}function Mb(ed){return $h(this,null,function*(){var ld=Array.from(ed.files);return 0<ld.length?(Ye=ld=yield fb(ld),ld.map(($d,Pe)=>{const kf=rf(oe({},"video"===$d.type?Ru.defaultProps:Qu.defaultProps),{id:Hk(),assetId:$d.id,opacity:1});$d.size&&Object.assign(kf,{point:[U[0]-$d.size[0]/4+16*Pe,U[1]-$d.size[1]/4+16*Pe],size:je.div($d.size,2)});return kf})):null})}function dc(ed){return $h(this,null,function*(){if(ed.types.includes("text/plain")&&
(la||Ga))return null;const ld=yield Wc(ed,"text/html");return ld?wc(Bc,mb)(ld):null})}function hc(ed){return $h(this,null,function*(){var ld,$d,Pe,kf,Sf,wf,Gf=ed.getData("block-uuid");if(Gf){Gf=Gf.trim();const jh=null==(Pe=null==($d=null==(ld=window.logseq)?void 0:ld.api)?void 0:$d.get_selected_blocks)?void 0:Pe.call($d);ld=jh&&1<(null==jh?void 0:jh.length)?jh.map(Ef=>Ef.uuid):[Gf];null==(wf=null==(Sf=null==(kf=window.logseq)?void 0:kf.api)?void 0:Sf.set_blocks_id)?void 0:wf.call(Sf,ld);kf=ld.map(Ef=>
Jd(`((${Ef}))`));return(yield Promise.all(kf)).flat().filter(ti).map((Ef,lh)=>rf(oe({},Ef),{point:[U[0]+(Kl.defaultProps.size[0]+16)*lh,U[1]]}))}return null})}function Ub(ed){return $h(this,null,function*(){var ld=ed.getData("page-name");return ld?(ld=ld.trim(),Jd(`[[${ld}]]`)):null})}function nc(ed){return $h(this,null,function*(){var ld=yield Wc(ed,"text/plain");return ld?(ld=ld.trim(),wc(Ec,Sc)(ld)):null})}function Bc(ed){if(ed=G.api.getClonedShapesFromTldrString(decodeURIComponent(ed),U)){const {shapes:ld,
assets:$d,bindings:Pe}=ed;jf.push(...$d);Oe.push(...Pe);return ld}return null}function Ec(ed){return $h(this,null,function*(){try{const $d=new URL(ed);var ld=$d.host&&["http:","https:"].includes($d.protocol)}catch($d){ld=!1}return ld&&!la?EB.test(ed)?[rf(oe({},rr.defaultProps),{url:ed,point:[U[0],U[1]]})]:GB.test(ed)?[rf(oe({},ss.defaultProps),{url:ed,point:[U[0],U[1]]})]:[rf(oe({},pr.defaultProps),{url:ed,point:[U[0],U[1]]})]:null})}function Sc(ed){return ed.startsWith("\x3ciframe")?[rf(oe({},mq.defaultProps),
{html:ed,point:[U[0],U[1]]})]:null}function Jd(ed){return $h(this,null,function*(){if(/^\(\(.*\)\)$/.test(ed)&&40===ed.length){var ld=ed.slice(2,-2);if(ek(ld))return[rf(oe({},Kl.defaultProps),{point:[U[0],U[1]],size:[400,0],pageId:ld,fill:G.settings.color,stroke:G.settings.color,scaleLevel:G.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(ed))return ld=ed.slice(2,-2),[rf(oe({},Kl.defaultProps),{point:[U[0],U[1]],size:[400,0],pageId:ld,fill:G.settings.color,stroke:G.settings.color,
scaleLevel:G.settings.scaleLevel,blockType:"P"})];return null})}function Wd(ed){return $h(this,null,function*(){var ld=yield Wc(ed,"text/plain");return ld&&(ld=ld.trim(),ld=null==Qa?void 0:Qa.addNewBlock(ld))?[rf(oe({},Kl.defaultProps),{size:[400,0],point:[U[0],U[1]],pageId:ld,fill:G.settings.color,stroke:G.settings.color,scaleLevel:G.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var ye,Fe;let Ye=[],jf=[];const Oe=[];G.cursors.setCursor("progress");let Be=[];try{pa?Be.push(...(null!=(ye=
yield Gb(pa))?ye:[])):Be.push(...(null!=(Fe=yield Wb())?Fe:[]))}catch(ed){console.error(ed)}const zd=Be.map(ed=>rf(oe({},ed),{parentId:G.currentPageId,id:ek(ed.id)?ed.id:Hk()})),ad=null==pa?void 0:pa.types.every(ed=>"Files"===ed);G.wrapUpdate(()=>{var ed=[...Ye,...jf];0<ed.length&&G.createAssets(ed);0<zd.length&&G.createShapes(zd);G.currentPage.updateBindings(Object.fromEntries(Oe.map(ld=>[ld.id,ld])));if(1===G.selectedShapesArray.length&&1===zd.length&&Ga){ed=G.selectedShapesArray[0];const ld=G.getShapeById(zd[0].id);
G.createNewLineBinding(ed,ld)}G.setSelectedShapes(zd.map(ld=>ld.id));G.selectedTool.transition("idle");G.cursors.setCursor("default");(Ga||ad)&&G.packIntoRectangle()})}),fC=nf(X(22)),oK=nf(X(22));nb=X(588);var pK=[Uw,Vw,JB,Ww,Xw,Yw,Zw,$w,KB,OB,NB,vt],qK=b=>{const {renderers:g}=cs.useContext(an);return(0,nb.jsx)(g.BacklinksCount,rf(oe({},b),{options:{"portal?":!1}}))},rK=()=>{const b=cs.useRef(null),g=af(),p=cs.useMemo(()=>({ContextBar:cK,BacklinksCount:qK,QuickLinks:jK}),[]);return(0,nb.jsx)(iK,{collisionRef:b,
children:(0,nb.jsx)("div",{ref:b,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":g.uuid,children:(0,nb.jsx)(dF,{components:p,children:(0,nb.jsx)(bI,{})})})})},sK=b=>{var {onPersist:g,readOnly:p,model:G}=b;b=Bf(b,["onPersist","readOnly","model"]);const U=Ad(),la=pd(),pa=Vd(),Ga=p?null:Ae(),Qa=cs.useCallback((Xa,fb)=>{null==g?void 0:g(Xa,fb)},[G]);return(0,nb.jsx)(bF,rf(oe({Shapes:IB,Tools:pK,onDrop:U,onPaste:la,onCopy:pa,readOnly:p,onCanvasDBClick:Ga,onPersist:Qa,model:G},b),{children:(0,nb.jsx)(rK,
{})}))},tK=function(b){var {renderers:g,handlers:p}=b;b=Bf(b,["renderers","handlers"]);const G={renderers:cs.useMemo(()=>Object.fromEntries(Object.entries(g).map(([U,la])=>[U,cs.memo(la)])),[]),handlers:p};return(0,nb.jsx)(an.Provider,{value:G,children:(0,nb.jsx)(sK,oe({},b))})}};
'use strict';var Xid=function(a){return a},Yid=function(a,b){return $APP.yh.j(function(c){var d=$APP.of(c);c=$APP.G.j(d,$APP.sD);d=$APP.G.j(d,$APP.HG);return new $APP.m(null,2,[$APP.zl,$APP.u.C(c),$APP.BFb,$APP.Ny.j(d,new $APP.O(null,2,5,$APP.Q,[$APP.WE,$APP.BFb],null))],null)},$APP.Tf.j(function(c){return $APP.WE.C($APP.HG.C(c))},$APP.DH(a,b,new $APP.m(null,1,[$APP.zt,new $APP.O(null,2,5,$APP.Q,[$APP.sD,$APP.HG],null)],null))))},Zid=function(a){return $APP.Gq.G(a,$APP.F([$APP.Hq,!0]))},$id=function(a,
b,c,d){var e=$APP.JH(a);b=new $APP.m(null,2,[$APP.XE,$APP.Mib,$APP.ZE,new $APP.m(null,6,[$APP.zl,$APP.wa(b,"id"),$APP.W,$APP.wa(b,"name"),$APP.HI,Zid($APP.wa(b,"bindings")),$APP.BFb,$APP.wa(b,"nonce"),$APP.CFb,Zid(c),$APP.yFb,d],null)],null);c=$APP.hx();e=$APP.hI.C(e);e=$APP.n(e)?e:$APP.hx();return new $APP.m(null,5,[$APP.zr,a,$APP.jH,"whiteboard",$APP.HG,b,$APP.iI,c,$APP.hI,e],null)},ajd=function(a,b,c,d,e,f){a=Zid(a.getCleanUpAssets());var g=$APP.yh.j(function(z){return $APP.wa(z,"id")},b.shapes),
h=$APP.dh($APP.yh.j(function(z){z=$APP.of(z);z=$APP.G.j(z,$APP.zl);return $APP.S.F(Zid(b.getShapeById(z).serialized),$APP.cy,g.indexOf(z))},$APP.MA.j(c,d)));d=$APP.dh($APP.yh.j($APP.zl,d));var l=$APP.dh($APP.yh.j($APP.zl,c)),p=$APP.dh($APP.Om.j($APP.Uj,$APP.MA.j(l,d)));c=$APP.dh($APP.Tf.j(function(z){z=$APP.zl.C(z);return p.C?p.C(z):p.call(null,z)},h));var q=$APP.Om.j($APP.Uj,$APP.MA.j(d,l)),r=$APP.mC();d=$APP.x(q)?$APP.yh.j(function(z){return $APP.Ny.j(z,new $APP.O(null,2,5,$APP.Q,[$APP.HG,$APP.WE],
null))},function(){var z=new $APP.O(null,1,5,$APP.Q,[$APP.xz],null),E=$APP.tj.j(function(H){return new $APP.O(null,2,5,$APP.Q,[$APP.sD,$APP.ci(H)],null)},q);return $APP.KF?$APP.KF(r,z,E):$APP.LF.call(null,r,z,E)}()):null;l=$APP.tj.j(function(z){return new $APP.O(null,2,5,$APP.Q,[$APP.hLa,new $APP.O(null,2,5,$APP.Q,[$APP.sD,$APP.ci(z)],null)],null)},q);var t=$APP.MA.j(h,c),y=$APP.x(t)?function(){var z=new $APP.O(null,1,5,$APP.Q,[$APP.xz],null),E=$APP.tj.j(function(H){return new $APP.O(null,2,5,$APP.Q,
[$APP.sD,$APP.ci($APP.zl.C(H))],null)},t);return $APP.KF?$APP.KF(r,z,E):$APP.LF.call(null,r,z,E)}():null;return new $APP.m(null,4,[$APP.Oqc,$id(e,b,a,g),$APP.BFc,$APP.yh.j(function(z){return $APP.Zd(p,$APP.u.C($APP.sD.C(z)))?$APP.S.F(z,$APP.iI,$APP.hx()):$APP.ltb(z)},$APP.yh.j(function(z){z=new $APP.m(null,2,[$APP.XE,$APP.NN,$APP.WE,z],null);z=new $APP.m(null,3,[$APP.FF,new $APP.m(null,1,[$APP.zr,$APP.yr.C?$APP.yr.C(e):$APP.yr.call(null,e)],null),$APP.UF,new $APP.m(null,1,[$APP.zr,e],null),$APP.HG,
z],null);var E=$APP.Sib(z,e);return $APP.Wl.G($APP.F([z,E]))},h)),$APP.jG,l,$APP.hWb,new $APP.m(null,3,[$APP.Zsb,$APP.Hb(f),$APP.Bsb,f,$APP.ow,new $APP.m(null,5,[$APP.PN,e,$APP.SFb,d,$APP.TFb,c,$APP.UFb,t,$APP.VFb,y],null)],null)],null)},bjd=function(a,b,c){var d=$APP.bd($APP.A(b.pages)),e=d.shapes,f=$APP.yh.j(function(p){return $APP.wa(p,"id")},e);e=$APP.dh($APP.yh.j(function(p){var q=p.id;return new $APP.m(null,2,[$APP.zl,q,$APP.BFb,$APP.B.j(p.id,f.indexOf(q))?p.nonce:(new Date).getTime()],null)},
e));var g=$APP.mC(),h=function(){var p=$APP.Ny.j($APP.v($APP.l5c),new $APP.O(null,2,5,$APP.Q,[g,a],null));return $APP.n(p)?p:$APP.dh($APP.yh.j(function(q){return $APP.Jr.F(q,$APP.zl,$APP.u)},Yid(g,a)))}();b=ajd(b,d,e,h,a,c);h=$APP.of(b);d=$APP.G.j(h,$APP.Oqc);b=$APP.G.j(h,$APP.BFc);c=$APP.G.j(h,$APP.jG);h=$APP.G.j(h,$APP.hWb);d=$APP.Zk.G(c,new $APP.O(null,1,5,$APP.Q,[d],null),$APP.F([b]));var l=$APP.Ny.j(h,new $APP.O(null,2,5,$APP.Q,[$APP.ow,$APP.TFb],null));l=$APP.n($APP.Bf(function(p){return $APP.B.j("group",
$APP.Qm.C(p))},l))?$APP.S.F(h,$APP.WFb,$APP.ew):$APP.n($APP.Bf(function(p){return $APP.B.j("group",$APP.Qm.C(p))},$APP.Ny.j(h,new $APP.O(null,2,5,$APP.Q,[$APP.ow,$APP.SFb],null))))?$APP.S.F(h,$APP.WFb,$APP.Trc):$APP.n($APP.Bf(function(p){return $APP.B.j("line",$APP.Qm.C(p))&&$APP.B.j("arrow ",$APP.Xo.C($APP.Mpc.C(p)))},l))?$APP.S.F(h,$APP.WFb,$APP.WBc):h;b=$APP.x($APP.Zk.j(b,c))?l:$APP.S.F(h,$APP.bYa,!0);$APP.Oh.R($APP.l5c,$APP.Ev,new $APP.O(null,2,5,$APP.Q,[g,a],null),e);if($APP.Zd(new $APP.$g(null,
new $APP.m(null,1,[$APP.WBc,null],null),null),$APP.WFb.C(b)))return $APP.pC($APP.PRc,new $APP.m(null,2,[$APP.Uy,d,$APP.hWb,b],null));e=$APP.PRc.C($APP.v($APP.nC));$APP.Zk.j($APP.Uy.C(e),d);$APP.Wl.G($APP.F([b,$APP.hWb.C(e)]));$APP.pC($APP.PRc,$APP.nf);return null},cjd=function(a){a=$APP.CH(a);return $APP.Om.j($APP.Kib,a)},djd=function(a){var b=$APP.Vy.C($APP.JH(a));a=cjd(a);a=$APP.Tf.j(function(d){return $APP.B.j(b,$APP.Vy.C($APP.UF.C(d)))},a);var c=$APP.dh($APP.Om.j($APP.Eb,$APP.yh.j(function(d){return $APP.Ny.F(d,
new $APP.O(null,2,5,$APP.Q,[$APP.VF,$APP.Vy],null),null)},a)));a=$APP.Om.j(function(d){d=$APP.Vy.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},ejd=function(){return $APP.mm(null,function(){return $APP.mm(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.mm(a.text(),function(b){return $APP.mm($APP.Gr($APP.nf,b),function(c){return $APP.gm(c)})})})})},fjd=function(a){var b=$APP.H0a();return($APP.pd(b)||$APP.B.j(1,$APP.Xc(b))&&$APP.B.j(a,$APP.zr.C($APP.A(b))))&&
$APP.Hb($APP.Ny.j($APP.v($APP.nC),new $APP.O(null,1,5,$APP.Q,[$APP.Hcc],null)))},gjd=function(a){return null!=a?$APP.pm($APP.mm(null,function(){return $APP.mm(ejd(),function(b){var c=$APP.of(b);b=$APP.G.j(c,$APP.fI);c=$APP.G.j(c,$APP.ex);var d=$APP.A(b);b=$APP.zFb(d,c);d=$APP.Jib(d);c=$APP.CFb.C(d);d=$APP.HI.C(d);a.cloneShapesIntoCurrentPage($APP.Ni(new $APP.m(null,3,[$APP.KFb,b,$APP.CFb,c,$APP.HI,d],null)));$APP.pC($APP.Hcc,!0);b=$APP.VB($APP.ihc,!0);return $APP.gm(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",
b)}):null},jjd=function(a,b){b=$APP.Gq.G(b,$APP.F([new $APP.m(null,1,[$APP.Hq,!0],null)]));b=$APP.of(b);var c=$APP.G.j(b,hjd),d=$APP.G.j(b,$APP.wK),e=$APP.G.j(b,ijd),f=$APP.mC();return $APP.mm(null,function(){return $APP.mm($APP.n(d)?$APP.ldb(f,a,new $APP.m(null,1,[$APP.Ex,100],null)):null,function(g){return $APP.mm($APP.n(c)?$APP.qdb(a,10):null,function(h){return $APP.mm($APP.n(e)?$APP.rdb(a,100):null,function(l){return $APP.gm($APP.Ni(new $APP.m(null,3,[$APP.fI,h,$APP.ex,g,$APP.gL,l],null)))})})})})},
kjd=function(a){return $APP.lm($APP.Ozb($APP.mC(),new $APP.O(null,1,5,$APP.Q,[$APP.Gq.C(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.D.F(c,0,null),$APP.D.F(c,1,null),c=$APP.D.F(c,2,null),$APP.Qzb($APP.n(c)?c:b)):null})},ljd=function(){return $APP.yCb(null)},mjd=function(){return $APP.BCb(null)},Bjd=function(a){return $APP.Ng([njd,ojd,pjd,qjd,rjd,sjd,$APP.SD,tjd,ujd,vjd,wjd,xjd,yjd,zjd,Ajd],[function(b){return $APP.zr.C($APP.YZa($APP.mC(),$APP.Gi(b)))},function(b){return $APP.KH(b,
!1)},function(b){return $APP.DFb(b)},$APP.Ax,function(b){return $APP.Pyb(b,new $APP.m(null,1,[$APP.nT,!1],null))},$APP.dI,jjd,kjd,Xid,function(b,c){return $APP.bx(b,$APP.F([$APP.dx,c]))},function(b){var c=$APP.u,d=c.C,e=$APP.sB(),f=$APP.JH(a),g=djd(a);b=new $APP.m(null,6,[$APP.VF,$APP.Zg($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.Q,[$APP.Vy],null)),$APP.sD,e,$APP.pD,$APP.n(b)?b:"",$APP.nG,$APP.Ar,$APP.FF,new $APP.m(null,2,[$APP.zr,$APP.yr.C?$APP.yr.C(a):$APP.yr.call(null,a),$APP.lx,a],null),$APP.UF,new $APP.m(null,
1,[$APP.zr,a],null)],null);$APP.MF(new $APP.O(null,1,5,$APP.Q,[b],null));return d.call(c,e)},function(b,c){return $APP.MD(function(){return(0,$APP.kRb)(b,$APP.Wl.G($APP.F([$APP.Gq.G(c,$APP.F([$APP.Hq,!0])),new $APP.m(null,1,[$APP.oT,!0],null)])))})},function(b,c){return $APP.nD($APP.mC(),$APP.Vy.C($APP.JH(b)),$APP.zh.C(c))},function(b){var c=$APP.Hw(b)?$APP.zr.C($APP.YZa($APP.mC(),$APP.Gi(b))):null;c=$APP.n(c)?c:b;var d=$APP.EH(c),e=$APP.dI(c);return $APP.n(d)?$APP.n(e)?$APP.oN(c,new $APP.m(null,
1,[$APP.nN,b],null)):$APP.lN($APP.KH(b,!1)):null},function(b){return $APP.Ni($APP.ZG($APP.Gi(b)))}])},Ajd=new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),xjd=new $APP.N(null,"exportToImage","exportToImage",-154356643),wjd=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),ijd=new $APP.N(null,"files?","files?",-1267491104),njd=new $APP.N(null,"getBlockPageName","getBlockPageName",-1656908032),Cjd=new $APP.N(null,"renderers","renderers",-1460292282),Djd=new $APP.N(null,"model",
"model",331153215),ojd=new $APP.N(null,"getRedirectPageName","getRedirectPageName",-1858136925),qjd=new $APP.N(null,"isMobile","isMobile",-2043133877),Ejd=new $APP.N(null,"onMount","onMount",-876858467),rjd=new $APP.N(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),ujd=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),Fjd=new $APP.N(null,"onPersist","onPersist",-1848738852),Gjd=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),vjd=new $APP.N(null,"copyToClipboard","copyToClipboard",
1092115063),zjd=new $APP.N(null,"redirectToPage","redirectToPage",87147838),pjd=new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",554297706),tjd=new $APP.N(null,"saveAsset","saveAsset",-668047853),Hjd=new $APP.N(null,"BacklinksCount","BacklinksCount",364670631),Ijd=new $APP.N(null,"Block","Block",-1959785792),yjd=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),Jjd=new $APP.N(null,"Page","Page",-1267059506),hjd=new $APP.N(null,"pages?","pages?",-2065014049),Kjd=new $APP.N(null,
"PageName","PageName",-164991013),Ljd=new $APP.N(null,"Tweet","Tweet",-452258680),sjd=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579),Mjd=new $APP.N(null,"BlockReference","BlockReference",-120254741);$APP.bda("tldraw");var Njd=$APP.wm(592);var Ojd,Pjd;$APP.W$c={};Ojd=$APP.KT($APP.wa(Njd,"App"));$APP.Z$c=$APP.wa(Njd,"generateJSXFromModel");
Pjd=new $APP.m(null,7,[Jjd,$APP.as($APP.es,function(a){return(0,$APP.f$c)(new $APP.m(null,2,[$APP.PN,$APP.KH($APP.wa(a,"pageName"),!1),$APP.oT,!0],null))},null,"frontend.extensions.tldraw/page-cp"),Ijd,$APP.as($APP.es,function(a){a=$APP.ci($APP.wa(a,"blockId"));var b=$APP.ITa($APP.u7b);a=b.C?b.C(a):b.call(null,a);return $APP.Or(a)},null,"frontend.extensions.tldraw/block-cp"),Gjd,$APP.as($APP.es,function(a){return $APP.Or($APP.zW(new $APP.m(null,1,[$APP.d_,!0],null),$APP.mC(),$APP.ci($APP.wa(a,"blockId")),
new $APP.m(null,2,[$APP.gYb,$APP.wa(a,"endSeparator"),$APP.hYb,$APP.wa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),Ljd,$APP.as($APP.es,function(a){return(0,$APP.UWb)($APP.wa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),Kjd,$APP.as($APP.es,function(a){return(0,$APP.nW)(new $APP.m(null,1,[$APP.d_,!0],null),new $APP.m(null,1,[$APP.zr,$APP.wa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),Hjd,function(a){return $APP.Df.j($APP.bad,$APP.yh.j(function(b){return $APP.Gq.G($APP.wa(a,
b),$APP.F([new $APP.m(null,1,[$APP.Hq,!0],null)]))},new $APP.O(null,3,5,$APP.Q,["id","className","options"],null)))},Mjd,$APP.as($APP.es,function(a){return(0,$APP.dWb)($APP.nf,$APP.wa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference")],null);
$APP.X$c=$APP.as($APP.es,function(a,b){function c(l){if($APP.n(l)){l.appUndo=ljd;l.appRedo=mjd;var p=$APP.wa(l,"api");return $APP.n(p)?$APP.lm(d?gjd(p):null,function(){$APP.CUa(l,b);return h.C?h.C(l):h.call(null,l)}):null}return null}var d=fjd(a),e=$APP.LFb(a),f=$APP.os(null),g=$APP.D.F(f,0,null),h=$APP.D.F(f,1,null);$APP.ps(function(){$APP.n($APP.n(g)?b:g)&&$APP.CUa(g,b);return function(){return $APP.Ec}},new $APP.O(null,2,5,$APP.Q,[b,g],null));return $APP.n(e)?$APP.X("div",{style:{overscrollBehavior:"none"},
onBlur:function(l){l=$APP.wa(l,"target").tagName;var p=new $APP.$g(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.rD():null},onWheel:$APP.Uw,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.Hb(g)?$APP.X("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.Or($APP.UT("Loading onboarding whiteboard ..."))]):null,$APP.Or(function(){var l=new $APP.m(null,6,[Cjd,Pjd,$APP.MB,
Bjd(a),Ejd,c,$APP.VGc,!0,Fjd,function(p,q){$APP.pC(new $APP.O(null,2,5,$APP.Q,[$APP.XIc,$APP.mC()],null),$APP.hx());return $APP.n(!1)?(console.time("tldraw persist"),p=bjd(a,p,q.replace),console.timeEnd("tldraw persist"),p):bjd(a,p,q.replace)},Djd,e],null);return Ojd.C?Ojd.C(l):Ojd.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Za.Xi();
}).call(this);